var db=Object.defineProperty;var fb=(t,e,n)=>e in t?db(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>fb(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function pb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gw={exports:{}},_h={},Qw={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var El=Symbol.for("react.element"),gb=Symbol.for("react.portal"),mb=Symbol.for("react.fragment"),yb=Symbol.for("react.strict_mode"),_b=Symbol.for("react.profiler"),vb=Symbol.for("react.provider"),wb=Symbol.for("react.context"),Eb=Symbol.for("react.forward_ref"),Sb=Symbol.for("react.suspense"),Tb=Symbol.for("react.memo"),Ib=Symbol.for("react.lazy"),Yy=Symbol.iterator;function xb(t){return t===null||typeof t!="object"?null:(t=Yy&&t[Yy]||t["@@iterator"],typeof t=="function"?t:null)}var Yw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xw=Object.assign,Jw={};function wo(t,e,n){this.props=t,this.context=e,this.refs=Jw,this.updater=n||Yw}wo.prototype.isReactComponent={};wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zw(){}Zw.prototype=wo.prototype;function Jp(t,e,n){this.props=t,this.context=e,this.refs=Jw,this.updater=n||Yw}var Zp=Jp.prototype=new Zw;Zp.constructor=Jp;Xw(Zp,wo.prototype);Zp.isPureReactComponent=!0;var Xy=Array.isArray,eE=Object.prototype.hasOwnProperty,eg={current:null},tE={key:!0,ref:!0,__self:!0,__source:!0};function nE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)eE.call(e,r)&&!tE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:El,type:t,key:s,ref:o,props:i,_owner:eg.current}}function bb(t,e){return{$$typeof:El,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tg(t){return typeof t=="object"&&t!==null&&t.$$typeof===El}function Pb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Jy=/\/+/g;function Td(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Pb(""+t.key):e.toString(36)}function $c(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case El:case gb:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Td(o,0):r,Xy(i)?(n="",t!=null&&(n=t.replace(Jy,"$&/")+"/"),$c(i,e,n,"",function(c){return c})):i!=null&&(tg(i)&&(i=bb(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Jy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Xy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Td(s,a);o+=$c(s,e,n,l,i)}else if(l=xb(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Td(s,a++),o+=$c(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nc(t,e,n){if(t==null)return t;var r=[],i=0;return $c(t,r,"","",function(s){return e.call(n,s,i++)}),r}function kb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ct={current:null},Hc={transition:null},Cb={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:Hc,ReactCurrentOwner:eg};function rE(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:nc,forEach:function(t,e,n){nc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nc(t,function(){e++}),e},toArray:function(t){return nc(t,function(e){return e})||[]},only:function(t){if(!tg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=wo;le.Fragment=mb;le.Profiler=_b;le.PureComponent=Jp;le.StrictMode=yb;le.Suspense=Sb;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cb;le.act=rE;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=eg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)eE.call(e,l)&&!tE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:El,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:wb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vb,_context:t},t.Consumer=t};le.createElement=nE;le.createFactory=function(t){var e=nE.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:Eb,render:t}};le.isValidElement=tg;le.lazy=function(t){return{$$typeof:Ib,_payload:{_status:-1,_result:t},_init:kb}};le.memo=function(t,e){return{$$typeof:Tb,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Hc.transition;Hc.transition={};try{t()}finally{Hc.transition=e}};le.unstable_act=rE;le.useCallback=function(t,e){return Ct.current.useCallback(t,e)};le.useContext=function(t){return Ct.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Ct.current.useDeferredValue(t)};le.useEffect=function(t,e){return Ct.current.useEffect(t,e)};le.useId=function(){return Ct.current.useId()};le.useImperativeHandle=function(t,e,n){return Ct.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Ct.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Ct.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Ct.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Ct.current.useReducer(t,e,n)};le.useRef=function(t){return Ct.current.useRef(t)};le.useState=function(t){return Ct.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Ct.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Ct.current.useTransition()};le.version="18.3.1";Qw.exports=le;var j=Qw.exports;const iE=pb(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab=j,Rb=Symbol.for("react.element"),Mb=Symbol.for("react.fragment"),Db=Object.prototype.hasOwnProperty,Nb=Ab.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lb={key:!0,ref:!0,__self:!0,__source:!0};function sE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Db.call(e,r)&&!Lb.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Rb,type:t,key:s,ref:o,props:i,_owner:Nb.current}}_h.Fragment=Mb;_h.jsx=sE;_h.jsxs=sE;Gw.exports=_h;var k=Gw.exports,oE={exports:{}},Qt={},aE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var G=U.length;U.push($);e:for(;0<G;){var oe=G-1>>>1,Q=U[oe];if(0<i(Q,$))U[oe]=$,U[G]=Q,G=oe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],G=U.pop();if(G!==$){U[0]=G;e:for(var oe=0,Q=U.length,te=Q>>>1;oe<te;){var ce=2*(oe+1)-1,se=U[ce],me=ce+1,tt=U[me];if(0>i(se,G))me<Q&&0>i(tt,se)?(U[oe]=tt,U[me]=G,oe=me):(U[oe]=se,U[ce]=G,oe=ce);else if(me<Q&&0>i(tt,G))U[oe]=tt,U[me]=G,oe=me;else break e}}return $}function i(U,$){var G=U.sortIndex-$.sortIndex;return G!==0?G:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,g=!1,y=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=U)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function M(U){if(v=!1,b(U),!y)if(n(l)!==null)y=!0,Z(D);else{var $=n(c);$!==null&&ae(M,$.startTime-U)}}function D(U,$){y=!1,v&&(v=!1,w(_),_=-1),g=!0;var G=f;try{for(b($),d=n(l);d!==null&&(!(d.expirationTime>$)||U&&!A());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,f=d.priorityLevel;var Q=oe(d.expirationTime<=$);$=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&r(l),b($)}else r(l);d=n(l)}if(d!==null)var te=!0;else{var ce=n(c);ce!==null&&ae(M,ce.startTime-$),te=!1}return te}finally{d=null,f=G,g=!1}}var L=!1,T=null,_=-1,I=5,P=-1;function A(){return!(t.unstable_now()-P<I)}function R(){if(T!==null){var U=t.unstable_now();P=U;var $=!0;try{$=T(!0,U)}finally{$?C():(L=!1,T=null)}}else L=!1}var C;if(typeof E=="function")C=function(){E(R)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,X=q.port2;q.port1.onmessage=R,C=function(){X.postMessage(null)}}else C=function(){S(R,0)};function Z(U){T=U,L||(L=!0,C())}function ae(U,$){_=S(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Z(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var G=f;f=$;try{return U()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=f;f=U;try{return $()}finally{f=G}},t.unstable_scheduleCallback=function(U,$,G){var oe=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?oe+G:oe):G=oe,U){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=G+Q,U={id:h++,callback:$,priorityLevel:U,startTime:G,expirationTime:Q,sortIndex:-1},G>oe?(U.sortIndex=G,e(c,U),n(l)===null&&U===n(c)&&(v?(w(_),_=-1):v=!0,ae(M,G-oe))):(U.sortIndex=Q,e(l,U),y||g||(y=!0,Z(D))),U},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(U){var $=f;return function(){var G=f;f=$;try{return U.apply(this,arguments)}finally{f=G}}}})(lE);aE.exports=lE;var Ob=aE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb=j,Gt=Ob;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cE=new Set,Ba={};function ts(t,e){Xs(t,e),Xs(t+"Capture",e)}function Xs(t,e){for(Ba[t]=e,t=0;t<e.length;t++)cE.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bf=Object.prototype.hasOwnProperty,Fb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zy={},e_={};function jb(t){return bf.call(e_,t)?!0:bf.call(Zy,t)?!1:Fb.test(t)?e_[t]=!0:(Zy[t]=!0,!1)}function Ub(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zb(t,e,n,r){if(e===null||typeof e>"u"||Ub(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var ng=/[\-:]([a-z])/g;function rg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ng,rg);at[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ng,rg);at[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ng,rg);at[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function ig(t,e,n,r){var i=at.hasOwnProperty(e)?at[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zb(e,n,i,r)&&(n=null),r||i===null?jb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vr=Vb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rc=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),Is=Symbol.for("react.fragment"),sg=Symbol.for("react.strict_mode"),Pf=Symbol.for("react.profiler"),uE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),og=Symbol.for("react.forward_ref"),kf=Symbol.for("react.suspense"),Cf=Symbol.for("react.suspense_list"),ag=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),dE=Symbol.for("react.offscreen"),t_=Symbol.iterator;function Ko(t){return t===null||typeof t!="object"?null:(t=t_&&t[t_]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,Id;function oa(t){if(Id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Id=e&&e[1]||""}return`
`+Id+t}var xd=!1;function bd(t,e){if(!t||xd)return"";xd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oa(t):""}function Bb(t){switch(t.tag){case 5:return oa(t.type);case 16:return oa("Lazy");case 13:return oa("Suspense");case 19:return oa("SuspenseList");case 0:case 2:case 15:return t=bd(t.type,!1),t;case 11:return t=bd(t.type.render,!1),t;case 1:return t=bd(t.type,!0),t;default:return""}}function Af(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Is:return"Fragment";case Ts:return"Portal";case Pf:return"Profiler";case sg:return"StrictMode";case kf:return"Suspense";case Cf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hE:return(t.displayName||"Context")+".Consumer";case uE:return(t._context.displayName||"Context")+".Provider";case og:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ag:return e=t.displayName||null,e!==null?e:Af(t.type)||"Memo";case Rr:e=t._payload,t=t._init;try{return Af(t(e))}catch{}}return null}function $b(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Af(e);case 8:return e===sg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Hb(t){var e=fE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ic(t){t._valueTracker||(t._valueTracker=Hb(t))}function pE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rf(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function n_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ri(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gE(t,e){e=e.checked,e!=null&&ig(t,"checked",e,!1)}function Mf(t,e){gE(t,e);var n=ri(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Df(t,e.type,n):e.hasOwnProperty("defaultValue")&&Df(t,e.type,ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function r_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Df(t,e,n){(e!=="number"||vu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var aa=Array.isArray;function Vs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ri(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function i_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(aa(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ri(n)}}function mE(t,e){var n=ri(e.value),r=ri(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function s_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sc,_E=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sc=sc||document.createElement("div"),sc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wb=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(t){Wb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ta[e]=Ta[t]})});function vE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ta.hasOwnProperty(t)&&Ta[t]?(""+e).trim():e+"px"}function wE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=vE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var qb=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Of(t,e){if(e){if(qb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Vf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ff=null;function lg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jf=null,Fs=null,js=null;function o_(t){if(t=Il(t)){if(typeof jf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Th(e),jf(t.stateNode,t.type,e))}}function EE(t){Fs?js?js.push(t):js=[t]:Fs=t}function SE(){if(Fs){var t=Fs,e=js;if(js=Fs=null,o_(t),e)for(t=0;t<e.length;t++)o_(e[t])}}function TE(t,e){return t(e)}function IE(){}var Pd=!1;function xE(t,e,n){if(Pd)return t(e,n);Pd=!0;try{return TE(t,e,n)}finally{Pd=!1,(Fs!==null||js!==null)&&(IE(),SE())}}function Ha(t,e){var n=t.stateNode;if(n===null)return null;var r=Th(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Uf=!1;if(ur)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){Uf=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{Uf=!1}function Kb(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ia=!1,wu=null,Eu=!1,zf=null,Gb={onError:function(t){Ia=!0,wu=t}};function Qb(t,e,n,r,i,s,o,a,l){Ia=!1,wu=null,Kb.apply(Gb,arguments)}function Yb(t,e,n,r,i,s,o,a,l){if(Qb.apply(this,arguments),Ia){if(Ia){var c=wu;Ia=!1,wu=null}else throw Error(z(198));Eu||(Eu=!0,zf=c)}}function ns(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function a_(t){if(ns(t)!==t)throw Error(z(188))}function Xb(t){var e=t.alternate;if(!e){if(e=ns(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return a_(i),t;if(s===r)return a_(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function PE(t){return t=Xb(t),t!==null?kE(t):null}function kE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kE(t);if(e!==null)return e;t=t.sibling}return null}var CE=Gt.unstable_scheduleCallback,l_=Gt.unstable_cancelCallback,Jb=Gt.unstable_shouldYield,Zb=Gt.unstable_requestPaint,Be=Gt.unstable_now,eP=Gt.unstable_getCurrentPriorityLevel,cg=Gt.unstable_ImmediatePriority,AE=Gt.unstable_UserBlockingPriority,Su=Gt.unstable_NormalPriority,tP=Gt.unstable_LowPriority,RE=Gt.unstable_IdlePriority,vh=null,Nn=null;function nP(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(vh,t,void 0,(t.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:sP,rP=Math.log,iP=Math.LN2;function sP(t){return t>>>=0,t===0?32:31-(rP(t)/iP|0)|0}var oc=64,ac=4194304;function la(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=la(a):(s&=o,s!==0&&(r=la(s)))}else o=n&~i,o!==0?r=la(o):s!==0&&(r=la(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-En(e),i=1<<n,r|=t[n],e&=~i;return r}function oP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-En(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=oP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Bf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ME(){var t=oc;return oc<<=1,!(oc&4194240)&&(oc=64),t}function kd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-En(e),t[e]=n}function lP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-En(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ug(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-En(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Se=0;function DE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var NE,hg,LE,OE,VE,$f=!1,lc=[],Hr=null,Wr=null,qr=null,Wa=new Map,qa=new Map,Dr=[],cP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c_(t,e){switch(t){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qa.delete(e.pointerId)}}function Qo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Il(e),e!==null&&hg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uP(t,e,n,r,i){switch(e){case"focusin":return Hr=Qo(Hr,t,e,n,r,i),!0;case"dragenter":return Wr=Qo(Wr,t,e,n,r,i),!0;case"mouseover":return qr=Qo(qr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Wa.set(s,Qo(Wa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qa.set(s,Qo(qa.get(s)||null,t,e,n,r,i)),!0}return!1}function FE(t){var e=Mi(t.target);if(e!==null){var n=ns(e);if(n!==null){if(e=n.tag,e===13){if(e=bE(n),e!==null){t.blockedOn=e,VE(t.priority,function(){LE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ff=r,n.target.dispatchEvent(r),Ff=null}else return e=Il(n),e!==null&&hg(e),t.blockedOn=n,!1;e.shift()}return!0}function u_(t,e,n){Wc(t)&&n.delete(e)}function hP(){$f=!1,Hr!==null&&Wc(Hr)&&(Hr=null),Wr!==null&&Wc(Wr)&&(Wr=null),qr!==null&&Wc(qr)&&(qr=null),Wa.forEach(u_),qa.forEach(u_)}function Yo(t,e){t.blockedOn===e&&(t.blockedOn=null,$f||($f=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,hP)))}function Ka(t){function e(i){return Yo(i,t)}if(0<lc.length){Yo(lc[0],t);for(var n=1;n<lc.length;n++){var r=lc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hr!==null&&Yo(Hr,t),Wr!==null&&Yo(Wr,t),qr!==null&&Yo(qr,t),Wa.forEach(e),qa.forEach(e),n=0;n<Dr.length;n++)r=Dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Dr.length&&(n=Dr[0],n.blockedOn===null);)FE(n),n.blockedOn===null&&Dr.shift()}var Us=vr.ReactCurrentBatchConfig,Iu=!0;function dP(t,e,n,r){var i=Se,s=Us.transition;Us.transition=null;try{Se=1,dg(t,e,n,r)}finally{Se=i,Us.transition=s}}function fP(t,e,n,r){var i=Se,s=Us.transition;Us.transition=null;try{Se=4,dg(t,e,n,r)}finally{Se=i,Us.transition=s}}function dg(t,e,n,r){if(Iu){var i=Hf(t,e,n,r);if(i===null)Fd(t,e,r,xu,n),c_(t,r);else if(uP(i,t,e,n,r))r.stopPropagation();else if(c_(t,r),e&4&&-1<cP.indexOf(t)){for(;i!==null;){var s=Il(i);if(s!==null&&NE(s),s=Hf(t,e,n,r),s===null&&Fd(t,e,r,xu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Fd(t,e,r,null,n)}}var xu=null;function Hf(t,e,n,r){if(xu=null,t=lg(r),t=Mi(t),t!==null)if(e=ns(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xu=t,null}function jE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eP()){case cg:return 1;case AE:return 4;case Su:case tP:return 16;case RE:return 536870912;default:return 16}default:return 16}}var jr=null,fg=null,qc=null;function UE(){if(qc)return qc;var t,e=fg,n=e.length,r,i="value"in jr?jr.value:jr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return qc=i.slice(t,1<r?1-r:void 0)}function Kc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cc(){return!0}function h_(){return!1}function Yt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cc:h_,this.isPropagationStopped=h_,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),e}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pg=Yt(Eo),Tl=Oe({},Eo,{view:0,detail:0}),pP=Yt(Tl),Cd,Ad,Xo,wh=Oe({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xo&&(Xo&&t.type==="mousemove"?(Cd=t.screenX-Xo.screenX,Ad=t.screenY-Xo.screenY):Ad=Cd=0,Xo=t),Cd)},movementY:function(t){return"movementY"in t?t.movementY:Ad}}),d_=Yt(wh),gP=Oe({},wh,{dataTransfer:0}),mP=Yt(gP),yP=Oe({},Tl,{relatedTarget:0}),Rd=Yt(yP),_P=Oe({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),vP=Yt(_P),wP=Oe({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EP=Yt(wP),SP=Oe({},Eo,{data:0}),f_=Yt(SP),TP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xP[t])?!!e[t]:!1}function gg(){return bP}var PP=Oe({},Tl,{key:function(t){if(t.key){var e=TP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gg,charCode:function(t){return t.type==="keypress"?Kc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kP=Yt(PP),CP=Oe({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p_=Yt(CP),AP=Oe({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gg}),RP=Yt(AP),MP=Oe({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),DP=Yt(MP),NP=Oe({},wh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LP=Yt(NP),OP=[9,13,27,32],mg=ur&&"CompositionEvent"in window,xa=null;ur&&"documentMode"in document&&(xa=document.documentMode);var VP=ur&&"TextEvent"in window&&!xa,zE=ur&&(!mg||xa&&8<xa&&11>=xa),g_=" ",m_=!1;function BE(t,e){switch(t){case"keyup":return OP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $E(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xs=!1;function FP(t,e){switch(t){case"compositionend":return $E(e);case"keypress":return e.which!==32?null:(m_=!0,g_);case"textInput":return t=e.data,t===g_&&m_?null:t;default:return null}}function jP(t,e){if(xs)return t==="compositionend"||!mg&&BE(t,e)?(t=UE(),qc=fg=jr=null,xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zE&&e.locale!=="ko"?null:e.data;default:return null}}var UP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UP[t.type]:e==="textarea"}function HE(t,e,n,r){EE(r),e=bu(e,"onChange"),0<e.length&&(n=new pg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ba=null,Ga=null;function zP(t){tS(t,0)}function Eh(t){var e=ks(t);if(pE(e))return t}function BP(t,e){if(t==="change")return e}var WE=!1;if(ur){var Md;if(ur){var Dd="oninput"in document;if(!Dd){var __=document.createElement("div");__.setAttribute("oninput","return;"),Dd=typeof __.oninput=="function"}Md=Dd}else Md=!1;WE=Md&&(!document.documentMode||9<document.documentMode)}function v_(){ba&&(ba.detachEvent("onpropertychange",qE),Ga=ba=null)}function qE(t){if(t.propertyName==="value"&&Eh(Ga)){var e=[];HE(e,Ga,t,lg(t)),xE(zP,e)}}function $P(t,e,n){t==="focusin"?(v_(),ba=e,Ga=n,ba.attachEvent("onpropertychange",qE)):t==="focusout"&&v_()}function HP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eh(Ga)}function WP(t,e){if(t==="click")return Eh(e)}function qP(t,e){if(t==="input"||t==="change")return Eh(e)}function KP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:KP;function Qa(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bf.call(e,i)||!In(t[i],e[i]))return!1}return!0}function w_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function E_(t,e){var n=w_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=w_(n)}}function KE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?KE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GE(){for(var t=window,e=vu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vu(t.document)}return e}function yg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GP(t){var e=GE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&KE(n.ownerDocument.documentElement,n)){if(r!==null&&yg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=E_(n,s);var o=E_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var QP=ur&&"documentMode"in document&&11>=document.documentMode,bs=null,Wf=null,Pa=null,qf=!1;function S_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qf||bs==null||bs!==vu(r)||(r=bs,"selectionStart"in r&&yg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pa&&Qa(Pa,r)||(Pa=r,r=bu(Wf,"onSelect"),0<r.length&&(e=new pg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bs)))}function uc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ps={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},Nd={},QE={};ur&&(QE=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function Sh(t){if(Nd[t])return Nd[t];if(!Ps[t])return t;var e=Ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in QE)return Nd[t]=e[n];return t}var YE=Sh("animationend"),XE=Sh("animationiteration"),JE=Sh("animationstart"),ZE=Sh("transitionend"),eS=new Map,T_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(t,e){eS.set(t,e),ts(e,[t])}for(var Ld=0;Ld<T_.length;Ld++){var Od=T_[Ld],YP=Od.toLowerCase(),XP=Od[0].toUpperCase()+Od.slice(1);hi(YP,"on"+XP)}hi(YE,"onAnimationEnd");hi(XE,"onAnimationIteration");hi(JE,"onAnimationStart");hi("dblclick","onDoubleClick");hi("focusin","onFocus");hi("focusout","onBlur");hi(ZE,"onTransitionEnd");Xs("onMouseEnter",["mouseout","mouseover"]);Xs("onMouseLeave",["mouseout","mouseover"]);Xs("onPointerEnter",["pointerout","pointerover"]);Xs("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function I_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Yb(r,e,void 0,t),t.currentTarget=null}function tS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;I_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;I_(i,a,c),s=l}}}if(Eu)throw t=zf,Eu=!1,zf=null,t}function Pe(t,e){var n=e[Xf];n===void 0&&(n=e[Xf]=new Set);var r=t+"__bubble";n.has(r)||(nS(e,t,2,!1),n.add(r))}function Vd(t,e,n){var r=0;e&&(r|=4),nS(n,t,r,e)}var hc="_reactListening"+Math.random().toString(36).slice(2);function Ya(t){if(!t[hc]){t[hc]=!0,cE.forEach(function(n){n!=="selectionchange"&&(JP.has(n)||Vd(n,!1,t),Vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hc]||(e[hc]=!0,Vd("selectionchange",!1,e))}}function nS(t,e,n,r){switch(jE(e)){case 1:var i=dP;break;case 4:i=fP;break;default:i=dg}n=i.bind(null,e,n,t),i=void 0,!Uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Mi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}xE(function(){var c=s,h=lg(n),d=[];e:{var f=eS.get(t);if(f!==void 0){var g=pg,y=t;switch(t){case"keypress":if(Kc(n)===0)break e;case"keydown":case"keyup":g=kP;break;case"focusin":y="focus",g=Rd;break;case"focusout":y="blur",g=Rd;break;case"beforeblur":case"afterblur":g=Rd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=d_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=mP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=RP;break;case YE:case XE:case JE:g=vP;break;case ZE:g=DP;break;case"scroll":g=pP;break;case"wheel":g=LP;break;case"copy":case"cut":case"paste":g=EP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=p_}var v=(e&4)!==0,S=!v&&t==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var E=c,b;E!==null;){b=E;var M=b.stateNode;if(b.tag===5&&M!==null&&(b=M,w!==null&&(M=Ha(E,w),M!=null&&v.push(Xa(E,M,b)))),S)break;E=E.return}0<v.length&&(f=new g(f,y,null,n,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Ff&&(y=n.relatedTarget||n.fromElement)&&(Mi(y)||y[hr]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?Mi(y):null,y!==null&&(S=ns(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(v=d_,M="onMouseLeave",w="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(v=p_,M="onPointerLeave",w="onPointerEnter",E="pointer"),S=g==null?f:ks(g),b=y==null?f:ks(y),f=new v(M,E+"leave",g,n,h),f.target=S,f.relatedTarget=b,M=null,Mi(h)===c&&(v=new v(w,E+"enter",y,n,h),v.target=b,v.relatedTarget=S,M=v),S=M,g&&y)t:{for(v=g,w=y,E=0,b=v;b;b=ms(b))E++;for(b=0,M=w;M;M=ms(M))b++;for(;0<E-b;)v=ms(v),E--;for(;0<b-E;)w=ms(w),b--;for(;E--;){if(v===w||w!==null&&v===w.alternate)break t;v=ms(v),w=ms(w)}v=null}else v=null;g!==null&&x_(d,f,g,v,!1),y!==null&&S!==null&&x_(d,S,y,v,!0)}}e:{if(f=c?ks(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var D=BP;else if(y_(f))if(WE)D=qP;else{D=HP;var L=$P}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=WP);if(D&&(D=D(t,c))){HE(d,D,n,h);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&Df(f,"number",f.value)}switch(L=c?ks(c):window,t){case"focusin":(y_(L)||L.contentEditable==="true")&&(bs=L,Wf=c,Pa=null);break;case"focusout":Pa=Wf=bs=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,S_(d,n,h);break;case"selectionchange":if(QP)break;case"keydown":case"keyup":S_(d,n,h)}var T;if(mg)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else xs?BE(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(zE&&n.locale!=="ko"&&(xs||_!=="onCompositionStart"?_==="onCompositionEnd"&&xs&&(T=UE()):(jr=h,fg="value"in jr?jr.value:jr.textContent,xs=!0)),L=bu(c,_),0<L.length&&(_=new f_(_,t,null,n,h),d.push({event:_,listeners:L}),T?_.data=T:(T=$E(n),T!==null&&(_.data=T)))),(T=VP?FP(t,n):jP(t,n))&&(c=bu(c,"onBeforeInput"),0<c.length&&(h=new f_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=T))}tS(d,e)})}function Xa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ha(t,n),s!=null&&r.unshift(Xa(t,s,i)),s=Ha(t,e),s!=null&&r.push(Xa(t,s,i))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function x_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ha(n,s),l!=null&&o.unshift(Xa(n,l,a))):i||(l=Ha(n,s),l!=null&&o.push(Xa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ZP=/\r\n?/g,ek=/\u0000|\uFFFD/g;function b_(t){return(typeof t=="string"?t:""+t).replace(ZP,`
`).replace(ek,"")}function dc(t,e,n){if(e=b_(e),b_(t)!==e&&n)throw Error(z(425))}function Pu(){}var Kf=null,Gf=null;function Qf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yf=typeof setTimeout=="function"?setTimeout:void 0,tk=typeof clearTimeout=="function"?clearTimeout:void 0,P_=typeof Promise=="function"?Promise:void 0,nk=typeof queueMicrotask=="function"?queueMicrotask:typeof P_<"u"?function(t){return P_.resolve(null).then(t).catch(rk)}:Yf;function rk(t){setTimeout(function(){throw t})}function jd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ka(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ka(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var So=Math.random().toString(36).slice(2),Mn="__reactFiber$"+So,Ja="__reactProps$"+So,hr="__reactContainer$"+So,Xf="__reactEvents$"+So,ik="__reactListeners$"+So,sk="__reactHandles$"+So;function Mi(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hr]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k_(t);t!==null;){if(n=t[Mn])return n;t=k_(t)}return e}t=n,n=t.parentNode}return null}function Il(t){return t=t[Mn]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Th(t){return t[Ja]||null}var Jf=[],Cs=-1;function di(t){return{current:t}}function Ae(t){0>Cs||(t.current=Jf[Cs],Jf[Cs]=null,Cs--)}function Ie(t,e){Cs++,Jf[Cs]=t.current,t.current=e}var ii={},St=di(ii),Vt=di(!1),Hi=ii;function Js(t,e){var n=t.type.contextTypes;if(!n)return ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(t){return t=t.childContextTypes,t!=null}function ku(){Ae(Vt),Ae(St)}function C_(t,e,n){if(St.current!==ii)throw Error(z(168));Ie(St,e),Ie(Vt,n)}function rS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,$b(t)||"Unknown",i));return Oe({},n,r)}function Cu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ii,Hi=St.current,Ie(St,t),Ie(Vt,Vt.current),!0}function A_(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=rS(t,e,Hi),r.__reactInternalMemoizedMergedChildContext=t,Ae(Vt),Ae(St),Ie(St,t)):Ae(Vt),Ie(Vt,n)}var Zn=null,Ih=!1,Ud=!1;function iS(t){Zn===null?Zn=[t]:Zn.push(t)}function ok(t){Ih=!0,iS(t)}function fi(){if(!Ud&&Zn!==null){Ud=!0;var t=0,e=Se;try{var n=Zn;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zn=null,Ih=!1}catch(i){throw Zn!==null&&(Zn=Zn.slice(t+1)),CE(cg,fi),i}finally{Se=e,Ud=!1}}return null}var As=[],Rs=0,Au=null,Ru=0,en=[],tn=0,Wi=null,tr=1,nr="";function xi(t,e){As[Rs++]=Ru,As[Rs++]=Au,Au=t,Ru=e}function sS(t,e,n){en[tn++]=tr,en[tn++]=nr,en[tn++]=Wi,Wi=t;var r=tr;t=nr;var i=32-En(r)-1;r&=~(1<<i),n+=1;var s=32-En(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,tr=1<<32-En(e)+i|n<<i|r,nr=s+t}else tr=1<<s|n<<i|r,nr=t}function _g(t){t.return!==null&&(xi(t,1),sS(t,1,0))}function vg(t){for(;t===Au;)Au=As[--Rs],As[Rs]=null,Ru=As[--Rs],As[Rs]=null;for(;t===Wi;)Wi=en[--tn],en[tn]=null,nr=en[--tn],en[tn]=null,tr=en[--tn],en[tn]=null}var Kt=null,Wt=null,Re=!1,_n=null;function oS(t,e){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function R_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Kt=t,Wt=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Kt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wi!==null?{id:tr,overflow:nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Kt=t,Wt=null,!0):!1;default:return!1}}function Zf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ep(t){if(Re){var e=Wt;if(e){var n=e;if(!R_(t,e)){if(Zf(t))throw Error(z(418));e=Kr(n.nextSibling);var r=Kt;e&&R_(t,e)?oS(r,n):(t.flags=t.flags&-4097|2,Re=!1,Kt=t)}}else{if(Zf(t))throw Error(z(418));t.flags=t.flags&-4097|2,Re=!1,Kt=t}}}function M_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kt=t}function fc(t){if(t!==Kt)return!1;if(!Re)return M_(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qf(t.type,t.memoizedProps)),e&&(e=Wt)){if(Zf(t))throw aS(),Error(z(418));for(;e;)oS(t,e),e=Kr(e.nextSibling)}if(M_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=Kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=Kt?Kr(t.stateNode.nextSibling):null;return!0}function aS(){for(var t=Wt;t;)t=Kr(t.nextSibling)}function Zs(){Wt=Kt=null,Re=!1}function wg(t){_n===null?_n=[t]:_n.push(t)}var ak=vr.ReactCurrentBatchConfig;function Jo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function pc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function D_(t){var e=t._init;return e(t._payload)}function lS(t){function e(w,E){if(t){var b=w.deletions;b===null?(w.deletions=[E],w.flags|=16):b.push(E)}}function n(w,E){if(!t)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function i(w,E){return w=Xr(w,E),w.index=0,w.sibling=null,w}function s(w,E,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<E?(w.flags|=2,E):b):(w.flags|=2,E)):(w.flags|=1048576,E)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,E,b,M){return E===null||E.tag!==6?(E=Kd(b,w.mode,M),E.return=w,E):(E=i(E,b),E.return=w,E)}function l(w,E,b,M){var D=b.type;return D===Is?h(w,E,b.props.children,M,b.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Rr&&D_(D)===E.type)?(M=i(E,b.props),M.ref=Jo(w,E,b),M.return=w,M):(M=eu(b.type,b.key,b.props,null,w.mode,M),M.ref=Jo(w,E,b),M.return=w,M)}function c(w,E,b,M){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=Gd(b,w.mode,M),E.return=w,E):(E=i(E,b.children||[]),E.return=w,E)}function h(w,E,b,M,D){return E===null||E.tag!==7?(E=zi(b,w.mode,M,D),E.return=w,E):(E=i(E,b),E.return=w,E)}function d(w,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Kd(""+E,w.mode,b),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case rc:return b=eu(E.type,E.key,E.props,null,w.mode,b),b.ref=Jo(w,null,E),b.return=w,b;case Ts:return E=Gd(E,w.mode,b),E.return=w,E;case Rr:var M=E._init;return d(w,M(E._payload),b)}if(aa(E)||Ko(E))return E=zi(E,w.mode,b,null),E.return=w,E;pc(w,E)}return null}function f(w,E,b,M){var D=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:a(w,E,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rc:return b.key===D?l(w,E,b,M):null;case Ts:return b.key===D?c(w,E,b,M):null;case Rr:return D=b._init,f(w,E,D(b._payload),M)}if(aa(b)||Ko(b))return D!==null?null:h(w,E,b,M,null);pc(w,b)}return null}function g(w,E,b,M,D){if(typeof M=="string"&&M!==""||typeof M=="number")return w=w.get(b)||null,a(E,w,""+M,D);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case rc:return w=w.get(M.key===null?b:M.key)||null,l(E,w,M,D);case Ts:return w=w.get(M.key===null?b:M.key)||null,c(E,w,M,D);case Rr:var L=M._init;return g(w,E,b,L(M._payload),D)}if(aa(M)||Ko(M))return w=w.get(b)||null,h(E,w,M,D,null);pc(E,M)}return null}function y(w,E,b,M){for(var D=null,L=null,T=E,_=E=0,I=null;T!==null&&_<b.length;_++){T.index>_?(I=T,T=null):I=T.sibling;var P=f(w,T,b[_],M);if(P===null){T===null&&(T=I);break}t&&T&&P.alternate===null&&e(w,T),E=s(P,E,_),L===null?D=P:L.sibling=P,L=P,T=I}if(_===b.length)return n(w,T),Re&&xi(w,_),D;if(T===null){for(;_<b.length;_++)T=d(w,b[_],M),T!==null&&(E=s(T,E,_),L===null?D=T:L.sibling=T,L=T);return Re&&xi(w,_),D}for(T=r(w,T);_<b.length;_++)I=g(T,w,_,b[_],M),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?_:I.key),E=s(I,E,_),L===null?D=I:L.sibling=I,L=I);return t&&T.forEach(function(A){return e(w,A)}),Re&&xi(w,_),D}function v(w,E,b,M){var D=Ko(b);if(typeof D!="function")throw Error(z(150));if(b=D.call(b),b==null)throw Error(z(151));for(var L=D=null,T=E,_=E=0,I=null,P=b.next();T!==null&&!P.done;_++,P=b.next()){T.index>_?(I=T,T=null):I=T.sibling;var A=f(w,T,P.value,M);if(A===null){T===null&&(T=I);break}t&&T&&A.alternate===null&&e(w,T),E=s(A,E,_),L===null?D=A:L.sibling=A,L=A,T=I}if(P.done)return n(w,T),Re&&xi(w,_),D;if(T===null){for(;!P.done;_++,P=b.next())P=d(w,P.value,M),P!==null&&(E=s(P,E,_),L===null?D=P:L.sibling=P,L=P);return Re&&xi(w,_),D}for(T=r(w,T);!P.done;_++,P=b.next())P=g(T,w,_,P.value,M),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?_:P.key),E=s(P,E,_),L===null?D=P:L.sibling=P,L=P);return t&&T.forEach(function(R){return e(w,R)}),Re&&xi(w,_),D}function S(w,E,b,M){if(typeof b=="object"&&b!==null&&b.type===Is&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case rc:e:{for(var D=b.key,L=E;L!==null;){if(L.key===D){if(D=b.type,D===Is){if(L.tag===7){n(w,L.sibling),E=i(L,b.props.children),E.return=w,w=E;break e}}else if(L.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Rr&&D_(D)===L.type){n(w,L.sibling),E=i(L,b.props),E.ref=Jo(w,L,b),E.return=w,w=E;break e}n(w,L);break}else e(w,L);L=L.sibling}b.type===Is?(E=zi(b.props.children,w.mode,M,b.key),E.return=w,w=E):(M=eu(b.type,b.key,b.props,null,w.mode,M),M.ref=Jo(w,E,b),M.return=w,w=M)}return o(w);case Ts:e:{for(L=b.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){n(w,E.sibling),E=i(E,b.children||[]),E.return=w,w=E;break e}else{n(w,E);break}else e(w,E);E=E.sibling}E=Gd(b,w.mode,M),E.return=w,w=E}return o(w);case Rr:return L=b._init,S(w,E,L(b._payload),M)}if(aa(b))return y(w,E,b,M);if(Ko(b))return v(w,E,b,M);pc(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,E!==null&&E.tag===6?(n(w,E.sibling),E=i(E,b),E.return=w,w=E):(n(w,E),E=Kd(b,w.mode,M),E.return=w,w=E),o(w)):n(w,E)}return S}var eo=lS(!0),cS=lS(!1),Mu=di(null),Du=null,Ms=null,Eg=null;function Sg(){Eg=Ms=Du=null}function Tg(t){var e=Mu.current;Ae(Mu),t._currentValue=e}function tp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zs(t,e){Du=t,Eg=Ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(Eg!==t)if(t={context:t,memoizedValue:e,next:null},Ms===null){if(Du===null)throw Error(z(308));Ms=t,Du.dependencies={lanes:0,firstContext:t}}else Ms=Ms.next=t;return e}var Di=null;function Ig(t){Di===null?Di=[t]:Di.push(t)}function uS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ig(e)):(n.next=i.next,i.next=n),e.interleaved=n,dr(t,r)}function dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mr=!1;function xg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,dr(t,n)}return i=r.interleaved,i===null?(e.next=e,Ig(r)):(e.next=i.next,i.next=e),r.interleaved=e,dr(t,n)}function Gc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ug(t,n)}}function N_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nu(t,e,n,r){var i=t.updateQueue;Mr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,g=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(g,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(g,d,f):y,f==null)break e;d=Oe({},d,f);break e;case 2:Mr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ki|=o,t.lanes=o,t.memoizedState=d}}function L_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var xl={},Ln=di(xl),Za=di(xl),el=di(xl);function Ni(t){if(t===xl)throw Error(z(174));return t}function bg(t,e){switch(Ie(el,e),Ie(Za,t),Ie(Ln,xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lf(e,t)}Ae(Ln),Ie(Ln,e)}function to(){Ae(Ln),Ae(Za),Ae(el)}function dS(t){Ni(el.current);var e=Ni(Ln.current),n=Lf(e,t.type);e!==n&&(Ie(Za,t),Ie(Ln,n))}function Pg(t){Za.current===t&&(Ae(Ln),Ae(Za))}var Ne=di(0);function Lu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zd=[];function kg(){for(var t=0;t<zd.length;t++)zd[t]._workInProgressVersionPrimary=null;zd.length=0}var Qc=vr.ReactCurrentDispatcher,Bd=vr.ReactCurrentBatchConfig,qi=0,Le=null,Ke=null,Je=null,Ou=!1,ka=!1,tl=0,lk=0;function pt(){throw Error(z(321))}function Cg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!In(t[n],e[n]))return!1;return!0}function Ag(t,e,n,r,i,s){if(qi=s,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qc.current=t===null||t.memoizedState===null?dk:fk,t=n(r,i),ka){s=0;do{if(ka=!1,tl=0,25<=s)throw Error(z(301));s+=1,Je=Ke=null,e.updateQueue=null,Qc.current=pk,t=n(r,i)}while(ka)}if(Qc.current=Vu,e=Ke!==null&&Ke.next!==null,qi=0,Je=Ke=Le=null,Ou=!1,e)throw Error(z(300));return t}function Rg(){var t=tl!==0;return tl=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Le.memoizedState=Je=t:Je=Je.next=t,Je}function cn(){if(Ke===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Je===null?Le.memoizedState:Je.next;if(e!==null)Je=e,Ke=t;else{if(t===null)throw Error(z(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Je===null?Le.memoizedState=Je=t:Je=Je.next=t}return Je}function nl(t,e){return typeof e=="function"?e(t):e}function $d(t){var e=cn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((qi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Le.lanes|=h,Ki|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,In(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Le.lanes|=s,Ki|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hd(t){var e=cn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);In(s,e.memoizedState)||(Ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function fS(){}function pS(t,e){var n=Le,r=cn(),i=e(),s=!In(r.memoizedState,i);if(s&&(r.memoizedState=i,Ot=!0),r=r.queue,Mg(yS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,rl(9,mS.bind(null,n,r,i,e),void 0,null),Ze===null)throw Error(z(349));qi&30||gS(n,e,i)}return i}function gS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mS(t,e,n,r){e.value=n,e.getSnapshot=r,_S(e)&&vS(t)}function yS(t,e,n){return n(function(){_S(e)&&vS(t)})}function _S(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!In(t,n)}catch{return!0}}function vS(t){var e=dr(t,1);e!==null&&Sn(e,t,1,-1)}function O_(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:t},e.queue=t,t=t.dispatch=hk.bind(null,Le,t),[e.memoizedState,t]}function rl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wS(){return cn().memoizedState}function Yc(t,e,n,r){var i=An();Le.flags|=t,i.memoizedState=rl(1|e,n,void 0,r===void 0?null:r)}function xh(t,e,n,r){var i=cn();r=r===void 0?null:r;var s=void 0;if(Ke!==null){var o=Ke.memoizedState;if(s=o.destroy,r!==null&&Cg(r,o.deps)){i.memoizedState=rl(e,n,s,r);return}}Le.flags|=t,i.memoizedState=rl(1|e,n,s,r)}function V_(t,e){return Yc(8390656,8,t,e)}function Mg(t,e){return xh(2048,8,t,e)}function ES(t,e){return xh(4,2,t,e)}function SS(t,e){return xh(4,4,t,e)}function TS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IS(t,e,n){return n=n!=null?n.concat([t]):null,xh(4,4,TS.bind(null,e,t),n)}function Dg(){}function xS(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bS(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function PS(t,e,n){return qi&21?(In(n,e)||(n=ME(),Le.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function ck(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=Bd.transition;Bd.transition={};try{t(!1),e()}finally{Se=n,Bd.transition=r}}function kS(){return cn().memoizedState}function uk(t,e,n){var r=Yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CS(t))AS(e,n);else if(n=uS(t,e,n,r),n!==null){var i=kt();Sn(n,t,r,i),RS(n,e,r)}}function hk(t,e,n){var r=Yr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CS(t))AS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,In(a,o)){var l=e.interleaved;l===null?(i.next=i,Ig(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=uS(t,e,i,r),n!==null&&(i=kt(),Sn(n,t,r,i),RS(n,e,r))}}function CS(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function AS(t,e){ka=Ou=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function RS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ug(t,n)}}var Vu={readContext:ln,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},dk={readContext:ln,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:V_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yc(4194308,4,TS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yc(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=An();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uk.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:O_,useDebugValue:Dg,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=O_(!1),e=t[0];return t=ck.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,i=An();if(Re){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ze===null)throw Error(z(349));qi&30||gS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,V_(yS.bind(null,r,s,t),[t]),r.flags|=2048,rl(9,mS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=An(),e=Ze.identifierPrefix;if(Re){var n=nr,r=tr;n=(r&~(1<<32-En(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=tl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fk={readContext:ln,useCallback:xS,useContext:ln,useEffect:Mg,useImperativeHandle:IS,useInsertionEffect:ES,useLayoutEffect:SS,useMemo:bS,useReducer:$d,useRef:wS,useState:function(){return $d(nl)},useDebugValue:Dg,useDeferredValue:function(t){var e=cn();return PS(e,Ke.memoizedState,t)},useTransition:function(){var t=$d(nl)[0],e=cn().memoizedState;return[t,e]},useMutableSource:fS,useSyncExternalStore:pS,useId:kS,unstable_isNewReconciler:!1},pk={readContext:ln,useCallback:xS,useContext:ln,useEffect:Mg,useImperativeHandle:IS,useInsertionEffect:ES,useLayoutEffect:SS,useMemo:bS,useReducer:Hd,useRef:wS,useState:function(){return Hd(nl)},useDebugValue:Dg,useDeferredValue:function(t){var e=cn();return Ke===null?e.memoizedState=t:PS(e,Ke.memoizedState,t)},useTransition:function(){var t=Hd(nl)[0],e=cn().memoizedState;return[t,e]},useMutableSource:fS,useSyncExternalStore:pS,useId:kS,unstable_isNewReconciler:!1};function gn(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function np(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bh={isMounted:function(t){return(t=t._reactInternals)?ns(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kt(),i=Yr(t),s=or(r,i);s.payload=e,n!=null&&(s.callback=n),e=Gr(t,s,i),e!==null&&(Sn(e,t,i,r),Gc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kt(),i=Yr(t),s=or(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gr(t,s,i),e!==null&&(Sn(e,t,i,r),Gc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),r=Yr(t),i=or(n,r);i.tag=2,e!=null&&(i.callback=e),e=Gr(t,i,r),e!==null&&(Sn(e,t,r,n),Gc(e,t,r))}};function F_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qa(n,r)||!Qa(i,s):!0}function MS(t,e,n){var r=!1,i=ii,s=e.contextType;return typeof s=="object"&&s!==null?s=ln(s):(i=Ft(e)?Hi:St.current,r=e.contextTypes,s=(r=r!=null)?Js(t,i):ii),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function j_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bh.enqueueReplaceState(e,e.state,null)}function rp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},xg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ln(s):(s=Ft(e)?Hi:St.current,i.context=Js(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(np(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bh.enqueueReplaceState(i,i.state,null),Nu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function no(t,e){try{var n="",r=e;do n+=Bb(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ip(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gk=typeof WeakMap=="function"?WeakMap:Map;function DS(t,e,n){n=or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ju||(ju=!0,pp=r),ip(t,e)},n}function NS(t,e,n){n=or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ip(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ip(t,e),typeof r!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function U_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ck.bind(null,t,e,n),e.then(t,t))}function z_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function B_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=or(-1,1),e.tag=2,Gr(n,e,1))),n.lanes|=1),t)}var mk=vr.ReactCurrentOwner,Ot=!1;function Pt(t,e,n,r){e.child=t===null?cS(e,null,n,r):eo(e,t.child,n,r)}function $_(t,e,n,r,i){n=n.render;var s=e.ref;return zs(e,i),r=Ag(t,e,n,r,s,i),n=Rg(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fr(t,e,i)):(Re&&n&&_g(e),e.flags|=1,Pt(t,e,r,i),e.child)}function H_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!zg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,LS(t,e,s,r,i)):(t=eu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qa,n(o,r)&&t.ref===e.ref)return fr(t,e,i)}return e.flags|=1,t=Xr(s,r),t.ref=e.ref,t.return=e,e.child=t}function LS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Qa(s,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,fr(t,e,i)}return sp(t,e,n,r,i)}function OS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Ns,$t),$t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Ns,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ie(Ns,$t),$t|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ie(Ns,$t),$t|=r;return Pt(t,e,i,n),e.child}function VS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sp(t,e,n,r,i){var s=Ft(n)?Hi:St.current;return s=Js(e,s),zs(e,i),n=Ag(t,e,n,r,s,i),r=Rg(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fr(t,e,i)):(Re&&r&&_g(e),e.flags|=1,Pt(t,e,n,i),e.child)}function W_(t,e,n,r,i){if(Ft(n)){var s=!0;Cu(e)}else s=!1;if(zs(e,i),e.stateNode===null)Xc(t,e),MS(e,n,r),rp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ln(c):(c=Ft(n)?Hi:St.current,c=Js(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&j_(e,o,r,c),Mr=!1;var f=e.memoizedState;o.state=f,Nu(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Vt.current||Mr?(typeof h=="function"&&(np(e,n,h,r),l=e.memoizedState),(a=Mr||F_(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,hS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:gn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ln(l):(l=Ft(n)?Hi:St.current,l=Js(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&j_(e,o,r,l),Mr=!1,f=e.memoizedState,o.state=f,Nu(e,r,o,i);var y=e.memoizedState;a!==d||f!==y||Vt.current||Mr?(typeof g=="function"&&(np(e,n,g,r),y=e.memoizedState),(c=Mr||F_(e,n,c,r,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return op(t,e,n,r,s,i)}function op(t,e,n,r,i,s){VS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&A_(e,n,!1),fr(t,e,s);r=e.stateNode,mk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=eo(e,t.child,null,s),e.child=eo(e,null,a,s)):Pt(t,e,a,s),e.memoizedState=r.state,i&&A_(e,n,!0),e.child}function FS(t){var e=t.stateNode;e.pendingContext?C_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C_(t,e.context,!1),bg(t,e.containerInfo)}function q_(t,e,n,r,i){return Zs(),wg(i),e.flags|=256,Pt(t,e,n,r),e.child}var ap={dehydrated:null,treeContext:null,retryLane:0};function lp(t){return{baseLanes:t,cachePool:null,transitions:null}}function jS(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ie(Ne,i&1),t===null)return ep(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ch(o,r,0,null),t=zi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lp(n),e.memoizedState=ap,t):Ng(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return yk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Xr(a,s):(s=zi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?lp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ap,r}return s=t.child,t=s.sibling,r=Xr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ng(t,e){return e=Ch({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gc(t,e,n,r){return r!==null&&wg(r),eo(e,t.child,null,n),t=Ng(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Wd(Error(z(422))),gc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ch({mode:"visible",children:r.children},i,0,null),s=zi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&eo(e,t.child,null,o),e.child.memoizedState=lp(o),e.memoizedState=ap,s);if(!(e.mode&1))return gc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=Wd(s,r,void 0),gc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ot||a){if(r=Ze,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,dr(t,i),Sn(r,t,i,-1))}return Ug(),r=Wd(Error(z(421))),gc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ak.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Wt=Kr(i.nextSibling),Kt=e,Re=!0,_n=null,t!==null&&(en[tn++]=tr,en[tn++]=nr,en[tn++]=Wi,tr=t.id,nr=t.overflow,Wi=e),e=Ng(e,r.children),e.flags|=4096,e)}function K_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tp(t.return,e,n)}function qd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function US(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Pt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&K_(t,n,e);else if(t.tag===19)K_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Lu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Lu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qd(e,!0,n,null,s);break;case"together":qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _k(t,e,n){switch(e.tag){case 3:FS(e),Zs();break;case 5:dS(e);break;case 1:Ft(e.type)&&Cu(e);break;case 4:bg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ie(Mu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?jS(t,e,n):(Ie(Ne,Ne.current&1),t=fr(t,e,n),t!==null?t.sibling:null);Ie(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return US(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ie(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,OS(t,e,n)}return fr(t,e,n)}var zS,cp,BS,$S;zS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cp=function(){};BS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ni(Ln.current);var s=null;switch(n){case"input":i=Rf(t,i),r=Rf(t,r),s=[];break;case"select":i=Oe({},i,{value:void 0}),r=Oe({},r,{value:void 0}),s=[];break;case"textarea":i=Nf(t,i),r=Nf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pu)}Of(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ba.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ba.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};$S=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zo(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vk(t,e,n){var r=e.pendingProps;switch(vg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Ft(e.type)&&ku(),gt(e),null;case 3:return r=e.stateNode,to(),Ae(Vt),Ae(St),kg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(yp(_n),_n=null))),cp(t,e),gt(e),null;case 5:Pg(e);var i=Ni(el.current);if(n=e.type,t!==null&&e.stateNode!=null)BS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return gt(e),null}if(t=Ni(Ln.current),fc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mn]=e,r[Ja]=s,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(i=0;i<ca.length;i++)Pe(ca[i],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":n_(r,s),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pe("invalid",r);break;case"textarea":i_(r,s),Pe("invalid",r)}Of(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&dc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&dc(r.textContent,a,t),i=["children",""+a]):Ba.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":ic(r),r_(r,s,!0);break;case"textarea":ic(r),s_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[Ja]=r,zS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vf(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),i=r;break;case"iframe":case"object":case"embed":Pe("load",t),i=r;break;case"video":case"audio":for(i=0;i<ca.length;i++)Pe(ca[i],t);i=r;break;case"source":Pe("error",t),i=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),i=r;break;case"details":Pe("toggle",t),i=r;break;case"input":n_(t,r),i=Rf(t,r),Pe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Oe({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":i_(t,r),i=Nf(t,r),Pe("invalid",t);break;default:i=r}Of(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?wE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_E(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&$a(t,l):typeof l=="number"&&$a(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ba.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pe("scroll",t):l!=null&&ig(t,s,l,o))}switch(n){case"input":ic(t),r_(t,r,!1);break;case"textarea":ic(t),s_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ri(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Vs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Vs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)$S(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ni(el.current),Ni(Ln.current),fc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(s=r.nodeValue!==n)&&(t=Kt,t!==null))switch(t.tag){case 3:dc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return gt(e),null;case 13:if(Ae(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Wt!==null&&e.mode&1&&!(e.flags&128))aS(),Zs(),e.flags|=98560,s=!1;else if(s=fc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Mn]=e}else Zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),s=!1}else _n!==null&&(yp(_n),_n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Qe===0&&(Qe=3):Ug())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return to(),cp(t,e),t===null&&Ya(e.stateNode.containerInfo),gt(e),null;case 10:return Tg(e.type._context),gt(e),null;case 17:return Ft(e.type)&&ku(),gt(e),null;case 19:if(Ae(Ne),s=e.memoizedState,s===null)return gt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Zo(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lu(t),o!==null){for(e.flags|=128,Zo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>ro&&(e.flags|=128,r=!0,Zo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Lu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Re)return gt(e),null}else 2*Be()-s.renderingStartTime>ro&&n!==1073741824&&(e.flags|=128,r=!0,Zo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=Ne.current,Ie(Ne,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return jg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function wk(t,e){switch(vg(e),e.tag){case 1:return Ft(e.type)&&ku(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return to(),Ae(Vt),Ae(St),kg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pg(e),null;case 13:if(Ae(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Ne),null;case 4:return to(),null;case 10:return Tg(e.type._context),null;case 22:case 23:return jg(),null;case 24:return null;default:return null}}var mc=!1,vt=!1,Ek=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ds(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function up(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var G_=!1;function Sk(t,e){if(Kf=Iu,t=GE(),yg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gf={focusedElem:t,selectionRange:n},Iu=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,S=y.memoizedState,w=e.stateNode,E=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:gn(e.type,v),S);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(M){Ue(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return y=G_,G_=!1,y}function Ca(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&up(e,n,s)}i=i.next}while(i!==r)}}function Ph(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function HS(t){var e=t.alternate;e!==null&&(t.alternate=null,HS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[Ja],delete e[Xf],delete e[ik],delete e[sk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function WS(t){return t.tag===5||t.tag===3||t.tag===4}function Q_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pu));else if(r!==4&&(t=t.child,t!==null))for(dp(t,e,n),t=t.sibling;t!==null;)dp(t,e,n),t=t.sibling}function fp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fp(t,e,n),t=t.sibling;t!==null;)fp(t,e,n),t=t.sibling}var rt=null,mn=!1;function Pr(t,e,n){for(n=n.child;n!==null;)qS(t,e,n),n=n.sibling}function qS(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(vh,n)}catch{}switch(n.tag){case 5:vt||Ds(n,e);case 6:var r=rt,i=mn;rt=null,Pr(t,e,n),rt=r,mn=i,rt!==null&&(mn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(mn?(t=rt,n=n.stateNode,t.nodeType===8?jd(t.parentNode,n):t.nodeType===1&&jd(t,n),Ka(t)):jd(rt,n.stateNode));break;case 4:r=rt,i=mn,rt=n.stateNode.containerInfo,mn=!0,Pr(t,e,n),rt=r,mn=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&up(n,e,o),i=i.next}while(i!==r)}Pr(t,e,n);break;case 1:if(!vt&&(Ds(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ue(n,e,a)}Pr(t,e,n);break;case 21:Pr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Pr(t,e,n),vt=r):Pr(t,e,n);break;default:Pr(t,e,n)}}function Y_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ek),e.forEach(function(r){var i=Rk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,mn=!1;break e;case 3:rt=a.stateNode.containerInfo,mn=!0;break e;case 4:rt=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(rt===null)throw Error(z(160));qS(s,o,i),rt=null,mn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ue(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)KS(e,t),e=e.sibling}function KS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pn(e,t),Pn(t),r&4){try{Ca(3,t,t.return),Ph(3,t)}catch(v){Ue(t,t.return,v)}try{Ca(5,t,t.return)}catch(v){Ue(t,t.return,v)}}break;case 1:pn(e,t),Pn(t),r&512&&n!==null&&Ds(n,n.return);break;case 5:if(pn(e,t),Pn(t),r&512&&n!==null&&Ds(n,n.return),t.flags&32){var i=t.stateNode;try{$a(i,"")}catch(v){Ue(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gE(i,s),Vf(a,o);var c=Vf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?wE(i,d):h==="dangerouslySetInnerHTML"?_E(i,d):h==="children"?$a(i,d):ig(i,h,d,c)}switch(a){case"input":Mf(i,s);break;case"textarea":mE(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Vs(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Vs(i,!!s.multiple,s.defaultValue,!0):Vs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ja]=s}catch(v){Ue(t,t.return,v)}}break;case 6:if(pn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ue(t,t.return,v)}}break;case 3:if(pn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ka(e.containerInfo)}catch(v){Ue(t,t.return,v)}break;case 4:pn(e,t),Pn(t);break;case 13:pn(e,t),Pn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Vg=Be())),r&4&&Y_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||h,pn(e,t),vt=c):pn(e,t),Pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(d=K=h;K!==null;){switch(f=K,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ca(4,f,f.return);break;case 1:Ds(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Ue(r,n,v)}}break;case 5:Ds(f,f.return);break;case 22:if(f.memoizedState!==null){J_(d);continue}}g!==null?(g.return=f,K=g):J_(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vE("display",o))}catch(v){Ue(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Ue(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pn(e,t),Pn(t),r&4&&Y_(t);break;case 21:break;default:pn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(WS(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($a(i,""),r.flags&=-33);var s=Q_(t);fp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Q_(t);dp(t,a,o);break;default:throw Error(z(161))}}catch(l){Ue(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Tk(t,e,n){K=t,GS(t)}function GS(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||mc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||vt;a=mc;var c=vt;if(mc=o,(vt=l)&&!c)for(K=i;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?Z_(i):l!==null?(l.return=o,K=l):Z_(i);for(;s!==null;)K=s,GS(s),s=s.sibling;K=i,mc=a,vt=c}X_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):X_(t)}}function X_(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Ph(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&L_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}L_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ka(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}vt||e.flags&512&&hp(e)}catch(f){Ue(e,e.return,f)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function J_(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Z_(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ph(4,e)}catch(l){Ue(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ue(e,i,l)}}var s=e.return;try{hp(e)}catch(l){Ue(e,s,l)}break;case 5:var o=e.return;try{hp(e)}catch(l){Ue(e,o,l)}}}catch(l){Ue(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var Ik=Math.ceil,Fu=vr.ReactCurrentDispatcher,Lg=vr.ReactCurrentOwner,an=vr.ReactCurrentBatchConfig,ge=0,Ze=null,We=null,ot=0,$t=0,Ns=di(0),Qe=0,il=null,Ki=0,kh=0,Og=0,Aa=null,Nt=null,Vg=0,ro=1/0,Jn=null,ju=!1,pp=null,Qr=null,yc=!1,Ur=null,Uu=0,Ra=0,gp=null,Jc=-1,Zc=0;function kt(){return ge&6?Be():Jc!==-1?Jc:Jc=Be()}function Yr(t){return t.mode&1?ge&2&&ot!==0?ot&-ot:ak.transition!==null?(Zc===0&&(Zc=ME()),Zc):(t=Se,t!==0||(t=window.event,t=t===void 0?16:jE(t.type)),t):1}function Sn(t,e,n,r){if(50<Ra)throw Ra=0,gp=null,Error(z(185));Sl(t,n,r),(!(ge&2)||t!==Ze)&&(t===Ze&&(!(ge&2)&&(kh|=n),Qe===4&&Nr(t,ot)),jt(t,r),n===1&&ge===0&&!(e.mode&1)&&(ro=Be()+500,Ih&&fi()))}function jt(t,e){var n=t.callbackNode;aP(t,e);var r=Tu(t,t===Ze?ot:0);if(r===0)n!==null&&l_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&l_(n),e===1)t.tag===0?ok(ev.bind(null,t)):iS(ev.bind(null,t)),nk(function(){!(ge&6)&&fi()}),n=null;else{switch(DE(r)){case 1:n=cg;break;case 4:n=AE;break;case 16:n=Su;break;case 536870912:n=RE;break;default:n=Su}n=nT(n,QS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function QS(t,e){if(Jc=-1,Zc=0,ge&6)throw Error(z(327));var n=t.callbackNode;if(Bs()&&t.callbackNode!==n)return null;var r=Tu(t,t===Ze?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zu(t,r);else{e=r;var i=ge;ge|=2;var s=XS();(Ze!==t||ot!==e)&&(Jn=null,ro=Be()+500,Ui(t,e));do try{Pk();break}catch(a){YS(t,a)}while(!0);Sg(),Fu.current=s,ge=i,We!==null?e=0:(Ze=null,ot=0,e=Qe)}if(e!==0){if(e===2&&(i=Bf(t),i!==0&&(r=i,e=mp(t,i))),e===1)throw n=il,Ui(t,0),Nr(t,r),jt(t,Be()),n;if(e===6)Nr(t,r);else{if(i=t.current.alternate,!(r&30)&&!xk(i)&&(e=zu(t,r),e===2&&(s=Bf(t),s!==0&&(r=s,e=mp(t,s))),e===1))throw n=il,Ui(t,0),Nr(t,r),jt(t,Be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:bi(t,Nt,Jn);break;case 3:if(Nr(t,r),(r&130023424)===r&&(e=Vg+500-Be(),10<e)){if(Tu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Yf(bi.bind(null,t,Nt,Jn),e);break}bi(t,Nt,Jn);break;case 4:if(Nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-En(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ik(r/1960))-r,10<r){t.timeoutHandle=Yf(bi.bind(null,t,Nt,Jn),r);break}bi(t,Nt,Jn);break;case 5:bi(t,Nt,Jn);break;default:throw Error(z(329))}}}return jt(t,Be()),t.callbackNode===n?QS.bind(null,t):null}function mp(t,e){var n=Aa;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=zu(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&yp(e)),t}function yp(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function xk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!In(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~Og,e&=~kh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-En(e),r=1<<n;t[n]=-1,e&=~r}}function ev(t){if(ge&6)throw Error(z(327));Bs();var e=Tu(t,0);if(!(e&1))return jt(t,Be()),null;var n=zu(t,e);if(t.tag!==0&&n===2){var r=Bf(t);r!==0&&(e=r,n=mp(t,r))}if(n===1)throw n=il,Ui(t,0),Nr(t,e),jt(t,Be()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bi(t,Nt,Jn),jt(t,Be()),null}function Fg(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(ro=Be()+500,Ih&&fi())}}function Gi(t){Ur!==null&&Ur.tag===0&&!(ge&6)&&Bs();var e=ge;ge|=1;var n=an.transition,r=Se;try{if(an.transition=null,Se=1,t)return t()}finally{Se=r,an.transition=n,ge=e,!(ge&6)&&fi()}}function jg(){$t=Ns.current,Ae(Ns)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tk(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(vg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ku();break;case 3:to(),Ae(Vt),Ae(St),kg();break;case 5:Pg(r);break;case 4:to();break;case 13:Ae(Ne);break;case 19:Ae(Ne);break;case 10:Tg(r.type._context);break;case 22:case 23:jg()}n=n.return}if(Ze=t,We=t=Xr(t.current,null),ot=$t=e,Qe=0,il=null,Og=kh=Ki=0,Nt=Aa=null,Di!==null){for(e=0;e<Di.length;e++)if(n=Di[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Di=null}return t}function YS(t,e){do{var n=We;try{if(Sg(),Qc.current=Vu,Ou){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ou=!1}if(qi=0,Je=Ke=Le=null,ka=!1,tl=0,Lg.current=null,n===null||n.return===null){Qe=1,il=e,We=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ot,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=z_(o);if(g!==null){g.flags&=-257,B_(g,o,a,s,e),g.mode&1&&U_(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){U_(s,c,e),Ug();break e}l=Error(z(426))}}else if(Re&&a.mode&1){var S=z_(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),B_(S,o,a,s,e),wg(no(l,a));break e}}s=l=no(l,a),Qe!==4&&(Qe=2),Aa===null?Aa=[s]:Aa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=DS(s,l,e);N_(s,w);break e;case 1:a=l;var E=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Qr===null||!Qr.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=NS(s,a,e);N_(s,M);break e}}s=s.return}while(s!==null)}ZS(n)}catch(D){e=D,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function XS(){var t=Fu.current;return Fu.current=Vu,t===null?Vu:t}function Ug(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Ze===null||!(Ki&268435455)&&!(kh&268435455)||Nr(Ze,ot)}function zu(t,e){var n=ge;ge|=2;var r=XS();(Ze!==t||ot!==e)&&(Jn=null,Ui(t,e));do try{bk();break}catch(i){YS(t,i)}while(!0);if(Sg(),ge=n,Fu.current=r,We!==null)throw Error(z(261));return Ze=null,ot=0,Qe}function bk(){for(;We!==null;)JS(We)}function Pk(){for(;We!==null&&!Jb();)JS(We)}function JS(t){var e=tT(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?ZS(t):We=e,Lg.current=null}function ZS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wk(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,We=null;return}}else if(n=vk(n,e,$t),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Qe===0&&(Qe=5)}function bi(t,e,n){var r=Se,i=an.transition;try{an.transition=null,Se=1,kk(t,e,n,r)}finally{an.transition=i,Se=r}return null}function kk(t,e,n,r){do Bs();while(Ur!==null);if(ge&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(lP(t,s),t===Ze&&(We=Ze=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yc||(yc=!0,nT(Su,function(){return Bs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=an.transition,an.transition=null;var o=Se;Se=1;var a=ge;ge|=4,Lg.current=null,Sk(t,n),KS(n,t),GP(Gf),Iu=!!Kf,Gf=Kf=null,t.current=n,Tk(n),Zb(),ge=a,Se=o,an.transition=s}else t.current=n;if(yc&&(yc=!1,Ur=t,Uu=i),s=t.pendingLanes,s===0&&(Qr=null),nP(n.stateNode),jt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ju)throw ju=!1,t=pp,pp=null,t;return Uu&1&&t.tag!==0&&Bs(),s=t.pendingLanes,s&1?t===gp?Ra++:(Ra=0,gp=t):Ra=0,fi(),null}function Bs(){if(Ur!==null){var t=DE(Uu),e=an.transition,n=Se;try{if(an.transition=null,Se=16>t?16:t,Ur===null)var r=!1;else{if(t=Ur,Ur=null,Uu=0,ge&6)throw Error(z(331));var i=ge;for(ge|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Ca(8,h,s)}var d=h.child;if(d!==null)d.return=h,K=d;else for(;K!==null;){h=K;var f=h.sibling,g=h.return;if(HS(h),h===c){K=null;break}if(f!==null){f.return=g,K=f;break}K=g}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ca(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,K=w;break e}K=s.return}}var E=t.current;for(K=E;K!==null;){o=K;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,K=b;else e:for(o=E;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ph(9,a)}}catch(D){Ue(a,a.return,D)}if(a===o){K=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,K=M;break e}K=a.return}}if(ge=i,fi(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(vh,t)}catch{}r=!0}return r}finally{Se=n,an.transition=e}}return!1}function tv(t,e,n){e=no(n,e),e=DS(t,e,1),t=Gr(t,e,1),e=kt(),t!==null&&(Sl(t,1,e),jt(t,e))}function Ue(t,e,n){if(t.tag===3)tv(t,t,n);else for(;e!==null;){if(e.tag===3){tv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qr===null||!Qr.has(r))){t=no(n,t),t=NS(e,t,1),e=Gr(e,t,1),t=kt(),e!==null&&(Sl(e,1,t),jt(e,t));break}}e=e.return}}function Ck(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(ot&n)===n&&(Qe===4||Qe===3&&(ot&130023424)===ot&&500>Be()-Vg?Ui(t,0):Og|=n),jt(t,e)}function eT(t,e){e===0&&(t.mode&1?(e=ac,ac<<=1,!(ac&130023424)&&(ac=4194304)):e=1);var n=kt();t=dr(t,e),t!==null&&(Sl(t,e,n),jt(t,n))}function Ak(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eT(t,n)}function Rk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),eT(t,n)}var tT;tT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,_k(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Re&&e.flags&1048576&&sS(e,Ru,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xc(t,e),t=e.pendingProps;var i=Js(e,St.current);zs(e,n),i=Ag(null,e,r,t,i,n);var s=Rg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(s=!0,Cu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xg(e),i.updater=bh,e.stateNode=i,i._reactInternals=e,rp(e,r,t,n),e=op(null,e,r,!0,s,n)):(e.tag=0,Re&&s&&_g(e),Pt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Dk(r),t=gn(r,t),i){case 0:e=sp(null,e,r,t,n);break e;case 1:e=W_(null,e,r,t,n);break e;case 11:e=$_(null,e,r,t,n);break e;case 14:e=H_(null,e,r,gn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),sp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),W_(t,e,r,i,n);case 3:e:{if(FS(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,hS(t,e),Nu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=no(Error(z(423)),e),e=q_(t,e,r,n,i);break e}else if(r!==i){i=no(Error(z(424)),e),e=q_(t,e,r,n,i);break e}else for(Wt=Kr(e.stateNode.containerInfo.firstChild),Kt=e,Re=!0,_n=null,n=cS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zs(),r===i){e=fr(t,e,n);break e}Pt(t,e,r,n)}e=e.child}return e;case 5:return dS(e),t===null&&ep(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Qf(r,i)?o=null:s!==null&&Qf(r,s)&&(e.flags|=32),VS(t,e),Pt(t,e,o,n),e.child;case 6:return t===null&&ep(e),null;case 13:return jS(t,e,n);case 4:return bg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=eo(e,null,r,n):Pt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),$_(t,e,r,i,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ie(Mu,r._currentValue),r._currentValue=o,s!==null)if(In(s.value,o)){if(s.children===i.children&&!Vt.current){e=fr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=or(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),tp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Pt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zs(e,n),i=ln(i),r=r(i),e.flags|=1,Pt(t,e,r,n),e.child;case 14:return r=e.type,i=gn(r,e.pendingProps),i=gn(r.type,i),H_(t,e,r,i,n);case 15:return LS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),Xc(t,e),e.tag=1,Ft(r)?(t=!0,Cu(e)):t=!1,zs(e,n),MS(e,r,i),rp(e,r,i,n),op(null,e,r,!0,t,n);case 19:return US(t,e,n);case 22:return OS(t,e,n)}throw Error(z(156,e.tag))};function nT(t,e){return CE(t,e)}function Mk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,r){return new Mk(t,e,n,r)}function zg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dk(t){if(typeof t=="function")return zg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===og)return 11;if(t===ag)return 14}return 2}function Xr(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function eu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")zg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Is:return zi(n.children,i,s,e);case sg:o=8,i|=8;break;case Pf:return t=sn(12,n,e,i|2),t.elementType=Pf,t.lanes=s,t;case kf:return t=sn(13,n,e,i),t.elementType=kf,t.lanes=s,t;case Cf:return t=sn(19,n,e,i),t.elementType=Cf,t.lanes=s,t;case dE:return Ch(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uE:o=10;break e;case hE:o=9;break e;case og:o=11;break e;case ag:o=14;break e;case Rr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=sn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zi(t,e,n,r){return t=sn(7,t,r,e),t.lanes=n,t}function Ch(t,e,n,r){return t=sn(22,t,r,e),t.elementType=dE,t.lanes=n,t.stateNode={isHidden:!1},t}function Kd(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function Gd(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kd(0),this.expirationTimes=kd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bg(t,e,n,r,i,s,o,a,l){return t=new Nk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=sn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xg(s),t}function Lk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rT(t){if(!t)return ii;t=t._reactInternals;e:{if(ns(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Ft(n))return rS(t,n,e)}return e}function iT(t,e,n,r,i,s,o,a,l){return t=Bg(n,r,!0,t,i,s,o,a,l),t.context=rT(null),n=t.current,r=kt(),i=Yr(n),s=or(r,i),s.callback=e??null,Gr(n,s,i),t.current.lanes=i,Sl(t,i,r),jt(t,r),t}function Ah(t,e,n,r){var i=e.current,s=kt(),o=Yr(i);return n=rT(n),e.context===null?e.context=n:e.pendingContext=n,e=or(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gr(i,e,o),t!==null&&(Sn(t,i,o,s),Gc(t,i,o)),o}function Bu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $g(t,e){nv(t,e),(t=t.alternate)&&nv(t,e)}function Ok(){return null}var sT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hg(t){this._internalRoot=t}Rh.prototype.render=Hg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Ah(t,e,null,null)};Rh.prototype.unmount=Hg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gi(function(){Ah(null,t,null,null)}),e[hr]=null}};function Rh(t){this._internalRoot=t}Rh.prototype.unstable_scheduleHydration=function(t){if(t){var e=OE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dr.length&&e!==0&&e<Dr[n].priority;n++);Dr.splice(n,0,t),n===0&&FE(t)}};function Wg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rv(){}function Vk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Bu(o);s.call(c)}}var o=iT(e,r,t,0,null,!1,!1,"",rv);return t._reactRootContainer=o,t[hr]=o.current,Ya(t.nodeType===8?t.parentNode:t),Gi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Bu(l);a.call(c)}}var l=Bg(t,0,!1,null,null,!1,!1,"",rv);return t._reactRootContainer=l,t[hr]=l.current,Ya(t.nodeType===8?t.parentNode:t),Gi(function(){Ah(e,l,n,r)}),l}function Dh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Bu(o);a.call(l)}}Ah(e,o,t,i)}else o=Vk(n,e,t,i,r);return Bu(o)}NE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=la(e.pendingLanes);n!==0&&(ug(e,n|1),jt(e,Be()),!(ge&6)&&(ro=Be()+500,fi()))}break;case 13:Gi(function(){var r=dr(t,1);if(r!==null){var i=kt();Sn(r,t,1,i)}}),$g(t,1)}};hg=function(t){if(t.tag===13){var e=dr(t,134217728);if(e!==null){var n=kt();Sn(e,t,134217728,n)}$g(t,134217728)}};LE=function(t){if(t.tag===13){var e=Yr(t),n=dr(t,e);if(n!==null){var r=kt();Sn(n,t,e,r)}$g(t,e)}};OE=function(){return Se};VE=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};jf=function(t,e,n){switch(e){case"input":if(Mf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Th(r);if(!i)throw Error(z(90));pE(r),Mf(r,i)}}}break;case"textarea":mE(t,n);break;case"select":e=n.value,e!=null&&Vs(t,!!n.multiple,e,!1)}};TE=Fg;IE=Gi;var Fk={usingClientEntryPoint:!1,Events:[Il,ks,Th,EE,SE,Fg]},ea={findFiberByHostInstance:Mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jk={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=PE(t),t===null?null:t.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||Ok,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{vh=_c.inject(jk),Nn=_c}catch{}}Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fk;Qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wg(e))throw Error(z(200));return Lk(t,e,null,n)};Qt.createRoot=function(t,e){if(!Wg(t))throw Error(z(299));var n=!1,r="",i=sT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Bg(t,1,!1,null,null,n,!1,r,i),t[hr]=e.current,Ya(t.nodeType===8?t.parentNode:t),new Hg(e)};Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=PE(e),t=t===null?null:t.stateNode,t};Qt.flushSync=function(t){return Gi(t)};Qt.hydrate=function(t,e,n){if(!Mh(e))throw Error(z(200));return Dh(null,t,e,!0,n)};Qt.hydrateRoot=function(t,e,n){if(!Wg(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iT(e,null,t,1,n??null,i,!1,s,o),t[hr]=e.current,Ya(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rh(e)};Qt.render=function(t,e,n){if(!Mh(e))throw Error(z(200));return Dh(null,t,e,!1,n)};Qt.unmountComponentAtNode=function(t){if(!Mh(t))throw Error(z(40));return t._reactRootContainer?(Gi(function(){Dh(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1};Qt.unstable_batchedUpdates=Fg;Qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mh(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Dh(t,e,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426";function oT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oT)}catch(t){console.error(t)}}oT(),oE.exports=Qt;var aT=oE.exports,lT,iv=aT;lT=iv.createRoot,iv.hydrateRoot;const sv="pushstate",ov="popstate",cT="beforeunload",uT=t=>(t.preventDefault(),t.returnValue=""),Uk=()=>{removeEventListener(cT,uT,{capture:!0})};function hT(t){let e=t.getLocation();const n=new Set;let r=[];const i=()=>{e=t.getLocation(),n.forEach(o=>o({location:e}))},s=async(o,a)=>{var l;if(!((a==null?void 0:a.ignoreBlocker)??!1)&&typeof document<"u"&&r.length){for(const h of r)if(!await h()){(l=t.onBlocked)==null||l.call(t,i);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,a,l)=>{a=av(a),s(()=>{t.pushState(o,a),i()},l)},replace:(o,a,l)=>{a=av(a),s(()=>{t.replaceState(o,a),i()},l)},go:(o,a)=>{s(()=>{t.go(o),i()},a)},back:o=>{s(()=>{t.back(),i()},o)},forward:o=>{s(()=>{t.forward(),i()},o)},createHref:o=>t.createHref(o),block:o=>(r.push(o),r.length===1&&addEventListener(cT,uT,{capture:!0}),()=>{r=r.filter(a=>a!==o),r.length||Uk()}),flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:i}}function av(t){return t||(t={}),{...t,key:$k()}}function zk(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState,i=v=>v,s=()=>$u(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let o=s(),a;const l=()=>o;let c,h;const d=()=>{c&&(y._ignoreSubscribers=!0,(c.isPush?e.history.pushState:e.history.replaceState)(c.state,"",c.href),y._ignoreSubscribers=!1,c=void 0,h=void 0,a=void 0)},f=(v,S,w)=>{const E=i(S);h||(a=o),o=$u(S,w),c={href:E,state:w,isPush:(c==null?void 0:c.isPush)||v==="push"},h||(h=Promise.resolve().then(()=>d()))},g=()=>{o=s(),y.notify()},y=hT({getLocation:l,getLength:()=>e.history.length,pushState:(v,S)=>f("push",v,S),replaceState:(v,S)=>f("replace",v,S),back:()=>e.history.back(),forward:()=>e.history.forward(),go:v=>e.history.go(v),createHref:v=>i(v),flush:d,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(sv,g),e.removeEventListener(ov,g)},onBlocked:v=>{a&&o!==a&&(o=a,v())}});return e.addEventListener(sv,g),e.addEventListener(ov,g),e.history.pushState=function(...v){const S=n.apply(e.history,v);return y._ignoreSubscribers||g(),S},e.history.replaceState=function(...v){const S=r.apply(e.history,v);return y._ignoreSubscribers||g(),S},y}function Bk(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex??e.length-1;const r=e.map(()=>({}));return hT({getLocation:()=>$u(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function $u(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{}}}function $k(){return(Math.random()+1).toString(36).substring(7)}var Hk="Invariant failed";function Dt(t,e){if(!t)throw new Error(Hk)}const Qd=j.createContext(null);function dT(){return typeof document>"u"?Qd:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Qd,Qd)}function wr(t){const e=j.useContext(dT());return t==null||t.warn,e}var fT={exports:{}},pT={},gT={exports:{}},mT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var io=j;function Wk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qk=typeof Object.is=="function"?Object.is:Wk,Kk=io.useState,Gk=io.useEffect,Qk=io.useLayoutEffect,Yk=io.useDebugValue;function Xk(t,e){var n=e(),r=Kk({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Qk(function(){i.value=n,i.getSnapshot=e,Yd(i)&&s({inst:i})},[t,n,e]),Gk(function(){return Yd(i)&&s({inst:i}),t(function(){Yd(i)&&s({inst:i})})},[t]),Yk(n),n}function Yd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qk(t,n)}catch{return!0}}function Jk(t,e){return e()}var Zk=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jk:Xk;mT.useSyncExternalStore=io.useSyncExternalStore!==void 0?io.useSyncExternalStore:Zk;gT.exports=mT;var eC=gT.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh=j,tC=eC;function nC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rC=typeof Object.is=="function"?Object.is:nC,iC=tC.useSyncExternalStore,sC=Nh.useRef,oC=Nh.useEffect,aC=Nh.useMemo,lC=Nh.useDebugValue;pT.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=sC(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=aC(function(){function l(g){if(!c){if(c=!0,h=g,g=r(g),i!==void 0&&o.hasValue){var y=o.value;if(i(y,g))return d=y}return d=g}if(y=d,rC(h,g))return y;var v=r(g);return i!==void 0&&i(y,v)?(h=g,y):(h=g,d=v)}var c=!1,h,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=iC(t,s[0],s[1]);return oC(function(){o.hasValue=!0,o.value=a},[a]),lC(a),a};fT.exports=pT;var cC=fT.exports;class uC{constructor(e,n){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o==null||o()}},this.setState=r=>{var i,s,o;const a=this.state;this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(a)(r):r(a),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),this._flush()},this._flush=()=>{if(this._batching)return;const r=++this._flushing;this.listeners.forEach(i=>{this._flushing===r&&i()})},this.batch=r=>{if(this._batching)return r();this._batching=!0,r(),this._batching=!1,this._flush()},this.state=e,this.options=n}}function hC(t,e=n=>n){return cC.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,dC)}function dC(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}const Ht="__root__";function fC(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function lv(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function pC(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const a=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],lv(a)):i[r]=lv(a)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const gC=yC(JSON.parse),mC=_C(JSON.stringify,JSON.parse);function yC(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=pC(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function _C(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=fC(r).toString();return i?`?${i}`:""}}function Ma(t){return t[t.length-1]}function vC(t){return typeof t=="function"}function Ls(t,e){return vC(t)?t(e):t}function tu(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Zt(t,e){if(t===e)return t;const n=e,r=uv(t)&&uv(n);if(r||so(t)&&so(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),a=o.length,l=r?[]:{};let c=0;for(let h=0;h<a;h++){const d=r?h:o[h];(!r&&i.includes(d)||r)&&t[d]===void 0&&n[d]===void 0?(l[d]=void 0,c++):(l[d]=Zt(t[d],n[d]),l[d]===t[d]&&t[d]!==void 0&&c++)}return s===a&&c===s?t:l}return n}function so(t){if(!cv(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!cv(n)||!n.hasOwnProperty("isPrototypeOf"))}function cv(t){return Object.prototype.toString.call(t)==="[object Object]"}function uv(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function hv(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function $s(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(so(t)&&so(e)){const r=(n==null?void 0:n.ignoreUndefined)??!0,i=hv(t,r),s=hv(e,r);return!(n!=null&&n.partial)&&i.length!==s.length?!1:s.every(o=>$s(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!$s(r,e[i],n)):!1}const ua=typeof window<"u"?j.useLayoutEffect:j.useEffect;function _s(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t==null||t(i)},r.reject=i=>{r.status="rejected",n(i)},r}function Xd(t){const e=j.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function wC(t,e,n={},r={}){const i=j.useRef(typeof IntersectionObserver=="function"),s=j.useRef(null);return j.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function EC(t){const e=j.useRef(null);return j.useEffect(()=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)}),e}function ar(t){return Lh(t.filter(e=>e!==void 0).join("/"))}function Lh(t){return t.replace(/\/{2,}/g,"/")}function qg(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function Li(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function SC(t){return Li(qg(t))}function Hu(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function TC(t,e,n){return Hu(t,n)===Hu(e,n)}function IC({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=Wu(t,e,i),n=Wu(t,n,i);let a=oo(e);const l=oo(n);a.length>1&&((s=Ma(a))==null?void 0:s.value)==="/"&&a.pop(),l.forEach((h,d)=>{h.value==="/"?d?d===l.length-1&&a.push(h):a=[h]:h.value===".."?a.pop():h.value==="."||a.push(h)}),a.length>1&&(((o=Ma(a))==null?void 0:o.value)==="/"?r==="never"&&a.pop():r==="always"&&a.push({type:"pathname",value:"/"}));const c=ar([t,...a.map(h=>h.value)]);return Lh(c)}function oo(t){if(!t)return[];t=Lh(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function vc({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=oo(t),o={};for(const[a,l]of Object.entries(e)){const c=typeof l=="string";["*","_splat"].includes(a)?o[a]=c?encodeURI(l):l:o[a]=c?xC(l,i):l}return ar(s.map(a=>{if(a.type==="wildcard"){const l=o._splat;return n?`${a.value}${l??""}`:l}if(a.type==="param"){if(r){const l=o[a.value];return`${a.value}${l??""}`}return o[a.value.substring(1)]??"undefined"}return a.value}))}function xC(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function wc(t,e,n){const r=bC(t,e,n);if(!(n.to&&!r))return r??{}}function Wu(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function bC(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=Wu(t,e,n.caseSensitive);const r=Wu(t,`${n.to??"$"}`,n.caseSensitive),i=oo(e),s=oo(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let l=0;l<Math.max(i.length,s.length);l++){const c=i[l],h=s[l],d=l>=i.length-1,f=l>=s.length-1;if(h){if(h.type==="wildcard"){const g=decodeURI(ar(i.slice(l).map(y=>y.value)));return o["*"]=g,o._splat=g,!0}if(h.type==="pathname"){if(h.value==="/"&&!(c!=null&&c.value))return!0;if(c){if(n.caseSensitive){if(h.value!==c.value)return!1}else if(h.value.toLowerCase()!==c.value.toLowerCase())return!1}}if(!c)return!1;if(h.type==="param"){if(c.value==="/")return!1;c.value.charAt(0)!=="$"&&(o[h.value.substring(1)]=decodeURIComponent(c.value))}}if(!d&&f)return o["**"]=ar(i.slice(l+1).map(g=>g.value)),!!n.fuzzy&&(h==null?void 0:h.value)!=="/"}return!0})()?o:void 0}function PC(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},t.throw)throw t;return t}function Pi(t){return!!(t!=null&&t.isRedirect)}function Jd(t){return!!(t!=null&&t.isRedirect)&&t.href}function Kg(t){const e=t.errorComponent??Oh;return k.jsx(kC,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?j.createElement(e,{error:n,reset:r}):t.children})}class kC extends j.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Oh({error:t}){const[e,n]=j.useState(!1);return k.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[k.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),k.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),k.jsx("div",{style:{height:".25rem"}}),e?k.jsx("div",{children:k.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?k.jsx("code",{children:t.message}):null})}):null]})}function Ut(t){const e=wr({warn:(t==null?void 0:t.router)===void 0}),n=(t==null?void 0:t.router)||e,r=j.useRef();return hC(n.__store,i=>{if(t!=null&&t.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=Zt(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}function yn(t){return!!(t!=null&&t.isNotFound)}function CC(t){const e=Ut({select:n=>`not-found-${n.location.pathname}-${n.status}`});return k.jsx(Kg,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(yn(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(yn(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function AC(){return k.jsx("p",{children:"Not Found"})}const RC={stringify:t=>JSON.stringify(t,function(n,r){const i=this[n],s=dv.find(o=>o.stringifyCondition(i));return s?s.stringify(i):r}),parse:t=>JSON.parse(t,function(n,r){const i=this[n],s=dv.find(o=>o.parseCondition(i));return s?s.parse(i):r})},dv=[{stringifyCondition:t=>t instanceof Date,stringify:t=>({$date:t.toISOString()}),parseCondition:t=>so(t)&&t.$date,parse:t=>new Date(t.$date)},{stringifyCondition:t=>t===void 0,stringify:()=>({$undefined:""}),parseCondition:t=>so(t)&&t.$undefined==="",parse:()=>{}}],yT=["component","errorComponent","pendingComponent","notFoundComponent"];function MC(t){var e;for(const n of yT)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function Zd(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new _p("Async validation not supported");if(n.issues)throw new _p(JSON.stringify(n.issues,void 0,2));return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function DC(t){return new NC(t)}class NC{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${SC(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?Bk({initialEntries:[this.basepath||"/"]}):zk()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new uC(OC(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((a,l)=>{a.init({originalIndex:l,defaultSsr:this.options.defaultSsr});const c=this.routesById[a.id];if(Dt(!c,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const d=Li(a.fullPath);(!this.routesByPath[d]||a.fullPath.endsWith("/"))&&(this.routesByPath[d]=a)}const h=a.children;h!=null&&h.length&&r(h)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,a)=>{var l;if(o.isRoot||!o.path)return;const c=qg(o.fullPath),h=oo(c);for(;h.length>1&&((l=h[0])==null?void 0:l.value)==="/";)h.shift();const d=h.map(f=>f.value==="/"?.75:f.type==="param"?.5:f.type==="wildcard"?.25:1);i.push({child:o,trimmed:c,parsed:h,index:a,scores:d})}),this.flatRoutes=i.sort((o,a)=>{const l=Math.min(o.scores.length,a.scores.length);for(let c=0;c<l;c++)if(o.scores[c]!==a.scores[c])return a.scores[c]-o.scores[c];if(o.scores.length!==a.scores.length)return a.scores.length-o.scores.length;for(let c=0;c<l;c++)if(o.parsed[c].value!==a.parsed[c].value)return o.parsed[c].value>a.parsed[c].value?1:-1;return o.index-a.index}).map((o,a)=>(o.child.rank=a,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=n=>{const r=({pathname:a,search:l,hash:c,state:h})=>{const d=this.options.parseSearch(l),f=this.options.stringifySearch(d);return{pathname:a,searchStr:f,search:Zt(n==null?void 0:n.search,d),hash:c.split("#").reverse()[0]??"",href:`${a}${f}${c}`,state:Zt(n==null?void 0:n.state,h)}},i=r(this.history.location),{__tempLocation:s,__tempKey:o}=i.state;if(s&&(!o||o===this.tempLocationKey)){const a=r(s);return a.state.key=i.state.key,delete a.state.__tempLocation,{...a,maskedLocation:i}}return i},this.resolvePathWithBase=(n,r)=>IC({basepath:this.basepath,base:n,to:Lh(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=Li(n.pathname),o=h=>wc(this.basepath,s,{to:h.fullPath,caseSensitive:h.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let a=(r==null?void 0:r.to)!==void 0?this.routesByPath[r.to]:void 0;a?i=o(a):a=this.flatRoutes.find(h=>{const d=o(h);return d?(i=d,!0):!1});let l=a||this.routesById[Ht];const c=[l];for(;l.parentRoute;)l=l.parentRoute,c.unshift(l);return{matchedRoutes:c,routeParams:i,foundRoute:a}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var a,l,c,h,d,f;const g=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,y=s.from!=null?g.find(A=>wc(this.basepath,Li(A.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,v=(y==null?void 0:y.pathname)||this.latestLocation.pathname;Dt(s.from==null||y!=null,"Could not find match for from: "+s.from);const S=(a=this.state.pendingMatches)!=null&&a.length?(l=Ma(this.state.pendingMatches))==null?void 0:l.search:((c=Ma(g))==null?void 0:c.search)||this.latestLocation.search,w=o==null?void 0:o.matchedRoutes.filter(A=>g.find(R=>R.routeId===A.id));let E;if(s.to)E=this.resolvePathWithBase(v,`${s.to}`);else{const A=this.routesById[(h=w==null?void 0:w.find(R=>{const C=vc({path:R.fullPath,params:(o==null?void 0:o.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap});return ar([this.basepath,C])===v}))==null?void 0:h.id];E=this.resolvePathWithBase(v,(A==null?void 0:A.to)??v)}const b={...(d=Ma(g))==null?void 0:d.params};let M=(s.params??!0)===!0?b:{...b,...Ls(s.params,b)};Object.keys(M).length>0&&(o==null||o.matchedRoutes.map(A=>{var R;return((R=A.options.params)==null?void 0:R.stringify)??A.options.stringifyParams}).filter(Boolean).forEach(A=>{M={...M,...A(M)}})),E=vc({path:E,params:M??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let D=S;if(n._includeValidateSearch&&((f=this.options.search)!=null&&f.strict)){let A={};o==null||o.matchedRoutes.forEach(R=>{try{R.options.validateSearch&&(A={...A,...Zd(R.options.validateSearch,{...A,...D})??{}})}catch{}}),D=A}D=(A=>{const R=(o==null?void 0:o.matchedRoutes.reduce((X,Z)=>{var ae;const U=[];if("search"in Z.options)(ae=Z.options.search)!=null&&ae.middlewares&&U.push(...Z.options.search.middlewares);else if(Z.options.preSearchFilters||Z.options.postSearchFilters){const $=({search:G,next:oe})=>{let Q=G;"preSearchFilters"in Z.options&&Z.options.preSearchFilters&&(Q=Z.options.preSearchFilters.reduce((ce,se)=>se(ce),G));const te=oe(Q);return"postSearchFilters"in Z.options&&Z.options.postSearchFilters?Z.options.postSearchFilters.reduce((ce,se)=>se(ce),te):te};U.push($)}if(n._includeValidateSearch&&Z.options.validateSearch){const $=({search:G,next:oe})=>{try{const Q=oe(G);return{...Q,...Zd(Z.options.validateSearch,Q)??{}}}catch{}};U.push($)}return X.concat(U)},[]))??[],C=({search:X})=>s.search?s.search===!0?X:Ls(s.search,X):{};R.push(C);const q=(X,Z)=>{if(X>=R.length)return Z;const ae=R[X];return ae({search:Z,next:$=>q(X+1,$)})};return q(0,A)})(D),D=Zt(S,D);const T=this.options.stringifySearch(D),_=s.hash===!0?this.latestLocation.hash:s.hash?Ls(s.hash,this.latestLocation.hash):void 0,I=_?`#${_}`:"";let P=s.state===!0?this.latestLocation.state:s.state?Ls(s.state,this.latestLocation.state):{};return P=Zt(this.latestLocation.state,P),{pathname:E,search:D,searchStr:T,state:P,hash:_??"",href:`${E}${T}${I}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var a;const l=r(s);let c=o?r(o):void 0;if(!c){let f={};const g=(a=this.options.routeMasks)==null?void 0:a.find(y=>{const v=wc(this.basepath,l.pathname,{to:y.from,caseSensitive:!1,fuzzy:!1});return v?(f=v,!0):!1});if(g){const{from:y,...v}=g;o={...tu(n,["from"]),...v,params:f},c=r(o)}}const h=this.getMatchedRoutes(l,s),d=r(s,h);if(c){const f=this.getMatchedRoutes(c,o),g=r(o,f);d.maskedLocation=g}return d};return n.mask?i(n,{...tu(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const l=$s(i.state,this.latestLocation.state);return delete i.state.key,l},o=this.latestLocation.href===i.href,a=this.commitLocationPromise;if(this.commitLocationPromise=_s(()=>{a==null||a.resolve()}),o&&s())this.load();else{let{maskedLocation:l,...c}=i;l&&(c={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...c,search:c.searchStr,state:{...c.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(c.unmaskOnReload??this.options.unmaskOnReload??!1)&&(c.state.__tempKey=this.tempLocationKey)),this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](c.href,c.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,viewTransition:i,ignoreBlocker:s,...o}={})=>{const a=o.href;if(a){const c=$u(a,{});o.to=c.pathname,o.search=this.options.parseSearch(c.search),o.hash=c.hash.slice(1)}const l=this.buildLocation({...o,_includeValidateSearch:!0});return this.commitLocation({...l,viewTransition:i,replace:n,resetScroll:r,ignoreBlocker:s})},this.navigate=({to:n,...r})=>{const i=String(n);let s;try{new URL(`${i}`),s=!0}catch{}return Dt(!s),this.buildAndCommitLocation({...r,to:n})},this.load=async()=>{this.latestLocation=this.parseLocation(this.latestLocation);let n,r,i;for(i=new Promise(s=>{this.startReactTransition(async()=>{var o;try{const a=this.latestLocation,l=this.state.resolvedLocation,c=l.href!==a.href,h=l.pathname!==a.pathname;this.cancelMatches();let d;this.__store.batch(()=>{d=this.matchRoutes(a),this.__store.setState(f=>({...f,status:"pending",isLoading:!0,location:a,pendingMatches:d,cachedMatches:f.cachedMatches.filter(g=>!d.find(y=>y.id===g.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:l,toLocation:a,pathChanged:h,hrefChanged:c}),this.emit({type:"onBeforeLoad",fromLocation:l,toLocation:a,pathChanged:h,hrefChanged:c}),await this.loadMatches({matches:d,location:a,onReady:async()=>{this.startViewTransition(async()=>{let f,g,y;this.__store.batch(()=>{this.__store.setState(v=>{const S=v.matches,w=v.pendingMatches||v.matches;return f=S.filter(E=>!w.find(b=>b.id===E.id)),g=w.filter(E=>!S.find(b=>b.id===E.id)),y=S.filter(E=>w.find(b=>b.id===E.id)),{...v,isLoading:!1,loadedAt:Date.now(),matches:w,pendingMatches:void 0,cachedMatches:[...v.cachedMatches,...f.filter(E=>E.status!=="error")]}}),this.clearExpiredCache()}),[[f,"onLeave"],[g,"onEnter"],[y,"onStay"]].forEach(([v,S])=>{v.forEach(w=>{var E,b;(b=(E=this.looseRoutesById[w.routeId].options)[S])==null||b.call(E,w)})})})}})}catch(a){Jd(a)?(n=a,this.isServer||this.navigate({...a,replace:!0,ignoreBlocker:!0})):yn(a)&&(r=a),this.__store.setState(l=>({...l,statusCode:n?n.statusCode:r?404:l.matches.some(c=>c.status==="error")?500:200,redirect:n}))}this.latestLoadPromise===i&&((o=this.commitLocationPromise)==null||o.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),s()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(h=>h.id===n),a=this.state.matches.find(h=>h.id===n),l=this.state.cachedMatches.find(h=>h.id===n),c=o?"pendingMatches":a?"matches":l?"cachedMatches":"";return c&&this.__store.setState(h=>{var d;return{...h,[c]:(d=h[c])==null?void 0:d.map(f=>f.id===n?s=r(f):f)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch})=>{let a,l=!1;const c=async()=>{l||(l=!0,await(s==null?void 0:s()))},h=f=>!!(i&&!this.state.matches.find(g=>g.id===f));!this.isServer&&!this.state.matches.length&&c();const d=(f,g)=>{var y,v,S;if(Jd(g))throw g;if(Pi(g)||yn(g)){if(o(f.id,w=>({...w,status:Pi(g)?"redirected":yn(g)?"notFound":"error",isFetching:!1,error:g,beforeLoadPromise:void 0,loaderPromise:void 0})),g.routeId||(g.routeId=f.routeId),(y=f.beforeLoadPromise)==null||y.resolve(),(v=f.loaderPromise)==null||v.resolve(),(S=f.loadPromise)==null||S.resolve(),Pi(g))throw l=!0,g=this.resolveRedirect({...g,_fromLocation:n}),g;if(yn(g))throw this._handleNotFound(r,g,{updateMatch:o}),g}};try{await new Promise((f,g)=>{(async()=>{var y,v,S;try{const w=(M,D,L)=>{var T,_;const{id:I,routeId:P}=r[M],A=this.looseRoutesById[P];if(D instanceof Promise)throw D;D.routerCode=L,a=a??M,d(this.getMatch(I),D);try{(_=(T=A.options).onError)==null||_.call(T,D)}catch(R){D=R,d(this.getMatch(I),D)}o(I,R=>{var C,q;return(C=R.beforeLoadPromise)==null||C.resolve(),(q=R.loadPromise)==null||q.resolve(),{...R,error:D,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[M,{id:D,routeId:L}]of r.entries()){const T=this.getMatch(D),_=(y=r[M-1])==null?void 0:y.id,I=this.looseRoutesById[L],P=I.options.pendingMs??this.options.defaultPendingMs,A=!!(s&&!this.isServer&&!h(D)&&(I.options.loader||I.options.beforeLoad)&&typeof P=="number"&&P!==1/0&&(I.options.pendingComponent??this.options.defaultPendingComponent));let R=!0;if((T.beforeLoadPromise||T.loaderPromise)&&(A&&setTimeout(()=>{try{c()}catch{}},P),await T.beforeLoadPromise,R=this.getMatch(D).status!=="success"),R){try{o(D,se=>({...se,loadPromise:_s(()=>{var me;(me=se.loadPromise)==null||me.resolve()}),beforeLoadPromise:_s()}));const C=new AbortController;let q;A&&(q=setTimeout(()=>{try{c()}catch{}},P));const{paramsError:X,searchError:Z}=this.getMatch(D);X&&w(M,X,"PARSE_PARAMS"),Z&&w(M,Z,"VALIDATE_SEARCH");const ae=()=>_?this.getMatch(_).context:this.options.context??{};o(D,se=>({...se,isFetching:"beforeLoad",fetchCount:se.fetchCount+1,abortController:C,pendingTimeout:q,context:{...ae(),...se.__routeContext,...se.__beforeLoadContext}}));const{search:U,params:$,context:G,cause:oe}=this.getMatch(D),Q=h(D),te={search:U,abortController:C,params:$,preload:Q,context:G,location:n,navigate:se=>this.navigate({...se,_fromLocation:n}),buildLocation:this.buildLocation,cause:Q?"preload":oe,matches:r};let ce=await((S=(v=I.options).beforeLoad)==null?void 0:S.call(v,te))??{};this.serializeLoaderData&&(ce=this.serializeLoaderData("__beforeLoadContext",ce,{router:this,match:this.getMatch(D)})),(Pi(ce)||yn(ce))&&w(M,ce,"BEFORE_LOAD"),o(D,se=>({...se,__beforeLoadContext:ce,context:{...ae(),...se.__routeContext,...ce},abortController:C}))}catch(C){w(M,C,"BEFORE_LOAD")}o(D,C=>{var q;return(q=C.beforeLoadPromise)==null||q.resolve(),{...C,beforeLoadPromise:void 0,isFetching:!1}})}}const E=r.slice(0,a),b=[];E.forEach(({id:M,routeId:D},L)=>{b.push((async()=>{const{loaderPromise:T}=this.getMatch(M);let _=!1;if(T)await T;else{const I=b[L-1],P=this.looseRoutesById[D],A=()=>{const{params:Q,loaderDeps:te,abortController:ce,context:se,cause:me}=this.getMatch(M),tt=h(M);return{params:Q,deps:te,preload:!!tt,parentMatchPromise:I,abortController:ce,context:se,location:n,navigate:Tr=>this.navigate({...Tr,_fromLocation:n}),cause:tt?"preload":me,route:P}},R=Date.now()-this.getMatch(M).updatedAt,C=h(M),q=C?P.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:P.options.staleTime??this.options.defaultStaleTime??0,X=P.options.shouldReload,Z=typeof X=="function"?X(A()):X;o(M,Q=>({...Q,loaderPromise:_s(),preload:!!C&&!this.state.matches.find(te=>te.id===M)}));const ae=async()=>{var Q,te,ce,se,me,tt,Tr,gi;try{const dn=async()=>{const Fe=this.getMatch(M);Fe.minPendingPromise&&await Fe.minPendingPromise};try{P._lazyPromise===void 0&&(P.lazyFn?P._lazyPromise=P.lazyFn().then(Xt=>{const{id:ye,...De}=Xt.options;Object.assign(P.options,De)}):P._lazyPromise=Promise.resolve()),P._componentsPromise===void 0&&(P._componentsPromise=P._lazyPromise.then(()=>Promise.all(yT.map(async Xt=>{const ye=P.options[Xt];ye!=null&&ye.preload&&await ye.preload()})))),o(M,Xt=>({...Xt,isFetching:"loader"}));let Fe=await((te=(Q=P.options).loader)==null?void 0:te.call(Q,A()));this.serializeLoaderData&&(Fe=this.serializeLoaderData("loaderData",Fe,{router:this,match:this.getMatch(M)})),d(this.getMatch(M),Fe),await P._lazyPromise,await dn();const It=(se=(ce=P.options).head)==null?void 0:se.call(ce,{matches:r,match:this.getMatch(M),params:this.getMatch(M).params,loaderData:Fe}),ut=It==null?void 0:It.meta,Hn=It==null?void 0:It.links,Wn=It==null?void 0:It.scripts,mi=(tt=(me=P.options).headers)==null?void 0:tt.call(me,{loaderData:Fe});o(M,Xt=>({...Xt,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Fe,meta:ut,links:Hn,scripts:Wn,headers:mi}))}catch(Fe){let It=Fe;await dn(),d(this.getMatch(M),Fe);try{(gi=(Tr=P.options).onError)==null||gi.call(Tr,Fe)}catch(ut){It=ut,d(this.getMatch(M),ut)}o(M,ut=>({...ut,error:It,status:"error",isFetching:!1}))}await P._componentsPromise}catch(dn){o(M,Fe=>({...Fe,loaderPromise:void 0})),d(this.getMatch(M),dn)}},{status:U,invalid:$}=this.getMatch(M);_=U==="success"&&($||(Z??R>q)),C&&P.options.preload===!1||(_?(async()=>{try{await ae()}catch(Q){Jd(Q)&&await this.navigate(Q)}})():U!=="success"&&await ae());const{loaderPromise:G,loadPromise:oe}=this.getMatch(M);G==null||G.resolve(),oe==null||oe.resolve()}return o(M,I=>({...I,isFetching:_?I.isFetching:!1,loaderPromise:void 0,invalid:!1})),this.getMatch(M)})())}),await Promise.all(b),f()}catch(w){g(w)}})()}),await c()}catch(f){if(Pi(f)||yn(f))throw yn(f)&&!i&&await c(),f}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n==null?void 0:n.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load()},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n==null?void 0:n.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),o=new Set([...s,...this.state.cachedMatches.map(a=>a.id)]);this.__store.batch(()=>{i.forEach(a=>{o.has(a.id)||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,a]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(a,l)=>{s.has(a)?i=i.map(c=>c.id===a?l(c):c):this.updateMatch(a,l)}}),i}catch(a){if(Pi(a))return await this.preloadRoute({...a,_fromLocation:r});console.error(a);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r!=null&&r.pending&&this.state.status!=="pending")return!1;const a=((r==null?void 0:r.pending)===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,l=wc(this.basepath,a.pathname,{...r,to:s.pathname});return!l||n.params&&!$s(l,n.params,{partial:!0})?!1:l&&((r==null?void 0:r.includeSearch)??!0)?$s(a.search,s.search,{partial:!0})?l:!1:l},this.dehydrate=()=>{var n;const r=((n=this.options.errorSerializer)==null?void 0:n.serialize)??VC;return{state:{dehydratedMatches:this.state.matches.map(i=>({...tu(i,["id","status","updatedAt"]),error:i.error?{data:r(i.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var n,r,i;let s;typeof document<"u"&&(s=this.options.transformer.parse((n=window.__TSR__)==null?void 0:n.dehydrated)),Dt(s),this.dehydratedData=s.payload,(i=(r=this.options).hydrate)==null||i.call(r,s.payload);const o=s.router.state,a=this.matchRoutes(this.state.location).map(l=>{const c=o.dehydratedMatches.find(h=>h.id===l.id);return Dt(c,`Could not find a client-side match for dehydrated match with id: ${l.id}!`),{...l,...c}});this.__store.setState(l=>({...l,matches:a})),this.manifest=s.router.manifest},this.injectedHtml=[],this.injectHtml=n=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(i=>i!==r),n);this.injectedHtml.push(r)},this.injectScript=(n,r)=>{this.injectHtml(`<script class='tsr-once'>${n}; __TSR__.cleanScripts()<\/script>`)},this.streamedKeys=new Set,this.getStreamedValue=n=>{var r;if(this.isServer)return;const i=(r=window.__TSR__)==null?void 0:r.streamedValues[n];if(i)return i.parsed||(i.parsed=this.options.transformer.parse(i.value)),i.parsed},this.streamValue=(n,r)=>{var i;this.streamedKeys.has(n),this.streamedKeys.add(n),this.injectScript(`__TSR__.streamedValues['${n}'] = { value: ${(i=this.serializer)==null?void 0:i.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(l=>[l.routeId,l]));let o=(r.global?this.looseRoutesById[Ht]:this.looseRoutesById[r.routeId])||this.looseRoutesById[Ht];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==Ht;)o=o.parentRoute,Dt(o);const a=s[o.id];Dt(a,"Could not find match for route: "+o.id),i(a.id,l=>({...l,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??mC,parseSearch:e.parseSearch??gC,transformer:e.transformer??RC}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n==null?void 0:n.dest);let o=!1;(r?r.path!=="/"&&s["**"]:Li(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const a=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const d=i[h];if(d.children)return d.id}return Ht}})(),l=i.map(h=>{var d;let f;const g=((d=h.options.params)==null?void 0:d.parse)??h.options.parseParams;if(g)try{const y=g(s);Object.assign(s,y)}catch(y){if(f=new LC(y.message,{cause:y}),n!=null&&n.throwOnError)throw f;return f}}),c=[];return i.forEach((h,d)=>{var f,g,y,v,S,w,E,b;const M=c[d-1],[D,L]=(()=>{const U=(M==null?void 0:M.search)??e.search;try{const $=Zd(h.options.validateSearch,U)??{};return[{...U,...$},void 0]}catch($){const G=new _p($.message,{cause:$});if(n!=null&&n.throwOnError)throw G;return[U,G]}})(),T=((g=(f=h.options).loaderDeps)==null?void 0:g.call(f,{search:D}))??"",_=T?JSON.stringify(T):"",I=vc({path:h.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),P=vc({path:h.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+_,A=this.getMatch(P),R=this.state.matches.find(U=>U.routeId===h.id),C=R?"stay":"enter";let q;if(A)q={...A,cause:C,params:R?Zt(R.params,s):s,search:Zt(R?R.search:A.search,D)};else{const U=h.options.loader||h.options.beforeLoad||h.lazyFn||MC(h)?"pending":"success";q={id:P,index:d,routeId:h.id,params:R?Zt(R.params,s):s,pathname:ar([this.basepath,I]),updatedAt:Date.now(),search:R?Zt(R.search,D):D,searchError:void 0,status:U,isFetching:!1,error:void 0,paramsError:l[d],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:C,loaderDeps:R?Zt(R.loaderDeps,T):T,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:h.options.staticData||{},loadPromise:_s(),fullPath:h.fullPath}}const X=(v=(y=h.options).head)==null?void 0:v.call(y,{matches:c,match:q,params:q.params,loaderData:q.loaderData??void 0});q.links=X==null?void 0:X.links,q.scripts=X==null?void 0:X.scripts,q.meta=X==null?void 0:X.meta,q.status==="success"&&(q.headers=(w=(S=h.options).headers)==null?void 0:w.call(S,{loaderData:q.loaderData})),n!=null&&n.preload||(q.globalNotFound=a===h.id),q.searchError=L;const ae=(M==null?void 0:M.id)?M.context??this.options.context??{}:this.options.context??{};if(q.context={...ae,...q.__routeContext,...q.__beforeLoadContext},!A&&(n==null?void 0:n._buildLocation)!==!0){const U={deps:T,params:q.params,context:q.context,location:e,navigate:$=>this.navigate({...$,_fromLocation:e}),buildLocation:this.buildLocation,cause:q.cause,abortController:q.abortController,preload:!!q.preload,matches:c};q.__routeContext=((b=(E=h.options).context)==null?void 0:b.call(E,U))??{},q.context={...ae,...q.__routeContext,...q.__beforeLoadContext}}c.push(q)}),c}}class _p extends Error{}class LC extends Error{}function OC(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function VC(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function fv(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function pv(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const Vh=j.createContext(void 0),FC=j.createContext(void 0);function Qi(t){const e=j.useContext(t.from?FC:Vh);return Ut({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(Dt(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function jC(t){return Qi({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function UC(t){const{select:e,...n}=t;return Qi({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function zC(t){return Qi({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function BC(t){return Qi({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function _T(t){const{navigate:e}=wr();return j.useCallback(n=>e({...n}),[e])}class vT{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!(s!=null&&s.path)&&!(s!=null&&s.id);this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=Ht:Dt(this.parentRoute);let a=o?Ht:s.path;a&&a!=="/"&&(a=qg(a));const l=(s==null?void 0:s.id)||a;let c=o?Ht:ar([this.parentRoute.id===Ht?"":this.parentRoute.id,l]);a===Ht&&(a="/"),c!==Ht&&(c=ar(["/",c]));const h=c===Ht?"/":ar([this.parentRoute.fullPath,a]);this._path=a,this._id=c,this._fullPath=h,this._to=h,this._ssr=(s==null?void 0:s.ssr)??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>Qi({select:n==null?void 0:n.select,from:this.id,structuralSharing:n==null?void 0:n.structuralSharing}),this.useRouteContext=n=>Qi({...n,from:this.id,select:r=>n!=null&&n.select?n.select(r.context):r.context}),this.useSearch=n=>BC({select:n==null?void 0:n.select,structuralSharing:n==null?void 0:n.structuralSharing,from:this.id}),this.useParams=n=>zC({select:n==null?void 0:n.select,structuralSharing:n==null?void 0:n.structuralSharing,from:this.id}),this.useLoaderDeps=n=>UC({...n,from:this.id}),this.useLoaderData=n=>jC({...n,from:this.id}),this.useNavigate=()=>_T({from:this.id}),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),Dt(!(e!=null&&e.id&&(e!=null&&e.path))),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}}function bl(t){return new vT(t)}class $C extends vT{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function HC(t){return new $C(t)}function nu(t){return k.jsx(k.Fragment,{children:t.children})}function wT(t,e,n){return e.options.notFoundComponent?k.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?k.jsx(t.options.defaultNotFoundComponent,{data:n}):k.jsx(AC,{})}const ET=j.memo(function({matchId:e}){var n,r;const i=wr(),s=Ut({select:S=>{var w;return(w=S.matches.find(E=>E.id===e))==null?void 0:w.routeId}});Dt(s);const o=i.routesById[s],a=o.options.pendingComponent??i.options.defaultPendingComponent,l=a?k.jsx(a,{}):null,c=o.options.errorComponent??i.options.defaultErrorComponent,h=o.options.onCatch??i.options.defaultOnCatch,d=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,f=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??a??((r=o.options.errorComponent)==null?void 0:r.preload))?j.Suspense:nu,g=c?Kg:nu,y=d?CC:nu,v=Ut({select:S=>S.loadedAt});return k.jsx(Vh.Provider,{value:e,children:k.jsx(f,{fallback:l,children:k.jsx(g,{getResetKey:()=>v,errorComponent:c||Oh,onCatch:(S,w)=>{if(yn(S))throw S;h==null||h(S,w)},children:k.jsx(y,{fallback:S=>{if(!d||S.routeId&&S.routeId!==s||!S.routeId&&!o.isRoot)throw S;return j.createElement(d,S)},children:k.jsx(WC,{matchId:e})})})})})}),WC=j.memo(function({matchId:e}){var n,r,i,s,o;const a=wr(),{match:l,matchIndex:c,routeId:h}=Ut({select:y=>{const v=y.matches.findIndex(E=>E.id===e),S=y.matches[v];return{routeId:S.routeId,matchIndex:v,match:tu(S,["id","status","error"])}},structuralSharing:!0}),d=a.routesById[h],f=j.useMemo(()=>{const y=d.options.component??a.options.defaultComponent;return y?k.jsx(y,{}):k.jsx(ST,{})},[d.options.component,a.options.defaultComponent]),g=(d.options.errorComponent??a.options.defaultErrorComponent)||Oh;if(l.status==="notFound"){let y;return fv(l.error)?y=(((n=a.options.errorSerializer)==null?void 0:n.deserialize)??pv)(l.error.data):y=l.error,Dt(yn(y)),wT(a,d,y)}if(l.status==="redirected")throw Dt(Pi(l.error)),(r=a.getMatch(l.id))==null?void 0:r.loadPromise;if(l.status==="error"){if(a.isServer)return k.jsx(g,{error:l.error,info:{componentStack:""}});throw fv(l.error)?(((i=a.options.errorSerializer)==null?void 0:i.deserialize)??pv)(l.error.data):l.error}if(l.status==="pending"){const y=d.options.pendingMinMs??a.options.defaultPendingMinMs;if(y&&!((s=a.getMatch(l.id))!=null&&s.minPendingPromise)&&!a.isServer){const v=_s();Promise.resolve().then(()=>{a.updateMatch(l.id,S=>({...S,minPendingPromise:v}))}),setTimeout(()=>{v.resolve(),a.updateMatch(l.id,S=>({...S,minPendingPromise:void 0}))},y)}throw(o=a.getMatch(l.id))==null?void 0:o.loadPromise}return k.jsxs(k.Fragment,{children:[f,a.AfterEachMatch?k.jsx(a.AfterEachMatch,{match:l,matchIndex:c}):null]})}),ST=j.memo(function(){const e=wr(),n=j.useContext(Vh),r=Ut({select:c=>{var h;return(h=c.matches.find(d=>d.id===n))==null?void 0:h.routeId}}),i=e.routesById[r],s=Ut({select:c=>{const d=c.matches.find(f=>f.id===n);return Dt(d),d.globalNotFound}}),o=Ut({select:c=>{var h;const d=c.matches,f=d.findIndex(g=>g.id===n);return(h=d[f+1])==null?void 0:h.id}});if(s)return wT(e,i,void 0);if(!o)return null;const a=k.jsx(ET,{matchId:o}),l=e.options.defaultPendingComponent?k.jsx(e.options.defaultPendingComponent,{}):null;return n===Ht?k.jsx(j.Suspense,{fallback:l,children:a}):a}),qC="Error preloading route! ";function KC(t,e){const n=wr(),[r,i]=j.useState(!1),s=j.useRef(!1),o=EC(e),{activeProps:a=()=>({className:"active"}),inactiveProps:l=()=>({}),activeOptions:c,to:h,preload:d,preloadDelay:f,replace:g,startTransition:y,resetScroll:v,viewTransition:S,children:w,target:E,disabled:b,style:M,className:D,onClick:L,onFocus:T,onMouseEnter:_,onMouseLeave:I,onTouchStart:P,ignoreBlocker:A,...R}=t,{params:C,search:q,hash:X,state:Z,mask:ae,...U}=R,$=j.useMemo(()=>{try{return new URL(`${h}`),"external"}catch{}return"internal"},[h]),G=Ut({select:ye=>ye.location.search,structuralSharing:!0});t={from:Qi({strict:!1,select:ye=>ye.pathname}),...t};const Q=j.useMemo(()=>n.buildLocation(t),[n,t,G]),te=j.useMemo(()=>d??n.options.defaultPreload,[n.options.defaultPreload,d]),ce=f??n.options.defaultPreloadDelay??0,se=Ut({select:ye=>{if(c!=null&&c.exact){if(!TC(ye.location.pathname,Q.pathname,n.basepath))return!1}else{const De=Hu(ye.location.pathname,n.basepath).split("/");if(!Hu(Q.pathname,n.basepath).split("/").every((sd,Do)=>sd===De[Do]))return!1}return((c==null?void 0:c.includeSearch)??!0)&&!$s(ye.location.search,Q.search,{partial:!(c!=null&&c.exact),ignoreUndefined:!(c!=null&&c.explicitUndefined)})?!1:c!=null&&c.includeHash?ye.location.hash===Q.hash:!0}}),me=j.useCallback(()=>{n.preloadRoute(t).catch(ye=>{console.warn(ye),console.warn(qC)})},[t,n]),tt=j.useCallback(ye=>{ye!=null&&ye.isIntersecting&&me()},[me]);if(wC(o,tt,{rootMargin:"100px"},{disabled:!!b||te!=="viewport"}),ua(()=>{s.current||!b&&te==="render"&&(me(),s.current=!0)},[b,me,te]),$==="external")return{...U,ref:o,type:$,href:h,...w&&{children:w},...E&&{target:E},...b&&{disabled:b},...M&&{style:M},...D&&{className:D},...L&&{onClick:L},...T&&{onFocus:T},..._&&{onMouseEnter:_},...I&&{onMouseLeave:I},...P&&{onTouchStart:P}};const Tr=ye=>{if(!b&&!GC(ye)&&!ye.defaultPrevented&&(!E||E==="_self")&&ye.button===0){ye.preventDefault(),aT.flushSync(()=>{i(!0)});const De=n.subscribe("onResolved",()=>{De(),i(!1)});n.buildAndCommitLocation({...t,replace:g,resetScroll:v,startTransition:y,viewTransition:S,ignoreBlocker:A})}},gi=ye=>{b||te&&me()},dn=gi,Fe=ye=>{if(b)return;const De=ye.target||{};if(te){if(De.preloadTimeout)return;De.preloadTimeout=setTimeout(()=>{De.preloadTimeout=null,me()},ce)}},It=ye=>{if(b)return;const De=ye.target||{};De.preloadTimeout&&(clearTimeout(De.preloadTimeout),De.preloadTimeout=null)},ut=ye=>De=>{var yi;(yi=De.persist)==null||yi.call(De),ye.filter(Boolean).forEach(Mo=>{De.defaultPrevented||Mo(De)})},Hn=se?Ls(a,{})??{}:{},Wn=se?{}:Ls(l,{}),mi=[D,Hn.className,Wn.className].filter(Boolean).join(" "),Xt={...M,...Hn.style,...Wn.style};return{...U,...Hn,...Wn,href:b?void 0:Q.maskedLocation?n.history.createHref(Q.maskedLocation.href):n.history.createHref(Q.href),ref:o,onClick:ut([L,Tr]),onFocus:ut([T,gi]),onMouseEnter:ut([_,Fe]),onMouseLeave:ut([I,It]),onTouchStart:ut([P,dn]),disabled:!!b,target:E,...Object.keys(Xt).length&&{style:Xt},...mi&&{className:mi},...b&&{role:"link","aria-disabled":!0},...se&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}const ha=j.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=KC(r,e),a=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,j.createElement(n||"a",{...o,ref:s},a)});function GC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function QC(){const t=wr(),e=j.useRef({router:t,mounted:!1}),n=Ut({select:({isLoading:d})=>d}),[r,i]=j.useTransition(),s=Ut({select:d=>d.matches.some(f=>f.status==="pending"),structuralSharing:!0}),o=Xd(n),a=n||r||s,l=Xd(a),c=n||s,h=Xd(c);return t.isServer||(t.startReactTransition=i),j.useEffect(()=>{const d=t.history.subscribe(t.load),f=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Li(t.latestLocation.href)!==Li(f.href)&&t.commitLocation({...f,replace:!0}),()=>{d()}},[t,t.history]),ua(()=>{var d;if(typeof window<"u"&&((d=window.__TSR__)!=null&&d.dehydrated)||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(g){console.error(g)}})()},[t]),ua(()=>{if(o&&!n){const d=t.state.location,f=t.state.resolvedLocation,g=f.pathname!==d.pathname,y=f.href!==d.href;t.emit({type:"onLoad",fromLocation:f,toLocation:d,pathChanged:g,hrefChanged:y})}},[o,t,n]),ua(()=>{if(h&&!c){const d=t.state.location,f=t.state.resolvedLocation,g=f.pathname!==d.pathname,y=f.href!==d.href;t.emit({type:"onBeforeRouteMount",fromLocation:f,toLocation:d,pathChanged:g,hrefChanged:y})}},[c,h,t]),ua(()=>{if(l&&!a){const d=t.state.location,f=t.state.resolvedLocation,g=f.pathname!==d.pathname,y=f.href!==d.href;if(t.emit({type:"onResolved",fromLocation:f,toLocation:d,pathChanged:g,hrefChanged:y}),t.__store.setState(v=>({...v,status:"idle",resolvedLocation:v.location})),typeof document<"u"&&document.querySelector&&t.state.location.hash!==""){const v=document.getElementById(t.state.location.hash);v&&v.scrollIntoView()}}},[a,l,t]),null}function YC(){const t=wr(),e=t.options.defaultPendingComponent?k.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&window.__TSR__?nu:j.Suspense,r=k.jsxs(n,{fallback:e,children:[k.jsx(QC,{}),k.jsx(XC,{})]});return t.options.InnerWrap?k.jsx(t.options.InnerWrap,{children:r}):r}function XC(){const t=Ut({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=Ut({select:n=>n.loadedAt});return k.jsx(Vh.Provider,{value:t,children:k.jsx(Kg,{getResetKey:()=>e,errorComponent:Oh,onCatch:n=>{n.message||n.toString()},children:t?k.jsx(ET,{matchId:t}):null})})}function JC({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=dT(),i=k.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?k.jsx(t.options.Wrap,{children:i}):i}function ZC({router:t,...e}){return k.jsx(JC,{router:t,...e,children:k.jsx(YC,{})})}var gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},eA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},IT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[h],n[d],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new tA;const f=s<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nA=function(t){const e=TT(t);return IT.encodeByteArray(e,!0)},qu=function(t){return nA(t).replace(/\./g,"")},xT=function(t){try{return IT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=()=>rA().__FIREBASE_DEFAULTS__,sA=()=>{if(typeof process>"u"||typeof gv>"u")return;const t=gv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xT(t[1]);return e&&JSON.parse(e)},Fh=()=>{try{return iA()||sA()||oA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bT=t=>{var e,n;return(n=(e=Fh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aA=t=>{const e=bT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},PT=()=>{var t;return(t=Fh())===null||t===void 0?void 0:t.config},kT=t=>{var e;return(e=Fh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qu(JSON.stringify(n)),qu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function hA(){var t;const e=(t=Fh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gA(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mA(){return!hA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yA(){try{return typeof indexedDB=="object"}catch{return!1}}function _A(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="FirebaseError";class Er extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vA,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wA(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Er(i,a,r)}}function wA(t,e){return t.replace(EA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const EA=/\{\$([^}]+)}/g;function SA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ku(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(mv(s)&&mv(o)){if(!Ku(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function da(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TA(t,e){const n=new IA(t,e);return n.subscribe.bind(n)}class IA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ef),i.error===void 0&&(i.error=ef),i.complete===void 0&&(i.complete=ef);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ef(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class Yi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kA(e))try{this.getOrInitializeService({instanceIdentifier:ki})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ki){return this.instances.has(e)}getOptions(e=ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ki){return this.component?this.component.multipleInstances?e:ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PA(t){return t===ki?void 0:t}function kA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const AA={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},RA=ue.INFO,MA={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},DA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=MA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gg{constructor(e){this.name=e,this._logLevel=RA,this._logHandler=DA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const NA=(t,e)=>e.some(n=>t instanceof n);let yv,_v;function LA(){return yv||(yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OA(){return _v||(_v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CT=new WeakMap,vp=new WeakMap,AT=new WeakMap,tf=new WeakMap,Qg=new WeakMap;function VA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Jr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&CT.set(n,t)}).catch(()=>{}),Qg.set(e,t),e}function FA(t){if(vp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vp.set(t,e)}let wp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jA(t){wp=t(wp)}function UA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nf(this),e,...n);return AT.set(r,e.sort?e.sort():[e]),Jr(r)}:OA().includes(t)?function(...e){return t.apply(nf(this),e),Jr(CT.get(this))}:function(...e){return Jr(t.apply(nf(this),e))}}function zA(t){return typeof t=="function"?UA(t):(t instanceof IDBTransaction&&FA(t),NA(t,LA())?new Proxy(t,wp):t)}function Jr(t){if(t instanceof IDBRequest)return VA(t);if(tf.has(t))return tf.get(t);const e=zA(t);return e!==t&&(tf.set(t,e),Qg.set(e,t)),e}const nf=t=>Qg.get(t);function BA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Jr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Jr(o.result),l.oldVersion,l.newVersion,Jr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const $A=["get","getKey","getAll","getAllKeys","count"],HA=["put","add","delete","clear"],rf=new Map;function vv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rf.get(e))return rf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$A.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return rf.set(e,s),s}jA(t=>({...t,get:(e,n,r)=>vv(e,n)||t.get(e,n,r),has:(e,n)=>!!vv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ep="@firebase/app",wv="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new Gg("@firebase/app"),KA="@firebase/app-compat",GA="@firebase/analytics-compat",QA="@firebase/analytics",YA="@firebase/app-check-compat",XA="@firebase/app-check",JA="@firebase/auth",ZA="@firebase/auth-compat",eR="@firebase/database",tR="@firebase/data-connect",nR="@firebase/database-compat",rR="@firebase/functions",iR="@firebase/functions-compat",sR="@firebase/installations",oR="@firebase/installations-compat",aR="@firebase/messaging",lR="@firebase/messaging-compat",cR="@firebase/performance",uR="@firebase/performance-compat",hR="@firebase/remote-config",dR="@firebase/remote-config-compat",fR="@firebase/storage",pR="@firebase/storage-compat",gR="@firebase/firestore",mR="@firebase/vertexai",yR="@firebase/firestore-compat",_R="firebase",vR="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",wR={[Ep]:"fire-core",[KA]:"fire-core-compat",[QA]:"fire-analytics",[GA]:"fire-analytics-compat",[XA]:"fire-app-check",[YA]:"fire-app-check-compat",[JA]:"fire-auth",[ZA]:"fire-auth-compat",[eR]:"fire-rtdb",[tR]:"fire-data-connect",[nR]:"fire-rtdb-compat",[rR]:"fire-fn",[iR]:"fire-fn-compat",[sR]:"fire-iid",[oR]:"fire-iid-compat",[aR]:"fire-fcm",[lR]:"fire-fcm-compat",[cR]:"fire-perf",[uR]:"fire-perf-compat",[hR]:"fire-rc",[dR]:"fire-rc-compat",[fR]:"fire-gcs",[pR]:"fire-gcs-compat",[gR]:"fire-fst",[yR]:"fire-fst-compat",[mR]:"fire-vertex","fire-js":"fire-js",[_R]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=new Map,ER=new Map,Tp=new Map;function Ev(t,e){try{t.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ao(t){const e=t.name;if(Tp.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Tp.set(e,t);for(const n of Gu.values())Ev(n,t);for(const n of ER.values())Ev(n,t);return!0}function Yg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new Pl("app","Firebase",SR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=vR;function RT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Zr.create("bad-app-name",{appName:String(i)});if(n||(n=PT()),!n)throw Zr.create("no-options");const s=Gu.get(i);if(s){if(Ku(n,s.options)&&Ku(r,s.config))return s;throw Zr.create("duplicate-app",{appName:i})}const o=new CA(i);for(const l of Tp.values())o.addComponent(l);const a=new TR(n,r,o);return Gu.set(i,a),a}function MT(t=Sp){const e=Gu.get(t);if(!e&&t===Sp&&PT())return RT();if(!e)throw Zr.create("no-app",{appName:t});return e}function ei(t,e,n){var r;let i=(r=wR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(a.join(" "));return}ao(new Yi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="firebase-heartbeat-database",xR=1,sl="firebase-heartbeat-store";let sf=null;function DT(){return sf||(sf=BA(IR,xR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),sf}async function bR(t){try{const n=(await DT()).transaction(sl),r=await n.objectStore(sl).get(NT(t));return await n.done,r}catch(e){if(e instanceof Er)pr.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function Sv(t,e){try{const r=(await DT()).transaction(sl,"readwrite");await r.objectStore(sl).put(e,NT(t)),await r.done}catch(n){if(n instanceof Er)pr.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(r.message)}}}function NT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=1024,kR=30*24*60*60*1e3;class CR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Tv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=kR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tv(),{heartbeatsToSend:r,unsentEntries:i}=AR(this._heartbeatsCache.heartbeats),s=qu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return pr.warn(n),""}}}function Tv(){return new Date().toISOString().substring(0,10)}function AR(t,e=PR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Iv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Iv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class RR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yA()?_A().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Iv(t){return qu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){ao(new Yi("platform-logger",e=>new WA(e),"PRIVATE")),ao(new Yi("heartbeat",e=>new CR(e),"PRIVATE")),ei(Ep,wv,t),ei(Ep,wv,"esm2017"),ei("fire-js","")}MR("");function Xg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function LT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DR=LT,OT=new Pl("auth","Firebase",LT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new Gg("@firebase/auth");function NR(t,...e){Qu.logLevel<=ue.WARN&&Qu.warn(`Auth (${To}): ${t}`,...e)}function ru(t,...e){Qu.logLevel<=ue.ERROR&&Qu.error(`Auth (${To}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw Jg(t,...e)}function On(t,...e){return Jg(t,...e)}function VT(t,e,n){const r=Object.assign(Object.assign({},DR()),{[e]:n});return new Pl("auth","Firebase",r).create(e,{appName:t.name})}function lr(t){return VT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OT.create(t,...e)}function J(t,e,...n){if(!t)throw Jg(e,...n)}function rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ru(e),new Error(e)}function gr(t,e){t||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function LR(){return xv()==="http:"||xv()==="https:"}function xv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LR()||fA()||"connection"in navigator)?navigator.onLine:!0}function VR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.shortDelay=e,this.longDelay=n,gr(n>e,"Short delay should be less than long delay!"),this.isMobile=uA()||pA()}get(){return OR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e){gr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new Cl(3e4,6e4);function pi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Sr(t,e,n,r,i={}){return jT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=kl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return dA()||(c.referrerPolicy="no-referrer"),FT.fetch()(UT(t,t.config.apiHost,n,a),c)})}async function jT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},FR),e);try{const i=new zR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ec(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ec(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ec(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ec(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw VT(t,h,c);xn(t,h)}}catch(i){if(i instanceof Er)throw i;xn(t,"network-request-failed",{message:String(i)})}}async function Al(t,e,n,r,i={}){const s=await Sr(t,e,n,r,i);return"mfaPendingCredential"in s&&xn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function UT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Zg(t.config,i):`${t.config.apiScheme}://${i}`}function UR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(On(this.auth,"network-request-failed")),jR.get())})}}function Ec(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=On(t,e,r);return i.customData._tokenResponse=n,i}function bv(t){return t!==void 0&&t.enterprise!==void 0}class BR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return UR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $R(t,e){return Sr(t,"GET","/v2/recaptchaConfig",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e){return Sr(t,"POST","/v1/accounts:delete",e)}async function zT(t,e){return Sr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WR(t,e=!1){const n=lt(t),r=await n.getIdToken(e),i=em(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Da(of(i.auth_time)),issuedAtTime:Da(of(i.iat)),expirationTime:Da(of(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function of(t){return Number(t)*1e3}function em(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ru("JWT malformed, contained fewer than 3 sections"),null;try{const i=xT(n);return i?JSON.parse(i):(ru("Failed to decode base64 JWT payload"),null)}catch(i){return ru("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Pv(t){const e=em(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Er&&qR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function qR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Da(this.lastLoginAt),this.creationTime=Da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await lo(t,zT(n,{idToken:r}));J(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?BT(s.providerUserInfo):[],a=QR(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function GR(t){const e=lt(t);await Yu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function BT(t){return t.map(e=>{var{providerId:n}=e,r=Xg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(t,e){const n=await jT(t,{},async()=>{const r=kl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=UT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XR(t,e){return Sr(t,"POST","/v2/accounts:revokeToken",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=Pv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await YR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Hs;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hs,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ir{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Xg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await lo(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WR(this,e)}reload(){return GR(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await lo(this,HR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:M,isAnonymous:D,providerData:L,stsTokenManager:T}=n;J(b&&T,e,"internal-error");const _=Hs.fromJSON(this.name,T);J(typeof b=="string",e,"internal-error"),kr(d,e.name),kr(f,e.name),J(typeof M=="boolean",e,"internal-error"),J(typeof D=="boolean",e,"internal-error"),kr(g,e.name),kr(y,e.name),kr(v,e.name),kr(S,e.name),kr(w,e.name),kr(E,e.name);const I=new ir({uid:b,auth:e,email:f,emailVerified:M,displayName:d,isAnonymous:D,photoURL:y,phoneNumber:g,tenantId:v,stsTokenManager:_,createdAt:w,lastLoginAt:E});return L&&Array.isArray(L)&&(I.providerData=L.map(P=>Object.assign({},P))),S&&(I._redirectEventId=S),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new Hs;i.updateFromServerResponse(n);const s=new ir({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Yu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];J(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?BT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Hs;a.updateFromIdToken(r);const l=new ir({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new xp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=new Map;function sr(t){gr(t instanceof Function,"Expected a class definition");let e=kv.get(t);return e?(gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$T.type="NONE";const Cv=$T;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ws{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=iu(this.userKey,i.apiKey,s),this.fullPersistenceKey=iu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ir._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ws(sr(Cv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||sr(Cv);const o=iu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=ir._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ws(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ws(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QT(e))return"Blackberry";if(YT(e))return"Webos";if(WT(e))return"Safari";if((e.includes("chrome/")||qT(e))&&!e.includes("edge/"))return"Chrome";if(GT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HT(t=Tt()){return/firefox\//i.test(t)}function WT(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qT(t=Tt()){return/crios\//i.test(t)}function KT(t=Tt()){return/iemobile/i.test(t)}function GT(t=Tt()){return/android/i.test(t)}function QT(t=Tt()){return/blackberry/i.test(t)}function YT(t=Tt()){return/webos/i.test(t)}function tm(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JR(t=Tt()){var e;return tm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZR(){return gA()&&document.documentMode===10}function XT(t=Tt()){return tm(t)||GT(t)||YT(t)||QT(t)||/windows phone/i.test(t)||KT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t,e=[]){let n;switch(t){case"Browser":n=Av(Tt());break;case"Worker":n=`${Av(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${To}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e={}){return Sr(t,"GET","/v2/passwordPolicy",pi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=6;class rM{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:nM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rv(this),this.idTokenSubscription=new Rv(this),this.beforeStateQueue=new eM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ws.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zT(this,{idToken:e}),r=await ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Dn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(lr(this));const n=e?lt(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tM(this),n=new rM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await XR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sr(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Ws.create(this,[sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&NR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function rs(t){return lt(t)}class Rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=TA(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sM(t){jh=t}function ZT(t){return jh.loadJS(t)}function oM(){return jh.recaptchaEnterpriseScript}function aM(){return jh.gapiScript}function lM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class cM{constructor(){this.enterprise=new uM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class uM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const hM="recaptcha-enterprise",eI="NO_RECAPTCHA";class dM{constructor(e){this.type=hM,this.auth=rs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{$R(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new BR(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;bv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(eI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cM().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&bv(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=oM();l.length!==0&&(l+=a),ZT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Mv(t,e,n,r=!1,i=!1){const s=new dM(t);let o;if(i)o=eI;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function bp(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Mv(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Mv(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t,e){const n=Yg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ku(s,e??{}))return i;xn(i,"already-initialized")}return n.initialize({options:e})}function pM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gM(t,e,n){const r=rs(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=tI(e),{host:o,port:a}=mM(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),yM()}function tI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mM(t){const e=tI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Dv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Dv(o)}}}function Dv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}async function _M(t,e){return Sr(t,"POST","/v1/accounts:update",e)}async function vM(t,e){return Sr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(t,e){return Al(t,"POST","/v1/accounts:signInWithPassword",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e){return Al(t,"POST","/v1/accounts:signInWithEmailLink",pi(t,e))}async function SM(t,e){return Al(t,"POST","/v1/accounts:signInWithEmailLink",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends nm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ol(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ol(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,n,"signInWithPassword",wM);case"emailLink":return EM(e,{email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,r,"signUpPassword",vM);case"emailLink":return SM(e,{idToken:n,email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e){return Al(t,"POST","/v1/accounts:signInWithIdp",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="http://localhost";class Xi extends nm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Xg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Xi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qs(e,n)}buildRequest(){const e={requestUri:TM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xM(t){const e=da(fa(t)).link,n=e?da(fa(e)).deep_link_id:null,r=da(fa(t)).deep_link_id;return(r?da(fa(r)).link:null)||r||n||e||t}class rm{constructor(e){var n,r,i,s,o,a;const l=da(fa(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=IM((i=l.mode)!==null&&i!==void 0?i:null);J(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=xM(e);try{return new rm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.providerId=is.PROVIDER_ID}static credential(e,n){return ol._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=rm.parseLink(n);return J(r,"argument-error"),ol._fromEmailAndCode(e,r.code,r.tenantId)}}is.PROVIDER_ID="password";is.EMAIL_PASSWORD_SIGN_IN_METHOD="password";is.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends nI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Rl{constructor(){super("facebook.com")}static credential(e){return Xi._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xi._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Or.credential(n,r)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Rl{constructor(){super("github.com")}static credential(e){return Xi._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.GITHUB_SIGN_IN_METHOD="github.com";Vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Rl{constructor(){super("twitter.com")}static credential(e,n){return Xi._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Fr.credential(n,r)}catch{return null}}}Fr.TWITTER_SIGN_IN_METHOD="twitter.com";Fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(t,e){return Al(t,"POST","/v1/accounts:signUp",pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ir._fromIdTokenResponse(e,r,i),o=Nv(r);return new Ji({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Nv(r);return new Ji({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Nv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends Er{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Xu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Xu(e,n,r,i)}}function rI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Xu._fromErrorAndOperation(t,s,e,r):s})}async function PM(t,e,n=!1){const r=await lo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ji._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(t,e,n=!1){const{auth:r}=t;if(Dn(r.app))return Promise.reject(lr(r));const i="reauthenticate";try{const s=await lo(t,rI(r,i,e,t),n);J(s.idToken,r,"internal-error");const o=em(s.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),Ji._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&xn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(t,e,n=!1){if(Dn(t.app))return Promise.reject(lr(t));const r="signIn",i=await rI(t,r,e),s=await Ji._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function kM(t,e){return sI(rs(t),e)}async function CM(t,e){return iI(lt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(t){const e=rs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AM(t,e,n){if(Dn(t.app))return Promise.reject(lr(t));const r=rs(t),o=await bp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&oI(t),l}),a=await Ji._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function RM(t,e,n){return Dn(t.app)?Promise.reject(lr(t)):kM(lt(t),is.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oI(t),r})}function MM(t,e){return DM(lt(t),null,e)}async function DM(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await lo(t,_M(r,s));await t._updateTokensIfNecessary(o,!0)}function NM(t,e,n,r){return lt(t).onIdTokenChanged(e,n,r)}function LM(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function OM(t,e,n,r){return lt(t).onAuthStateChanged(e,n,r)}function VM(t){return lt(t).signOut()}const Ju="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ju,"1"),this.storage.removeItem(Ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=1e3,jM=10;class lI extends aI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);ZR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,jM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lI.type="LOCAL";const UM=lI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI extends aI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cI.type="SESSION";const uI=cI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Uh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await zM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=im("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}function $M(t){Vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function HM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qM(){return hI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="firebaseLocalStorageDb",KM=1,Zu="firebaseLocalStorage",fI="fbase_key";class Ml{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zh(t,e){return t.transaction([Zu],e?"readwrite":"readonly").objectStore(Zu)}function GM(){const t=indexedDB.deleteDatabase(dI);return new Ml(t).toPromise()}function Pp(){const t=indexedDB.open(dI,KM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zu,{keyPath:fI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zu)?e(r):(r.close(),await GM(),e(await Pp()))})})}async function Lv(t,e,n){const r=zh(t,!0).put({[fI]:e,value:n});return new Ml(r).toPromise()}async function QM(t,e){const n=zh(t,!1).get(e),r=await new Ml(n).toPromise();return r===void 0?null:r.value}function Ov(t,e){const n=zh(t,!0).delete(e);return new Ml(n).toPromise()}const YM=800,XM=3;class pI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uh._getInstance(qM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await HM(),!this.activeServiceWorker)return;this.sender=new BM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await Lv(e,Ju,"1"),await Ov(e,Ju),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Lv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ov(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=zh(i,!1).getAll();return new Ml(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pI.type="LOCAL";const JM=pI;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(t,e){return e?sr(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends nm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eD(t){return sI(t.auth,new sm(t),t.bypassAuthState)}function tD(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),iI(n,new sm(t),t.bypassAuthState)}async function nD(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),PM(n,new sm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eD;case"linkViaPopup":case"linkViaRedirect":return nD;case"reauthViaPopup":case"reauthViaRedirect":return tD;default:xn(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new Cl(2e3,1e4);class Os extends gI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Os.currentPopupAction&&Os.currentPopupAction.cancel(),Os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rD.get())};e()}}Os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="pendingRedirect",su=new Map;class sD extends gI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=su.get(this.auth._key());if(!e){try{const r=await oD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}su.set(this.auth._key(),e)}return this.bypassAuthState||su.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oD(t,e){const n=cD(e),r=lD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function aD(t,e){su.set(t._key(),e)}function lD(t){return sr(t._redirectPersistence)}function cD(t){return iu(iD,t.config.apiKey,t.name)}async function uD(t,e,n=!1){if(Dn(t.app))return Promise.reject(lr(t));const r=rs(t),i=ZM(r,e),o=await new sD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=10*60*1e3;class dD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(On(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vv(e))}saveEventToCache(e){this.cachedEventUids.add(Vv(e)),this.lastProcessedEventTime=Date.now()}}function Vv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(t,e={}){return Sr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mD=/^https?/;async function yD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pD(t);for(const n of e)try{if(_D(n))return}catch{}xn(t,"unauthorized-domain")}function _D(t){const e=Ip(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mD.test(n))return!1;if(gD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new Cl(3e4,6e4);function Fv(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wD(t){return new Promise((e,n)=>{var r,i,s;function o(){Fv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fv(),n(On(t,"network-request-failed"))},timeout:vD.get()})}if(!((i=(r=Vn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Vn().gapi)===null||s===void 0)&&s.load)o();else{const a=lM("iframefcb");return Vn()[a]=()=>{gapi.load?o():n(On(t,"network-request-failed"))},ZT(`${aM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ou=null,e})}let ou=null;function ED(t){return ou=ou||wD(t),ou}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=new Cl(5e3,15e3),TD="__/auth/iframe",ID="emulator/auth/iframe",xD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PD(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zg(e,ID):`https://${t.config.authDomain}/${TD}`,r={apiKey:e.apiKey,appName:t.name,v:To},i=bD.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${kl(r).slice(1)}`}async function kD(t){const e=await ED(t),n=Vn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:PD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xD,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=On(t,"network-request-failed"),a=Vn().setTimeout(()=>{s(o)},SD.get());function l(){Vn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AD=500,RD=600,MD="_blank",DD="http://localhost";class jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ND(t,e,n,r=AD,i=RD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},CD),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Tt().toLowerCase();n&&(a=qT(c)?MD:n),HT(c)&&(e=e||DD,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,y])=>`${f}${g}=${y},`,"");if(JR(c)&&a!=="_self")return LD(e||"",a),new jv(null);const d=window.open(e||"",a,h);J(d,t,"popup-blocked");try{d.focus()}catch{}return new jv(d)}function LD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="__/auth/handler",VD="emulator/auth/handler",FD=encodeURIComponent("fac");async function Uv(t,e,n,r,i,s){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:To,eventId:i};if(e instanceof nI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",SA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Rl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${FD}=${encodeURIComponent(l)}`:"";return`${jD(t)}?${kl(a).slice(1)}${c}`}function jD({config:t}){return t.emulator?Zg(t,VD):`https://${t.authDomain}/${OD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="webStorageSupport";class UD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uI,this._completeRedirectFn=uD,this._overrideRedirectResult=aD}async _openPopup(e,n,r,i){var s;gr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Uv(e,n,r,Ip(),i);return ND(e,o,im())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Uv(e,n,r,Ip(),i);return $M(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(gr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kD(e),r=new dD(e);return n.register("authEvent",i=>(J(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(af,{type:af},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[af];o!==void 0&&n(!!o),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return XT()||WT()||tm()}}const zD=UD;var zv="@firebase/auth",Bv="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HD(t){ao(new Yi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JT(t)},c=new iM(r,i,s,l);return pM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ao(new Yi("auth-internal",e=>{const n=rs(e.getProvider("auth").getImmediate());return(r=>new BD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ei(zv,Bv,$D(t)),ei(zv,Bv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=5*60,qD=kT("authIdTokenMaxAge")||WD;let $v=null;const KD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qD)return;const i=n==null?void 0:n.token;$v!==i&&($v=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function GD(t=MT()){const e=Yg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fM(t,{popupRedirectResolver:zD,persistence:[JM,UM,uI]}),r=kT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=KD(s.toString());LM(n,o,()=>o(n.currentUser)),NM(n,a=>o(a))}}const i=bT("auth");return i&&gM(n,`http://${i}`),n}function QD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}sM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=On("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",QD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HD("Browser");var YD="firebase",XD="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei(YD,XD,"app");var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bi,yI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function I(){}I.prototype=_.prototype,T.D=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(P,A,R){for(var C=Array(arguments.length-2),q=2;q<arguments.length;q++)C[q-2]=arguments[q];return _.prototype[A].apply(P,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);var P=Array(16);if(typeof _=="string")for(var A=0;16>A;++A)P[A]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(A=0;16>A;++A)P[A]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],A=T.g[2];var R=T.g[3],C=_+(R^I&(A^R))+P[0]+3614090360&4294967295;_=I+(C<<7&4294967295|C>>>25),C=R+(A^_&(I^A))+P[1]+3905402710&4294967295,R=_+(C<<12&4294967295|C>>>20),C=A+(I^R&(_^I))+P[2]+606105819&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(_^A&(R^_))+P[3]+3250441966&4294967295,I=A+(C<<22&4294967295|C>>>10),C=_+(R^I&(A^R))+P[4]+4118548399&4294967295,_=I+(C<<7&4294967295|C>>>25),C=R+(A^_&(I^A))+P[5]+1200080426&4294967295,R=_+(C<<12&4294967295|C>>>20),C=A+(I^R&(_^I))+P[6]+2821735955&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(_^A&(R^_))+P[7]+4249261313&4294967295,I=A+(C<<22&4294967295|C>>>10),C=_+(R^I&(A^R))+P[8]+1770035416&4294967295,_=I+(C<<7&4294967295|C>>>25),C=R+(A^_&(I^A))+P[9]+2336552879&4294967295,R=_+(C<<12&4294967295|C>>>20),C=A+(I^R&(_^I))+P[10]+4294925233&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(_^A&(R^_))+P[11]+2304563134&4294967295,I=A+(C<<22&4294967295|C>>>10),C=_+(R^I&(A^R))+P[12]+1804603682&4294967295,_=I+(C<<7&4294967295|C>>>25),C=R+(A^_&(I^A))+P[13]+4254626195&4294967295,R=_+(C<<12&4294967295|C>>>20),C=A+(I^R&(_^I))+P[14]+2792965006&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(_^A&(R^_))+P[15]+1236535329&4294967295,I=A+(C<<22&4294967295|C>>>10),C=_+(A^R&(I^A))+P[1]+4129170786&4294967295,_=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(_^I))+P[6]+3225465664&4294967295,R=_+(C<<9&4294967295|C>>>23),C=A+(_^I&(R^_))+P[11]+643717713&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^_&(A^R))+P[0]+3921069994&4294967295,I=A+(C<<20&4294967295|C>>>12),C=_+(A^R&(I^A))+P[5]+3593408605&4294967295,_=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(_^I))+P[10]+38016083&4294967295,R=_+(C<<9&4294967295|C>>>23),C=A+(_^I&(R^_))+P[15]+3634488961&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^_&(A^R))+P[4]+3889429448&4294967295,I=A+(C<<20&4294967295|C>>>12),C=_+(A^R&(I^A))+P[9]+568446438&4294967295,_=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(_^I))+P[14]+3275163606&4294967295,R=_+(C<<9&4294967295|C>>>23),C=A+(_^I&(R^_))+P[3]+4107603335&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^_&(A^R))+P[8]+1163531501&4294967295,I=A+(C<<20&4294967295|C>>>12),C=_+(A^R&(I^A))+P[13]+2850285829&4294967295,_=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(_^I))+P[2]+4243563512&4294967295,R=_+(C<<9&4294967295|C>>>23),C=A+(_^I&(R^_))+P[7]+1735328473&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^_&(A^R))+P[12]+2368359562&4294967295,I=A+(C<<20&4294967295|C>>>12),C=_+(I^A^R)+P[5]+4294588738&4294967295,_=I+(C<<4&4294967295|C>>>28),C=R+(_^I^A)+P[8]+2272392833&4294967295,R=_+(C<<11&4294967295|C>>>21),C=A+(R^_^I)+P[11]+1839030562&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^_)+P[14]+4259657740&4294967295,I=A+(C<<23&4294967295|C>>>9),C=_+(I^A^R)+P[1]+2763975236&4294967295,_=I+(C<<4&4294967295|C>>>28),C=R+(_^I^A)+P[4]+1272893353&4294967295,R=_+(C<<11&4294967295|C>>>21),C=A+(R^_^I)+P[7]+4139469664&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^_)+P[10]+3200236656&4294967295,I=A+(C<<23&4294967295|C>>>9),C=_+(I^A^R)+P[13]+681279174&4294967295,_=I+(C<<4&4294967295|C>>>28),C=R+(_^I^A)+P[0]+3936430074&4294967295,R=_+(C<<11&4294967295|C>>>21),C=A+(R^_^I)+P[3]+3572445317&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^_)+P[6]+76029189&4294967295,I=A+(C<<23&4294967295|C>>>9),C=_+(I^A^R)+P[9]+3654602809&4294967295,_=I+(C<<4&4294967295|C>>>28),C=R+(_^I^A)+P[12]+3873151461&4294967295,R=_+(C<<11&4294967295|C>>>21),C=A+(R^_^I)+P[15]+530742520&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^_)+P[2]+3299628645&4294967295,I=A+(C<<23&4294967295|C>>>9),C=_+(A^(I|~R))+P[0]+4096336452&4294967295,_=I+(C<<6&4294967295|C>>>26),C=R+(I^(_|~A))+P[7]+1126891415&4294967295,R=_+(C<<10&4294967295|C>>>22),C=A+(_^(R|~I))+P[14]+2878612391&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~_))+P[5]+4237533241&4294967295,I=A+(C<<21&4294967295|C>>>11),C=_+(A^(I|~R))+P[12]+1700485571&4294967295,_=I+(C<<6&4294967295|C>>>26),C=R+(I^(_|~A))+P[3]+2399980690&4294967295,R=_+(C<<10&4294967295|C>>>22),C=A+(_^(R|~I))+P[10]+4293915773&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~_))+P[1]+2240044497&4294967295,I=A+(C<<21&4294967295|C>>>11),C=_+(A^(I|~R))+P[8]+1873313359&4294967295,_=I+(C<<6&4294967295|C>>>26),C=R+(I^(_|~A))+P[15]+4264355552&4294967295,R=_+(C<<10&4294967295|C>>>22),C=A+(_^(R|~I))+P[6]+2734768916&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~_))+P[13]+1309151649&4294967295,I=A+(C<<21&4294967295|C>>>11),C=_+(A^(I|~R))+P[4]+4149444226&4294967295,_=I+(C<<6&4294967295|C>>>26),C=R+(I^(_|~A))+P[11]+3174756917&4294967295,R=_+(C<<10&4294967295|C>>>22),C=A+(_^(R|~I))+P[2]+718787259&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~_))+P[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var I=_-this.blockSize,P=this.B,A=this.h,R=0;R<_;){if(A==0)for(;R<=I;)i(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<_;)if(P[A++]=T.charCodeAt(R++),A==this.blockSize){i(this,P),A=0;break}}else for(;R<_;)if(P[A++]=T[R++],A==this.blockSize){i(this,P),A=0;break}}this.h=A,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var I=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=I&255,I/=256;for(this.u(T),T=Array(16),_=I=0;4>_;++_)for(var P=0;32>P;P+=8)T[I++]=this.g[_]>>>P&255;return T};function s(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function o(T,_){this.h=_;for(var I=[],P=!0,A=T.length-1;0<=A;A--){var R=T[A]|0;P&&R==_||(I[A]=R,P=!1)}this.g=I}var a={};function l(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return S(c(-T));for(var _=[],I=1,P=0;T>=I;P++)_[P]=T/I|0,I*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return S(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(_,8)),P=d,A=0;A<T.length;A+=8){var R=Math.min(8,T.length-A),C=parseInt(T.substring(A,A+R),_);8>R?(R=c(Math.pow(_,R)),P=P.j(R).add(c(C))):(P=P.j(I),P=P.add(c(C)))}return P}var d=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-S(this).m();for(var T=0,_=1,I=0;I<this.g.length;I++){var P=this.i(I);T+=(0<=P?P:4294967296+P)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(v(this))return"-"+S(this).toString(T);for(var _=c(Math.pow(T,6)),I=this,P="";;){var A=M(I,_).g;I=w(I,A.j(_));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=A,y(I))return R+P;for(;6>R.length;)R="0"+R;P=R+P}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=w(this,T),v(T)?-1:y(T)?0:1};function S(T){for(var _=T.g.length,I=[],P=0;P<_;P++)I[P]=~T.g[P];return new o(I,~T.h).add(f)}t.abs=function(){return v(this)?S(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],P=0,A=0;A<=_;A++){var R=P+(this.i(A)&65535)+(T.i(A)&65535),C=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);P=C>>>16,R&=65535,C&=65535,I[A]=C<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(T,_){return T.add(S(_))}t.j=function(T){if(y(this)||y(T))return d;if(v(this))return v(T)?S(this).j(S(T)):S(S(this).j(T));if(v(T))return S(this.j(S(T)));if(0>this.l(g)&&0>T.l(g))return c(this.m()*T.m());for(var _=this.g.length+T.g.length,I=[],P=0;P<2*_;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var A=0;A<T.g.length;A++){var R=this.i(P)>>>16,C=this.i(P)&65535,q=T.i(A)>>>16,X=T.i(A)&65535;I[2*P+2*A]+=C*X,E(I,2*P+2*A),I[2*P+2*A+1]+=R*X,E(I,2*P+2*A+1),I[2*P+2*A+1]+=C*q,E(I,2*P+2*A+1),I[2*P+2*A+2]+=R*q,E(I,2*P+2*A+2)}for(P=0;P<_;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=_;P<2*_;P++)I[P]=0;return new o(I,0)};function E(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function b(T,_){this.g=T,this.h=_}function M(T,_){if(y(_))throw Error("division by zero");if(y(T))return new b(d,d);if(v(T))return _=M(S(T),_),new b(S(_.g),S(_.h));if(v(_))return _=M(T,S(_)),new b(S(_.g),_.h);if(30<T.g.length){if(v(T)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var I=f,P=_;0>=P.l(T);)I=D(I),P=D(P);var A=L(I,1),R=L(P,1);for(P=L(P,2),I=L(I,2);!y(P);){var C=R.add(P);0>=C.l(T)&&(A=A.add(I),R=C),P=L(P,1),I=L(I,1)}return _=w(T,A.j(_)),new b(A,_)}for(A=d;0<=T.l(_);){for(I=Math.max(1,Math.floor(T.m()/_.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),R=c(I),C=R.j(_);v(C)||0<C.l(T);)I-=P,R=c(I),C=R.j(_);y(R)&&(R=f),A=A.add(R),T=w(T,C)}return new b(A,T)}t.A=function(T){return M(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],P=0;P<_;P++)I[P]=this.i(P)&T.i(P);return new o(I,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],P=0;P<_;P++)I[P]=this.i(P)|T.i(P);return new o(I,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],P=0;P<_;P++)I[P]=this.i(P)^T.i(P);return new o(I,this.h^T.h)};function D(T){for(var _=T.g.length+1,I=[],P=0;P<_;P++)I[P]=T.i(P)<<1|T.i(P-1)>>>31;return new o(I,T.h)}function L(T,_){var I=_>>5;_%=32;for(var P=T.g.length-I,A=[],R=0;R<P;R++)A[R]=0<_?T.i(R+I)>>>_|T.i(R+I+1)<<32-_:T.i(R+I);return new o(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Bi=o}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});var Sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _I,pa,vI,au,kp,wI,EI,SI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,m){return u==Array.prototype||u==Object.prototype||(u[p]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sc=="object"&&Sc];for(var p=0;p<u.length;++p){var m=u[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var m=r;u=u.split(".");for(var x=0;x<u.length-1;x++){var N=u[x];if(!(N in m))break e;m=m[N]}u=u[u.length-1],x=m[u],p=p(x),p!=x&&p!=null&&e(m,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var m=0,x=!1,N={next:function(){if(!x&&m<u.length){var O=m++;return{value:p(O,u[O]),done:!1}}return x=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,m){return u.call.apply(u.bind,arguments)}function d(u,p,m){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,x),u.apply(p,N)}}return function(){return u.apply(p,arguments)}}function f(u,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function g(u,p){var m=Array.prototype.slice.call(arguments,1);return function(){var x=m.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function y(u,p){function m(){}m.prototype=p.prototype,u.aa=p.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(x,N,O){for(var B=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)B[Te-2]=arguments[Te];return p.prototype[N].apply(x,B)}}function v(u){const p=u.length;if(0<p){const m=Array(p);for(let x=0;x<p;x++)m[x]=u[x];return m}return[]}function S(u,p){for(let m=1;m<arguments.length;m++){const x=arguments[m];if(l(x)){const N=u.length||0,O=x.length||0;u.length=N+O;for(let B=0;B<O;B++)u[N+B]=x[B]}else u.push(x)}}class w{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function E(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function M(u){return M[" "](u),u}M[" "]=function(){};var D=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function L(u,p,m){for(const x in u)p.call(m,u[x],x,u)}function T(u,p){for(const m in u)p.call(void 0,u[m],m,u)}function _(u){const p={};for(const m in u)p[m]=u[m];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let m,x;for(let N=1;N<arguments.length;N++){x=arguments[N];for(m in x)u[m]=x[m];for(let O=0;O<I.length;O++)m=I[O],Object.prototype.hasOwnProperty.call(x,m)&&(u[m]=x[m])}}function A(u){var p=1;u=u.split(":");const m=[];for(;0<p&&u.length;)m.push(u.shift()),p--;return u.length&&m.push(u.join(":")),m}function R(u){a.setTimeout(()=>{throw u},0)}function C(){var u=$;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class q{constructor(){this.h=this.g=null}add(p,m){const x=X.get();x.set(p,m),this.h?this.h.next=x:this.g=x,this.h=x}}var X=new w(()=>new Z,u=>u.reset());class Z{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,U=!1,$=new q,G=()=>{const u=a.Promise.resolve(void 0);ae=()=>{u.then(oe)}};var oe=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){R(m)}var p=X;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}U=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return u}();function se(u,p){if(te.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(D){e:{try{M(p.nodeName);var N=!0;break e}catch{}N=!1}N||(p=null)}}else m=="mouseover"?p=u.fromElement:m=="mouseout"&&(p=u.toElement);this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&se.aa.h.call(this)}}y(se,te);var me={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var tt="closure_listenable_"+(1e6*Math.random()|0),Tr=0;function gi(u,p,m,x,N){this.listener=u,this.proxy=null,this.src=p,this.type=m,this.capture=!!x,this.ha=N,this.key=++Tr,this.da=this.fa=!1}function dn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Fe(u){this.src=u,this.g={},this.h=0}Fe.prototype.add=function(u,p,m,x,N){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var B=ut(u,p,x,N);return-1<B?(p=u[B],m||(p.fa=!1)):(p=new gi(p,this.src,O,!!x,N),p.fa=m,u.push(p)),p};function It(u,p){var m=p.type;if(m in u.g){var x=u.g[m],N=Array.prototype.indexOf.call(x,p,void 0),O;(O=0<=N)&&Array.prototype.splice.call(x,N,1),O&&(dn(p),u.g[m].length==0&&(delete u.g[m],u.h--))}}function ut(u,p,m,x){for(var N=0;N<u.length;++N){var O=u[N];if(!O.da&&O.listener==p&&O.capture==!!m&&O.ha==x)return N}return-1}var Hn="closure_lm_"+(1e6*Math.random()|0),Wn={};function mi(u,p,m,x,N){if(Array.isArray(p)){for(var O=0;O<p.length;O++)mi(u,p[O],m,x,N);return null}return m=ey(m),u&&u[tt]?u.K(p,m,c(x)?!!x.capture:!!x,N):Xt(u,p,m,!1,x,N)}function Xt(u,p,m,x,N,O){if(!p)throw Error("Invalid event type");var B=c(N)?!!N.capture:!!N,Te=Do(u);if(Te||(u[Hn]=Te=new Fe(u)),m=Te.add(p,m,x,B,O),m.proxy)return m;if(x=ye(),m.proxy=x,x.src=u,x.listener=m,u.addEventListener)ce||(N=B),N===void 0&&(N=!1),u.addEventListener(p.toString(),x,N);else if(u.attachEvent)u.attachEvent(Mo(p.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ye(){function u(m){return p.call(u.src,u.listener,m)}const p=sd;return u}function De(u,p,m,x,N){if(Array.isArray(p))for(var O=0;O<p.length;O++)De(u,p[O],m,x,N);else x=c(x)?!!x.capture:!!x,m=ey(m),u&&u[tt]?(u=u.i,p=String(p).toString(),p in u.g&&(O=u.g[p],m=ut(O,m,x,N),-1<m&&(dn(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete u.g[p],u.h--)))):u&&(u=Do(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ut(p,m,x,N)),(m=-1<u?p[u]:null)&&yi(m))}function yi(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[tt])It(p.i,u);else{var m=u.type,x=u.proxy;p.removeEventListener?p.removeEventListener(m,x,u.capture):p.detachEvent?p.detachEvent(Mo(m),x):p.addListener&&p.removeListener&&p.removeListener(x),(m=Do(p))?(It(m,u),m.h==0&&(m.src=null,p[Hn]=null)):dn(u)}}}function Mo(u){return u in Wn?Wn[u]:Wn[u]="on"+u}function sd(u,p){if(u.da)u=!0;else{p=new se(p,this);var m=u.listener,x=u.ha||u.src;u.fa&&yi(u),u=m.call(x,p)}return u}function Do(u){return u=u[Hn],u instanceof Fe?u:null}var od="__closure_events_fn_"+(1e9*Math.random()>>>0);function ey(u){return typeof u=="function"?u:(u[od]||(u[od]=function(p){return u.handleEvent(p)}),u[od])}function ht(){Q.call(this),this.i=new Fe(this),this.M=this,this.F=null}y(ht,Q),ht.prototype[tt]=!0,ht.prototype.removeEventListener=function(u,p,m,x){De(this,u,p,m,x)};function xt(u,p){var m,x=u.F;if(x)for(m=[];x;x=x.F)m.push(x);if(u=u.M,x=p.type||p,typeof p=="string")p=new te(p,u);else if(p instanceof te)p.target=p.target||u;else{var N=p;p=new te(x,u),P(p,N)}if(N=!0,m)for(var O=m.length-1;0<=O;O--){var B=p.g=m[O];N=Ul(B,x,!0,p)&&N}if(B=p.g=u,N=Ul(B,x,!0,p)&&N,N=Ul(B,x,!1,p)&&N,m)for(O=0;O<m.length;O++)B=p.g=m[O],N=Ul(B,x,!1,p)&&N}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var m=u.g[p],x=0;x<m.length;x++)dn(m[x]);delete u.g[p],u.h--}}this.F=null},ht.prototype.K=function(u,p,m,x){return this.i.add(String(u),p,!1,m,x)},ht.prototype.L=function(u,p,m,x){return this.i.add(String(u),p,!0,m,x)};function Ul(u,p,m,x){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var N=!0,O=0;O<p.length;++O){var B=p[O];if(B&&!B.da&&B.capture==m){var Te=B.listener,nt=B.ha||B.src;B.fa&&It(u.i,B),N=Te.call(nt,x)!==!1&&N}}return N&&!x.defaultPrevented}function ty(u,p,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function ny(u){u.g=ty(()=>{u.g=null,u.i&&(u.i=!1,ny(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Ux extends Q{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ny(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function No(u){Q.call(this),this.h=u,this.g={}}y(No,Q);var ry=[];function iy(u){L(u.g,function(p,m){this.g.hasOwnProperty(m)&&yi(p)},u),u.g={}}No.prototype.N=function(){No.aa.N.call(this),iy(this)},No.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ad=a.JSON.stringify,zx=a.JSON.parse,Bx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ld(){}ld.prototype.h=null;function sy(u){return u.h||(u.h=u.i())}function oy(){}var Lo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cd(){te.call(this,"d")}y(cd,te);function ud(){te.call(this,"c")}y(ud,te);var _i={},ay=null;function zl(){return ay=ay||new ht}_i.La="serverreachability";function ly(u){te.call(this,_i.La,u)}y(ly,te);function Oo(u){const p=zl();xt(p,new ly(p))}_i.STAT_EVENT="statevent";function cy(u,p){te.call(this,_i.STAT_EVENT,u),this.stat=p}y(cy,te);function bt(u){const p=zl();xt(p,new cy(p,u))}_i.Ma="timingevent";function uy(u,p){te.call(this,_i.Ma,u),this.size=p}y(uy,te);function Vo(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Fo(){this.g=!0}Fo.prototype.xa=function(){this.g=!1};function $x(u,p,m,x,N,O){u.info(function(){if(u.g)if(O)for(var B="",Te=O.split("&"),nt=0;nt<Te.length;nt++){var _e=Te[nt].split("=");if(1<_e.length){var dt=_e[0];_e=_e[1];var ft=dt.split("_");B=2<=ft.length&&ft[1]=="type"?B+(dt+"="+_e+"&"):B+(dt+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+x+") [attempt "+N+"]: "+p+`
`+m+`
`+B})}function Hx(u,p,m,x,N,O,B){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+N+"]: "+p+`
`+m+`
`+O+" "+B})}function ds(u,p,m,x){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+qx(u,m)+(x?" "+x:"")})}function Wx(u,p){u.info(function(){return"TIMEOUT: "+p})}Fo.prototype.info=function(){};function qx(u,p){if(!u.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var x=m[u];if(!(2>x.length)){var N=x[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<N.length;B++)N[B]=""}}}}return ad(m)}catch{return p}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hd;function $l(){}y($l,ld),$l.prototype.g=function(){return new XMLHttpRequest},$l.prototype.i=function(){return{}},hd=new $l;function Ir(u,p,m,x){this.j=u,this.i=p,this.l=m,this.R=x||1,this.U=new No(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dy}function dy(){this.i=null,this.g="",this.h=!1}var fy={},dd={};function fd(u,p,m){u.L=1,u.v=Kl(qn(p)),u.m=m,u.P=!0,py(u,null)}function py(u,p){u.F=Date.now(),Hl(u),u.A=qn(u.v);var m=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),ky(m.i,"t",x),u.C=0,m=u.j.J,u.h=new dy,u.g=qy(u.j,m?p:null,!u.m),0<u.O&&(u.M=new Ux(f(u.Y,u,u.g),u.O)),p=u.U,m=u.g,x=u.ca;var N="readystatechange";Array.isArray(N)||(N&&(ry[0]=N.toString()),N=ry);for(var O=0;O<N.length;O++){var B=mi(m,N[O],x||p.handleEvent,!1,p.h||p);if(!B)break;p.g[B.key]=B}p=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Oo(),$x(u.i,u.u,u.A,u.l,u.R,u.m)}Ir.prototype.ca=function(u){u=u.target;const p=this.M;p&&Kn(u)==3?p.j():this.Y(u)},Ir.prototype.Y=function(u){try{if(u==this.g)e:{const ft=Kn(this.g);var p=this.g.Ba();const gs=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Ly(this.g)))){this.J||ft!=4||p==7||(p==8||0>=gs?Oo(3):Oo(2)),pd(this);var m=this.g.Z();this.X=m;t:if(gy(this)){var x=Ly(this.g);u="";var N=x.length,O=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),jo(this);var B="";break t}this.h.i=new a.TextDecoder}for(p=0;p<N;p++)this.h.h=!0,u+=this.h.i.decode(x[p],{stream:!(O&&p==N-1)});x.length=0,this.h.g+=u,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,Hx(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,nt=this.g;if((Te=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Te)){var _e=Te;break t}}_e=null}if(m=_e)ds(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gd(this,m);else{this.o=!1,this.s=3,bt(12),vi(this),jo(this);break e}}if(this.P){m=!0;let fn;for(;!this.J&&this.C<B.length;)if(fn=Kx(this,B),fn==dd){ft==4&&(this.s=4,bt(14),m=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==fy){this.s=4,bt(15),ds(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else ds(this.i,this.l,fn,null),gd(this,fn);if(gy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||B.length!=0||this.h.h||(this.s=1,bt(16),m=!1),this.o=this.o&&m,!m)ds(this.i,this.l,B,"[Invalid Chunked Response]"),vi(this),jo(this);else if(0<B.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Ed(dt),dt.M=!0,bt(11))}}else ds(this.i,this.l,B,null),gd(this,B);ft==4&&vi(this),this.o&&!this.J&&(ft==4?By(this.j,this):(this.o=!1,Hl(this)))}else ub(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),vi(this),jo(this)}}}catch{}finally{}};function gy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Kx(u,p){var m=u.C,x=p.indexOf(`
`,m);return x==-1?dd:(m=Number(p.substring(m,x)),isNaN(m)?fy:(x+=1,x+m>p.length?dd:(p=p.slice(x,x+m),u.C=x+m,p)))}Ir.prototype.cancel=function(){this.J=!0,vi(this)};function Hl(u){u.S=Date.now()+u.I,my(u,u.I)}function my(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Vo(f(u.ba,u),p)}function pd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ir.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Wx(this.i,this.A),this.L!=2&&(Oo(),bt(17)),vi(this),this.s=2,jo(this)):my(this,this.S-u)};function jo(u){u.j.G==0||u.J||By(u.j,u)}function vi(u){pd(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,iy(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function gd(u,p){try{var m=u.j;if(m.G!=0&&(m.g==u||md(m.h,u))){if(!u.K&&md(m.h,u)&&m.G==3){try{var x=m.Da.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var N=x;if(N[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Zl(m),Xl(m);else break e;wd(m),bt(18)}}else m.za=N[1],0<m.za-m.T&&37500>N[2]&&m.F&&m.v==0&&!m.C&&(m.C=Vo(f(m.Za,m),6e3));if(1>=vy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ei(m,11)}else if((u.K||m.g==u)&&Zl(m),!E(p))for(N=m.Da.g.parse(p),p=0;p<N.length;p++){let _e=N[p];if(m.T=_e[0],_e=_e[1],m.G==2)if(_e[0]=="c"){m.K=_e[1],m.ia=_e[2];const dt=_e[3];dt!=null&&(m.la=dt,m.j.info("VER="+m.la));const ft=_e[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const gs=_e[5];gs!=null&&typeof gs=="number"&&0<gs&&(x=1.5*gs,m.L=x,m.j.info("backChannelRequestTimeoutMs_="+x)),x=m;const fn=u.g;if(fn){const tc=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tc){var O=x.h;O.g||tc.indexOf("spdy")==-1&&tc.indexOf("quic")==-1&&tc.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(yd(O,O.h),O.h=null))}if(x.D){const Sd=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Sd&&(x.ya=Sd,be(x.I,x.D,Sd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),x=m;var B=u;if(x.qa=Wy(x,x.J?x.ia:null,x.W),B.K){wy(x.h,B);var Te=B,nt=x.L;nt&&(Te.I=nt),Te.B&&(pd(Te),Hl(Te)),x.g=B}else Uy(x);0<m.i.length&&Jl(m)}else _e[0]!="stop"&&_e[0]!="close"||Ei(m,7);else m.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Ei(m,7):vd(m):_e[0]!="noop"&&m.l&&m.l.ta(_e),m.v=0)}}Oo(4)}catch{}}var Gx=class{constructor(u,p){this.g=u,this.map=p}};function yy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _y(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function vy(u){return u.h?1:u.g?u.g.size:0}function md(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function yd(u,p){u.g?u.g.add(p):u.h=p}function wy(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}yy.prototype.cancel=function(){if(this.i=Ey(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ey(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const m of u.g.values())p=p.concat(m.D);return p}return v(u.i)}function Qx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],m=u.length,x=0;x<m;x++)p.push(u[x]);return p}p=[],m=0;for(x in u)p[m++]=u[x];return p}function Yx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var m=0;m<u;m++)p.push(m);return p}p=[],m=0;for(const x in u)p[m++]=x;return p}}}function Sy(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var m=Yx(u),x=Qx(u),N=x.length,O=0;O<N;O++)p.call(void 0,x[O],m&&m[O],u)}var Ty=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xx(u,p){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var x=u[m].indexOf("="),N=null;if(0<=x){var O=u[m].substring(0,x);N=u[m].substring(x+1)}else O=u[m];p(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function wi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof wi){this.h=u.h,Wl(this,u.j),this.o=u.o,this.g=u.g,ql(this,u.s),this.l=u.l;var p=u.i,m=new Bo;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),Iy(this,m),this.m=u.m}else u&&(p=String(u).match(Ty))?(this.h=!1,Wl(this,p[1]||"",!0),this.o=Uo(p[2]||""),this.g=Uo(p[3]||"",!0),ql(this,p[4]),this.l=Uo(p[5]||"",!0),Iy(this,p[6]||"",!0),this.m=Uo(p[7]||"")):(this.h=!1,this.i=new Bo(null,this.h))}wi.prototype.toString=function(){var u=[],p=this.j;p&&u.push(zo(p,xy,!0),":");var m=this.g;return(m||p=="file")&&(u.push("//"),(p=this.o)&&u.push(zo(p,xy,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(zo(m,m.charAt(0)=="/"?eb:Zx,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",zo(m,nb)),u.join("")};function qn(u){return new wi(u)}function Wl(u,p,m){u.j=m?Uo(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ql(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Iy(u,p,m){p instanceof Bo?(u.i=p,rb(u.i,u.h)):(m||(p=zo(p,tb)),u.i=new Bo(p,u.h))}function be(u,p,m){u.i.set(p,m)}function Kl(u){return be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Uo(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function zo(u,p,m){return typeof u=="string"?(u=encodeURI(u).replace(p,Jx),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var xy=/[#\/\?@]/g,Zx=/[#\?:]/g,eb=/[#\?]/g,tb=/[#\?@]/g,nb=/#/g;function Bo(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function xr(u){u.g||(u.g=new Map,u.h=0,u.i&&Xx(u.i,function(p,m){u.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=Bo.prototype,t.add=function(u,p){xr(this),this.i=null,u=fs(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(p),this.h+=1,this};function by(u,p){xr(u),p=fs(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Py(u,p){return xr(u),p=fs(u,p),u.g.has(p)}t.forEach=function(u,p){xr(this),this.g.forEach(function(m,x){m.forEach(function(N){u.call(p,N,x,this)},this)},this)},t.na=function(){xr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let x=0;x<p.length;x++){const N=u[x];for(let O=0;O<N.length;O++)m.push(p[x])}return m},t.V=function(u){xr(this);let p=[];if(typeof u=="string")Py(this,u)&&(p=p.concat(this.g.get(fs(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)p=p.concat(u[m])}return p},t.set=function(u,p){return xr(this),this.i=null,u=fs(this,u),Py(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function ky(u,p,m){by(u,p),0<m.length&&(u.i=null,u.g.set(fs(u,p),v(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var x=p[m];const O=encodeURIComponent(String(x)),B=this.V(x);for(x=0;x<B.length;x++){var N=O;B[x]!==""&&(N+="="+encodeURIComponent(String(B[x]))),u.push(N)}}return this.i=u.join("&")};function fs(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function rb(u,p){p&&!u.j&&(xr(u),u.i=null,u.g.forEach(function(m,x){var N=x.toLowerCase();x!=N&&(by(this,x),ky(this,N,m))},u)),u.j=p}function ib(u,p){const m=new Fo;if(a.Image){const x=new Image;x.onload=g(br,m,"TestLoadImage: loaded",!0,p,x),x.onerror=g(br,m,"TestLoadImage: error",!1,p,x),x.onabort=g(br,m,"TestLoadImage: abort",!1,p,x),x.ontimeout=g(br,m,"TestLoadImage: timeout",!1,p,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else p(!1)}function sb(u,p){const m=new Fo,x=new AbortController,N=setTimeout(()=>{x.abort(),br(m,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:x.signal}).then(O=>{clearTimeout(N),O.ok?br(m,"TestPingServer: ok",!0,p):br(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),br(m,"TestPingServer: error",!1,p)})}function br(u,p,m,x,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),x(m)}catch{}}function ob(){this.g=new Bx}function ab(u,p,m){const x=m||"";try{Sy(u,function(N,O){let B=N;c(N)&&(B=ad(N)),p.push(x+O+"="+encodeURIComponent(B))})}catch(N){throw p.push(x+"type="+encodeURIComponent("_badmap")),N}}function Gl(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Gl,ld),Gl.prototype.g=function(){return new Ql(this.l,this.j)},Gl.prototype.i=function(u){return function(){return u}}({});function Ql(u,p){ht.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Ql,ht),t=Ql.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Ho(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$o(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ho(this)),this.g&&(this.readyState=3,Ho(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?$o(this):Ho(this),this.readyState==3&&Cy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,$o(this))},t.Qa=function(u){this.g&&(this.response=u,$o(this))},t.ga=function(){this.g&&$o(this)};function $o(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ho(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=p.next();return u.join(`\r
`)};function Ho(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ql.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ay(u){let p="";return L(u,function(m,x){p+=x,p+=":",p+=m,p+=`\r
`}),p}function _d(u,p,m){e:{for(x in m){var x=!1;break e}x=!0}x||(m=Ay(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):be(u,p,m))}function je(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(je,ht);var lb=/^https?$/i,cb=["POST","PUT"];t=je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,m,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hd.g(),this.v=this.o?sy(this.o):sy(hd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(O){Ry(this,O);return}if(u=m||"",m=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var N in x)m.set(N,x[N]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const O of x.keys())m.set(O,x.get(O));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),N=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cb,p,void 0))||x||N||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of m)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ny(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){Ry(this,O)}};function Ry(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,My(u),Yl(u)}function My(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xt(this,"complete"),xt(this,"abort"),Yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yl(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Dy(this):this.bb())},t.bb=function(){Dy(this)};function Dy(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Kn(u)!=4||u.Z()!=2)){if(u.u&&Kn(u)==4)ty(u.Ea,0,u);else if(xt(u,"readystatechange"),Kn(u)==4){u.h=!1;try{const B=u.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var x;if(x=B===0){var N=String(u.D).match(Ty)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),x=!lb.test(N?N.toLowerCase():"")}m=x}if(m)xt(u,"complete"),xt(u,"success");else{u.m=6;try{var O=2<Kn(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",My(u)}}finally{Yl(u)}}}}function Yl(u,p){if(u.g){Ny(u);const m=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||xt(u,"ready");try{m.onreadystatechange=x}catch{}}}function Ny(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Kn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),zx(p)}};function Ly(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ub(u){const p={};u=(u.g&&2<=Kn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(E(u[x]))continue;var m=A(u[x]);const N=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=p[N]||[];p[N]=O,O.push(m)}T(p,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wo(u,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||p}function Oy(u){this.Aa=0,this.i=[],this.j=new Fo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wo("baseRetryDelayMs",5e3,u),this.cb=Wo("retryDelaySeedMs",1e4,u),this.Wa=Wo("forwardChannelMaxRetries",2,u),this.wa=Wo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new yy(u&&u.concurrentRequestLimit),this.Da=new ob,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Oy.prototype,t.la=8,t.G=1,t.connect=function(u,p,m,x){bt(0),this.W=u,this.H=p||{},m&&x!==void 0&&(this.H.OSID=m,this.H.OAID=x),this.F=this.X,this.I=Wy(this,null,this.W),Jl(this)};function vd(u){if(Vy(u),u.G==3){var p=u.U++,m=qn(u.I);if(be(m,"SID",u.K),be(m,"RID",p),be(m,"TYPE","terminate"),qo(u,m),p=new Ir(u,u.j,p),p.L=2,p.v=Kl(qn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=qy(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Hl(p)}Hy(u)}function Xl(u){u.g&&(Ed(u),u.g.cancel(),u.g=null)}function Vy(u){Xl(u),u.u&&(a.clearTimeout(u.u),u.u=null),Zl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Jl(u){if(!_y(u.h)&&!u.s){u.s=!0;var p=u.Ga;ae||G(),U||(ae(),U=!0),$.add(p,u),u.B=0}}function hb(u,p){return vy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Vo(f(u.Ga,u,p),$y(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const N=new Ir(this,this.j,u);let O=this.o;if(this.S&&(O?(O=_(O),P(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var x=this.i[m];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=jy(this,N,p),m=qn(this.I),be(m,"RID",u),be(m,"CVER",22),this.D&&be(m,"X-HTTP-Session-Id",this.D),qo(this,m),O&&(this.O?p="headers="+encodeURIComponent(String(Ay(O)))+"&"+p:this.m&&_d(m,this.m,O)),yd(this.h,N),this.Ua&&be(m,"TYPE","init"),this.P?(be(m,"$req",p),be(m,"SID","null"),N.T=!0,fd(N,m,null)):fd(N,m,p),this.G=2}}else this.G==3&&(u?Fy(this,u):this.i.length==0||_y(this.h)||Fy(this))};function Fy(u,p){var m;p?m=p.l:m=u.U++;const x=qn(u.I);be(x,"SID",u.K),be(x,"RID",m),be(x,"AID",u.T),qo(u,x),u.m&&u.o&&_d(x,u.m,u.o),m=new Ir(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),p&&(u.i=p.D.concat(u.i)),p=jy(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),yd(u.h,m),fd(m,x,p)}function qo(u,p){u.H&&L(u.H,function(m,x){be(p,x,m)}),u.l&&Sy({},function(m,x){be(p,x,m)})}function jy(u,p,m){m=Math.min(u.i.length,m);var x=u.l?f(u.l.Na,u.l,u):null;e:{var N=u.i;let O=-1;for(;;){const B=["count="+m];O==-1?0<m?(O=N[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let Te=!0;for(let nt=0;nt<m;nt++){let _e=N[nt].g;const dt=N[nt].map;if(_e-=O,0>_e)O=Math.max(0,N[nt].g-100),Te=!1;else try{ab(dt,B,"req"+_e+"_")}catch{x&&x(dt)}}if(Te){x=B.join("&");break e}}}return u=u.i.splice(0,m),p.D=u,x}function Uy(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ae||G(),U||(ae(),U=!0),$.add(p,u),u.v=0}}function wd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Vo(f(u.Fa,u),$y(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,zy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Vo(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Xl(this),zy(this))};function Ed(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function zy(u){u.g=new Ir(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=qn(u.qa);be(p,"RID","rpc"),be(p,"SID",u.K),be(p,"AID",u.T),be(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&be(p,"TO",u.ja),be(p,"TYPE","xmlhttp"),qo(u,p),u.m&&u.o&&_d(p,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Kl(qn(p)),m.m=null,m.P=!0,py(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Xl(this),wd(this),bt(19))};function Zl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function By(u,p){var m=null;if(u.g==p){Zl(u),Ed(u),u.g=null;var x=2}else if(md(u.h,p))m=p.D,wy(u.h,p),x=1;else return;if(u.G!=0){if(p.o)if(x==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var N=u.B;x=zl(),xt(x,new uy(x,m)),Jl(u)}else Uy(u);else if(N=p.s,N==3||N==0&&0<p.X||!(x==1&&hb(u,p)||x==2&&wd(u)))switch(m&&0<m.length&&(p=u.h,p.i=p.i.concat(m)),N){case 1:Ei(u,5);break;case 4:Ei(u,10);break;case 3:Ei(u,6);break;default:Ei(u,2)}}}function $y(u,p){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*p}function Ei(u,p){if(u.j.info("Error code "+p),p==2){var m=f(u.fb,u),x=u.Xa;const N=!x;x=new wi(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wl(x,"https"),Kl(x),N?ib(x.toString(),m):sb(x.toString(),m)}else bt(2);u.G=0,u.l&&u.l.sa(p),Hy(u),Vy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Hy(u){if(u.G=0,u.ka=[],u.l){const p=Ey(u.h);(p.length!=0||u.i.length!=0)&&(S(u.ka,p),S(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function Wy(u,p,m){var x=m instanceof wi?qn(m):new wi(m);if(x.g!="")p&&(x.g=p+"."+x.g),ql(x,x.s);else{var N=a.location;x=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;var O=new wi(null);x&&Wl(O,x),p&&(O.g=p),N&&ql(O,N),m&&(O.l=m),x=O}return m=u.D,p=u.ya,m&&p&&be(x,m,p),be(x,"VER",u.la),qo(u,x),x}function qy(u,p,m){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new je(new Gl({eb:m})):new je(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ky(){}t=Ky.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ec(){}ec.prototype.g=function(u,p){return new Bt(u,p)};function Bt(u,p){ht.call(this),this.g=new Oy(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!E(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ps(this)}y(Bt,ht),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){vd(this.g)},Bt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=ad(u),u=m);p.i.push(new Gx(p.Ya++,u)),p.G==3&&Jl(p)},Bt.prototype.N=function(){this.g.l=null,delete this.j,vd(this.g),delete this.g,Bt.aa.N.call(this)};function Gy(u){cd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const m in p){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}y(Gy,cd);function Qy(){ud.call(this),this.status=1}y(Qy,ud);function ps(u){this.g=u}y(ps,Ky),ps.prototype.ua=function(){xt(this.g,"a")},ps.prototype.ta=function(u){xt(this.g,new Gy(u))},ps.prototype.sa=function(u){xt(this.g,new Qy)},ps.prototype.ra=function(){xt(this.g,"b")},ec.prototype.createWebChannel=ec.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,SI=function(){return new ec},EI=function(){return zl()},wI=_i,kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,au=Bl,hy.COMPLETE="complete",vI=hy,oy.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",ht.prototype.listen=ht.prototype.K,pa=oy,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,_I=je}).apply(typeof Sc<"u"?Sc:typeof self<"u"?self:typeof window<"u"?window:{});const Wv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new Gg("@firebase/firestore");function vs(){return Zi.logLevel}function H(t,...e){if(Zi.logLevel<=ue.DEBUG){const n=e.map(om);Zi.debug(`Firestore (${Io}): ${t}`,...n)}}function mr(t,...e){if(Zi.logLevel<=ue.ERROR){const n=e.map(om);Zi.error(`Firestore (${Io}): ${t}`,...n)}}function co(t,...e){if(Zi.logLevel<=ue.WARN){const n=e.map(om);Zi.warn(`Firestore (${Io}): ${t}`,...n)}}function om(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: `+t;throw mr(e),new Error(e)}function we(t,e){t||ee()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class ZD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eN{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new TI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new _t(e)}}class tN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class nN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new rN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function uo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Me(0,0))}static max(){return new re(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return al.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof al?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends al{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const oN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends al{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return oN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ce.fromString(e))}static fromName(e){return new Y(Ce.fromString(e).popFirst(5))}static empty(){return new Y(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ce(e.slice()))}}function aN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Me(n+1,0):new Me(n,r));return new si(i,Y.empty(),e)}function lN(t){return new si(t.readTime,t.key,-1)}class si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new si(re.min(),Y.empty(),-1)}static max(){return new si(re.max(),Y.empty(),-1)}}function cN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==uN)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new V((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function dN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Bh.oe=-1;function $h(t){return t==null}function eh(t){return t===0&&1/t==-1/0}function fN(t){return typeof t=="number"&&Number.isInteger(t)&&!eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qv(e)),e=gN(t.get(n),e);return qv(e)}function gN(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function qv(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tc(this.root,e,this.comparator,!0)}}class Tc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??it.RED,this.left=i??it.EMPTY,this.right=s??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new it(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return it.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,i,s){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gv(this.data.getIterator())}getIteratorFrom(e){return new Gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class Gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new vn([])}unionWith(e){let n=new Ye(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bI("Invalid base64 string: "+s):s}}(e);return new ct(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const mN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(t){if(we(!!t),typeof t=="string"){let e=0;const n=mN.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ai(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hh(t){const e=t.mapValue.fields.__previous_value__;return am(e)?Hh(e):e}function ll(t){const e=oi(t.mapValue.fields.__local_write_time__.timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class cl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?am(t)?4:vN(t)?9007199254740991:_N(t)?10:11:ee()}function Bn(t,e){if(t===e)return!0;const n=li(t);if(n!==li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ll(t).isEqual(ll(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=oi(i.timestampValue),a=oi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ai(i.bytesValue).isEqual(ai(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ze(i.geoPointValue.latitude)===ze(s.geoPointValue.latitude)&&ze(i.geoPointValue.longitude)===ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ze(i.integerValue)===ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ze(i.doubleValue),a=ze(s.doubleValue);return o===a?eh(o)===eh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return uo(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Kv(o)!==Kv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Bn(o[l],a[l])))return!1;return!0}(t,e);default:return ee()}}function ul(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function ho(t,e){if(t===e)return 0;const n=li(t),r=li(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ze(s.integerValue||s.doubleValue),l=ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Qv(t.timestampValue,e.timestampValue);case 4:return Qv(ll(t),ll(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ai(s),l=ai(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=de(a[c],l[c]);if(h!==0)return h}return de(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=de(ze(s.latitude),ze(o.latitude));return a!==0?a:de(ze(s.longitude),ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Yv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=de(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:Yv(g,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ic.mapValue&&o===Ic.mapValue)return 0;if(s===Ic.mapValue)return 1;if(o===Ic.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=de(l[d],h[d]);if(f!==0)return f;const g=ho(a[l[d]],c[h[d]]);if(g!==0)return g}return de(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ee()}}function Qv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=oi(t),r=oi(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function Yv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ho(n[i],r[i]);if(s)return s}return de(n.length,r.length)}function fo(t){return Cp(t)}function Cp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Cp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Cp(n.fields[o])}`;return i+"}"}(t.mapValue):ee()}function lu(t){switch(li(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hh(t);return e?16+lu(e):16;case 5:return 2*t.stringValue.length;case 6:return ai(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+lu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ss(r.fields,(s,o)=>{i+=s.length+lu(o)}),i}(t.mapValue);default:throw ee()}}function Xv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ap(t){return!!t&&"integerValue"in t}function lm(t){return!!t&&"arrayValue"in t}function Jv(t){return!!t&&"nullValue"in t}function Zv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cu(t){return!!t&&"mapValue"in t}function _N(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Na(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ss(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Na(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Na(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Na(n)}setAll(e){let n=st.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Na(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());cu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ss(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new nn(Na(this.value))}}function PI(t){const e=[];return ss(t.fields,(n,r)=>{const i=new st([n]);if(cu(r)){const s=PI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wt(e,0,re.min(),re.min(),re.min(),nn.empty(),0)}static newFoundDocument(e,n,r,i){return new wt(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new wt(e,2,n,re.min(),re.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,re.min(),re.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.position=e,this.inclusive=n}}function e0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=ho(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function t0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n="asc"){this.field=e,this.dir=n}}function wN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{}class qe extends kI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new SN(e,n,r):n==="array-contains"?new xN(e,r):n==="in"?new bN(e,r):n==="not-in"?new PN(e,r):n==="array-contains-any"?new kN(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new TN(e,r):new IN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ho(n,this.value)):n!==null&&li(this.value)===li(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bn extends kI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new bn(e,n)}matches(e){return CI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function CI(t){return t.op==="and"}function AI(t){return EN(t)&&CI(t)}function EN(t){for(const e of t.filters)if(e instanceof bn)return!1;return!0}function Rp(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+fo(t.value);if(AI(t))return t.filters.map(e=>Rp(e)).join(",");{const e=t.filters.map(n=>Rp(n)).join(",");return`${t.op}(${e})`}}function RI(t,e){return t instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.field.isEqual(i.field)&&Bn(r.value,i.value)}(t,e):t instanceof bn?function(r,i){return i instanceof bn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&RI(o,i.filters[a]),!0):!1}(t,e):void ee()}function MI(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${fo(n.value)}`}(t):t instanceof bn?function(n){return n.op.toString()+" {"+n.getFilters().map(MI).join(" ,")+"}"}(t):"Filter"}class SN extends qe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class TN extends qe{constructor(e,n){super(e,"in",n),this.keys=DI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class IN extends qe{constructor(e,n){super(e,"not-in",n),this.keys=DI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class xN extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lm(n)&&ul(n.arrayValue,this.value)}}class bN extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ul(this.value.arrayValue,n)}}class PN extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ul(this.value.arrayValue,n)}}class kN extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ul(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function n0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new CN(t,e,n,r,i,s,o)}function cm(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fo(r)).join(",")),e.ue=n}return e.ue}function um(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t0(t.startAt,e.startAt)&&t0(t.endAt,e.endAt)}function Mp(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function AN(t,e,n,r,i,s,o,a){return new Po(t,e,n,r,i,s,o,a)}function hm(t){return new Po(t)}function r0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NI(t){return t.collectionGroup!==null}function La(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ye(st.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new hl(s,r))}),n.has(st.keyField().canonicalString())||e.ce.push(new hl(st.keyField(),r))}return e.ce}function Fn(t){const e=ie(t);return e.le||(e.le=RN(e,La(t))),e.le}function RN(t,e){if(t.limitType==="F")return n0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new hl(i.field,s)});const n=t.endAt?new th(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new th(t.startAt.position,t.startAt.inclusive):null;return n0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dp(t,e){const n=t.filters.concat([e]);return new Po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Np(t,e,n){return new Po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wh(t,e){return um(Fn(t),Fn(e))&&t.limitType===e.limitType}function LI(t){return`${cm(Fn(t))}|lt:${t.limitType}`}function ws(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>MI(i)).join(", ")}]`),$h(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fo(i)).join(",")),`Target(${r})`}(Fn(t))}; limitType=${t.limitType})`}function qh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of La(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=e0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,La(r),i)||r.endAt&&!function(o,a,l){const c=e0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,La(r),i))}(t,e)}function MN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OI(t){return(e,n)=>{let r=!1;for(const i of La(t)){const s=DN(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function DN(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ho(l,c):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ss(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return xI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new Ve(Y.comparator);function yr(){return NN}const VI=new Ve(Y.comparator);function ga(...t){let e=VI;for(const n of t)e=e.insert(n.key,n);return e}function FI(t){let e=VI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oi(){return Oa()}function jI(){return Oa()}function Oa(){return new os(t=>t.toString(),(t,e)=>t.isEqual(e))}const LN=new Ve(Y.comparator),ON=new Ye(Y.comparator);function he(...t){let e=ON;for(const n of t)e=e.add(n);return e}const VN=new Ye(de);function FN(){return VN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eh(e)?"-0":e}}function UI(t){return{integerValue:""+t}}function jN(t,e){return fN(e)?UI(e):dm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this._=void 0}}function UN(t,e,n){return t instanceof nh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&am(s)&&(s=Hh(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof dl?BI(t,e):t instanceof fl?$I(t,e):function(i,s){const o=zI(i,s),a=i0(o)+i0(i.Pe);return Ap(o)&&Ap(i.Pe)?UI(a):dm(i.serializer,a)}(t,e)}function zN(t,e,n){return t instanceof dl?BI(t,e):t instanceof fl?$I(t,e):n}function zI(t,e){return t instanceof rh?function(r){return Ap(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class nh extends Kh{}class dl extends Kh{constructor(e){super(),this.elements=e}}function BI(t,e){const n=HI(e);for(const r of t.elements)n.some(i=>Bn(i,r))||n.push(r);return{arrayValue:{values:n}}}class fl extends Kh{constructor(e){super(),this.elements=e}}function $I(t,e){let n=HI(e);for(const r of t.elements)n=n.filter(i=>!Bn(i,r));return{arrayValue:{values:n}}}class rh extends Kh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function i0(t){return ze(t.integerValue||t.doubleValue)}function HI(t){return lm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof dl&&i instanceof dl||r instanceof fl&&i instanceof fl?uo(r.elements,i.elements,Bn):r instanceof rh&&i instanceof rh?Bn(r.Pe,i.Pe):r instanceof nh&&i instanceof nh}(t.transform,e.transform)}class $N{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gh{}function WI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fm(t.key,Tn.none()):new Dl(t.key,t.data,Tn.none());{const n=t.data,r=nn.empty();let i=new Ye(st.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new as(t.key,r,new vn(i.toArray()),Tn.none())}}function HN(t,e,n){t instanceof Dl?function(i,s,o){const a=i.value.clone(),l=o0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof as?function(i,s,o){if(!uu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=o0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(qI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Va(t,e,n,r){return t instanceof Dl?function(s,o,a,l){if(!uu(s.precondition,o))return a;const c=s.value.clone(),h=a0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof as?function(s,o,a,l){if(!uu(s.precondition,o))return a;const c=a0(s.fieldTransforms,l,o),h=o.data;return h.setAll(qI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return uu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function WN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=zI(r.transform,i||null);s!=null&&(n===null&&(n=nn.empty()),n.set(r.field,s))}return n||null}function s0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uo(r,i,(s,o)=>BN(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dl extends Gh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class as extends Gh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function o0(t,e,n){const r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,zN(o,a,n[i]))}return r}function a0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,UN(s,o,e))}return r}class fm extends Gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qN extends Gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&HN(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=WI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,r)=>s0(n,r))&&uo(this.baseMutations,e.baseMutations,(n,r)=>s0(n,r))}}class pm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return LN}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new pm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,pe;function YN(t){switch(t){default:return ee();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function KI(t){if(t===void 0)return mr("GRPC error has no .code"),F.UNKNOWN;switch(t){case He.OK:return F.OK;case He.CANCELLED:return F.CANCELLED;case He.UNKNOWN:return F.UNKNOWN;case He.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case He.INTERNAL:return F.INTERNAL;case He.UNAVAILABLE:return F.UNAVAILABLE;case He.UNAUTHENTICATED:return F.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case He.NOT_FOUND:return F.NOT_FOUND;case He.ALREADY_EXISTS:return F.ALREADY_EXISTS;case He.PERMISSION_DENIED:return F.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case He.ABORTED:return F.ABORTED;case He.OUT_OF_RANGE:return F.OUT_OF_RANGE;case He.UNIMPLEMENTED:return F.UNIMPLEMENTED;case He.DATA_LOSS:return F.DATA_LOSS;default:return ee()}}(pe=He||(He={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=new Bi([4294967295,4294967295],0);function l0(t){const e=XN().encode(t),n=new yI;return n.update(e),new Uint8Array(n.digest())}function c0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bi([n,r],0),new Bi([i,s],0)]}class gm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ma(`Invalid padding: ${n}`);if(r<0)throw new ma(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ma(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ma(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Bi.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Bi.fromNumber(r)));return i.compare(JN)===1&&(i=new Bi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=l0(e),[r,i]=c0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new gm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=l0(e),[r,i]=c0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ma extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Nl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qh(re.min(),i,new Ve(de),yr(),he())}}class Nl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nl(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class GI{constructor(e,n){this.targetId=e,this.me=n}}class QI{constructor(e,n,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class u0{constructor(){this.fe=0,this.ge=h0(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new Nl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=h0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ZN{constructor(e){this.Le=e,this.Be=new Map,this.ke=yr(),this.qe=xc(),this.Qe=xc(),this.Ke=new Ve(de)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(Mp(s))if(r===0){const o=new Y(s.path);this.We(n,o,wt.newNoDocument(o,re.min()))}else we(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ai(r).toUint8Array()}catch(l){if(l instanceof bI)return co("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new gm(o,i,s)}catch(l){return co(l instanceof ma?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Mp(a.target)){const l=new Y(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,wt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=he();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Qh(e,n,this.Ke,this.ke,r);return this.ke=yr(),this.qe=xc(),this.Qe=xc(),this.Ke=new Ve(de),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new u0,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new Ye(de),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ye(de),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new u0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function xc(){return new Ve(Y.comparator)}function h0(){return new Ve(Y.comparator)}const eL={asc:"ASCENDING",desc:"DESCENDING"},tL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nL={and:"AND",or:"OR"};class rL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lp(t,e){return t.useProto3Json||$h(e)?e:{value:e}}function ih(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iL(t,e){return ih(t,e.toTimestamp())}function jn(t){return we(!!t),re.fromTimestamp(function(n){const r=oi(n);return new Me(r.seconds,r.nanos)}(t))}function mm(t,e){return Op(t,e).canonicalString()}function Op(t,e){const n=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function XI(t){const e=Ce.fromString(t);return we(n1(e)),e}function Vp(t,e){return mm(t.databaseId,e.path)}function lf(t,e){const n=XI(e);if(n.get(1)!==t.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(ZI(n))}function JI(t,e){return mm(t.databaseId,e)}function sL(t){const e=XI(t);return e.length===4?Ce.emptyPath():ZI(e)}function Fp(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZI(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function d0(t,e,n){return{name:Vp(t,e),fields:n.value.mapValue.fields}}function oL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(we(h===void 0||typeof h=="string"),ct.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:KI(c.code);return new W(h,c.message||"")}(o);n=new QI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=lf(t,r.document.name),s=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):re.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=wt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new hu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=lf(t,r.document),s=r.readTime?jn(r.readTime):re.min(),o=wt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new hu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=lf(t,r.document),s=r.removedTargetIds||[];n=new hu([],s,i,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new QN(i,s),a=r.targetId;n=new GI(a,o)}}return n}function aL(t,e){let n;if(e instanceof Dl)n={update:d0(t,e.key,e.value)};else if(e instanceof fm)n={delete:Vp(t,e.key)};else if(e instanceof as)n={update:d0(t,e.key,e.data),updateMask:mL(e.fieldMask)};else{if(!(e instanceof qN))return ee();n={verify:Vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof nh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof dl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:iL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee()}(t,e.precondition)),n}function lL(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?jn(i.updateTime):jn(s);return o.isEqual(re.min())&&(o=jn(s)),new $N(o,i.transformResults||[])}(n,e))):[]}function cL(t,e){return{documents:[JI(t,e.path)]}}function uL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=JI(t,i);const s=function(c){if(c.length!==0)return t1(bn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Es(f.field),direction:fL(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Lp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function hL(t){let e=sL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){we(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=e1(d);return f instanceof bn&&AI(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new hl(Ss(y.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,$h(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new th(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new th(g,f)}(n.endAt)),AN(e,i,o,s,a,"F",l,c)}function dL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function e1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ss(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ss(n.unaryFilter.field);return qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ss(n.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(Ss(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bn.create(n.compositeFilter.filters.map(r=>e1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function fL(t){return eL[t]}function pL(t){return tL[t]}function gL(t){return nL[t]}function Es(t){return{fieldPath:t.canonicalString()}}function Ss(t){return st.fromServerFormat(t.fieldPath)}function t1(t){return t instanceof qe?function(n){if(n.op==="=="){if(Zv(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NAN"}};if(Jv(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zv(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NAN"}};if(Jv(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(n.field),op:pL(n.op),value:n.value}}}(t):t instanceof bn?function(n){const r=n.getFilters().map(i=>t1(i));return r.length===1?r[0]:{compositeFilter:{op:gL(n.op),filters:r}}}(t):ee()}function mL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function n1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r,i,s=re.min(),o=re.min(),a=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.ht=e}}function _L(t){const e=hL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){this.ln=new wL}addToCollectionParentIndex(e,n){return this.ln.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(si.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(si.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class wL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mt{static withCacheSize(e){return new Mt(e,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mt.DEFAULT_COLLECTION_PERCENTILE=10,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mt.DEFAULT=new Mt(41943040,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mt.DISABLED=new Mt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new po(0)}static Qn(){return new po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0([t,e],[n,r]){const i=de(t,n);return i===0?de(e,r):i}class EL{constructor(e){this.Gn=e,this.buffer=new Ye(p0),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();p0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){H("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bo(n)?H("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await xo(n)}await this.Yn(3e5)})}}class TL{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Bh.oe);const r=new EL(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(f0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f0):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),vs()<=ue.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function IL(t,e){return new TL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.changes=new os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Va(r.mutation,i,vn.empty(),Me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const i=Oi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ga();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=yr();const o=Oa(),a=function(){return Oa()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof as)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Va(h.mutation,c,h.mutation.getFieldMask(),Me.now())):o.set(c.key,vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new bL(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Oa();let i=new Ve((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||vn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||he()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=jI();h.forEach(f=>{if(!s.has(f)){const g=WI(n.get(f),r.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):V.resolve(Oi());let a=-1,l=s;return o.next(c=>V.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,he())).next(h=>({batchId:a,changes:FI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=ga();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ga();return this.indexManager.getCollectionParents(e,s).next(a=>V.forEach(a,l=>{const c=function(d,f){return new Po(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,wt.newInvalidDocument(h)))});let a=ga();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Va(h.mutation,c,vn.empty(),Me.now()),qh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return V.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jn(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:_L(i.bundledQuery),readTime:jn(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(){this.overlays=new Ve(Y.comparator),this.Er=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oi();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=Oi(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Oi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Oi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return V.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new GN(n,r));let s=this.Er.get(n);s===void 0&&(s=he(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this.dr=new Ye(Xe.Ar),this.Rr=new Ye(Xe.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Xe(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new Y(new Ce([])),r=new Xe(n,e),i=new Xe(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new Y(new Ce([])),r=new Xe(n,e),i=new Xe(n,e+1);let s=he();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Xe(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return Y.comparator(e.key,n.key)||de(e.br,n.br)}static Vr(e,n){return de(e.br,n.br)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Ye(Xe.Ar)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new KN(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Xe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(de);return n.forEach(i=>{const s=new Xe(i,0),o=new Xe(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),V.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Y.isDocumentKey(s)||(s=s.child(""));const o=new Xe(new Y(s),0);let a=new Ye(de);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},o),V.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return V.forEach(n.mutations,i=>{const s=new Xe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Xe(n,0),i=this.vr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.Nr=e,this.docs=function(){return new Ve(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=yr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=yr();const o=n.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||cN(lN(h),r)<=0||(i.has(h.key)||qh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ee()}Lr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DL(this)}getSize(e){return V.resolve(this.size)}}class DL extends xL{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.persistence=e,this.Br=new os(n=>cm(n),um),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.kr=0,this.qr=new ym,this.targetCount=0,this.Qr=po.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),V.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new po(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Un(n),V.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Bh(0),this.Ur=!1,this.Ur=!0,this.Wr=new AL,this.referenceDelegate=e(this),this.Gr=new NL(this),this.indexManager=new vL,this.remoteDocumentCache=function(i){return new ML(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new yL(n),this.jr=new kL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new RL(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new LL(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return V.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class LL extends hN{constructor(e){super(),this.currentSequenceNumber=e}}class _m{constructor(e){this.persistence=e,this.Zr=new ym,this.Xr=null}static ei(e){return new _m(e)}get ti(){if(this.Xr)return this.Xr;throw ee()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),V.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ti,r=>{const i=Y.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return V.or([()=>V.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class sh{constructor(e,n){this.persistence=e,this.ri=new os(r=>pN(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=IL(this,n)}static ei(e,n){return new sh(e,n)}Hr(){}Jr(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return V.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?V.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),V.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lu(e.data.value)),n}ir(e,n,r){return V.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=he(),i=he();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new vm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return mA()?8:dN(Tt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new OL;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(vs()<=ue.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),V.resolve()):(vs()<=ue.DEBUG&&H("QueryEngine","Query:",ws(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(vs()<=ue.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):V.resolve())}Xi(e,n){if(r0(n))return V.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Np(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=he(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,o,l.readTime)?this.Xi(e,Np(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return r0(n)||i.isEqual(re.min())?V.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?V.resolve(null):(vs()<=ue.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ws(n)),this.os(e,o,n,aN(i,-1)).next(a=>a))})}rs(e,n){let r=new Ye(OI(e));return n.forEach((i,s)=>{qh(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return vs()<=ue.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ws(n)),this.Zi.getDocumentsMatchingQuery(e,n,si.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Ve(de),this.cs=new os(s=>cm(s),um),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PL(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function jL(t,e,n,r){return new FL(t,e,n,r)}async function i1(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=he();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function UL(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let g=V.resolve();return f.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(v=>{const S=c.docVersions.get(y);we(S!==null),v.version.compareTo(S)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),h.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=he();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function s1(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function zL(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Gr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Gr.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ct.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(v,S,w){return v.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,g,h)&&a.push(n.Gr.updateTargetData(s,g))});let l=yr(),c=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(BL(s,o,e.documentUpdates).next(h=>{l=h.Is,c=h.Es})),!r.isEqual(re.min())){const h=n.Gr.getLastRemoteSnapshotVersion(s).next(d=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.us=i,s))}function BL(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=yr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:i}})}function $L(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HL(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new zr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function jp(t,e,n){const r=ie(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!bo(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function g0(t,e,n){const r=ie(t);let i=re.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ie(l),f=d.cs.get(h);return f!==void 0?V.resolve(d.us.get(f)):d.Gr.getTargetData(c,h)}(r,o,Fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:he())).next(a=>(WL(r,MN(e),a),{documents:a,ds:s})))}function WL(t,e,n){let r=t.ls.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class m0{constructor(){this.activeTargetIds=FN()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qL{constructor(){this._o=new m0,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new m0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc=null;function cf(){return bc===null?bc=function(){return 268435456+Math.round(2147483648*Math.random())}():bc++,"0x"+bc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class YL extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=cf(),l=this.No(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(n,l,c,i).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw co("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Io}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=GL[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=cf();return new Promise((o,a)=>{const l=new _I;l.setWithCredentials(!0),l.listenOnce(vI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case au.NO_ERROR:const h=l.getResponseJson();H(mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case au.TIMEOUT:H(mt,`RPC '${e}' ${s} timed out`),a(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case au.HTTP_ERROR:const d=l.getStatus();if(H(mt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const y=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(g.status);a(new W(y,g.message))}else a(new W(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(F.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{H(mt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);H(mt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=cf(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SI(),a=EI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");H(mt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,g=!1;const y=new QL({Eo:S=>{g?H(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(f||(H(mt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),H(mt,`RPC '${e}' stream ${i} sending:`,S),d.send(S))},Ao:()=>d.close()}),v=(S,w,E)=>{S.listen(w,b=>{try{E(b)}catch(M){setTimeout(()=>{throw M},0)}})};return v(d,pa.EventType.OPEN,()=>{g||(H(mt,`RPC '${e}' stream ${i} transport opened.`),y.So())}),v(d,pa.EventType.CLOSE,()=>{g||(g=!0,H(mt,`RPC '${e}' stream ${i} transport closed`),y.Do())}),v(d,pa.EventType.ERROR,S=>{g||(g=!0,co(mt,`RPC '${e}' stream ${i} transport errored:`,S),y.Do(new W(F.UNAVAILABLE,"The operation could not be completed")))}),v(d,pa.EventType.MESSAGE,S=>{var w;if(!g){const E=S.data[0];we(!!E);const b=E,M=(b==null?void 0:b.error)||((w=b[0])===null||w===void 0?void 0:w.error);if(M){H(mt,`RPC '${e}' stream ${i} received error:`,M);const D=M.status;let L=function(I){const P=He[I];if(P!==void 0)return KI(P)}(D),T=M.message;L===void 0&&(L=F.INTERNAL,T="Unknown error status: "+D+" with message "+M.message),g=!0,y.Do(new W(L,T)),d.close()}else H(mt,`RPC '${e}' stream ${i} received:`,E),y.vo(E)}}),v(a,wI.STAT_EVENT,S=>{S.stat===kp.PROXY?H(mt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===kp.NOPROXY&&H(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.bo()},0),y}}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t){return new rL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new o1(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(mr(n.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new W(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XL extends a1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=oL(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?jn(o.readTime):re.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Fp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Mp(l)?{documents:cL(s,l)}:{query:uL(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=YI(s,o.resumeToken);const c=Lp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=ih(s,o.snapshotVersion.toTimestamp());const c=Lp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=dL(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Fp(this.serializer),n.removeTarget=e,this.c_(n)}}class JL extends a1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=lL(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Fp(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>aL(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,Op(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(F.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,Op(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class eO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(mr(n),this.C_=!1):H("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{ls(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ie(l);c.k_.add(4),await Ll(c),c.K_.set("Unknown"),c.k_.delete(4),await Xh(c)}(this))})}),this.K_=new eO(r,i)}}async function Xh(t){if(ls(t))for(const e of t.q_)await e(!0)}async function Ll(t){for(const e of t.q_)await e(!1)}function l1(t,e){const n=ie(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Tm(n)?Sm(n):ko(n).s_()&&Em(n,e))}function wm(t,e){const n=ie(t),r=ko(n);n.B_.delete(e),r.s_()&&c1(n,e),n.B_.size===0&&(r.s_()?r.a_():ls(n)&&n.K_.set("Unknown"))}function Em(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ko(t).V_(e)}function c1(t,e){t.U_.xe(e),ko(t).m_(e)}function Sm(t){t.U_=new ZN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ko(t).start(),t.K_.F_()}function Tm(t){return ls(t)&&!ko(t).i_()&&t.B_.size>0}function ls(t){return ie(t).k_.size===0}function u1(t){t.U_=void 0}async function nO(t){t.K_.set("Online")}async function rO(t){t.B_.forEach((e,n)=>{Em(t,e)})}async function iO(t,e){u1(t),Tm(t)?(t.K_.O_(e),Sm(t)):t.K_.set("Unknown")}async function sO(t,e,n){if(t.K_.set("Online"),e instanceof QI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await oh(t,r)}else if(e instanceof hu?t.U_.$e(e):e instanceof GI?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(re.min()))try{const r=await s1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.B_.get(c);h&&s.B_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.B_.get(l);if(!h)return;s.B_.set(l,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),c1(s,l);const d=new zr(h.target,l,c,h.sequenceNumber);Em(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await oh(t,r)}}async function oh(t,e,n){if(!bo(e))throw e;t.k_.add(1),await Ll(t),t.K_.set("Offline"),n||(n=()=>s1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Xh(t)})}function h1(t,e){return e().catch(n=>oh(t,n,e))}async function Jh(t){const e=ie(t),n=ci(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;oO(e);)try{const i=await $L(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,aO(e,i)}catch(i){await oh(e,i)}d1(e)&&f1(e)}function oO(t){return ls(t)&&t.L_.length<10}function aO(t,e){t.L_.push(e);const n=ci(t);n.s_()&&n.f_&&n.g_(e.mutations)}function d1(t){return ls(t)&&!ci(t).i_()&&t.L_.length>0}function f1(t){ci(t).start()}async function lO(t){ci(t).w_()}async function cO(t){const e=ci(t);for(const n of t.L_)e.g_(n.mutations)}async function uO(t,e,n){const r=t.L_.shift(),i=pm.from(r,e,n);await h1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Jh(t)}async function hO(t,e){e&&ci(t).f_&&await async function(r,i){if(function(o){return YN(o)&&o!==F.ABORTED}(i.code)){const s=r.L_.shift();ci(r).__(),await h1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Jh(r)}}(t,e),d1(t)&&f1(t)}async function _0(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=ls(n);n.k_.add(3),await Ll(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Xh(n)}async function dO(t,e){const n=ie(t);e?(n.k_.delete(2),await Xh(n)):e||(n.k_.add(2),await Ll(n),n.K_.set("Unknown"))}function ko(t){return t.W_||(t.W_=function(n,r,i){const s=ie(n);return s.b_(),new XL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:nO.bind(null,t),mo:rO.bind(null,t),po:iO.bind(null,t),R_:sO.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),Tm(t)?Sm(t):t.K_.set("Unknown")):(await t.W_.stop(),u1(t))})),t.W_}function ci(t){return t.G_||(t.G_=function(n,r,i){const s=ie(n);return s.b_(),new JL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:lO.bind(null,t),po:hO.bind(null,t),p_:cO.bind(null,t),y_:uO.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Jh(t)):(await t.G_.stop(),t.L_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Im(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xm(t,e){if(mr("AsyncQueue",`${e}: ${t}`),bo(t))return new W(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{static emptySet(e){return new Ks(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=ga(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ks)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this.z_=new Ve(Y.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ee():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class go{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new go(e,n,Ks.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class pO{constructor(){this.queries=w0(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=w0(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new W(F.ABORTED,"Firestore shutting down"))}}function w0(){return new os(t=>LI(t),Wh)}async function p1(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new fO,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=xm(o,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&bm(n)}async function g1(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gO(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&bm(n)}function mO(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function bm(t){t.X_.forEach(e=>{e.next()})}var Up,E0;(E0=Up||(Up={})).na="default",E0.Cache="cache";class m1{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new go(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.key=e}}class _1{constructor(e){this.key=e}}class yO{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=he(),this.mutatedKeys=he(),this.Va=OI(e),this.ma=new Ks(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new v0,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),g=qh(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;f&&g?f.data.isEqual(g.data)?y!==v&&(r.track({type:3,doc:g}),S=!0):this.ya(f,g)||(r.track({type:2,doc:g}),S=!0,(l&&this.Va(g,l)>0||c&&this.Va(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),S=!0):f&&!g&&(r.track({type:1,doc:f}),S=!0,(l||c)&&(a=!0)),S&&(g?(o=o.add(g),s=v?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((h,d)=>function(g,y){const v=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return v(g)-v(y)}(h.type,d.type)||this.Va(h.doc,d.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new go(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new v0,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=he(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new _1(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new y1(r))}),n}va(e){this.da=e.ds,this.Ra=he();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return go.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class _O{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vO{constructor(e){this.key=e,this.Fa=!1}}class wO{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new os(a=>LI(a),Wh),this.Oa=new Map,this.Na=new Set,this.La=new Ve(Y.comparator),this.Ba=new Map,this.ka=new ym,this.qa={},this.Qa=new Map,this.Ka=po.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function EO(t,e,n=!0){const r=I1(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await v1(r,e,n,!0),i}async function SO(t,e){const n=I1(t);await v1(n,e,!0,!1)}async function v1(t,e,n,r){const i=await HL(t.localStore,Fn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await TO(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&l1(t.remoteStore,i),a}async function TO(t,e,n,r,i){t.Ua=(d,f,g)=>async function(v,S,w,E){let b=S.view.ga(w);b.ss&&(b=await g0(v.localStore,S.query,!1).then(({documents:T})=>S.view.ga(T,b)));const M=E&&E.targetChanges.get(S.targetId),D=E&&E.targetMismatches.get(S.targetId)!=null,L=S.view.applyChanges(b,v.isPrimaryClient,M,D);return T0(v,S.targetId,L.ba),L.snapshot}(t,d,f,g);const s=await g0(t.localStore,e,!0),o=new yO(e,s.ds),a=o.ga(s.documents),l=Nl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);T0(t,n,c.ba);const h=new _O(e,n,o);return t.xa.set(e,h),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function IO(t,e,n){const r=ie(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!Wh(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wm(r.remoteStore,i.targetId),zp(r,i.targetId)}).catch(xo)):(zp(r,i.targetId),await jp(r.localStore,i.targetId,!0))}async function xO(t,e){const n=ie(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wm(n.remoteStore,r.targetId))}async function bO(t,e,n){const r=DO(t);try{const i=await function(o,a){const l=ie(o),c=Me.now(),h=a.reduce((g,y)=>g.add(y.key),he());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=yr(),v=he();return l.hs.getEntries(g,h).next(S=>{y=S,y.forEach((w,E)=>{E.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(S=>{d=S;const w=[];for(const E of a){const b=WN(E,d.get(E.key).overlayedDocument);b!=null&&w.push(new as(E.key,b,PI(b.value.mapValue),Tn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(S=>{f=S;const w=S.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(g,S.batchId,w)})}).then(()=>({batchId:f.batchId,changes:FI(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.qa[o.currentUser.toKey()];c||(c=new Ve(de)),c=c.insert(a,l),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ol(r,i.changes),await Jh(r.remoteStore)}catch(i){const s=xm(i,"Failed to persist write");n.reject(s)}}async function w1(t,e){const n=ie(t);try{const r=await zL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?we(o.Fa):i.removedDocuments.size>0&&(we(o.Fa),o.Fa=!1))}),await Ol(n,r,e)}catch(r){await xo(r)}}function S0(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ie(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.J_)f.ea(a)&&(c=!0)}),c&&bm(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PO(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new Ve(Y.comparator);o=o.insert(s,wt.newNoDocument(s,re.min()));const a=he().add(s),l=new Qh(re.min(),new Map,new Ve(de),o,a);await w1(r,l),r.La=r.La.remove(s),r.Ba.delete(e),Pm(r)}else await jp(r.localStore,e,!1).then(()=>zp(r,e,n)).catch(xo)}async function kO(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await UL(n.localStore,e);S1(n,r,null),E1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ol(n,i)}catch(i){await xo(i)}}async function CO(t,e,n){const r=ie(t);try{const i=await function(o,a){const l=ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(we(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);S1(r,e,n),E1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ol(r,i)}catch(i){await xo(i)}}function E1(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function S1(t,e,n){const r=ie(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function zp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||T1(t,r)})}function T1(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(wm(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),Pm(t))}function T0(t,e,n){for(const r of n)r instanceof y1?(t.ka.addReference(r.key,e),AO(t,r)):r instanceof _1?(H("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||T1(t,r.key)):ee()}function AO(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(H("SyncEngine","New document in limbo: "+n),t.Na.add(r),Pm(t))}function Pm(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new Y(Ce.fromString(e)),r=t.Ka.next();t.Ba.set(r,new vO(n)),t.La=t.La.insert(n,r),l1(t.remoteStore,new zr(Fn(hm(n.path)),r,"TargetPurposeLimboResolution",Bh.oe))}}async function Ol(t,e,n){const r=ie(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=vm.zi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,c){const h=ie(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>V.forEach(c,f=>V.forEach(f.Wi,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>V.forEach(f.Gi,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!bo(d))throw d;H("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=h.us.get(f),y=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(y);h.us=h.us.insert(f,v)}}}(r.localStore,s))}async function RO(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await i1(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new W(F.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ol(n,r.Ts)}}function MO(t,e){const n=ie(t),r=n.Ba.get(e);if(r&&r.Fa)return he().add(r.key);{let i=he();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function I1(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=w1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PO.bind(null,e),e.Ma.R_=gO.bind(null,e.eventManager),e.Ma.Wa=mO.bind(null,e.eventManager),e}function DO(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CO.bind(null,e),e}class ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yh(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return jL(this.persistence,new VL,e.initialUser,this.serializer)}ja(e){return new r1(_m.ei,this.serializer)}za(e){return new qL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ah.provider={build:()=>new ah};class NO extends ah{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){we(this.persistence.referenceDelegate instanceof sh);const r=this.persistence.referenceDelegate.garbageCollector;return new SL(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Mt.withCacheSize(this.cacheSizeBytes):Mt.DEFAULT;return new r1(r=>sh.ei(r,n),this.serializer)}}class Bp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>S0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RO.bind(null,this.syncEngine),await dO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pO}()}createDatastore(e){const n=Yh(e.databaseInfo.databaseId),r=function(s){return new YL(s)}(e.databaseInfo);return function(s,o,a,l){return new ZL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new tO(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>S0(this.syncEngine,n,0),function(){return y0.p()?new y0:new KL}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new wO(i,s,o,a,l,c);return h&&(d.$a=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);H("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await Ll(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bp.provider={build:()=>new Bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_t.UNAUTHENTICATED,this.clientId=II.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hf(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await i1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function I0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await OO(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>_0(e.remoteStore,i)),t._onlineComponents=e}async function OO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await hf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;co("Error using user provided cache. Falling back to memory cache: "+n),await hf(t,new ah)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await hf(t,new NO(void 0));return t._offlineComponents}async function b1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await I0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await I0(t,new Bp))),t._onlineComponents}function VO(t){return b1(t).then(e=>e.syncEngine)}async function P1(t){const e=await b1(t),n=e.eventManager;return n.onListen=EO.bind(null,e.syncEngine),n.onUnlisten=IO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xO.bind(null,e.syncEngine),n}function FO(t,e,n={}){const r=new cr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new x1({next:f=>{h.eu(),o.enqueueAndForget(()=>g1(s,d));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new W(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new W(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new m1(hm(a.path),h,{includeMetadataChanges:!0,ua:!0});return p1(s,d)}(await P1(t),t.asyncQueue,e,n,r)),r.promise}function jO(t,e,n={}){const r=new cr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new x1({next:f=>{h.eu(),o.enqueueAndForget(()=>g1(s,d)),f.fromCache&&l.source==="server"?c.reject(new W(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new m1(a,h,{includeMetadataChanges:!0,ua:!0});return p1(s,d)}(await P1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t,e,n){if(!n)throw new W(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UO(t,e,n,r){if(e===!0&&r===!0)throw new W(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b0(t){if(!Y.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function P0(t){if(Y.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function _r(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zh(t);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ed{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JD;switch(r.type){case"firstParty":return new nN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=x0.get(n);r&&(H("ComponentProvider","Removing Datastore"),x0.delete(n),r.terminate())}(this),Promise.resolve()}}function zO(t,e,n,r={}){var i;const s=(t=_r(t,ed))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=_t.MOCK_USER;else{a=cA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new _t(c)}t._authCredentials=new ZD(new TI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}}class ti extends cs{constructor(e,n,r){super(e,n,hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new Y(e))}withConverter(e){return new ti(this.firestore,e,this._path)}}function Pc(t,e,...n){if(t=lt(t),C1("collection","path",e),t instanceof ed){const r=Ce.fromString(e,...n);return P0(r),new ti(t,null,r)}{if(!(t instanceof zt||t instanceof ti))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return P0(r),new ti(t.firestore,null,r)}}function Ci(t,e,...n){if(t=lt(t),arguments.length===1&&(e=II.newId()),C1("doc","path",e),t instanceof ed){const r=Ce.fromString(e,...n);return b0(r),new zt(t,null,new Y(r))}{if(!(t instanceof zt||t instanceof ti))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return b0(r),new zt(t.firestore,t instanceof ti?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new o1(this,"async_queue_retry"),this.fu=()=>{const r=uf();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=uf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=uf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new cr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!bo(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw mr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=Im.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&ee()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Co extends ed{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new C0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new C0(e),this._firestoreClient=void 0,await e}}}function BO(t,e){const n=typeof t=="object"?t:MT(),r=typeof t=="string"?t:"(default)",i=Yg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=aA("firestore");s&&zO(i,...s)}return i}function km(t){if(t._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$O(t),t._firestoreClient}function $O(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new yN(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,k1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new LO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mo(ct.fromBase64String(e))}catch(n){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mo(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=/^__.*__$/;class WO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new as(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dl(e,this.data,n,this.fieldTransforms)}}function R1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class Mm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Mm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return lh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(R1(this.Mu)&&HO.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class qO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yh(e)}$u(e,n,r,i=!1){return new Mm({Mu:e,methodName:n,Ku:r,path:st.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dm(t){const e=t._freezeSettings(),n=Yh(t._databaseId);return new qO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function M1(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);L1("Data must be an object, but it was:",o,r);const a=D1(r,o);let l,c;if(s.merge)l=new vn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=GO(e,d,n);if(!o.contains(f))throw new W(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);YO(h,f)||h.push(f)}l=new vn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new WO(new nn(a),l,c)}function KO(t,e,n,r=!1){return Nm(n,t.$u(r?4:3,e))}function Nm(t,e){if(N1(t=lt(t)))return L1("Unsupported field value:",e,t),D1(t,e);if(t instanceof A1)return function(r,i){if(!R1(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Nm(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Me.fromDate(r);return{timestampValue:ih(i.serializer,s)}}if(r instanceof Me){const s=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ih(i.serializer,s)}}if(r instanceof Am)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mo)return{bytesValue:YI(i.serializer,r._byteString)};if(r instanceof zt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return dm(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Zh(r)}`)}(t,e)}function D1(t,e){const n={};return xI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ss(t,(r,i)=>{const s=Nm(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function N1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof Am||t instanceof mo||t instanceof zt||t instanceof A1||t instanceof Rm)}function L1(t,e,n){if(!N1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Zh(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function GO(t,e,n){if((e=lt(e))instanceof Cm)return e._internalPath;if(typeof e=="string")return O1(t,e);throw lh("Field path arguments must be of type string or ",t,!1,void 0,n)}const QO=new RegExp("[~\\*/\\[\\]]");function O1(t,e,n){if(e.search(QO)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cm(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new W(F.INVALID_ARGUMENT,a+t+l)}function YO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(td("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XO extends V1{data(){return super.data()}}function td(t,e){return typeof e=="string"?O1(t,e):e instanceof Cm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lm{}class F1 extends Lm{}function ZO(t,e,...n){let r=[];e instanceof Lm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Om).length,a=s.filter(l=>l instanceof nd).length;if(o>1||o>0&&a>0)throw new W(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class nd extends F1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new nd(e,n,r)}_apply(e){const n=this._parse(e);return j1(e._query,n),new cs(e.firestore,e.converter,Dp(e._query,n))}_parse(e){const n=Dm(e.firestore);return function(s,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){R0(d,h);const g=[];for(const y of d)g.push(A0(l,s,y));f={arrayValue:{values:g}}}else f=A0(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||R0(d,h),f=KO(a,o,d,h==="in"||h==="not-in");return qe.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function df(t,e,n){const r=e,i=td("where",t);return nd._create(i,r,n)}class Om extends Lm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Om(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)j1(o,l),o=Dp(o,l)}(e._query,n),new cs(e.firestore,e.converter,Dp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vm extends F1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hl(s,o)}(e._query,this._field,this._direction);return new cs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Po(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function e2(t,e="asc"){const n=e,r=td("orderBy",t);return Vm._create(r,n)}function A0(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new W(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NI(e)&&n.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!Y.isDocumentKey(r))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xv(t,new Y(r))}if(n instanceof zt)return Xv(t,n._key);throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zh(n)}.`)}function R0(t,e){if(!Array.isArray(t)||t.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j1(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class t2{convertValue(e,n="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ss(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ze(o.doubleValue));return new Rm(s)}convertGeoPoint(e){return new Am(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const n=oi(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);we(n1(r));const i=new cl(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class z1 extends V1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(td("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class du extends z1{data(e={}){return super.data(e)}}class n2{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ya(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new du(this._firestore,this._userDataWriter,r.key,r,new ya(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new du(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ya(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new du(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ya(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:r2(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function r2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){t=_r(t,zt);const e=_r(t.firestore,Co);return FO(km(e),t._key).then(n=>o2(e,t,n))}class B1 extends t2{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,n)}}function M0(t){t=_r(t,cs);const e=_r(t.firestore,Co),n=km(e),r=new B1(e);return JO(t._query),jO(n,t._query).then(i=>new n2(e,r,t,i))}function ff(t,e,n){t=_r(t,zt);const r=_r(t.firestore,Co),i=U1(t.converter,e,n);return Fm(r,[M1(Dm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Tn.none())])}function D0(t){return Fm(_r(t.firestore,Co),[new fm(t._key,Tn.none())])}function s2(t,e){const n=_r(t.firestore,Co),r=Ci(t),i=U1(t.converter,e);return Fm(n,[M1(Dm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}function Fm(t,e){return function(r,i){const s=new cr;return r.asyncQueue.enqueueAndForget(async()=>bO(await VO(r),i,s)),s.promise}(km(t),e)}function o2(t,e,n){const r=n.docs.get(e._key),i=new B1(t);return new z1(t,i,e._key,r,new ya(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Io=i})(To),ao(new Yi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Co(new eN(r.getProvider("auth-internal")),new iN(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ei(Wv,"4.7.5",e),ei(Wv,"4.7.5","esm2017")})();const a2={apiKey:"AIzaSyBY-tonFAlaDVYIUFJHhQeGiS4MCd16Q3c",authDomain:"lifemetrics-5c6b4.firebaseapp.com",projectId:"lifemetrics-5c6b4",storageBucket:"lifemetrics-5c6b4.firebasestorage.app",messagingSenderId:"449118429278",appId:"1:449118429278:web:939f01948a3dac7f7bd4cf"},$1=RT(a2),_a=GD($1),Gn=BO($1),H1=j.createContext({}),us=()=>j.useContext(H1),l2=({children:t})=>{const[e,n]=j.useState(null),[r,i]=j.useState(!0),s=(c,h)=>AM(_a,c,h),o=(c,h)=>RM(_a,c,h),a=()=>VM(_a);j.useEffect(()=>OM(_a,h=>{n(h),i(!1)}),[]);const l={currentUser:e,loading:r,signup:s,login:o,logout:a,updatePassword:MM,reauthenticateWithCredential:CM,EmailAuthProvider:is};return k.jsx(H1.Provider,{value:l,children:!r&&t})},W1=({isOpen:t,onClose:e})=>{const[n,r]=j.useState(""),[i,s]=j.useState(""),[o,a]=j.useState(""),{login:l}=us();if(!t)return null;const c=async h=>{h.preventDefault();try{a(""),await l(n,i),e(),window.location.href="/dashboard"}catch(d){a("Failed to sign in"),console.error(d)}};return k.jsx("div",{className:"login-dialog-overlay",children:k.jsxs("div",{className:"login-dialog",children:[k.jsx("button",{className:"close-button",onClick:e,children:""}),k.jsxs("form",{onSubmit:c,children:[o&&k.jsx("div",{className:"error-message",children:o}),k.jsx("div",{className:"login-input-group",children:k.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:h=>r(h.target.value),required:!0})}),k.jsx("div",{className:"login-input-group",children:k.jsx("input",{type:"password",placeholder:"Password",value:i,onChange:h=>s(h.target.value),required:!0})}),k.jsx("div",{className:"forgot-password",children:k.jsx("a",{href:"#",children:"Forgot Password?"})}),k.jsx("button",{type:"submit",className:"login-button",children:"Login"}),k.jsx("div",{className:"signup-link",children:k.jsx(ha,{to:"/signup",onClick:e,children:"Sign Up "})})]})]})})},c2=()=>{const[t,e]=j.useState(!1);return k.jsxs(k.Fragment,{children:[k.jsxs("header",{className:"header",children:[k.jsx("div",{className:"header-left",children:k.jsxs(ha,{to:"/",className:"logo-link",children:[k.jsx("img",{src:"/logo.png",alt:"LifeMetrics Logo",className:"logo"}),k.jsx("span",{className:"brand-name",children:"LifeMetrics"})]})}),k.jsx("div",{className:"header-center",children:k.jsxs("nav",{children:[k.jsx(ha,{to:"/how-it-works",children:"How it works"}),k.jsx("p",{children:" | "}),k.jsx(ha,{to:"/signup",children:"Sign Up"}),k.jsx("p",{children:" | "}),k.jsx(ha,{to:"/about",children:"About Us"})]})}),k.jsx("div",{className:"header-right",children:k.jsx("button",{className:"sign-in-button",onClick:()=>e(!0),children:"Sign In"})})]}),k.jsx(W1,{isOpen:t,onClose:()=>e(!1)})]})},u2=()=>{const t=wr(),{currentUser:e}=us(),[n,r]=j.useState(!0);return j.useEffect(()=>{const i=window.location.pathname;r(i==="/"||i!=="/dashboard"&&!e)},[e,t.state.location.pathname]),k.jsxs("div",{children:[n&&k.jsx(c2,{}),k.jsx(ST,{})]})},h2=()=>{const[t,e]=j.useState(!1),n=()=>{e(!0)};return k.jsxs("div",{className:"home-container",children:[k.jsx("div",{className:"background-video",children:k.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,children:[k.jsx("source",{src:"/background.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})}),k.jsxs("div",{className:"home-content",children:[k.jsx("h1",{children:"Welcome to LifeMetrics"}),k.jsx("p",{children:"Your Personal Health Status Tracker"}),k.jsx("button",{className:"start-tracking-button",onClick:n,children:"Start Tracking! "})]}),k.jsx(W1,{isOpen:t,onClose:()=>e(!1)})]})},d2=()=>k.jsxs("div",{className:"info-page-container",children:[k.jsx("div",{className:"info-header",children:k.jsx("h1",{children:"How it Works"})}),k.jsx("div",{className:"info-content",children:k.jsx("p",{children:"LifeMetrics helps you track your personal health data in a seamless and intuitive way. Our platform enables you to log your personal editable health metrics, visualize trends over time, and gain insights to improve your well-being. Simply start by creating an account, log your data, and watch your health trends evolve."})})]}),f2=()=>k.jsxs("div",{className:"info-page-container",children:[k.jsx("div",{className:"info-header",children:k.jsx("h1",{children:"About Us"})}),k.jsx("div",{className:"info-content",children:k.jsx("p",{children:"This web is created by Jiongkai Pang from Northeastern University - Vancouver Campus in INFO 6150. With a mission to promote health and wellness, LifeMetrics empowers individuals to take control of their health data. Our team is dedicated to creating tools that make it easy to monitor, track, and understand personal health trends. Join us on our journey to make well-being accessible and achievable for everyone."})})]}),rn={user:{async createUserProfile(t,e){try{const n=Ci(Gn,"users",t);return await ff(n,{...e,updatedAt:Me.now()},{merge:!0}),!0}catch(n){throw console.error("Error creating user profile:",n),n}},async getUserProfile(t){try{const e=Ci(Gn,"users",t),n=await i2(e);return n.exists()?n.data():null}catch(e){throw console.error("Error getting user profile:",e),e}},async updateProfile(t,e){try{const n=Ci(Gn,"users",t);return await ff(n,{...e,updatedAt:Me.now()},{merge:!0}),!0}catch(n){throw console.error("Error updating user profile:",n),n}}},healthMetrics:{async addMetric(t,e){try{const n=Pc(Gn,`users/${t}/healthMetrics`);await s2(n,{type:e.type,value:e.value,timestamp:e.timestamp})}catch(n){throw console.error("Error adding metric:",n),n}},async deleteMetric(t,e){try{const n=Ci(Gn,`users/${t}/healthMetrics/${e}`);await D0(n)}catch(n){throw console.error("Error deleting metric:",n),n}},async getMetrics(t,e,n,r){try{const i=new Date(n);i.setHours(0,0,0,0);const s=new Date(r);s.setHours(23,59,59,999);const o=Pc(Gn,`users/${t}/healthMetrics`),a=ZO(o,df("type","==",e),df("timestamp",">=",Me.fromDate(i)),df("timestamp","<=",Me.fromDate(s)),e2("timestamp","desc"));return(await M0(a)).docs.map(c=>({id:c.id,...c.data(),timestamp:c.data().timestamp}))}catch(i){throw console.error("Error getting metrics:",i),i}},async getLastMonthMetrics(t,e){const n=new Date;return n.setDate(n.getDate()-30),this.getMetrics(t,e,n,new Date)},async getLastYearMetrics(t,e){const n=new Date;return n.setFullYear(n.getFullYear()-1),this.getMetrics(t,e,n,new Date)}},statusTypes:{async addStatusType(t,e,n){try{const r=Pc(Gn,`users/${t}/statusTypes`),i=e.toLowerCase().replace(/\s+/g,"-");return await ff(Ci(r,i),{name:e,id:i,thresholds:n}),{id:i,name:e,thresholds:n}}catch(r){throw console.error("Error adding status type:",r),r}},async getStatusTypes(t){try{const e=Pc(Gn,`users/${t}/statusTypes`);return(await M0(e)).docs.map(r=>r.data())}catch(e){throw console.error("Error getting status types:",e),e}},async deleteStatusType(t,e){try{const n=Ci(Gn,`users/${t}/statusTypes/${e}`);await D0(n)}catch(n){throw console.error("Error deleting status type:",n),n}}}},p2=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(""),[o,a]=j.useState(""),[l,c]=j.useState(""),[h,d]=j.useState(!1),{signup:f}=us(),g=_T(),y=async S=>{if(S.preventDefault(),n!==i)return c("Passwords do not match");try{c(""),d(!0);const w=await f(t,n);w.user&&await rn.user.createUserProfile(w.user.uid,{email:t,name:o}),g({to:"/dashboard"})}catch(w){c("Failed to create an account"),console.error(w)}finally{d(!1)}},v=S=>{S.preventDefault(),g({to:"/"})};return k.jsx("div",{className:"signup-container",children:k.jsxs("div",{className:"signup-card",children:[k.jsx("h2",{children:"Create Account"}),l&&k.jsx("div",{className:"error-message",children:l}),k.jsxs("form",{onSubmit:y,className:"signup-form",children:[k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"username",children:"Username"}),k.jsx("input",{id:"username",type:"text",value:o,onChange:S=>a(S.target.value),required:!0,placeholder:"Enter your username"})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"email",children:"Email"}),k.jsx("input",{id:"email",type:"email",value:t,onChange:S=>e(S.target.value),required:!0,placeholder:"Enter your email"})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"password",children:"Password"}),k.jsx("input",{id:"password",type:"password",value:n,onChange:S=>r(S.target.value),required:!0,placeholder:"Create a password"})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"confirm-password",children:"Confirm Password"}),k.jsx("input",{id:"confirm-password",type:"password",value:i,onChange:S=>s(S.target.value),required:!0,placeholder:"Confirm your password"})]}),k.jsx("button",{type:"submit",className:"signup-button",disabled:h,children:h?"Creating Account...":"Sign Up"}),k.jsxs("div",{className:"login-link",children:["Already have an account? ",k.jsx("a",{href:"/",onClick:v,children:"Login"})]})]})]})})},g2=["/assets/avatar-1.png","/assets/avatar-2.png","/assets/avatar-3.png","/assets/avatar-4.png"],m2=({isOpen:t,onClose:e,currentName:n,currentAvatar:r,onProfileUpdate:i})=>{const[s,o]=j.useState(n),[a,l]=j.useState(r),[c,h]=j.useState(""),[d,f]=j.useState(""),[g,y]=j.useState(""),[v,S]=j.useState(""),[w,E]=j.useState(!1),{currentUser:b,updatePassword:M,reauthenticateWithCredential:D,EmailAuthProvider:L}=us();if(!t)return null;const T=async _=>{if(_.preventDefault(),!!b){S(""),E(!0);try{if(await rn.user.createUserProfile(b.uid,{name:s,avatar:a,email:b.email||""}),d){if(d!==g)throw new Error("New passwords do not match");if(c){const I=L.credential(b.email||"",c);await D(b,I),await M(b,d)}else throw new Error("Current password is required to change password")}i(),e()}catch(I){console.error("Error updating profile:",I),S(I instanceof Error?I.message:"Failed to update profile")}finally{E(!1)}}};return k.jsx("div",{className:"dialog-overlay",children:k.jsxs("div",{className:"dialog-content",children:[k.jsx("h2",{children:"Edit Profile"}),v&&k.jsx("div",{className:"error-message",children:v}),k.jsxs("form",{onSubmit:T,children:[k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"Name"}),k.jsx("input",{type:"text",value:s,onChange:_=>o(_.target.value),required:!0,disabled:w})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"Avatar"}),k.jsx("div",{className:"avatar-options",children:g2.map(_=>k.jsx("img",{src:_,alt:"Avatar option",className:`avatar-option ${a===_?"selected":""}`,onClick:()=>l(_)},_))})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"Change Password (optional)"}),k.jsx("input",{type:"password",placeholder:"Current Password",value:c,onChange:_=>h(_.target.value),disabled:w}),k.jsx("input",{type:"password",placeholder:"New Password",value:d,onChange:_=>f(_.target.value),disabled:w}),k.jsx("input",{type:"password",placeholder:"Confirm New Password",value:g,onChange:_=>y(_.target.value),disabled:w})]}),k.jsxs("div",{className:"dialog-actions",children:[k.jsx("button",{type:"button",onClick:e,disabled:w,children:"Cancel"}),k.jsx("button",{type:"submit",disabled:w,children:w?"Saving...":"Save Changes"})]})]})]})})},y2=({isOpen:t,onClose:e})=>t?k.jsx("div",{className:"help-dialog-overlay",children:k.jsxs("div",{className:"help-dialog",children:[k.jsx("button",{className:"close-button",onClick:e,children:""}),k.jsx("h2",{children:"Dashboard Help Guide"}),k.jsxs("div",{className:"help-content",children:[k.jsxs("section",{children:[k.jsx("h3",{children:"Getting Started"}),k.jsx("p",{children:"Welcome to your LifeMetrics dashboard! Here's how to use the main features:"})]}),k.jsxs("section",{children:[k.jsx("h3",{children:"Status Types"}),k.jsx("p",{children:' Select from default metrics (Blood Pressure, Sleep Quality) or create custom ones using the "New Status" button in the left panel.'}),k.jsx("p",{children:" Each status type has customizable thresholds to track your health metrics."})]}),k.jsxs("section",{children:[k.jsx("h3",{children:"Tracking Data"}),k.jsx("p",{children:" Enter new measurements using the input form at the top of the main panel."}),k.jsx("p",{children:" View your data through interactive charts showing distribution and trends."}),k.jsx("p",{children:" Recent records are displayed in a table below the charts."})]}),k.jsxs("section",{children:[k.jsx("h3",{children:"Profile Management"}),k.jsx("p",{children:' Update your profile picture and name through the "Edit Profile" option.'}),k.jsx("p",{children:" Manage your account settings and password securely."})]})]})]})}):null,_2=({user:t})=>{const[e,n]=j.useState(!1),[r,i]=j.useState(!1),[s,o]=j.useState(null),{currentUser:a,logout:l}=us(),c="/assets/default-avatar.png",[h,d]=j.useState(!1);j.useEffect(()=>{(async()=>{if(a)try{const w=await rn.user.getUserProfile(a.uid);w?o(w):t&&o(t)}catch(w){console.error("Failed to load user data:",w),t&&o(t)}})()},[a,t]);const f=async()=>{try{await l(),window.location.href="/"}catch(S){console.error("Failed to log out:",S)}},g=()=>{n(!1),i(!0)},y=async()=>{if(a){const S=await rn.user.getUserProfile(a.uid);S&&o(S)}},v=S=>{S.preventDefault(),n(!1),d(!0)};return s?k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"user-header",children:[k.jsxs("div",{className:"user-info",children:[k.jsx("img",{src:s.avatar||c,alt:"User avatar",className:"user-avatar",onError:S=>{const w=S.target;w.src=c}}),k.jsx("h2",{className:"user-name",children:s.name})]}),k.jsxs("div",{className:"header-menu",children:[k.jsx("button",{className:"menu-button",onClick:()=>n(!e),children:""}),e&&k.jsxs("div",{className:"menu-dropdown",children:[k.jsx("a",{href:"#",onClick:f,children:"Log out"}),k.jsx("a",{href:"#",onClick:g,children:"Edit Profile"}),k.jsx("a",{href:"#",onClick:v,children:"Help"})]})]})]}),k.jsx(m2,{isOpen:r,onClose:()=>i(!1),currentName:s.name,currentAvatar:s.avatar,onProfileUpdate:y}),k.jsx(y2,{isOpen:h,onClose:()=>d(!1)})]}):k.jsx("div",{className:"user-header",children:"Loading..."})},v2=({onSubmit:t,onCancel:e,loading:n})=>{const[r,i]=j.useState(""),[s,o]=j.useState(""),[a,l]=j.useState(""),[c,h]=j.useState(""),[d,f]=j.useState({normal:"Normal",elevated:"Elevated",high:"High"}),[g,y]=j.useState(""),v=async S=>{if(S.preventDefault(),y(""),!r.trim()){y("Please enter a status name");return}if(!d.normal.trim()||!d.elevated.trim()||!d.high.trim()){y("Please enter names for all ranges");return}const w=parseFloat(s),E=parseFloat(a),b=parseFloat(c);if(isNaN(w)||isNaN(E)||isNaN(b)){y("Please enter valid numbers for all thresholds");return}if(w>=E||E>=b){y("Thresholds must be in ascending order: First < Second < Third");return}const M={normal:w,elevated:E,high:b,ranges:d};try{await t(r,M)}catch{y("Failed to create status")}};return k.jsxs("form",{onSubmit:v,className:"status-form",children:[g&&k.jsx("div",{className:"error-message",children:g}),k.jsxs("div",{className:"form-section",children:[k.jsx("h4",{children:"Status Name"}),k.jsx("div",{className:"form-group",children:k.jsx("input",{type:"text",value:r,onChange:S=>i(S.target.value),placeholder:"Enter status name",disabled:n})})]}),k.jsxs("div",{className:"thresholds-group",children:[k.jsxs("div",{className:"form-section",children:[k.jsx("h4",{children:"Range Names"}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"First Range Name"}),k.jsx("input",{type:"text",value:d.normal,onChange:S=>f(w=>({...w,normal:S.target.value})),placeholder:"e.g., Normal",disabled:n})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"Second Range Name"}),k.jsx("input",{type:"text",value:d.elevated,onChange:S=>f(w=>({...w,elevated:S.target.value})),placeholder:"e.g., Elevated",disabled:n})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"Third Range Name"}),k.jsx("input",{type:"text",value:d.high,onChange:S=>f(w=>({...w,high:S.target.value})),placeholder:"e.g., High",disabled:n})]})]}),k.jsxs("div",{className:"form-section",children:[k.jsx("h4",{children:"Thresholds"}),k.jsx("div",{className:"threshold-row",children:k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"First Threshold"}),k.jsx("input",{type:"number",value:s,onChange:S=>o(S.target.value),placeholder:"Value",step:"any",disabled:n}),k.jsx("span",{className:"helper-text",children:"Values below this are in first range"})]})}),k.jsx("div",{className:"threshold-row",children:k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"Second Threshold"}),k.jsx("input",{type:"number",value:a,onChange:S=>l(S.target.value),placeholder:"Value",step:"any",disabled:n}),k.jsx("span",{className:"helper-text",children:"Values between first and this are in second range"})]})}),k.jsx("div",{className:"threshold-row",children:k.jsxs("div",{className:"form-group",children:[k.jsx("label",{children:"Third Threshold"}),k.jsx("input",{type:"number",value:c,onChange:S=>h(S.target.value),placeholder:"Value",step:"any",disabled:n}),k.jsx("span",{className:"helper-text",children:"Values above this are in third range"})]})})]})]}),k.jsxs("div",{className:"form-buttons",children:[k.jsx("button",{type:"submit",disabled:n,children:n?"Adding...":"Add Status"}),k.jsx("button",{type:"button",onClick:e,disabled:n,children:"Cancel"})]})]})},kc=[{id:"blood-pressure",name:"Blood Pressure",thresholds:{normal:120,elevated:129,high:130,ranges:{normal:"Normal (<120)",elevated:"Elevated (120-129)",high:"High (>130)"}}},{id:"sleep-quality",name:"Sleep Quality",thresholds:{normal:7,elevated:8,high:9,ranges:{normal:"Poor (<7)",elevated:"Good (7-8)",high:"Excellent (>8)"}}}],w2=({onMetricSelect:t,selectedMetric:e})=>{const[n,r]=j.useState(!1),[i,s]=j.useState(kc),[o,a]=j.useState(!1),[l,c]=j.useState(""),{currentUser:h}=us();j.useEffect(()=>{h&&d()},[h]);const d=async()=>{if(h)try{a(!0);const y=await rn.statusTypes.getStatusTypes(h.uid);s([...kc,...y]),c("")}catch(y){console.error("Error loading status types:",y),c("Failed to load status types")}finally{a(!1)}},f=async(y,v)=>{if(h)try{a(!0),await rn.statusTypes.addStatusType(h.uid,y,v),await d(),r(!1),c("")}catch(S){console.error("Error adding status type:",S),c("Failed to add status type")}finally{a(!1)}},g=async y=>{if(h){if(kc.some(v=>v.id===y)){c("Cannot delete default status types");return}try{a(!0),await rn.statusTypes.deleteStatusType(h.uid,y),await d(),c("")}catch(v){console.error("Error deleting status type:",v),c("Failed to delete status type")}finally{a(!1)}}};return k.jsx("div",{className:"status-panel",children:k.jsxs("div",{className:"status-types",children:[k.jsx("h3",{children:"Status Types"}),l&&k.jsx("div",{className:"error-message",children:l}),o&&!n&&k.jsx("div",{children:"Loading..."}),i.map(y=>k.jsxs("div",{className:`status-type-item ${e===y.id?"selected":""}`,children:[k.jsxs("div",{onClick:()=>t(y.id),children:[" ",y.name]}),!kc.some(v=>v.id===y.id)&&k.jsx("button",{className:"delete-status-button",onClick:v=>{v.stopPropagation(),g(y.id)},disabled:o,children:""})]},y.id)),n?k.jsx(v2,{onSubmit:f,onCancel:()=>r(!1),loading:o}):k.jsx("button",{className:"new-status-button",onClick:()=>r(!0),disabled:o,children:"+ New Status"})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Vl(t){return t+.5|0}const Br=(t,e,n)=>Math.max(Math.min(t,n),e);function va(t){return Br(Vl(t*2.55),0,255)}function ni(t){return Br(Vl(t*255),0,255)}function er(t){return Br(Vl(t/2.55)/100,0,1)}function N0(t){return Br(Vl(t*100),0,100)}const Jt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$p=[..."0123456789ABCDEF"],E2=t=>$p[t&15],S2=t=>$p[(t&240)>>4]+$p[t&15],Cc=t=>(t&240)>>4===(t&15),T2=t=>Cc(t.r)&&Cc(t.g)&&Cc(t.b)&&Cc(t.a);function I2(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Jt[t[1]]*17,g:255&Jt[t[2]]*17,b:255&Jt[t[3]]*17,a:e===5?Jt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Jt[t[1]]<<4|Jt[t[2]],g:Jt[t[3]]<<4|Jt[t[4]],b:Jt[t[5]]<<4|Jt[t[6]],a:e===9?Jt[t[7]]<<4|Jt[t[8]]:255})),n}const x2=(t,e)=>t<255?e(t):"";function b2(t){var e=T2(t)?E2:S2;return t?"#"+e(t.r)+e(t.g)+e(t.b)+x2(t.a,e):void 0}const P2=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function q1(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function k2(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function C2(t,e,n){const r=q1(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function A2(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function jm(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=A2(n,r,i,h,s),l=l*60+.5),[l|0,c||0,a]}function Um(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ni)}function zm(t,e,n){return Um(q1,t,e,n)}function R2(t,e,n){return Um(C2,t,e,n)}function M2(t,e,n){return Um(k2,t,e,n)}function K1(t){return(t%360+360)%360}function D2(t){const e=P2.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?va(+e[5]):ni(+e[5]));const i=K1(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=R2(i,s,o):e[1]==="hsv"?r=M2(i,s,o):r=zm(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function N2(t,e){var n=jm(t);n[0]=K1(n[0]+e),n=zm(n),t.r=n[0],t.g=n[1],t.b=n[2]}function L2(t){if(!t)return;const e=jm(t),n=e[0],r=N0(e[1]),i=N0(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${er(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const L0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},O0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function O2(){const t={},e=Object.keys(O0),n=Object.keys(L0);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,L0[s]);s=parseInt(O0[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Ac;function V2(t){Ac||(Ac=O2(),Ac.transparent=[0,0,0,0]);const e=Ac[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const F2=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function j2(t){const e=F2.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?va(o):Br(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?va(r):Br(r,0,255)),i=255&(e[4]?va(i):Br(i,0,255)),s=255&(e[6]?va(s):Br(s,0,255)),{r,g:i,b:s,a:n}}}function U2(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${er(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const pf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ys=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function z2(t,e,n){const r=ys(er(t.r)),i=ys(er(t.g)),s=ys(er(t.b));return{r:ni(pf(r+n*(ys(er(e.r))-r))),g:ni(pf(i+n*(ys(er(e.g))-i))),b:ni(pf(s+n*(ys(er(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Rc(t,e,n){if(t){let r=jm(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=zm(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function G1(t,e){return t&&Object.assign(e||{},t)}function V0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ni(t[3]))):(e=G1(t,{r:0,g:0,b:0,a:1}),e.a=ni(e.a)),e}function B2(t){return t.charAt(0)==="r"?j2(t):D2(t)}class pl{constructor(e){if(e instanceof pl)return e;const n=typeof e;let r;n==="object"?r=V0(e):n==="string"&&(r=I2(e)||V2(e)||B2(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=G1(this._rgb);return e&&(e.a=er(e.a)),e}set rgb(e){this._rgb=V0(e)}rgbString(){return this._valid?U2(this._rgb):void 0}hexString(){return this._valid?b2(this._rgb):void 0}hslString(){return this._valid?L2(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=z2(this._rgb,e._rgb,n)),this}clone(){return new pl(this.rgb)}alpha(e){return this._rgb.a=ni(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Vl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Rc(this._rgb,2,e),this}darken(e){return Rc(this._rgb,2,-e),this}saturate(e){return Rc(this._rgb,1,e),this}desaturate(e){return Rc(this._rgb,1,-e),this}rotate(e){return N2(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Qn(){}const $2=(()=>{let t=0;return()=>t++})();function xe(t){return t==null}function Ge(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ve(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function un(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function kn(t,e){return un(t)?t:e}function fe(t,e){return typeof t>"u"?e:t}const H2=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ke(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ee(t,e,n,r){let i,s,o;if(Ge(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(ve(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ch(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function uh(t){if(Ge(t))return t.map(uh);if(ve(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=uh(t[n[i]]);return e}return t}function Q1(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function W2(t,e,n,r){if(!Q1(t))return;const i=e[t],s=n[t];ve(i)&&ve(s)?gl(i,s,r):e[t]=uh(s)}function gl(t,e,n){const r=Ge(e)?e:[e],i=r.length;if(!ve(t))return t;n=n||{};const s=n.merger||W2;let o;for(let a=0;a<i;++a){if(o=r[a],!ve(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Fa(t,e){return gl(t,e,{merger:q2})}function q2(t,e,n){if(!Q1(t))return;const r=e[t],i=n[t];ve(r)&&ve(i)?Fa(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=uh(i))}const F0={"":t=>t,x:t=>t.x,y:t=>t.y};function K2(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function G2(t){const e=K2(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function yo(t,e){return(F0[e]||(F0[e]=G2(e)))(t)}function Bm(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ml=t=>typeof t<"u",ui=t=>typeof t=="function",j0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Q2(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const et=Math.PI,Un=2*et,Y2=Un+et,hh=Number.POSITIVE_INFINITY,X2=et/180,wn=et/2,Si=et/4,U0=et*2/3,Hp=Math.log10,zn=Math.sign;function ja(t,e,n){return Math.abs(t-e)<n}function z0(t){const e=Math.round(t);t=ja(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Hp(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function J2(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function yl(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Z2(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function eV(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Vi(t){return t*(et/180)}function tV(t){return t*(180/et)}function B0(t){if(!un(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function nV(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*et&&(s+=Un),{angle:s,distance:i}}function Wp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rV(t,e){return(t-e+Y2)%Un-et}function Ar(t){return(t%Un+Un)%Un}function Y1(t,e,n,r){const i=Ar(t),s=Ar(e),o=Ar(n),a=Ar(s-i),l=Ar(o-i),c=Ar(i-s),h=Ar(i-o);return i===s||i===o||r&&s===o||a>l&&c<h}function qt(t,e,n){return Math.max(e,Math.min(n,t))}function iV(t){return qt(t,-32768,32767)}function Fi(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function $m(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const ji=(t,e,n,r)=>$m(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),sV=(t,e,n)=>$m(t,n,r=>t[r][e]>=n);function oV(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const X1=["push","pop","shift","splice","unshift"];function aV(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),X1.forEach(n=>{const r="_onData"+Bm(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function $0(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(X1.forEach(s=>{delete t[s]}),delete t._chartjs)}function J1(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Z1=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function ex(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,Z1.call(window,()=>{r=!1,t.apply(e,n)}))}}function lV(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Hm=t=>t==="start"?"left":t==="end"?"right":"center",yt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,cV=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function uV(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:h,minDefined:d,maxDefined:f}=o.getUserBounds();d&&(i=qt(Math.min(ji(a,l,c).lo,n?r:ji(e,l,o.getPixelForValue(c)).lo),0,r-1)),f?s=qt(Math.max(ji(a,o.axis,h,!0).hi+1,n?0:ji(e,l,o.getPixelForValue(h),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function hV(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Mc=t=>t===0||t===1,H0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Un/n)),W0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Un/n)+1,Ua={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*wn)+1,easeOutSine:t=>Math.sin(t*wn),easeInOutSine:t=>-.5*(Math.cos(et*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Mc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Mc(t)?t:H0(t,.075,.3),easeOutElastic:t=>Mc(t)?t:W0(t,.075,.3),easeInOutElastic(t){return Mc(t)?t:t<.5?.5*H0(t*2,.1125,.45):.5+.5*W0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ua.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ua.easeInBounce(t*2)*.5:Ua.easeOutBounce(t*2-1)*.5+.5};function Wm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function q0(t){return Wm(t)?t:new pl(t)}function gf(t){return Wm(t)?t:new pl(t).saturate(.5).darken(.1).hexString()}const dV=["x","y","borderWidth","radius","tension"],fV=["color","borderColor","backgroundColor"];function pV(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:fV},numbers:{type:"number",properties:dV}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function gV(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const K0=new Map;function mV(t,e){e=e||{};const n=t+JSON.stringify(e);let r=K0.get(n);return r||(r=new Intl.NumberFormat(t,e),K0.set(n,r)),r}function tx(t,e,n){return mV(e,n).format(t)}const nx={values(t){return Ge(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=yV(t,n)}const o=Hp(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),tx(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Hp(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?nx.numeric.call(this,t,e,n):""}};function yV(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var rx={formatters:nx};function _V(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const es=Object.create(null),qp=Object.create(null);function za(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function mf(t,e,n){return typeof e=="string"?gl(za(t,e),n):gl(za(t,""),e)}class vV{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>gf(i.backgroundColor),this.hoverBorderColor=(r,i)=>gf(i.borderColor),this.hoverColor=(r,i)=>gf(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return mf(this,e,n)}get(e){return za(this,e)}describe(e,n){return mf(qp,e,n)}override(e,n){return mf(es,e,n)}route(e,n,r,i){const s=za(this,e),o=za(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ve(l)?Object.assign({},c,l):fe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var $e=new vV({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pV,gV,_V]);function wV(t){return!t||xe(t.size)||xe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function G0(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Ti(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Q0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Kp(t,e,n,r){ix(t,e,n,r,null)}function ix(t,e,n,r,i){let s,o,a,l,c,h,d,f;const g=e.pointStyle,y=e.rotation,v=e.radius;let S=(y||0)*X2;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(S),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),g){default:i?t.ellipse(n,r,i/2,v,0,0,Un):t.arc(n,r,v,0,Un),t.closePath();break;case"triangle":h=i?i/2:v,t.moveTo(n+Math.sin(S)*h,r-Math.cos(S)*v),S+=U0,t.lineTo(n+Math.sin(S)*h,r-Math.cos(S)*v),S+=U0,t.lineTo(n+Math.sin(S)*h,r-Math.cos(S)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(S+Si)*l,d=Math.cos(S+Si)*(i?i/2-c:l),a=Math.sin(S+Si)*l,f=Math.sin(S+Si)*(i?i/2-c:l),t.arc(n-d,r-a,c,S-et,S-wn),t.arc(n+f,r-o,c,S-wn,S),t.arc(n+d,r+a,c,S,S+wn),t.arc(n-f,r+o,c,S+wn,S+et),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}S+=Si;case"rectRot":d=Math.cos(S)*(i?i/2:v),o=Math.cos(S)*v,a=Math.sin(S)*v,f=Math.sin(S)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":S+=Si;case"cross":d=Math.cos(S)*(i?i/2:v),o=Math.cos(S)*v,a=Math.sin(S)*v,f=Math.sin(S)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(S)*(i?i/2:v),o=Math.cos(S)*v,a=Math.sin(S)*v,f=Math.sin(S)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),S+=Si,d=Math.cos(S)*(i?i/2:v),o=Math.cos(S)*v,a=Math.sin(S)*v,f=Math.sin(S)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(S)*v,a=Math.sin(S)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(S)*(i?i/2:v),r+Math.sin(S)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function _l(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function qm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Km(t){t.restore()}function EV(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function SV(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function TV(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),xe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function IV(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function xV(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function vl(t,e,n,r,i,s={}){const o=Ge(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,TV(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&xV(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),xe(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),IV(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function dh(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*et,et,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,et,wn,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,wn,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-wn,!0),t.lineTo(n+o.topLeft,r)}const bV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,PV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function kV(t,e){const n=(""+t).match(bV);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const CV=t=>+t||0;function sx(t,e){const n={},r=ve(e),i=r?Object.keys(e):e,s=ve(t)?r?o=>fe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=CV(s(o));return n}function ox(t){return sx(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Gs(t){return sx(t,["topLeft","topRight","bottomLeft","bottomRight"])}function hn(t){const e=ox(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Et(t,e){t=t||{},e=e||$e.font;let n=fe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=fe(t.style,e.style);r&&!(""+r).match(PV)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:fe(t.family,e.family),lineHeight:kV(fe(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:fe(t.weight,e.weight),string:""};return i.string=wV(i),i}function Dc(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function AV(t,e,n){const{min:r,max:i}=t,s=H2(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function hs(t,e){return Object.assign(Object.create(t),e)}function Gm(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=ux("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Gm([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return lx(a,l,()=>FV(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return X0(a).includes(l)},ownKeys(a){return X0(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function _o(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ax(t,r),setContext:s=>_o(t,s,n,r),override:s=>_o(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return lx(s,o,()=>MV(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function ax(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:ui(n)?n:()=>n,isIndexable:ui(r)?r:()=>r}}const RV=(t,e)=>t?t+Bm(e):e,Qm=(t,e)=>ve(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function lx(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function MV(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return ui(a)&&o.isScriptable(e)&&(a=DV(e,a,t,n)),Ge(a)&&a.length&&(a=NV(e,a,t,o.isIndexable)),Qm(e,a)&&(a=_o(a,i,s&&s[e],o)),a}function DV(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),Qm(t,l)&&(l=Ym(i._scopes,i,t,l)),l}function NV(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(ve(e[0])){const l=e,c=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Ym(c,i,t,h);e.push(_o(d,s,o&&o[t],a))}}return e}function cx(t,e,n){return ui(t)?t(e,n):t}const LV=(t,e)=>t===!0?e:typeof t=="string"?yo(e,t):void 0;function OV(t,e,n,r,i){for(const s of e){const o=LV(n,s);if(o){t.add(o);const a=cx(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Ym(t,e,n,r){const i=e._rootScopes,s=cx(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Y0(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=Y0(a,o,s,l,r),l===null)?!1:Gm(Array.from(a),[""],i,s,()=>VV(e,n,r))}function Y0(t,e,n,r,i){for(;n;)n=OV(t,e,n,r,i);return n}function VV(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Ge(i)&&ve(n)?n:i||{}}function FV(t,e,n,r){let i;for(const s of e)if(i=ux(RV(s,t),n),typeof i<"u")return Qm(t,i)?Ym(n,r,t,i):i}function ux(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function X0(t){let e=t._keys;return e||(e=t._keys=jV(t._scopes)),e}function jV(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const UV=Number.EPSILON||1e-14,vo=(t,e)=>e<t.length&&!t[e].skip&&t[e],hx=t=>t==="x"?"y":"x";function zV(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Wp(s,i),l=Wp(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=r*c,f=r*h;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function BV(t,e,n){const r=t.length;let i,s,o,a,l,c=vo(t,0);for(let h=0;h<r-1;++h)if(l=c,c=vo(t,h+1),!(!l||!c)){if(ja(e[h],0,UV)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function $V(t,e,n="x"){const r=hx(n),i=t.length;let s,o,a,l=vo(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=vo(t,c+1),!a)continue;const h=a[n],d=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=d+s*e[c])}}function HV(t,e="x"){const n=hx(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=vo(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=vo(t,o+1),!!l){if(c){const h=c[e]-l[e];i[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?zn(i[o-1])!==zn(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}BV(t,i,s),$V(t,s,e)}function Nc(t,e,n){return Math.max(Math.min(t,n),e)}function WV(t,e){let n,r,i,s,o,a=_l(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&_l(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Nc(i.cp1x,e.left,e.right),i.cp1y=Nc(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Nc(i.cp2x,e.left,e.right),i.cp2y=Nc(i.cp2y,e.top,e.bottom)))}function qV(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")HV(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=zV(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&WV(t,n)}function Xm(){return typeof window<"u"&&typeof document<"u"}function Jm(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function fh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const rd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function KV(t,e){return rd(t).getPropertyValue(e)}const GV=["top","right","bottom","left"];function $i(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=GV[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const QV=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function YV(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(QV(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ai(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=rd(n),s=i.boxSizing==="border-box",o=$i(i,"padding"),a=$i(i,"border","width"),{x:l,y:c,box:h}=YV(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:y}=e;return s&&(g-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/g*n.width/r),y:Math.round((c-f)/y*n.height/r)}}function XV(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Jm(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=rd(s),l=$i(a,"border","width"),c=$i(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=fh(a.maxWidth,s,"clientWidth"),i=fh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||hh,maxHeight:i||hh}}const Lc=t=>Math.round(t*10)/10;function JV(t,e,n,r){const i=rd(t),s=$i(i,"margin"),o=fh(i.maxWidth,t,"clientWidth")||hh,a=fh(i.maxHeight,t,"clientHeight")||hh,l=XV(t,e,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const f=$i(i,"border","width"),g=$i(i,"padding");c-=g.width+f.width,h-=g.height+f.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=Lc(Math.min(c,o,l.maxWidth)),h=Lc(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Lc(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=Lc(Math.floor(h*r))),{width:c,height:h}}function J0(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const ZV=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Xm()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Z0(t,e){const n=KV(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ri(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function eF(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function tF(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ri(t,i,n),a=Ri(i,s,n),l=Ri(s,e,n),c=Ri(o,a,n),h=Ri(a,l,n);return Ri(c,h,n)}const nF=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},rF=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Qs(t,e,n){return t?nF(e,n):rF()}function dx(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function fx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function px(t){return t==="angle"?{between:Y1,compare:rV,normalize:Ar}:{between:Fi,compare:(e,n)=>e-n,normalize:e=>e}}function ew({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function iF(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=px(r),l=e.length;let{start:c,end:h,loop:d}=t,f,g;if(d){for(c+=l,h+=l,f=0,g=l;f<g&&o(a(e[c%l][r]),i,s);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function sF(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=px(r),{start:h,end:d,loop:f,style:g}=iF(t,e,n),y=[];let v=!1,S=null,w,E,b;const M=()=>l(i,b,w)&&a(i,b)!==0,D=()=>a(s,w)===0||l(s,b,w),L=()=>v||M(),T=()=>!v||D();for(let _=h,I=h;_<=d;++_)E=e[_%o],!E.skip&&(w=c(E[r]),w!==b&&(v=l(w,i,s),S===null&&L()&&(S=a(w,i)===0?_:I),S!==null&&T()&&(y.push(ew({start:S,end:_,loop:f,count:o,style:g})),S=null),I=_,b=w));return S!==null&&y.push(ew({start:S,end:d,loop:f,count:o,style:g})),y}function oF(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=sF(r[i],t.points,e);s.length&&n.push(...s)}return n}function aF(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function lF(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function cF(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=aF(n,i,s,r);if(r===!0)return tw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return tw(t,lF(n,o,l,c),n,e)}function tw(t,e,n,r){return!r||!r.setContext||!n?e:uF(t,e,n,r)}function uF(t,e,n,r){const i=t._chart.getContext(),s=nw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,f=d;function g(y,v,S,w){const E=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=E;for(;n[v%l].skip;)v+=E;y%l!==v%l&&(c.push({start:y%l,end:v%l,loop:S,style:w}),h=w,d=v%l)}}for(const y of e){d=a?d:y.start;let v=n[d%l],S;for(f=d+1;f<=y.end;f++){const w=n[f%l];S=nw(r.setContext(hs(i,{type:"segment",p0:v,p1:w,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),hF(S,h)&&g(d,f-1,y.loop,h),v=w,h=S}d<f-1&&g(d,f-1,y.loop,h)}return c}function nw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function hF(t,e){if(!e)return!1;const n=[],r=function(i,s){return Wm(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class dF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Z1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Yn=new dF;const rw="transparent",fF={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=q0(t||rw),i=r.valid&&q0(e||rw);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class pF{constructor(e,n,r,i){const s=n[r];i=Dc([e.to,i,s,e.from]);const o=Dc([e.from,s,i]);this._active=!0,this._fn=e.fn||fF[e.type||typeof o],this._easing=Ua[e.easing]||Ua.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Dc([e.to,n,i,e.from]),this._from=Dc([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class gx{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ve(e))return;const n=Object.keys($e.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!ve(s))return;const o={};for(const a of n)o[a]=s[a];(Ge(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=mF(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&gF(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}s[c]=d=new pF(f,e,c,h),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Yn.add(this._chart,r),!0}}function gF(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function mF(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function iw(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function yF(t,e,n){if(n===!1)return!1;const r=iw(t,n),i=iw(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function _F(t){let e,n,r,i;return ve(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function mx(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function sw(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],un(c)&&(s||e===0||zn(e)===zn(c))&&(e+=c)}return!h&&!r.all?0:e}function vF(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[s]:t[h]};return a}function yf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function wF(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function EF(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function SF(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function ow(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function aw(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=wF(s,o,r),d=e.length;let f;for(let g=0;g<d;++g){const y=e[g],{[l]:v,[c]:S}=y,w=y._stacks||(y._stacks={});f=w[c]=SF(i,h,v),f[a]=S,f._top=ow(f,o,!0,r.type),f._bottom=ow(f,o,!1,r.type);const E=f._visualValues||(f._visualValues={});E[a]=S}}function _f(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function TF(t,e){return hs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function IF(t,e,n){return hs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ta(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const vf=t=>t==="reset"||t==="none",lw=(t,e)=>e?t:Object.assign({},t),xF=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:mx(n,!0),values:null};class Ys{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=yf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ta(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,f,g,y)=>d==="x"?f:d==="r"?y:g,s=n.xAxisID=fe(r.xAxisID,_f(e,"x")),o=n.yAxisID=fe(r.yAxisID,_f(e,"y")),a=n.rAxisID=fe(r.rAxisID,_f(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$0(this._data,this),e._stacked&&ta(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ve(n)){const i=this._cachedMeta;this._data=vF(n,i)}else if(r!==n){if(r){$0(r,this);const i=this._cachedMeta;ta(i),i._parsed=[]}n&&Object.isExtensible(n)&&aV(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=yf(n.vScale,n),n.stack!==r.stack&&(i=!0,ta(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(aw(this,n._parsed),n._stacked=yf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,d,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{Ge(i[e])?f=this.parseArrayData(r,i,e,n):ve(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const g=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=d=f[h],l&&(g()&&(l=!1),c=d);r._sorted=l}o&&aw(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(i);let f,g,y;for(f=0,g=i;f<g;++f)y=f+r,d[f]={[a]:h||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,h,d;for(l=0,c=i;l<c;++l)h=l+r,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,d,f,g;for(h=0,d=i;h<d;++h)f=h+r,g=n[f],c[h]={x:s.parse(yo(g,a),f),y:o.parse(yo(g,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:mx(i,!0),values:n._stacks[e.axis]._visualValues};return sw(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=sw(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=xF(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=EF(a);let f,g;function y(){g=i[f];const v=g[a.axis];return!un(g[e.axis])||h>v||d<v}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(c,e,g,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],un(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=_F(fe(this.options.clip,yF(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=IF(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=TF(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&ml(r);if(a)return lw(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),g=Object.keys($e.elements[e]),y=()=>this.getContext(r,i,n),v=c.resolveNamedOptions(f,g,y,d);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(lw(v,l))),v}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,r,n))}const c=new gx(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||vf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){vf(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!vf(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&ta(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ne(Ys,"defaults",{}),ne(Ys,"datasetElementType",null),ne(Ys,"dataElementType",null);function bF(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=J1(r.sort((i,s)=>i-s))}return t._cache.$bar}function PF(t){const e=t.iScale,n=bF(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(ml(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function kF(t,e,n,r){const i=n.barThickness;let s,o;return xe(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function CF(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function AF(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function yx(t,e,n,r){return Ge(t)?AF(t,e,n,r):e[n.axis]=n.parse(t,r),e}function cw(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,h,d,f;for(c=n,h=n+r;c<h;++c)f=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(yx(f,d,s,c));return l}function wf(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function RF(t,e,n){return t!==0?zn(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function MF(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function DF(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=MF(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=h:(s[uw(h,o,a,l)]=!0,i=c)),s[uw(i,o,a,l)]=!0,t.borderSkipped=s}function uw(t,e,n,r){return r?(t=NF(t,e,n),t=hw(t,n,e)):t=hw(t,e,n),t}function NF(t,e,n){return t===e?n:t===n?e:t}function hw(t,e,n){return t==="start"?e:t==="end"?n:t}function LF(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class fu extends Ys{parsePrimitiveData(e,n,r,i){return cw(e,n,r,i)}parseArrayData(e,n,r,i){return cw(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let f,g,y,v;for(f=r,g=r+i;f<g;++f)v=n[f],y={},y[s.axis]=s.parse(yo(v,c),f),d.push(yx(yo(v,h),y,o,f));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=wf(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i);for(let g=n;g<n+r;g++){const y=this.getParsed(g),v=s||xe(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),S=this._calculateBarIndexPixels(g,h),w=(y._stacks||{})[a.axis],E={horizontal:c,base:v.base,enableBorderRadius:!w||wf(y._custom)||o===w._top||o===w._bottom,x:c?v.head:S.center,y:c?S.center:v.head,height:c?S.size:Math.abs(v.size),width:c?Math.abs(v.size):S.size};f&&(E.options=d||this.resolveDataElementOptions(g,e[g].active?"active":i));const b=E.options||e[g].options;DF(E,b,w,o),LF(E,b,h.ratio),this.updateElement(e[g],g,E,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=h=>{const d=h._parsed.find(g=>g[r.axis]===l),f=d&&d[h.vScale.axis];if(xe(f)||isNaN(f))return!0};for(const h of i)if(!(n!==void 0&&c(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||PF(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=wf(c);let d=l[n.axis],f=0,g=r?this.applyStack(n,l,r):d,y,v;g!==d&&(f=g-d,g=d),h&&(d=c.barStart,g=c.barEnd-c.barStart,d!==0&&zn(d)!==zn(c.barEnd)&&(f=0),f+=d);const S=!xe(s)&&!h?s:f;let w=n.getPixelForValue(S);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(f+g):y=w,v=y-w,Math.abs(v)<o){v=RF(v,n,a)*o,d===a&&(w-=v/2);const E=n.getPixelForDecimal(0),b=n.getPixelForDecimal(1),M=Math.min(E,b),D=Math.max(E,b);w=Math.max(Math.min(w,D),M),y=w+v,r&&!h&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(w))}if(w===n.getPixelForValue(a)){const E=zn(v)*n.getLineWidthForValue(a)/2;w+=E,v-=E}return{size:v,base:w,head:y,center:y+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=fe(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,h=i.barThickness==="flex"?CF(e,n,i,c):kF(e,n,i,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*d+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}ne(fu,"id","bar"),ne(fu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ne(fu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class pu extends Ys{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=uV(n,i,o);this._drawStart=a,this._drawCount=l,hV(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,g=a.axis,{spanGaps:y,segment:v}=this.options,S=yl(y)?y:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||i==="none",E=n+r,b=e.length;let M=n>0&&this.getParsed(n-1);for(let D=0;D<b;++D){const L=e[D],T=w?L:{};if(D<n||D>=E){T.skip=!0;continue}const _=this.getParsed(D),I=xe(_[g]),P=T[f]=o.getPixelForValue(_[f],D),A=T[g]=s||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[g],D);T.skip=isNaN(P)||isNaN(A)||I,T.stop=D>0&&Math.abs(_[f]-M[f])>S,v&&(T.parsed=_,T.raw=c.data[D]),d&&(T.options=h||this.resolveDataElementOptions(D,L.active?"active":i)),w||this.updateElement(L,D,T,i),M=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ne(pu,"id","line"),ne(pu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ne(pu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ii(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Zm{constructor(e){ne(this,"options");this.options=e||{}}static override(e){Object.assign(Zm.prototype,e)}init(){}formats(){return Ii()}parse(){return Ii()}format(){return Ii()}add(){return Ii()}diff(){return Ii()}startOf(){return Ii()}endOf(){return Ii()}}var OF={_date:Zm};function VF(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?sV:ji;if(r){if(i._sharedOptions){const c=s[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const d=l(s,e,n-h),f=l(s,e,n+h);return{lo:d.lo,hi:f.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Fl(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:f}=VF(s[a],e,o,i);for(let g=d;g<=f;++g){const y=h[g];y.skip||r(y,c,g)}}}function FF(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Ef(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Fl(t,n,e,function(a,l,c){!i&&!_l(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function jF(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:d}=nV(o,{x:e.x,y:e.y});Y1(d,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return Fl(t,n,e,s),i}function UF(t,e,n,r,i,s){let o=[];const a=FF(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const g=h.inRange(e.x,e.y,i);if(r&&!g)return;const y=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!g)return;const S=a(e,y);S<l?(o=[{element:h,datasetIndex:d,index:f}],l=S):S===l&&o.push({element:h,datasetIndex:d,index:f})}return Fl(t,n,e,c),o}function Sf(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?jF(t,e,n,i):UF(t,e,n,r,i,s)}function dw(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Fl(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var zF={evaluateInteractionItems:Fl,modes:{index(t,e,n,r){const i=Ai(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Ef(t,i,s,r,o):Sf(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const i=Ai(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Ef(t,i,s,r,o):Sf(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=Ai(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Ef(t,i,s,r,o)},nearest(t,e,n,r){const i=Ai(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Sf(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Ai(e,t);return dw(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Ai(e,t);return dw(t,i,"y",n.intersect,r)}}};const _x=["left","top","right","bottom"];function na(t,e){return t.filter(n=>n.pos===e)}function fw(t,e){return t.filter(n=>_x.indexOf(n.pos)===-1&&n.box.axis===e)}function ra(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function BF(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function $F(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!_x.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function HF(t,e){const n=$F(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function WF(t){const e=BF(t),n=ra(e.filter(c=>c.box.fullSize),!0),r=ra(na(e,"left"),!0),i=ra(na(e,"right")),s=ra(na(e,"top"),!0),o=ra(na(e,"bottom")),a=fw(e,"x"),l=fw(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:na(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function pw(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function vx(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function qF(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!ve(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&vx(o,s.getPadding());const a=Math.max(0,e.outerWidth-pw(o,t,"left","right")),l=Math.max(0,e.outerHeight-pw(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function KF(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function GF(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function wa(t,e,n,r){const i=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,GF(a.horizontal,e));const{same:d,other:f}=qF(e,n,a,r);c|=d&&i.length,h=h||f,l.fullSize||i.push(a)}return c&&wa(i,e,n,r)||h}function Oc(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function gw(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;ml(c.start)&&(o=c.start),l.fullSize?Oc(l,i.left,o,n.outerWidth-i.right-i.left,f):Oc(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;ml(c.start)&&(s=c.start),l.fullSize?Oc(l,s,i.top,f,n.outerHeight-i.bottom-i.top):Oc(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var on={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=hn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=WF(t.boxes),l=a.vertical,c=a.horizontal;Ee(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const h=l.reduce((v,S)=>S.box.options&&S.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},i);vx(f,hn(r));const g=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),y=HF(l.concat(c),d);wa(a.fullSize,g,d,y),wa(l,g,d,y),wa(c,g,d,y)&&wa(l,g,d,y),KF(g),gw(a.leftAndTop,g,d,y),g.x+=g.w,g.y+=g.h,gw(a.rightAndBottom,g,d,y),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Ee(a.chartArea,v=>{const S=v.box;Object.assign(S,t.chartArea),S.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class wx{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class QF extends wx{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const gu="$chartjs",YF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mw=t=>t===null||t==="";function XF(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[gu]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",mw(i)){const s=Z0(t,"width");s!==void 0&&(t.width=s)}if(mw(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Z0(t,"height");s!==void 0&&(t.height=s)}return t}const Ex=ZV?{passive:!0}:!1;function JF(t,e,n){t&&t.addEventListener(e,n,Ex)}function ZF(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Ex)}function ej(t,e){const n=YF[t.type]||t.type,{x:r,y:i}=Ai(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function ph(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function tj(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ph(a.addedNodes,r),o=o&&!ph(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function nj(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ph(a.removedNodes,r),o=o&&!ph(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const wl=new Map;let yw=0;function Sx(){const t=window.devicePixelRatio;t!==yw&&(yw=t,wl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function rj(t,e){wl.size||window.addEventListener("resize",Sx),wl.set(t,e)}function ij(t){wl.delete(t),wl.size||window.removeEventListener("resize",Sx)}function sj(t,e,n){const r=t.canvas,i=r&&Jm(r);if(!i)return;const s=ex((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(i),rj(t,s),o}function Tf(t,e,n){n&&n.disconnect(),e==="resize"&&ij(t)}function oj(t,e,n){const r=t.canvas,i=ex(s=>{t.ctx!==null&&n(ej(s,t))},t);return JF(r,e,i),i}class aj extends wx{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(XF(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[gu])return!1;const r=n[gu].initial;["height","width"].forEach(s=>{const o=r[s];xe(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[gu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:tj,detach:nj,resize:sj}[n]||oj;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Tf,detach:Tf,resize:Tf}[n]||ZF)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return JV(e,n,r,i)}isAttached(e){const n=e&&Jm(e);return!!(n&&n.isConnected)}}function lj(t){return!Xm()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?QF:aj}class $n{constructor(){ne(this,"x");ne(this,"y");ne(this,"active",!1);ne(this,"options");ne(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return yl(this.x)&&yl(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}ne($n,"defaults",{}),ne($n,"defaultRoutes");function cj(t,e){const n=t.options.ticks,r=uj(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?dj(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return fj(e,c,s,o/i),c;const h=hj(s,e,i);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(Vc(e,c,h,xe(g)?0:a-g,a),d=0,f=o-1;d<f;d++)Vc(e,c,h,s[d],s[d+1]);return Vc(e,c,h,l,xe(g)?e.length:l+g),c}return Vc(e,c,h),c}function uj(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function hj(t,e,n){const r=pj(t),i=e.length/n;if(!r)return Math.max(i,1);const s=J2(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function dj(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function fj(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Vc(t,e,n,r,i){const s=fe(r,0),o=Math.min(fe(i,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function pj(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const gj=t=>t==="left"?"right":t==="right"?"left":t,_w=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,vw=(t,e)=>Math.min(e||t,t);function ww(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function mj(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function yj(t,e){Ee(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function ia(t){return t.drawTicks?t.tickLength:0}function Ew(t,e){if(!t.display)return 0;const n=Et(t.font,e),r=hn(t.padding);return(Ge(t.text)?t.text.length:1)*n.lineHeight+r.height}function _j(t,e){return hs(t,{scale:e,type:"scale"})}function vj(t,e,n){return hs(t,{tick:n,index:e,type:"tick"})}function wj(t,e,n){let r=Hm(t);return(n&&e!=="right"||!n&&e==="right")&&(r=gj(r)),r}function Ej(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,g,y;const v=o-i,S=a-s;if(t.isHorizontal()){if(g=yt(r,s,a),ve(n)){const w=Object.keys(n)[0],E=n[w];y=h[w].getPixelForValue(E)+v-e}else n==="center"?y=(c.bottom+c.top)/2+v-e:y=_w(t,n,e);f=a-s}else{if(ve(n)){const w=Object.keys(n)[0],E=n[w];g=h[w].getPixelForValue(E)-S+e}else n==="center"?g=(c.left+c.right)/2-S+e:g=_w(t,n,e);y=yt(r,o,i),d=n==="left"?-wn:wn}return{titleX:g,titleY:y,maxWidth:f,rotation:d}}class Ao extends $n{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=kn(e,Number.POSITIVE_INFINITY),n=kn(n,Number.NEGATIVE_INFINITY),r=kn(r,Number.POSITIVE_INFINITY),i=kn(i,Number.NEGATIVE_INFINITY),{min:kn(e,r),max:kn(n,i),minDefined:un(e),maxDefined:un(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:kn(n,kn(r,n)),max:kn(r,kn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ke(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=AV(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?ww(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=cj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ke(this.options.afterUpdate,[this])}beforeSetDimensions(){ke(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ke(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ke(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ke(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=ke(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){ke(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ke(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=vw(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=qt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),d+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-ia(e.grid)-n.padding-Ew(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=tV(Math.min(Math.asin(qt((h.highest.height+6)/a,-1,1)),Math.asin(qt(l/c,-1,1))-Math.asin(qt(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ke(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ke(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ew(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=ia(s)+l):(e.height=this.maxHeight,e.width=ia(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),g=r.padding*2,y=Vi(this.labelRotation),v=Math.cos(y),S=Math.sin(y);if(a){const w=r.mirror?0:S*d.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+w+g)}else{const w=r.mirror?0:v*d.width+S*f.height;e.width=Math.min(this.maxWidth,e.width+w+g)}this._calculatePadding(c,h,S,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=i*e.width,g=r*n.height):(f=r*e.height,g=i*n.width):s==="start"?g=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,g=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ke(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)xe(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=ww(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/vw(n,r));let c=0,h=0,d,f,g,y,v,S,w,E,b,M,D;for(d=0;d<n;d+=l){if(y=e[d].label,v=this._resolveTickFontOptions(d),i.font=S=v.string,w=s[S]=s[S]||{data:{},gc:[]},E=v.lineHeight,b=M=0,!xe(y)&&!Ge(y))b=G0(i,w.data,w.gc,b,y),M=E;else if(Ge(y))for(f=0,g=y.length;f<g;++f)D=y[f],!xe(D)&&!Ge(D)&&(b=G0(i,w.data,w.gc,b,D),M+=E);o.push(b),a.push(M),c=Math.max(b,c),h=Math.max(M,h)}yj(s,n);const L=o.indexOf(c),T=a.indexOf(h),_=I=>({width:o[I]||0,height:a[I]||0});return{first:_(0),last:_(n-1),widest:_(L),highest:_(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return iV(this._alignToPixels?Ti(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=vj(this.getContext(),e,r))}return this.$context||(this.$context=_j(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Vi(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=ia(s),g=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,S=v/2,w=function(Z){return Ti(r,Z,v)};let E,b,M,D,L,T,_,I,P,A,R,C;if(o==="top")E=w(this.bottom),T=this.bottom-f,I=E-S,A=w(e.top)+S,C=e.bottom;else if(o==="bottom")E=w(this.top),A=e.top,C=w(e.bottom)-S,T=E+S,I=this.top+f;else if(o==="left")E=w(this.right),L=this.right-f,_=E-S,P=w(e.left)+S,R=e.right;else if(o==="right")E=w(this.left),P=e.left,R=w(e.right)-S,L=E+S,_=this.left+f;else if(n==="x"){if(o==="center")E=w((e.top+e.bottom)/2+.5);else if(ve(o)){const Z=Object.keys(o)[0],ae=o[Z];E=w(this.chart.scales[Z].getPixelForValue(ae))}A=e.top,C=e.bottom,T=E+S,I=T+f}else if(n==="y"){if(o==="center")E=w((e.left+e.right)/2);else if(ve(o)){const Z=Object.keys(o)[0],ae=o[Z];E=w(this.chart.scales[Z].getPixelForValue(ae))}L=E-S,_=L-f,P=e.left,R=e.right}const q=fe(i.ticks.maxTicksLimit,d),X=Math.max(1,Math.ceil(d/q));for(b=0;b<d;b+=X){const Z=this.getContext(b),ae=s.setContext(Z),U=a.setContext(Z),$=ae.lineWidth,G=ae.color,oe=U.dash||[],Q=U.dashOffset,te=ae.tickWidth,ce=ae.tickColor,se=ae.tickBorderDash||[],me=ae.tickBorderDashOffset;M=mj(this,b,l),M!==void 0&&(D=Ti(r,M,$),c?L=_=P=R=D:T=I=A=C=D,g.push({tx1:L,ty1:T,tx2:_,ty2:I,x1:P,y1:A,x2:R,y2:C,width:$,color:G,borderDash:oe,borderDashOffset:Q,tickWidth:te,tickColor:ce,tickBorderDash:se,tickBorderDashOffset:me}))}return this._ticksLength=d,this._borderValue=E,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,f=ia(r.grid),g=f+h,y=d?-h:g,v=-Vi(this.labelRotation),S=[];let w,E,b,M,D,L,T,_,I,P,A,R,C="middle";if(i==="top")L=this.bottom-y,T=this._getXAxisLabelAlignment();else if(i==="bottom")L=this.top+y,T=this._getXAxisLabelAlignment();else if(i==="left"){const X=this._getYAxisLabelAlignment(f);T=X.textAlign,D=X.x}else if(i==="right"){const X=this._getYAxisLabelAlignment(f);T=X.textAlign,D=X.x}else if(n==="x"){if(i==="center")L=(e.top+e.bottom)/2+g;else if(ve(i)){const X=Object.keys(i)[0],Z=i[X];L=this.chart.scales[X].getPixelForValue(Z)+g}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")D=(e.left+e.right)/2-g;else if(ve(i)){const X=Object.keys(i)[0],Z=i[X];D=this.chart.scales[X].getPixelForValue(Z)}T=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?C="top":l==="end"&&(C="bottom"));const q=this._getLabelSizes();for(w=0,E=a.length;w<E;++w){b=a[w],M=b.label;const X=s.setContext(this.getContext(w));_=this.getPixelForTick(w)+s.labelOffset,I=this._resolveTickFontOptions(w),P=I.lineHeight,A=Ge(M)?M.length:1;const Z=A/2,ae=X.color,U=X.textStrokeColor,$=X.textStrokeWidth;let G=T;o?(D=_,T==="inner"&&(w===E-1?G=this.options.reverse?"left":"right":w===0?G=this.options.reverse?"right":"left":G="center"),i==="top"?c==="near"||v!==0?R=-A*P+P/2:c==="center"?R=-q.highest.height/2-Z*P+P:R=-q.highest.height+P/2:c==="near"||v!==0?R=P/2:c==="center"?R=q.highest.height/2-Z*P:R=q.highest.height-A*P,d&&(R*=-1),v!==0&&!X.showLabelBackdrop&&(D+=P/2*Math.sin(v))):(L=_,R=(1-A)*P/2);let oe;if(X.showLabelBackdrop){const Q=hn(X.backdropPadding),te=q.heights[w],ce=q.widths[w];let se=R-Q.top,me=0-Q.left;switch(C){case"middle":se-=te/2;break;case"bottom":se-=te;break}switch(T){case"center":me-=ce/2;break;case"right":me-=ce;break;case"inner":w===E-1?me-=ce:w>0&&(me-=ce/2);break}oe={left:me,top:se,width:ce+Q.width,height:te+Q.height,color:X.backdropColor}}S.push({label:M,font:I,textOffset:R,options:{rotation:v,color:ae,strokeColor:U,strokeWidth:$,textAlign:G,textBaseline:C,translation:[D,L],backdrop:oe}})}return S}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Vi(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Ti(e,this.left,o)-o/2,h=Ti(e,this.right,a)+a/2,d=f=l):(d=Ti(e,this.top,o)-o/2,f=Ti(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&qm(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;vl(r,c,0,h,l,a)}i&&Km(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Et(r.font),o=hn(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ve(n)?(l+=o.bottom,Ge(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=Ej(this,l,n,a);vl(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:wj(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=fe(e.grid&&e.grid.z,-1),i=fe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ao.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Et(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Fc{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;Ij(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,Sj(e,o,r),this.override&&$e.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in $e[i]&&(delete $e[i][r],this.override&&delete es[r])}}function Sj(t,e,n){const r=gl(Object.create(null),[n?$e.get(n):{},$e.get(e),t.defaults]);$e.set(e,r),t.defaultRoutes&&Tj(e,t.defaultRoutes),t.descriptors&&$e.describe(e,t.descriptors)}function Tj(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");$e.route(s,i,l,a)})}function Ij(t){return"id"in t&&"defaults"in t}class xj{constructor(){this.controllers=new Fc(Ys,"datasets",!0),this.elements=new Fc($n,"elements"),this.plugins=new Fc(Object,"plugins"),this.scales=new Fc(Ao,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Ee(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=Bm(e);ke(r["before"+i],[],r),n[e](r),ke(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Rn=new xj;class bj{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(ke(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){xe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=fe(r.options&&r.options.plugins,{}),s=Pj(r);return i===!1&&!n?[]:Cj(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function Pj(t){const e={},n=[],r=Object.keys(Rn.plugins.items);for(let s=0;s<r.length;s++)n.push(Rn.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function kj(t,e){return!e&&t===!1?null:t===!0?{}:t}function Cj(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=kj(r[l],i);c!==null&&s.push({plugin:a,options:Aj(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Aj(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gp(t,e){const n=$e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Rj(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Mj(t,e){return t===e?"_index_":"_value_"}function Sw(t){if(t==="x"||t==="y"||t==="r")return t}function Dj(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Qp(t,...e){if(Sw(t))return t;for(const n of e){const r=n.axis||Dj(n.position)||t.length>1&&Sw(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Tw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Nj(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Tw(t,"x",n[0])||Tw(t,"y",n[0])}return{}}function Lj(t,e){const n=es[t.type]||{scales:{}},r=e.scales||{},i=Gp(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ve(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Qp(o,a,Nj(o,t),$e.scales[a.type]),c=Mj(l,i),h=n.scales||{};s[o]=Fa(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Gp(a,e),h=(es[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=Rj(d,l),g=o[f+"AxisID"]||f;s[g]=s[g]||Object.create(null),Fa(s[g],[{axis:f},r[g],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Fa(a,[$e.scales[a.type],$e.scale])}),s}function Tx(t){const e=t.options||(t.options={});e.plugins=fe(e.plugins,{}),e.scales=Lj(t,e)}function Ix(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Oj(t){return t=t||{},t.data=Ix(t.data),Tx(t),t}const Iw=new Map,xx=new Set;function jc(t,e){let n=Iw.get(t);return n||(n=e(),Iw.set(t,n),xx.add(n)),n}const sa=(t,e,n)=>{const r=yo(e,n);r!==void 0&&t.add(r)};class Vj{constructor(e){this._config=Oj(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ix(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Tx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return jc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return jc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return jc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return jc(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>sa(l,e,d))),h.forEach(d=>sa(l,i,d)),h.forEach(d=>sa(l,es[s]||{},d)),h.forEach(d=>sa(l,$e,d)),h.forEach(d=>sa(l,qp,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),xx.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,es[n]||{},$e.datasets[n]||{},{type:n},$e,qp]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=xw(this._resolverCache,e,i);let l=o;if(jj(o,n)){s.$shared=!1,r=ui(r)?r():r;const c=this.createResolver(e,r,a);l=_o(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=xw(this._resolverCache,e,r);return ve(n)?_o(s,n,void 0,i):s}}function xw(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Gm(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Fj=t=>ve(t)&&Object.getOwnPropertyNames(t).some(e=>ui(t[e]));function jj(t,e){const{isScriptable:n,isIndexable:r}=ax(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(ui(a)||Fj(a))||o&&Ge(a))return!0}return!1}var Uj="4.4.7";const zj=["top","bottom","left","right","chartArea"];function bw(t,e){return t==="top"||t==="bottom"||zj.indexOf(t)===-1&&e==="x"}function Pw(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function kw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ke(n&&n.onComplete,[t],e)}function Bj(t){const e=t.chart,n=e.options.animation;ke(n&&n.onProgress,[t],e)}function bx(t){return Xm()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const mu={},Cw=t=>{const e=bx(t);return Object.values(mu).filter(n=>n.canvas===e).pop()};function $j(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Hj(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function Uc(t,e,n){return t.options.clip?t[n]:e[n]}function Wj(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Uc(n,e,"left"),right:Uc(n,e,"right"),top:Uc(r,e,"top"),bottom:Uc(r,e,"bottom")}:e}var Cr;let jl=(Cr=class{static register(...e){Rn.add(...e),Aw()}static unregister(...e){Rn.remove(...e),Aw()}constructor(e,n){const r=this.config=new Vj(n),i=bx(e),s=Cw(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||lj(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=$2(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bj,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=lV(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],mu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Yn.listen(this,"complete",kw),Yn.listen(this,"progress",Bj),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return xe(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Rn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():J0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Q0(this.canvas,this.ctx),this}stop(){return Yn.stop(this),this}resize(e,n){Yn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,J0(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ke(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ee(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Qp(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Ee(s,o=>{const a=o.options,l=a.id,c=Qp(l,a),h=fe(a.type,o.dtype);(a.position===void 0||bw(a.position,c)!==bw(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===h)d=r[l];else{const f=Rn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),Ee(i,(o,a)=>{o||delete r[a]}),Ee(r,o=>{on.configure(this,o,o.options),on.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Pw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Gp(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Rn.getController(a),{datasetElementType:c,dataElementType:h}=$e.datasets[a];Object.assign(l,{dataElementType:Rn.getElement(h),datasetElementType:c&&Rn.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ee(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Ee(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Pw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ee(this.scales,e=>{on.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!j0(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;$j(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!j0(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;on.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ee(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,ui(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Yn.has(this)?this.attached&&!Yn.running(this)&&Yn.start(this):(this.draw(),kw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=Wj(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&qm(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Km(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return _l(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=zF.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=hs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);ml(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Yn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Q0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete mu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ee(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ee(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ee(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ch(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=Q2(e),c=Hj(e,this._lastEvent,r,l);r&&(this._lastEvent=null,ke(s.onHover,[e,a,this],this),l&&ke(s.onClick,[e,a,this],this));const h=!ch(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},ne(Cr,"defaults",$e),ne(Cr,"instances",mu),ne(Cr,"overrides",es),ne(Cr,"registry",Rn),ne(Cr,"version",Uj),ne(Cr,"getChart",Cw),Cr);function Aw(){return Ee(jl.instances,t=>t._plugins.invalidate())}function Px(t,e,n=e){t.lineCap=fe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(fe(n.borderDash,e.borderDash)),t.lineDashOffset=fe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=fe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=fe(n.borderWidth,e.borderWidth),t.strokeStyle=fe(n.borderColor,e.borderColor)}function qj(t,e,n){t.lineTo(n.x,n.y)}function Kj(t){return t.stepped?EV:t.tension||t.cubicInterpolationMode==="monotone"?SV:qj}function kx(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function Gj(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=kx(i,n,r),h=Kj(s);let{move:d=!0,reverse:f}=r||{},g,y,v;for(g=0;g<=c;++g)y=i[(a+(f?c-g:g))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):h(t,v,y,f,s.stepped),v=y);return l&&(y=i[(a+(f?c:0))%o],h(t,v,y,f,s.stepped)),!!l}function Qj(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=kx(i,n,r),{move:l=!0,reverse:c}=r||{};let h=0,d=0,f,g,y,v,S,w;const E=M=>(o+(c?a-M:M))%s,b=()=>{v!==S&&(t.lineTo(h,S),t.lineTo(h,v),t.lineTo(h,w))};for(l&&(g=i[E(0)],t.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=i[E(f)],g.skip)continue;const M=g.x,D=g.y,L=M|0;L===y?(D<v?v=D:D>S&&(S=D),h=(d*h+M)/++d):(b(),t.lineTo(M,D),y=L,d=0,v=S=D),w=D}b()}function Yp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Qj:Gj}function Yj(t){return t.stepped?eF:t.tension||t.cubicInterpolationMode==="monotone"?tF:Ri}function Xj(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),Px(t,e.options),t.stroke(i)}function Jj(t,e,n,r){const{segments:i,options:s}=e,o=Yp(e);for(const a of i)Px(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Zj=typeof Path2D=="function";function e4(t,e,n,r){Zj&&!e.options.segment?Xj(t,e,n,r):Jj(t,e,n,r)}class Ea extends $n{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;qV(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cF(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=oF(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Yj(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],g=s[d],y=s[f];if(g===y){a.push(g);continue}const v=Math.abs((i-g[n])/(y[n]-g[n])),S=l(g,y,v,r.stepped);S[n]=e[n],a.push(S)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Yp(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Yp(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),e4(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ne(Ea,"id","line"),ne(Ea,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ne(Ea,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ne(Ea,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Rw(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class yu extends $n{constructor(n){super();ne(this,"parsed");ne(this,"skip");ne(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Rw(this,n,"x",r)}inYRange(n,r){return Rw(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!_l(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Kp(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ne(yu,"id","point"),ne(yu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ne(yu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Cx(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,h=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),h=Math.max(r,i)),{left:a,top:c,right:l,bottom:h}}function $r(t,e,n,r){return t?0:qt(e,n,r)}function t4(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=ox(r);return{t:$r(i.top,s.top,0,n),r:$r(i.right,s.right,0,e),b:$r(i.bottom,s.bottom,0,n),l:$r(i.left,s.left,0,e)}}function n4(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Gs(i),o=Math.min(e,n),a=t.borderSkipped,l=r||ve(i);return{topLeft:$r(!l||a.top||a.left,s.topLeft,0,o),topRight:$r(!l||a.top||a.right,s.topRight,0,o),bottomLeft:$r(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:$r(!l||a.bottom||a.right,s.bottomRight,0,o)}}function r4(t){const e=Cx(t),n=e.right-e.left,r=e.bottom-e.top,i=t4(t,n/2,r/2),s=n4(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function If(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&Cx(t,r);return a&&(i||Fi(e,a.left,a.right))&&(s||Fi(n,a.top,a.bottom))}function i4(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function s4(t,e){t.rect(e.x,e.y,e.w,e.h)}function xf(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class _u extends $n{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=r4(this),a=i4(o.radius)?dh:s4;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,xf(o,n,s)),e.clip(),a(e,xf(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,xf(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return If(this,e,n,r)}inXRange(e,n){return If(this,e,null,n)}inYRange(e,n){return If(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ne(_u,"id","bar"),ne(_u,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ne(_u,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Mw=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},o4=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Dw extends $n{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ke(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Et(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Mw(r,s);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((y,v)=>{const S=r+n/2+s.measureText(y.text).width;(v===0||c[c.length-1]+S+2*a>o)&&(d+=h,c[c.length-(v>0?0:1)]=0,g+=h,f++),l[v]={left:0,top:g,row:f,width:S,height:i},c[c.length-1]+=S+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,g=0,y=0,v=0;return this.legendItems.forEach((S,w)=>{const{itemWidth:E,itemHeight:b}=a4(r,n,s,S,i);w>0&&g+b+2*a>h&&(d+=f+a,c.push({width:f,height:g}),y+=f+a,v++,f=g=0),l[w]={left:y,top:g,col:v,width:E,height:b},f=Math.max(f,E),g+=b+a}),d+=f,c.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Qs(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=yt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=yt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=yt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=yt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;qm(e,this),this._draw(),Km(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=$e.color,l=Qs(e.rtl,this.left,this.width),c=Et(o.font),{padding:h}=o,d=c.size,f=d/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:v,itemHeight:S}=Mw(o,d),w=function(L,T,_){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;i.save();const I=fe(_.lineWidth,1);if(i.fillStyle=fe(_.fillStyle,a),i.lineCap=fe(_.lineCap,"butt"),i.lineDashOffset=fe(_.lineDashOffset,0),i.lineJoin=fe(_.lineJoin,"miter"),i.lineWidth=I,i.strokeStyle=fe(_.strokeStyle,a),i.setLineDash(fe(_.lineDash,[])),o.usePointStyle){const P={radius:v*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:I},A=l.xPlus(L,y/2),R=T+f;ix(i,P,A,R,o.pointStyleWidth&&y)}else{const P=T+Math.max((d-v)/2,0),A=l.leftForLtr(L,y),R=Gs(_.borderRadius);i.beginPath(),Object.values(R).some(C=>C!==0)?dh(i,{x:A,y:P,w:y,h:v,radius:R}):i.rect(A,P,y,v),i.fill(),I!==0&&i.stroke()}i.restore()},E=function(L,T,_){vl(i,_.text,L,T+S/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},b=this.isHorizontal(),M=this._computeTitleHeight();b?g={x:yt(s,this.left+h,this.right-r[0]),y:this.top+h+M,line:0}:g={x:this.left+h,y:yt(s,this.top+M+h,this.bottom-n[0].height),line:0},dx(this.ctx,e.textDirection);const D=S+h;this.legendItems.forEach((L,T)=>{i.strokeStyle=L.fontColor,i.fillStyle=L.fontColor;const _=i.measureText(L.text).width,I=l.textAlign(L.textAlign||(L.textAlign=o.textAlign)),P=y+f+_;let A=g.x,R=g.y;l.setWidth(this.width),b?T>0&&A+P+h>this.right&&(R=g.y+=D,g.line++,A=g.x=yt(s,this.left+h,this.right-r[g.line])):T>0&&R+D>this.bottom&&(A=g.x=A+n[g.line].width+h,g.line++,R=g.y=yt(s,this.top+M+h,this.bottom-n[g.line].height));const C=l.x(A);if(w(C,R,L),A=cV(I,A+y+f,b?A+P:this.right,e.rtl),E(l.x(A),R,L),b)g.x+=P+h;else if(typeof L.text!="string"){const q=c.lineHeight;g.y+=Ax(L,q)+h}else g.y+=D}),fx(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Et(n.font),i=hn(n.padding);if(!n.display)return;const s=Qs(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=yt(e.align,d,this.right-f);else{const y=this.columnSizes.reduce((v,S)=>Math.max(v,S.height),0);h=c+yt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const g=yt(a,d,d+f);o.textAlign=s.textAlign(Hm(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,vl(o,n.text,g,h,r)}_computeTitleHeight(){const e=this.options.title,n=Et(e.font),r=hn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Fi(e,this.left,this.right)&&Fi(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Fi(e,i.left,i.left+i.width)&&Fi(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!u4(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=o4(i,r);i&&!s&&ke(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&ke(n.onHover,[e,r,this],this)}else r&&ke(n.onClick,[e,r,this],this)}}function a4(t,e,n,r,i){const s=l4(r,t,e,n),o=c4(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function l4(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function c4(t,e,n){let r=t;return typeof e.text!="string"&&(r=Ax(e,n)),r}function Ax(t,e){const n=t.text?t.text.length:0;return e*n}function u4(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Rx={id:"legend",_element:Dw,start(t,e,n){const r=t.legend=new Dw({ctx:t.ctx,options:n,chart:t});on.configure(t,r,n),on.addBox(t,r)},stop(t){on.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;on.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=hn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Mx extends $n{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Ge(r.text)?r.text.length:1;this._padding=hn(r.padding);const s=i*Et(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=yt(a,r,s),d=n+e,c=s-r):(o.position==="left"?(h=r+e,d=yt(a,i,n),l=et*-.5):(h=s-e,d=yt(a,n,i),l=et*.5),c=i-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Et(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);vl(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:Hm(n.align),textBaseline:"middle",translation:[o,a]})}}function h4(t,e){const n=new Mx({ctx:t.ctx,options:e,chart:t});on.configure(t,n,e),on.addBox(t,n),t.titleBlock=n}var Dx={id:"title",_element:Mx,start(t,e,n){h4(t,n)},stop(t){const e=t.titleBlock;on.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;on.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Sa={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Wp(e,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Cn(t,e){return e&&(Ge(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Xn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function d4(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Nw(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Et(e.bodyFont),c=Et(e.titleFont),h=Et(e.footerFont),d=s.length,f=i.length,g=r.length,y=hn(e.padding);let v=y.height,S=0,w=r.reduce((M,D)=>M+D.before.length+D.lines.length+D.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),w){const M=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=g*M+(w-g)*l.lineHeight+(w-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let E=0;const b=function(M){S=Math.max(S,n.measureText(M).width+E)};return n.save(),n.font=c.string,Ee(t.title,b),n.font=l.string,Ee(t.beforeBody.concat(t.afterBody),b),E=e.displayColors?o+2+e.boxPadding:0,Ee(r,M=>{Ee(M.before,b),Ee(M.lines,b),Ee(M.after,b)}),E=0,n.font=h.string,Ee(t.footer,b),n.restore(),S+=y.width,{width:S,height:v}}function f4(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function p4(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function g4(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),p4(c,t,e,n)&&(c="center"),c}function Lw(t,e,n){const r=n.yAlign||e.yAlign||f4(t,n);return{xAlign:n.xAlign||e.xAlign||g4(t,e,n,r),yAlign:r}}function m4(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function y4(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Ow(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Gs(o);let y=m4(e,a);const v=y4(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(h,f)+i:a==="right"&&(y+=Math.max(d,g)+i),{x:qt(y,0,r.width-e.width),y:qt(v,0,r.height-e.height)}}function zc(t,e,n){const r=hn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Vw(t){return Cn([],Xn(t))}function _4(t,e,n){return hs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Fw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Nx={beforeTitle:Qn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Qn,beforeBody:Qn,beforeLabel:Qn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return xe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Qn,afterBody:Qn,beforeFooter:Qn,footer:Qn,afterFooter:Qn};function Rt(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?Nx[e].call(n,r):i}class Xp extends $n{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new gx(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=_4(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Rt(r,"beforeTitle",this,e),s=Rt(r,"title",this,e),o=Rt(r,"afterTitle",this,e);let a=[];return a=Cn(a,Xn(i)),a=Cn(a,Xn(s)),a=Cn(a,Xn(o)),a}getBeforeBody(e,n){return Vw(Rt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Ee(e,s=>{const o={before:[],lines:[],after:[]},a=Fw(r,s);Cn(o.before,Xn(Rt(a,"beforeLabel",this,s))),Cn(o.lines,Rt(a,"label",this,s)),Cn(o.after,Xn(Rt(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return Vw(Rt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Rt(r,"beforeFooter",this,e),s=Rt(r,"footer",this,e),o=Rt(r,"afterFooter",this,e);let a=[];return a=Cn(a,Xn(i)),a=Cn(a,Xn(s)),a=Cn(a,Xn(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(d4(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,r))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,r))),Ee(a,h=>{const d=Fw(e.callbacks,h);i.push(Rt(d,"labelColor",this,h)),s.push(Rt(d,"labelPointStyle",this,h)),o.push(Rt(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Sa[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Nw(this,r),c=Object.assign({},a,l),h=Lw(this.chart,r,c),d=Ow(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Gs(a),{x:f,y:g}=e,{width:y,height:v}=n;let S,w,E,b,M,D;return s==="center"?(M=g+v/2,i==="left"?(S=f,w=S-o,b=M+o,D=M-o):(S=f+y,w=S+o,b=M-o,D=M+o),E=S):(i==="left"?w=f+Math.max(l,h)+o:i==="right"?w=f+y-Math.max(c,d)-o:w=this.caretX,s==="top"?(b=g,M=b-o,S=w-o,E=w+o):(b=g+v,M=b+o,S=w+o,E=w-o),D=b),{x1:S,x2:w,x3:E,y1:b,y2:M,y3:D}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Qs(r.rtl,this.x,this.width);for(e.x=zc(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Et(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=Et(s.bodyFont),d=zc(this,"left",s),f=i.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+g;if(s.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},S=i.leftForLtr(f,c)+c/2,w=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Kp(e,v,S,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Kp(e,v,S,w)}else{e.lineWidth=ve(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=i.leftForLtr(f,c),S=i.leftForLtr(i.xPlus(f,1),c-2),w=Gs(o.borderRadius);Object.values(w).some(E=>E!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,dh(e,{x:v,y,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),dh(e,{x:S,y:y+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,y,c,l),e.strokeRect(v,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(S,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,d=Et(r.bodyFont);let f=d.lineHeight,g=0;const y=Qs(r.rtl,this.x,this.width),v=function(_){n.fillText(_,y.x(e.x+g),e.y+f/2),e.y+=f+s},S=y.textAlign(o);let w,E,b,M,D,L,T;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=zc(this,S,r),n.fillStyle=r.bodyColor,Ee(this.beforeBody,v),g=a&&S!=="right"?o==="center"?c/2+h:c+2+h:0,M=0,L=i.length;M<L;++M){for(w=i[M],E=this.labelTextColors[M],n.fillStyle=E,Ee(w.before,v),b=w.lines,a&&b.length&&(this._drawColorBox(n,e,M,y,r),f=Math.max(d.lineHeight,l)),D=0,T=b.length;D<T;++D)v(b[D]),f=d.lineHeight;Ee(w.after,v)}g=0,f=d.lineHeight,Ee(this.afterBody,v),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Qs(r.rtl,this.x,this.width);for(e.x=zc(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Et(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:y}=Gs(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+h-y),n.quadraticCurveTo(a+c,l+h,a+c-y,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Sa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Nw(this,e),l=Object.assign({},o,this._size),c=Lw(n,e,l),h=Ow(e,l,c,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=hn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),dx(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),fx(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ch(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ch(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Sa[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}ne(Xp,"positioners",Sa);var Lx={id:"tooltip",_element:Xp,positioners:Sa,afterInit(t,e,n){n&&(t.tooltip=new Xp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Nx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const v4=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function w4(t,e,n,r){const i=t.indexOf(e);if(i===-1)return v4(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const E4=(t,e)=>t===null?null:qt(Math.round(t),0,e);function jw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class gh extends Ao{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(xe(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:w4(r,e,fe(n,e),this._addedLabels),E4(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return jw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ne(gh,"id","category"),ne(gh,"defaults",{ticks:{callback:jw}});function S4(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,g=s||1,y=h-1,{min:v,max:S}=e,w=!xe(o),E=!xe(a),b=!xe(c),M=(S-v)/(d+1);let D=z0((S-v)/y/g)*g,L,T,_,I;if(D<1e-14&&!w&&!E)return[{value:v},{value:S}];I=Math.ceil(S/D)-Math.floor(v/D),I>y&&(D=z0(I*D/y/g)*g),xe(l)||(L=Math.pow(10,l),D=Math.ceil(D*L)/L),i==="ticks"?(T=Math.floor(v/D)*D,_=Math.ceil(S/D)*D):(T=v,_=S),w&&E&&s&&Z2((a-o)/s,D/1e3)?(I=Math.round(Math.min((a-o)/D,h)),D=(a-o)/I,T=o,_=a):b?(T=w?o:T,_=E?a:_,I=c-1,D=(_-T)/I):(I=(_-T)/D,ja(I,Math.round(I),D/1e3)?I=Math.round(I):I=Math.ceil(I));const P=Math.max(B0(D),B0(T));L=Math.pow(10,xe(l)?P:l),T=Math.round(T*L)/L,_=Math.round(_*L)/L;let A=0;for(w&&(f&&T!==o?(n.push({value:o}),T<o&&A++,ja(Math.round((T+A*D)*L)/L,o,Uw(o,M,t))&&A++):T<o&&A++);A<I;++A){const R=Math.round((T+A*D)*L)/L;if(E&&R>a)break;n.push({value:R})}return E&&f&&_!==a?n.length&&ja(n[n.length-1].value,a,Uw(a,M,t))?n[n.length-1].value=a:n.push({value:a}):(!E||_===a)&&n.push({value:_}),n}function Uw(t,e,{horizontal:n,minRotation:r}){const i=Vi(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class T4 extends Ao{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return xe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=zn(i),c=zn(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=S4(i,s);return e.bounds==="ticks"&&eV(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return tx(e,this.chart.options.locale,this.options.ticks.format)}}class mh extends T4{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=un(e)?e:0,this.max=un(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Vi(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ne(mh,"id","linear"),ne(mh,"defaults",{ticks:{callback:rx.formatters.numeric}});const id={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Lt=Object.keys(id);function zw(t,e){return t-e}function Bw(t,e){if(xe(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),un(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(yl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function $w(t,e,n,r){const i=Lt.length;for(let s=Lt.indexOf(t);s<i-1;++s){const o=id[Lt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Lt[s]}return Lt[i-1]}function I4(t,e,n,r,i){for(let s=Lt.length-1;s>=Lt.indexOf(n);s--){const o=Lt[s];if(id[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Lt[n?Lt.indexOf(n):0]}function x4(t){for(let e=Lt.indexOf(t)+1,n=Lt.length;e<n;++e)if(id[Lt[e]].common)return Lt[e]}function Hw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=$m(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function b4(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Ww(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:b4(t,r,i,n)}class yh extends Ao{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new OF._date(e.adapters.date);i.init(n),Fa(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Bw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=un(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=un(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=oV(i,s,o);return this._unit=n.unit||(r.autoSkip?$w(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):I4(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:x4(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),Ww(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=qt(n,0,o),r=qt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||$w(s.minUnit,n,r,this._getLabelCapacity(n)),a=fe(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=yl(l)||l===!0,h={};let d=n,f,g;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<r;f=+e.add(f,a,o),g++)Hw(h,f,y);return(f===r||i.bounds==="ticks"||g===1)&&Hw(h,f,y),Object.keys(h).sort(zw).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return ke(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=r[n],g=c&&d&&f&&f.major;return this._adapter.format(e,i||(g?d:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Vi(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,Ww(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(Bw(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return J1(e.sort(zw))}}ne(yh,"id","time"),ne(yh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Bc(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=ji(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=ji(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class qw extends yh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Bc(n,this.min),this._tableRange=Bc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Bc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Bc(this._table,r*this._tableRange+this._minPos,!0)}}ne(qw,"id","timeseries"),ne(qw,"defaults",yh.defaults);const Ox="label";function Kw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function P4(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Vx(t,e){t.labels=e}function Fx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ox;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function k4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ox;const n={labels:[],datasets:[]};return Vx(n,t.labels),Fx(n,t.datasets,e),n}function C4(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,g=j.useRef(null),y=j.useRef(),v=()=>{g.current&&(y.current=new jl(g.current,{type:o,data:k4(a,s),options:l&&{...l},plugins:c}),Kw(e,y.current))},S=()=>{Kw(e,null),y.current&&(y.current.destroy(),y.current=null)};return j.useEffect(()=>{!i&&y.current&&l&&P4(y.current,l)},[i,l]),j.useEffect(()=>{!i&&y.current&&Vx(y.current.config.data,a.labels)},[i,a.labels]),j.useEffect(()=>{!i&&y.current&&a.datasets&&Fx(y.current.config.data,a.datasets,s)},[i,a.datasets]),j.useEffect(()=>{y.current&&(i?(S(),setTimeout(v)):y.current.update(d))},[i,l,a.labels,a.datasets,d]),j.useEffect(()=>{y.current&&(S(),setTimeout(v))},[o]),j.useEffect(()=>(v(),()=>S()),[]),iE.createElement("canvas",Object.assign({ref:g,role:"img",height:n,width:r},f),h)}const A4=j.forwardRef(C4);function jx(t,e){return jl.register(e),j.forwardRef((n,r)=>iE.createElement(A4,Object.assign({},n,{ref:r,type:t})))}const R4=jx("line",pu),M4=jx("bar",fu);jl.register(gh,mh,_u,Dx,Lx,Rx);const D4=({data:t,metricType:e,selectedStatus:n})=>{const i=(()=>{if(n)return n.thresholds;switch(e){case"blood-pressure":return{normal:120,elevated:129,high:130,ranges:{normal:"Normal (<120)",elevated:"Elevated (120-129)",high:"High (>130)"}};case"sleep-quality":return{normal:7,elevated:8,high:9,ranges:{normal:"Poor (<7)",elevated:"Good (7-8)",high:"Excellent (>8)"}};default:return{normal:50,elevated:75,high:100,ranges:{normal:"Low",elevated:"Medium",high:"High"}}}})(),o=(()=>{const c={normal:0,elevated:0,high:0};return t.forEach(h=>{const d=parseFloat(h.value);d<i.normal?c.normal++:d<=i.elevated?c.elevated++:c.high++}),c})(),a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:`${(n==null?void 0:n.name)||e.split("-").join(" ").toUpperCase()} Distribution`,color:"#333",font:{size:16}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Readings"}}}},l={labels:[i.ranges.normal,i.ranges.elevated,i.ranges.high],datasets:[{data:[o.normal,o.elevated,o.high],backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(255, 206, 86, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 206, 86, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]};return k.jsx("div",{className:"chart-wrapper",children:k.jsx(M4,{options:a,data:l})})};jl.register(gh,mh,yu,Ea,Dx,Lx,Rx);const N4=({data:t,metricType:e,selectedStatus:n})=>{const i=(()=>{if(n)return{...n.thresholds,label:n.name};switch(e){case"blood-pressure":return{normal:120,elevated:129,high:130,label:"Blood Pressure",ranges:{normal:"Normal",elevated:"Elevated",high:"High"}};case"sleep-quality":return{normal:7,elevated:8,high:9,label:"Sleep Quality",ranges:{normal:"Poor",elevated:"Good",high:"Excellent"}};default:return{normal:50,elevated:75,high:100,label:e.split("-").join(" "),ranges:{normal:"Low",elevated:"Medium",high:"High"}}}})(),s=[...t].sort((l,c)=>l.timestamp.toDate().getTime()-c.timestamp.toDate().getTime()),o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:`${i.label} Trend`,color:"#333",font:{size:16}}},scales:{y:{beginAtZero:!0,grid:{color:l=>l.tick.value===i.normal?"rgba(75, 192, 192, 0.2)":l.tick.value===i.elevated?"rgba(255, 206, 86, 0.2)":l.tick.value===i.high?"rgba(255, 99, 132, 0.2)":"rgba(0, 0, 0, 0.1)"}}}},a={labels:s.map(l=>l.timestamp.toDate().toLocaleDateString()),datasets:[{label:i.label,data:s.map(l=>parseFloat(l.value)),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",tension:.3},{label:i.ranges.normal,data:Array(s.length).fill(i.normal),borderColor:"rgba(75, 192, 192, 0.5)",borderDash:[5,5],pointRadius:0},{label:i.ranges.elevated,data:Array(s.length).fill(i.elevated),borderColor:"rgba(255, 206, 86, 0.5)",borderDash:[5,5],pointRadius:0},{label:i.ranges.high,data:Array(s.length).fill(i.high),borderColor:"rgba(255, 99, 132, 0.5)",borderDash:[5,5],pointRadius:0}]};return k.jsx("div",{className:"chart-wrapper",children:k.jsx(R4,{options:o,data:a})})},L4=({metricType:t})=>{const[e,n]=j.useState(new Date().toISOString().split("T")[0]),[r,i]=j.useState(""),[s,o]=j.useState([]),[a,l]=j.useState([]),[c,h]=j.useState(!1),[d,f]=j.useState(""),[g,y]=j.useState([]),{currentUser:v}=us(),S=async()=>{if(v)try{const _=await rn.statusTypes.getStatusTypes(v.uid);y(_)}catch(_){console.error("Error loading status types:",_)}};j.useEffect(()=>{S()},[v,t,g.length]);const w=async()=>{if(v)try{h(!0),f("");const[_,I]=await Promise.all([rn.healthMetrics.getLastMonthMetrics(v.uid,t),rn.healthMetrics.getLastYearMetrics(v.uid,t)]);o(_),l(I)}catch(_){console.error("Error loading metrics:",_),f("Failed to load metrics data")}finally{h(!1)}};j.useEffect(()=>{w()},[v,t]);const E=g.find(_=>_.id===t),b=async _=>{if(_.preventDefault(),!!v)try{h(!0),f("");const[I,P,A]=e.split("-").map(Number),R=new Date(I,P-1,A,23,59,59);await rn.healthMetrics.addMetric(v.uid,{type:t,value:r,timestamp:Me.fromDate(R)}),i(""),await w()}catch(I){console.error("Error saving metric:",I),f("Failed to save metric")}finally{h(!1)}},M=async _=>{if(!(!v||!_))try{h(!0),await rn.healthMetrics.deleteMetric(v.uid,_),await w()}catch(I){console.error("Error deleting metric:",I),f("Failed to delete metric")}finally{h(!1)}},D=()=>{if(E)return`Input your ${E.name}:`;switch(t){case"blood-pressure":return"Input your blood pressure:";case"sleep-quality":return"Input your sleep quality (1-10):";default:return`Input your ${t.split("-").join(" ")}:`}},L=()=>{if(E)return`Enter ${E.name.toLowerCase()}`;switch(t){case"blood-pressure":return"Enter blood pressure";case"sleep-quality":return"Enter sleep quality";default:return`Enter ${t.split("-").join(" ")}`}},T=_=>{const I=_.toDate(),P=Intl.DateTimeFormat().resolvedOptions().timeZone;return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"numeric",day:"numeric",timeZone:P}).format(I)};return k.jsxs("div",{className:"data-display",children:[k.jsxs("div",{className:"data-input-section",children:[k.jsx("h3",{children:D()}),d&&k.jsx("div",{className:"error-message",children:d}),k.jsx("form",{onSubmit:b,children:k.jsxs("div",{className:"input-group",children:[k.jsx("input",{type:"text",value:r,onChange:_=>i(_.target.value),placeholder:L(),required:!0,disabled:c}),k.jsx("input",{type:"date",value:e,onChange:_=>n(_.target.value),required:!0,disabled:c}),k.jsx("button",{type:"submit",disabled:c,children:c?"Saving...":"Save"})]})})]}),k.jsxs("div",{className:"visualization-section",children:[k.jsxs("div",{className:"charts-section",children:[k.jsxs("div",{className:"chart-container",children:[k.jsx("h4",{children:"Distribution"}),c?k.jsx("div",{className:"loading",children:"Loading..."}):s.length>0?k.jsx(D4,{data:s,metricType:t,selectedStatus:E}):k.jsx("div",{className:"no-data",children:"No data available"})]}),k.jsxs("div",{className:"chart-container",children:[k.jsx("h4",{children:"Trend"}),c?k.jsx("div",{className:"loading",children:"Loading..."}):a.length>0?k.jsx(N4,{data:a,metricType:t,selectedStatus:E}):k.jsx("div",{className:"no-data",children:"No data available"})]})]}),k.jsxs("div",{className:"numbers-section",children:[k.jsx("h4",{children:"Recent Records"}),k.jsxs("table",{className:"records-table",children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsx("th",{children:"Date"}),k.jsx("th",{children:"Value"}),k.jsx("th",{children:"Action"})]})}),k.jsx("tbody",{children:c?k.jsx("tr",{children:k.jsx("td",{colSpan:3,className:"loading-cell",children:"Loading..."})}):s.length>0?s.slice(0,5).map(_=>k.jsxs("tr",{children:[k.jsx("td",{children:T(_.timestamp)}),k.jsx("td",{children:_.value}),k.jsx("td",{children:k.jsx("button",{onClick:()=>_.id&&M(_.id),className:"delete-button",disabled:c,children:"Delete"})})]},_.id)):k.jsx("tr",{children:k.jsx("td",{colSpan:3,className:"empty-cell",children:"No records available"})})})]})]})]})]})},O4=()=>{const[t,e]=j.useState("blood-pressure"),n={name:"User Name",avatar:"/default-avatar.png"},r=i=>{e(i)};return k.jsxs("div",{className:"dashboard-container",children:[k.jsx(_2,{user:n}),k.jsxs("div",{className:"dashboard-content",children:[k.jsx("div",{className:"left-panel",children:k.jsx(w2,{onMetricSelect:r,selectedMetric:t})}),k.jsx("div",{className:"main-panel",children:k.jsx(L4,{metricType:t})})]})]})},V4="/LifeMetrics",Ro=HC({component:u2}),F4=bl({getParentRoute:()=>Ro,path:"/",component:h2}),j4=bl({getParentRoute:()=>Ro,path:"/how-it-works",component:d2}),U4=bl({getParentRoute:()=>Ro,path:"/about",component:f2}),z4=bl({getParentRoute:()=>Ro,path:"/signup",component:p2}),B4=bl({getParentRoute:()=>Ro,path:"/dashboard",component:O4,beforeLoad:async()=>{if(!_a.currentUser)throw PC({to:"/"})}}),$4=Ro.addChildren([F4,j4,U4,z4,B4]),H4=DC({routeTree:$4,basepath:V4,defaultPreload:"intent",defaultErrorComponent:()=>k.jsx("div",{children:"Page Not Found"})});lT(document.getElementById("root")).render(k.jsx(j.StrictMode,{children:k.jsx(l2,{children:k.jsx(ZC,{router:H4})})}));
