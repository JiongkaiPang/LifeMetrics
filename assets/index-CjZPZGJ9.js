var vP=Object.defineProperty;var wP=(t,e,n)=>e in t?vP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var he=(t,e,n)=>wP(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function EP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $E={exports:{}},ed={},HE={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yl=Symbol.for("react.element"),SP=Symbol.for("react.portal"),TP=Symbol.for("react.fragment"),IP=Symbol.for("react.strict_mode"),xP=Symbol.for("react.profiler"),bP=Symbol.for("react.provider"),PP=Symbol.for("react.context"),kP=Symbol.for("react.forward_ref"),CP=Symbol.for("react.suspense"),AP=Symbol.for("react.memo"),RP=Symbol.for("react.lazy"),O_=Symbol.iterator;function DP(t){return t===null||typeof t!="object"?null:(t=O_&&t[O_]||t["@@iterator"],typeof t=="function"?t:null)}var WE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qE=Object.assign,KE={};function qo(t,e,n){this.props=t,this.context=e,this.refs=KE,this.updater=n||WE}qo.prototype.isReactComponent={};qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function GE(){}GE.prototype=qo.prototype;function Og(t,e,n){this.props=t,this.context=e,this.refs=KE,this.updater=n||WE}var Vg=Og.prototype=new GE;Vg.constructor=Og;qE(Vg,qo.prototype);Vg.isPureReactComponent=!0;var V_=Array.isArray,QE=Object.prototype.hasOwnProperty,Fg={current:null},YE={key:!0,ref:!0,__self:!0,__source:!0};function XE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)QE.call(e,r)&&!YE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Yl,type:t,key:s,ref:o,props:i,_owner:Fg.current}}function MP(t,e){return{$$typeof:Yl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yl}function NP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var F_=/\/+/g;function rf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NP(""+t.key):e.toString(36)}function wu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yl:case SP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+rf(o,0):r,V_(i)?(n="",t!=null&&(n=t.replace(F_,"$&/")+"/"),wu(i,e,n,"",function(c){return c})):i!=null&&(jg(i)&&(i=MP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(F_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",V_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+rf(s,a);o+=wu(s,e,n,l,i)}else if(l=DP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+rf(s,a++),o+=wu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mc(t,e,n){if(t==null)return t;var r=[],i=0;return wu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function LP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},Eu={transition:null},OP={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:Eu,ReactCurrentOwner:Fg};function JE(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Mc,forEach:function(t,e,n){Mc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mc(t,function(){e++}),e},toArray:function(t){return Mc(t,function(e){return e})||[]},only:function(t){if(!jg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=qo;_e.Fragment=TP;_e.Profiler=xP;_e.PureComponent=Og;_e.StrictMode=IP;_e.Suspense=CP;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OP;_e.act=JE;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Fg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)QE.call(e,l)&&!YE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Yl,type:t.type,key:i,ref:s,props:r,_owner:o}};_e.createContext=function(t){return t={$$typeof:PP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bP,_context:t},t.Consumer=t};_e.createElement=XE;_e.createFactory=function(t){var e=XE.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:kP,render:t}};_e.isValidElement=jg;_e.lazy=function(t){return{$$typeof:RP,_payload:{_status:-1,_result:t},_init:LP}};_e.memo=function(t,e){return{$$typeof:AP,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Eu.transition;Eu.transition={};try{t()}finally{Eu.transition=e}};_e.unstable_act=JE;_e.useCallback=function(t,e){return Bt.current.useCallback(t,e)};_e.useContext=function(t){return Bt.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};_e.useEffect=function(t,e){return Bt.current.useEffect(t,e)};_e.useId=function(){return Bt.current.useId()};_e.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return Bt.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};_e.useRef=function(t){return Bt.current.useRef(t)};_e.useState=function(t){return Bt.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return Bt.current.useTransition()};_e.version="18.3.1";HE.exports=_e;var W=HE.exports;const Ae=EP(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP=W,FP=Symbol.for("react.element"),jP=Symbol.for("react.fragment"),UP=Object.prototype.hasOwnProperty,zP=VP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BP={key:!0,ref:!0,__self:!0,__source:!0};function ZE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)UP.call(e,r)&&!BP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:FP,type:t,key:s,ref:o,props:i,_owner:zP.current}}ed.Fragment=jP;ed.jsx=ZE;ed.jsxs=ZE;$E.exports=ed;var C=$E.exports,eS={exports:{}},pn={},tS={exports:{}},nS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var Z=B.length;B.push(Y);e:for(;0<Z;){var ge=Z-1>>>1,re=B[ge];if(0<i(re,Y))B[ge]=Y,B[Z]=re,Z=ge;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],Z=B.pop();if(Z!==Y){B[0]=Z;e:for(var ge=0,re=B.length,le=re>>>1;ge<le;){var ye=2*(ge+1)-1,pe=B[ye],ve=ye+1,rt=B[ve];if(0>i(pe,Z))ve<re&&0>i(rt,pe)?(B[ge]=rt,B[ve]=Z,ge=ve):(B[ge]=pe,B[ye]=Z,ge=ye);else if(ve<re&&0>i(rt,Z))B[ge]=rt,B[ve]=Z,ge=ve;else break e}}return Y}function i(B,Y){var Z=B.sortIndex-Y.sortIndex;return Z!==0?Z:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,g=!1,y=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=B)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function D(B){if(v=!1,b(B),!y)if(n(l)!==null)y=!0,ie(N);else{var Y=n(c);Y!==null&&ae(D,Y.startTime-B)}}function N(B,Y){y=!1,v&&(v=!1,E(_),_=-1),g=!0;var Z=f;try{for(b(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||B&&!R());){var ge=d.callback;if(typeof ge=="function"){d.callback=null,f=d.priorityLevel;var re=ge(d.expirationTime<=Y);Y=t.unstable_now(),typeof re=="function"?d.callback=re:d===n(l)&&r(l),b(Y)}else r(l);d=n(l)}if(d!==null)var le=!0;else{var ye=n(c);ye!==null&&ae(D,ye.startTime-Y),le=!1}return le}finally{d=null,f=Z,g=!1}}var V=!1,I=null,_=-1,T=5,P=-1;function R(){return!(t.unstable_now()-P<T)}function A(){if(I!==null){var B=t.unstable_now();P=B;var Y=!0;try{Y=I(!0,B)}finally{Y?k():(V=!1,I=null)}}else V=!1}var k;if(typeof w=="function")k=function(){w(A)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,J=q.port2;q.port1.onmessage=A,k=function(){J.postMessage(null)}}else k=function(){S(A,0)};function ie(B){I=B,V||(V=!0,k())}function ae(B,Y){_=S(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,ie(N))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var Z=f;f=Y;try{return B()}finally{f=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=f;f=B;try{return Y()}finally{f=Z}},t.unstable_scheduleCallback=function(B,Y,Z){var ge=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ge+Z:ge):Z=ge,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Z+re,B={id:h++,callback:Y,priorityLevel:B,startTime:Z,expirationTime:re,sortIndex:-1},Z>ge?(B.sortIndex=Z,e(c,B),n(l)===null&&B===n(c)&&(v?(E(_),_=-1):v=!0,ae(D,Z-ge))):(B.sortIndex=re,e(l,B),y||g||(y=!0,ie(N))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var Y=f;return function(){var Z=f;f=Y;try{return B.apply(this,arguments)}finally{f=Z}}}})(nS);tS.exports=nS;var $P=tS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HP=W,fn=$P;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rS=new Set,yl={};function Is(t,e){Io(t,e),Io(t+"Capture",e)}function Io(t,e){for(yl[t]=e,t=0;t<e.length;t++)rS.add(e[t])}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cp=Object.prototype.hasOwnProperty,WP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j_={},U_={};function qP(t){return cp.call(U_,t)?!0:cp.call(j_,t)?!1:WP.test(t)?U_[t]=!0:(j_[t]=!0,!1)}function KP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GP(t,e,n,r){if(e===null||typeof e>"u"||KP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ug=/[\-:]([a-z])/g;function zg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ug,zg);Tt[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ug,zg);Tt[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ug,zg);Tt[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bg(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GP(e,n,i,r)&&(n=null),r||i===null?qP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Br=HP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nc=Symbol.for("react.element"),Qs=Symbol.for("react.portal"),Ys=Symbol.for("react.fragment"),$g=Symbol.for("react.strict_mode"),up=Symbol.for("react.profiler"),iS=Symbol.for("react.provider"),sS=Symbol.for("react.context"),Hg=Symbol.for("react.forward_ref"),hp=Symbol.for("react.suspense"),dp=Symbol.for("react.suspense_list"),Wg=Symbol.for("react.memo"),ei=Symbol.for("react.lazy"),oS=Symbol.for("react.offscreen"),z_=Symbol.iterator;function _a(t){return t===null||typeof t!="object"?null:(t=z_&&t[z_]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,sf;function Ma(t){if(sf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sf=e&&e[1]||""}return`
`+sf+t}var of=!1;function af(t,e){if(!t||of)return"";of=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{of=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ma(t):""}function QP(t){switch(t.tag){case 5:return Ma(t.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return t=af(t.type,!1),t;case 11:return t=af(t.type.render,!1),t;case 1:return t=af(t.type,!0),t;default:return""}}function fp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ys:return"Fragment";case Qs:return"Portal";case up:return"Profiler";case $g:return"StrictMode";case hp:return"Suspense";case dp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sS:return(t.displayName||"Context")+".Consumer";case iS:return(t._context.displayName||"Context")+".Provider";case Hg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wg:return e=t.displayName||null,e!==null?e:fp(t.type)||"Memo";case ei:e=t._payload,t=t._init;try{return fp(t(e))}catch{}}return null}function YP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fp(e);case 8:return e===$g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XP(t){var e=aS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lc(t){t._valueTracker||(t._valueTracker=XP(t))}function lS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pp(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function B_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cS(t,e){e=e.checked,e!=null&&Bg(t,"checked",e,!1)}function gp(t,e){cS(t,e);var n=Pi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mp(t,e.type,n):e.hasOwnProperty("defaultValue")&&mp(t,e.type,Pi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mp(t,e,n){(e!=="number"||Xu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Na=Array.isArray;function co(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function H_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Na(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pi(n)}}function uS(t,e){var n=Pi(e.value),r=Pi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function W_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _p(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oc,dS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oc=Oc||document.createElement("div"),Oc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _l(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JP=["Webkit","ms","Moz","O"];Object.keys(Ya).forEach(function(t){JP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ya[e]=Ya[t]})});function fS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ya.hasOwnProperty(t)&&Ya[t]?(""+e).trim():e+"px"}function pS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ZP=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vp(t,e){if(e){if(ZP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function wp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ep=null;function qg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sp=null,uo=null,ho=null;function q_(t){if(t=Zl(t)){if(typeof Sp!="function")throw Error($(280));var e=t.stateNode;e&&(e=sd(e),Sp(t.stateNode,t.type,e))}}function gS(t){uo?ho?ho.push(t):ho=[t]:uo=t}function mS(){if(uo){var t=uo,e=ho;if(ho=uo=null,q_(t),e)for(t=0;t<e.length;t++)q_(e[t])}}function yS(t,e){return t(e)}function _S(){}var lf=!1;function vS(t,e,n){if(lf)return t(e,n);lf=!0;try{return yS(t,e,n)}finally{lf=!1,(uo!==null||ho!==null)&&(_S(),mS())}}function vl(t,e){var n=t.stateNode;if(n===null)return null;var r=sd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Tp=!1;if(Mr)try{var va={};Object.defineProperty(va,"passive",{get:function(){Tp=!0}}),window.addEventListener("test",va,va),window.removeEventListener("test",va,va)}catch{Tp=!1}function ek(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Xa=!1,Ju=null,Zu=!1,Ip=null,tk={onError:function(t){Xa=!0,Ju=t}};function nk(t,e,n,r,i,s,o,a,l){Xa=!1,Ju=null,ek.apply(tk,arguments)}function rk(t,e,n,r,i,s,o,a,l){if(nk.apply(this,arguments),Xa){if(Xa){var c=Ju;Xa=!1,Ju=null}else throw Error($(198));Zu||(Zu=!0,Ip=c)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function K_(t){if(xs(t)!==t)throw Error($(188))}function ik(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return K_(i),t;if(s===r)return K_(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function ES(t){return t=ik(t),t!==null?SS(t):null}function SS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=SS(t);if(e!==null)return e;t=t.sibling}return null}var TS=fn.unstable_scheduleCallback,G_=fn.unstable_cancelCallback,sk=fn.unstable_shouldYield,ok=fn.unstable_requestPaint,et=fn.unstable_now,ak=fn.unstable_getCurrentPriorityLevel,Kg=fn.unstable_ImmediatePriority,IS=fn.unstable_UserBlockingPriority,eh=fn.unstable_NormalPriority,lk=fn.unstable_LowPriority,xS=fn.unstable_IdlePriority,td=null,ir=null;function ck(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(td,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:dk,uk=Math.log,hk=Math.LN2;function dk(t){return t>>>=0,t===0?32:31-(uk(t)/hk|0)|0}var Vc=64,Fc=4194304;function La(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function th(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=La(a):(s&=o,s!==0&&(r=La(s)))}else o=n&~i,o!==0?r=La(o):s!==0&&(r=La(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zn(e),i=1<<n,r|=t[n],e&=~i;return r}function fk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=fk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function xp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bS(){var t=Vc;return Vc<<=1,!(Vc&4194240)&&(Vc=64),t}function cf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function gk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Gg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Me=0;function PS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kS,Qg,CS,AS,RS,bp=!1,jc=[],pi=null,gi=null,mi=null,wl=new Map,El=new Map,ni=[],mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Q_(t,e){switch(t){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":wl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(e.pointerId)}}function wa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zl(e),e!==null&&Qg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function yk(t,e,n,r,i){switch(e){case"focusin":return pi=wa(pi,t,e,n,r,i),!0;case"dragenter":return gi=wa(gi,t,e,n,r,i),!0;case"mouseover":return mi=wa(mi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return wl.set(s,wa(wl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,El.set(s,wa(El.get(s)||null,t,e,n,r,i)),!0}return!1}function DS(t){var e=es(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=wS(n),e!==null){t.blockedOn=e,RS(t.priority,function(){CS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Su(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ep=r,n.target.dispatchEvent(r),Ep=null}else return e=Zl(n),e!==null&&Qg(e),t.blockedOn=n,!1;e.shift()}return!0}function Y_(t,e,n){Su(t)&&n.delete(e)}function _k(){bp=!1,pi!==null&&Su(pi)&&(pi=null),gi!==null&&Su(gi)&&(gi=null),mi!==null&&Su(mi)&&(mi=null),wl.forEach(Y_),El.forEach(Y_)}function Ea(t,e){t.blockedOn===e&&(t.blockedOn=null,bp||(bp=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,_k)))}function Sl(t){function e(i){return Ea(i,t)}if(0<jc.length){Ea(jc[0],t);for(var n=1;n<jc.length;n++){var r=jc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(pi!==null&&Ea(pi,t),gi!==null&&Ea(gi,t),mi!==null&&Ea(mi,t),wl.forEach(e),El.forEach(e),n=0;n<ni.length;n++)r=ni[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ni.length&&(n=ni[0],n.blockedOn===null);)DS(n),n.blockedOn===null&&ni.shift()}var fo=Br.ReactCurrentBatchConfig,nh=!0;function vk(t,e,n,r){var i=Me,s=fo.transition;fo.transition=null;try{Me=1,Yg(t,e,n,r)}finally{Me=i,fo.transition=s}}function wk(t,e,n,r){var i=Me,s=fo.transition;fo.transition=null;try{Me=4,Yg(t,e,n,r)}finally{Me=i,fo.transition=s}}function Yg(t,e,n,r){if(nh){var i=Pp(t,e,n,r);if(i===null)vf(t,e,r,rh,n),Q_(t,r);else if(yk(i,t,e,n,r))r.stopPropagation();else if(Q_(t,r),e&4&&-1<mk.indexOf(t)){for(;i!==null;){var s=Zl(i);if(s!==null&&kS(s),s=Pp(t,e,n,r),s===null&&vf(t,e,r,rh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else vf(t,e,r,null,n)}}var rh=null;function Pp(t,e,n,r){if(rh=null,t=qg(r),t=es(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rh=t,null}function MS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ak()){case Kg:return 1;case IS:return 4;case eh:case lk:return 16;case xS:return 536870912;default:return 16}default:return 16}}var ci=null,Xg=null,Tu=null;function NS(){if(Tu)return Tu;var t,e=Xg,n=e.length,r,i="value"in ci?ci.value:ci.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Tu=i.slice(t,1<r?1-r:void 0)}function Iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uc(){return!0}function X_(){return!1}function gn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Uc:X_,this.isPropagationStopped=X_,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uc)},persist:function(){},isPersistent:Uc}),e}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jg=gn(Ko),Jl=Qe({},Ko,{view:0,detail:0}),Ek=gn(Jl),uf,hf,Sa,nd=Qe({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sa&&(Sa&&t.type==="mousemove"?(uf=t.screenX-Sa.screenX,hf=t.screenY-Sa.screenY):hf=uf=0,Sa=t),uf)},movementY:function(t){return"movementY"in t?t.movementY:hf}}),J_=gn(nd),Sk=Qe({},nd,{dataTransfer:0}),Tk=gn(Sk),Ik=Qe({},Jl,{relatedTarget:0}),df=gn(Ik),xk=Qe({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),bk=gn(xk),Pk=Qe({},Ko,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kk=gn(Pk),Ck=Qe({},Ko,{data:0}),Z_=gn(Ck),Ak={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Dk[t])?!!e[t]:!1}function Zg(){return Mk}var Nk=Qe({},Jl,{key:function(t){if(t.key){var e=Ak[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zg,charCode:function(t){return t.type==="keypress"?Iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lk=gn(Nk),Ok=Qe({},nd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ev=gn(Ok),Vk=Qe({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zg}),Fk=gn(Vk),jk=Qe({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uk=gn(jk),zk=Qe({},nd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bk=gn(zk),$k=[9,13,27,32],em=Mr&&"CompositionEvent"in window,Ja=null;Mr&&"documentMode"in document&&(Ja=document.documentMode);var Hk=Mr&&"TextEvent"in window&&!Ja,LS=Mr&&(!em||Ja&&8<Ja&&11>=Ja),tv=" ",nv=!1;function OS(t,e){switch(t){case"keyup":return $k.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function Wk(t,e){switch(t){case"compositionend":return VS(e);case"keypress":return e.which!==32?null:(nv=!0,tv);case"textInput":return t=e.data,t===tv&&nv?null:t;default:return null}}function qk(t,e){if(Xs)return t==="compositionend"||!em&&OS(t,e)?(t=NS(),Tu=Xg=ci=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LS&&e.locale!=="ko"?null:e.data;default:return null}}var Kk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Kk[t.type]:e==="textarea"}function FS(t,e,n,r){gS(r),e=ih(e,"onChange"),0<e.length&&(n=new Jg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Za=null,Tl=null;function Gk(t){QS(t,0)}function rd(t){var e=eo(t);if(lS(e))return t}function Qk(t,e){if(t==="change")return e}var jS=!1;if(Mr){var ff;if(Mr){var pf="oninput"in document;if(!pf){var iv=document.createElement("div");iv.setAttribute("oninput","return;"),pf=typeof iv.oninput=="function"}ff=pf}else ff=!1;jS=ff&&(!document.documentMode||9<document.documentMode)}function sv(){Za&&(Za.detachEvent("onpropertychange",US),Tl=Za=null)}function US(t){if(t.propertyName==="value"&&rd(Tl)){var e=[];FS(e,Tl,t,qg(t)),vS(Gk,e)}}function Yk(t,e,n){t==="focusin"?(sv(),Za=e,Tl=n,Za.attachEvent("onpropertychange",US)):t==="focusout"&&sv()}function Xk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rd(Tl)}function Jk(t,e){if(t==="click")return rd(e)}function Zk(t,e){if(t==="input"||t==="change")return rd(e)}function eC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:eC;function Il(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cp.call(e,i)||!Hn(t[i],e[i]))return!1}return!0}function ov(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function av(t,e){var n=ov(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ov(n)}}function zS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BS(){for(var t=window,e=Xu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xu(t.document)}return e}function tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tC(t){var e=BS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zS(n.ownerDocument.documentElement,n)){if(r!==null&&tm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=av(n,s);var o=av(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nC=Mr&&"documentMode"in document&&11>=document.documentMode,Js=null,kp=null,el=null,Cp=!1;function lv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cp||Js==null||Js!==Xu(r)||(r=Js,"selectionStart"in r&&tm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),el&&Il(el,r)||(el=r,r=ih(kp,"onSelect"),0<r.length&&(e=new Jg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Js)))}function zc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zs={animationend:zc("Animation","AnimationEnd"),animationiteration:zc("Animation","AnimationIteration"),animationstart:zc("Animation","AnimationStart"),transitionend:zc("Transition","TransitionEnd")},gf={},$S={};Mr&&($S=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function id(t){if(gf[t])return gf[t];if(!Zs[t])return t;var e=Zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $S)return gf[t]=e[n];return t}var HS=id("animationend"),WS=id("animationiteration"),qS=id("animationstart"),KS=id("transitionend"),GS=new Map,cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(t,e){GS.set(t,e),Is(e,[t])}for(var mf=0;mf<cv.length;mf++){var yf=cv[mf],rC=yf.toLowerCase(),iC=yf[0].toUpperCase()+yf.slice(1);Li(rC,"on"+iC)}Li(HS,"onAnimationEnd");Li(WS,"onAnimationIteration");Li(qS,"onAnimationStart");Li("dblclick","onDoubleClick");Li("focusin","onFocus");Li("focusout","onBlur");Li(KS,"onTransitionEnd");Io("onMouseEnter",["mouseout","mouseover"]);Io("onMouseLeave",["mouseout","mouseover"]);Io("onPointerEnter",["pointerout","pointerover"]);Io("onPointerLeave",["pointerout","pointerover"]);Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Is("onBeforeInput",["compositionend","keypress","textInput","paste"]);Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function uv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rk(r,e,void 0,t),t.currentTarget=null}function QS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;uv(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;uv(i,a,c),s=l}}}if(Zu)throw t=Ip,Zu=!1,Ip=null,t}function Ue(t,e){var n=e[Np];n===void 0&&(n=e[Np]=new Set);var r=t+"__bubble";n.has(r)||(YS(e,t,2,!1),n.add(r))}function _f(t,e,n){var r=0;e&&(r|=4),YS(n,t,r,e)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function xl(t){if(!t[Bc]){t[Bc]=!0,rS.forEach(function(n){n!=="selectionchange"&&(sC.has(n)||_f(n,!1,t),_f(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bc]||(e[Bc]=!0,_f("selectionchange",!1,e))}}function YS(t,e,n,r){switch(MS(e)){case 1:var i=vk;break;case 4:i=wk;break;default:i=Yg}n=i.bind(null,e,n,t),i=void 0,!Tp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=es(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}vS(function(){var c=s,h=qg(n),d=[];e:{var f=GS.get(t);if(f!==void 0){var g=Jg,y=t;switch(t){case"keypress":if(Iu(n)===0)break e;case"keydown":case"keyup":g=Lk;break;case"focusin":y="focus",g=df;break;case"focusout":y="blur",g=df;break;case"beforeblur":case"afterblur":g=df;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=J_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Tk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Fk;break;case HS:case WS:case qS:g=bk;break;case KS:g=Uk;break;case"scroll":g=Ek;break;case"wheel":g=Bk;break;case"copy":case"cut":case"paste":g=kk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ev}var v=(e&4)!==0,S=!v&&t==="scroll",E=v?f!==null?f+"Capture":null:f;v=[];for(var w=c,b;w!==null;){b=w;var D=b.stateNode;if(b.tag===5&&D!==null&&(b=D,E!==null&&(D=vl(w,E),D!=null&&v.push(bl(w,D,b)))),S)break;w=w.return}0<v.length&&(f=new g(f,y,null,n,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Ep&&(y=n.relatedTarget||n.fromElement)&&(es(y)||y[Nr]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?es(y):null,y!==null&&(S=xs(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(v=J_,D="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=ev,D="onPointerLeave",E="onPointerEnter",w="pointer"),S=g==null?f:eo(g),b=y==null?f:eo(y),f=new v(D,w+"leave",g,n,h),f.target=S,f.relatedTarget=b,D=null,es(h)===c&&(v=new v(E,w+"enter",y,n,h),v.target=b,v.relatedTarget=S,D=v),S=D,g&&y)t:{for(v=g,E=y,w=0,b=v;b;b=zs(b))w++;for(b=0,D=E;D;D=zs(D))b++;for(;0<w-b;)v=zs(v),w--;for(;0<b-w;)E=zs(E),b--;for(;w--;){if(v===E||E!==null&&v===E.alternate)break t;v=zs(v),E=zs(E)}v=null}else v=null;g!==null&&hv(d,f,g,v,!1),y!==null&&S!==null&&hv(d,S,y,v,!0)}}e:{if(f=c?eo(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var N=Qk;else if(rv(f))if(jS)N=Zk;else{N=Xk;var V=Yk}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Jk);if(N&&(N=N(t,c))){FS(d,N,n,h);break e}V&&V(t,f,c),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&mp(f,"number",f.value)}switch(V=c?eo(c):window,t){case"focusin":(rv(V)||V.contentEditable==="true")&&(Js=V,kp=c,el=null);break;case"focusout":el=kp=Js=null;break;case"mousedown":Cp=!0;break;case"contextmenu":case"mouseup":case"dragend":Cp=!1,lv(d,n,h);break;case"selectionchange":if(nC)break;case"keydown":case"keyup":lv(d,n,h)}var I;if(em)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Xs?OS(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(LS&&n.locale!=="ko"&&(Xs||_!=="onCompositionStart"?_==="onCompositionEnd"&&Xs&&(I=NS()):(ci=h,Xg="value"in ci?ci.value:ci.textContent,Xs=!0)),V=ih(c,_),0<V.length&&(_=new Z_(_,t,null,n,h),d.push({event:_,listeners:V}),I?_.data=I:(I=VS(n),I!==null&&(_.data=I)))),(I=Hk?Wk(t,n):qk(t,n))&&(c=ih(c,"onBeforeInput"),0<c.length&&(h=new Z_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}QS(d,e)})}function bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ih(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=vl(t,n),s!=null&&r.unshift(bl(t,s,i)),s=vl(t,e),s!=null&&r.push(bl(t,s,i))),t=t.return}return r}function zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=vl(n,s),l!=null&&o.unshift(bl(n,l,a))):i||(l=vl(n,s),l!=null&&o.push(bl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oC=/\r\n?/g,aC=/\u0000|\uFFFD/g;function dv(t){return(typeof t=="string"?t:""+t).replace(oC,`
`).replace(aC,"")}function $c(t,e,n){if(e=dv(e),dv(t)!==e&&n)throw Error($(425))}function sh(){}var Ap=null,Rp=null;function Dp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mp=typeof setTimeout=="function"?setTimeout:void 0,lC=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,cC=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(t){return fv.resolve(null).then(t).catch(uC)}:Mp;function uC(t){setTimeout(function(){throw t})}function wf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Sl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Sl(e)}function yi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Go=Math.random().toString(36).slice(2),er="__reactFiber$"+Go,Pl="__reactProps$"+Go,Nr="__reactContainer$"+Go,Np="__reactEvents$"+Go,hC="__reactListeners$"+Go,dC="__reactHandles$"+Go;function es(t){var e=t[er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nr]||n[er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pv(t);t!==null;){if(n=t[er])return n;t=pv(t)}return e}t=n,n=t.parentNode}return null}function Zl(t){return t=t[er]||t[Nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function sd(t){return t[Pl]||null}var Lp=[],to=-1;function Oi(t){return{current:t}}function $e(t){0>to||(t.current=Lp[to],Lp[to]=null,to--)}function Oe(t,e){to++,Lp[to]=t.current,t.current=e}var ki={},Ot=Oi(ki),Jt=Oi(!1),fs=ki;function xo(t,e){var n=t.type.contextTypes;if(!n)return ki;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Zt(t){return t=t.childContextTypes,t!=null}function oh(){$e(Jt),$e(Ot)}function gv(t,e,n){if(Ot.current!==ki)throw Error($(168));Oe(Ot,e),Oe(Jt,n)}function XS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,YP(t)||"Unknown",i));return Qe({},n,r)}function ah(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ki,fs=Ot.current,Oe(Ot,t),Oe(Jt,Jt.current),!0}function mv(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=XS(t,e,fs),r.__reactInternalMemoizedMergedChildContext=t,$e(Jt),$e(Ot),Oe(Ot,t)):$e(Jt),Oe(Jt,n)}var Sr=null,od=!1,Ef=!1;function JS(t){Sr===null?Sr=[t]:Sr.push(t)}function fC(t){od=!0,JS(t)}function Vi(){if(!Ef&&Sr!==null){Ef=!0;var t=0,e=Me;try{var n=Sr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sr=null,od=!1}catch(i){throw Sr!==null&&(Sr=Sr.slice(t+1)),TS(Kg,Vi),i}finally{Me=e,Ef=!1}}return null}var no=[],ro=0,lh=null,ch=0,En=[],Sn=0,ps=null,Ir=1,xr="";function Ki(t,e){no[ro++]=ch,no[ro++]=lh,lh=t,ch=e}function ZS(t,e,n){En[Sn++]=Ir,En[Sn++]=xr,En[Sn++]=ps,ps=t;var r=Ir;t=xr;var i=32-zn(r)-1;r&=~(1<<i),n+=1;var s=32-zn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ir=1<<32-zn(e)+i|n<<i|r,xr=s+t}else Ir=1<<s|n<<i|r,xr=t}function nm(t){t.return!==null&&(Ki(t,1),ZS(t,1,0))}function rm(t){for(;t===lh;)lh=no[--ro],no[ro]=null,ch=no[--ro],no[ro]=null;for(;t===ps;)ps=En[--Sn],En[Sn]=null,xr=En[--Sn],En[Sn]=null,Ir=En[--Sn],En[Sn]=null}var dn=null,un=null,He=!1,Vn=null;function eT(t,e){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,un=yi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ps!==null?{id:Ir,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,un=null,!0):!1;default:return!1}}function Op(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vp(t){if(He){var e=un;if(e){var n=e;if(!yv(t,e)){if(Op(t))throw Error($(418));e=yi(n.nextSibling);var r=dn;e&&yv(t,e)?eT(r,n):(t.flags=t.flags&-4097|2,He=!1,dn=t)}}else{if(Op(t))throw Error($(418));t.flags=t.flags&-4097|2,He=!1,dn=t}}}function _v(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function Hc(t){if(t!==dn)return!1;if(!He)return _v(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dp(t.type,t.memoizedProps)),e&&(e=un)){if(Op(t))throw tT(),Error($(418));for(;e;)eT(t,e),e=yi(e.nextSibling)}if(_v(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=yi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=dn?yi(t.stateNode.nextSibling):null;return!0}function tT(){for(var t=un;t;)t=yi(t.nextSibling)}function bo(){un=dn=null,He=!1}function im(t){Vn===null?Vn=[t]:Vn.push(t)}var pC=Br.ReactCurrentBatchConfig;function Ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Wc(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vv(t){var e=t._init;return e(t._payload)}function nT(t){function e(E,w){if(t){var b=E.deletions;b===null?(E.deletions=[w],E.flags|=16):b.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function i(E,w){return E=Ei(E,w),E.index=0,E.sibling=null,E}function s(E,w,b){return E.index=b,t?(b=E.alternate,b!==null?(b=b.index,b<w?(E.flags|=2,w):b):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,w,b,D){return w===null||w.tag!==6?(w=kf(b,E.mode,D),w.return=E,w):(w=i(w,b),w.return=E,w)}function l(E,w,b,D){var N=b.type;return N===Ys?h(E,w,b.props.children,D,b.key):w!==null&&(w.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ei&&vv(N)===w.type)?(D=i(w,b.props),D.ref=Ta(E,w,b),D.return=E,D):(D=Ru(b.type,b.key,b.props,null,E.mode,D),D.ref=Ta(E,w,b),D.return=E,D)}function c(E,w,b,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Cf(b,E.mode,D),w.return=E,w):(w=i(w,b.children||[]),w.return=E,w)}function h(E,w,b,D,N){return w===null||w.tag!==7?(w=us(b,E.mode,D,N),w.return=E,w):(w=i(w,b),w.return=E,w)}function d(E,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=kf(""+w,E.mode,b),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Nc:return b=Ru(w.type,w.key,w.props,null,E.mode,b),b.ref=Ta(E,null,w),b.return=E,b;case Qs:return w=Cf(w,E.mode,b),w.return=E,w;case ei:var D=w._init;return d(E,D(w._payload),b)}if(Na(w)||_a(w))return w=us(w,E.mode,b,null),w.return=E,w;Wc(E,w)}return null}function f(E,w,b,D){var N=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:a(E,w,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Nc:return b.key===N?l(E,w,b,D):null;case Qs:return b.key===N?c(E,w,b,D):null;case ei:return N=b._init,f(E,w,N(b._payload),D)}if(Na(b)||_a(b))return N!==null?null:h(E,w,b,D,null);Wc(E,b)}return null}function g(E,w,b,D,N){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(b)||null,a(w,E,""+D,N);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Nc:return E=E.get(D.key===null?b:D.key)||null,l(w,E,D,N);case Qs:return E=E.get(D.key===null?b:D.key)||null,c(w,E,D,N);case ei:var V=D._init;return g(E,w,b,V(D._payload),N)}if(Na(D)||_a(D))return E=E.get(b)||null,h(w,E,D,N,null);Wc(w,D)}return null}function y(E,w,b,D){for(var N=null,V=null,I=w,_=w=0,T=null;I!==null&&_<b.length;_++){I.index>_?(T=I,I=null):T=I.sibling;var P=f(E,I,b[_],D);if(P===null){I===null&&(I=T);break}t&&I&&P.alternate===null&&e(E,I),w=s(P,w,_),V===null?N=P:V.sibling=P,V=P,I=T}if(_===b.length)return n(E,I),He&&Ki(E,_),N;if(I===null){for(;_<b.length;_++)I=d(E,b[_],D),I!==null&&(w=s(I,w,_),V===null?N=I:V.sibling=I,V=I);return He&&Ki(E,_),N}for(I=r(E,I);_<b.length;_++)T=g(I,E,_,b[_],D),T!==null&&(t&&T.alternate!==null&&I.delete(T.key===null?_:T.key),w=s(T,w,_),V===null?N=T:V.sibling=T,V=T);return t&&I.forEach(function(R){return e(E,R)}),He&&Ki(E,_),N}function v(E,w,b,D){var N=_a(b);if(typeof N!="function")throw Error($(150));if(b=N.call(b),b==null)throw Error($(151));for(var V=N=null,I=w,_=w=0,T=null,P=b.next();I!==null&&!P.done;_++,P=b.next()){I.index>_?(T=I,I=null):T=I.sibling;var R=f(E,I,P.value,D);if(R===null){I===null&&(I=T);break}t&&I&&R.alternate===null&&e(E,I),w=s(R,w,_),V===null?N=R:V.sibling=R,V=R,I=T}if(P.done)return n(E,I),He&&Ki(E,_),N;if(I===null){for(;!P.done;_++,P=b.next())P=d(E,P.value,D),P!==null&&(w=s(P,w,_),V===null?N=P:V.sibling=P,V=P);return He&&Ki(E,_),N}for(I=r(E,I);!P.done;_++,P=b.next())P=g(I,E,_,P.value,D),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?_:P.key),w=s(P,w,_),V===null?N=P:V.sibling=P,V=P);return t&&I.forEach(function(A){return e(E,A)}),He&&Ki(E,_),N}function S(E,w,b,D){if(typeof b=="object"&&b!==null&&b.type===Ys&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Nc:e:{for(var N=b.key,V=w;V!==null;){if(V.key===N){if(N=b.type,N===Ys){if(V.tag===7){n(E,V.sibling),w=i(V,b.props.children),w.return=E,E=w;break e}}else if(V.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ei&&vv(N)===V.type){n(E,V.sibling),w=i(V,b.props),w.ref=Ta(E,V,b),w.return=E,E=w;break e}n(E,V);break}else e(E,V);V=V.sibling}b.type===Ys?(w=us(b.props.children,E.mode,D,b.key),w.return=E,E=w):(D=Ru(b.type,b.key,b.props,null,E.mode,D),D.ref=Ta(E,w,b),D.return=E,E=D)}return o(E);case Qs:e:{for(V=b.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(E,w.sibling),w=i(w,b.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Cf(b,E.mode,D),w.return=E,E=w}return o(E);case ei:return V=b._init,S(E,w,V(b._payload),D)}if(Na(b))return y(E,w,b,D);if(_a(b))return v(E,w,b,D);Wc(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(E,w.sibling),w=i(w,b),w.return=E,E=w):(n(E,w),w=kf(b,E.mode,D),w.return=E,E=w),o(E)):n(E,w)}return S}var Po=nT(!0),rT=nT(!1),uh=Oi(null),hh=null,io=null,sm=null;function om(){sm=io=hh=null}function am(t){var e=uh.current;$e(uh),t._currentValue=e}function Fp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function po(t,e){hh=t,sm=io=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if(sm!==t)if(t={context:t,memoizedValue:e,next:null},io===null){if(hh===null)throw Error($(308));io=t,hh.dependencies={lanes:0,firstContext:t}}else io=io.next=t;return e}var ts=null;function lm(t){ts===null?ts=[t]:ts.push(t)}function iT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,lm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Lr(t,r)}function Lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ti=!1;function cm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _i(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Lr(t,n)}return i=r.interleaved,i===null?(e.next=e,lm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Lr(t,n)}function xu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gg(t,n)}}function wv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dh(t,e,n,r){var i=t.updateQueue;ti=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,g=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(g,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(g,d,f):y,f==null)break e;d=Qe({},d,f);break e;case 2:ti=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ms|=o,t.lanes=o,t.memoizedState=d}}function Ev(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var ec={},sr=Oi(ec),kl=Oi(ec),Cl=Oi(ec);function ns(t){if(t===ec)throw Error($(174));return t}function um(t,e){switch(Oe(Cl,e),Oe(kl,t),Oe(sr,ec),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_p(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_p(e,t)}$e(sr),Oe(sr,e)}function ko(){$e(sr),$e(kl),$e(Cl)}function oT(t){ns(Cl.current);var e=ns(sr.current),n=_p(e,t.type);e!==n&&(Oe(kl,t),Oe(sr,n))}function hm(t){kl.current===t&&($e(sr),$e(kl))}var Ke=Oi(0);function fh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sf=[];function dm(){for(var t=0;t<Sf.length;t++)Sf[t]._workInProgressVersionPrimary=null;Sf.length=0}var bu=Br.ReactCurrentDispatcher,Tf=Br.ReactCurrentBatchConfig,gs=0,Ge=null,ct=null,pt=null,ph=!1,tl=!1,Al=0,gC=0;function kt(){throw Error($(321))}function fm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function pm(t,e,n,r,i,s){if(gs=s,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bu.current=t===null||t.memoizedState===null?vC:wC,t=n(r,i),tl){s=0;do{if(tl=!1,Al=0,25<=s)throw Error($(301));s+=1,pt=ct=null,e.updateQueue=null,bu.current=EC,t=n(r,i)}while(tl)}if(bu.current=gh,e=ct!==null&&ct.next!==null,gs=0,pt=ct=Ge=null,ph=!1,e)throw Error($(300));return t}function gm(){var t=Al!==0;return Al=0,t}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ge.memoizedState=pt=t:pt=pt.next=t,pt}function Cn(){if(ct===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=pt===null?Ge.memoizedState:pt.next;if(e!==null)pt=e,ct=t;else{if(t===null)throw Error($(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},pt===null?Ge.memoizedState=pt=t:pt=pt.next=t}return pt}function Rl(t,e){return typeof e=="function"?e(t):e}function If(t){var e=Cn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((gs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ge.lanes|=h,ms|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Hn(r,e.memoizedState)||(Xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ge.lanes|=s,ms|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xf(t){var e=Cn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hn(s,e.memoizedState)||(Xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function aT(){}function lT(t,e){var n=Ge,r=Cn(),i=e(),s=!Hn(r.memoizedState,i);if(s&&(r.memoizedState=i,Xt=!0),r=r.queue,mm(hT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,Dl(9,uT.bind(null,n,r,i,e),void 0,null),gt===null)throw Error($(349));gs&30||cT(n,e,i)}return i}function cT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uT(t,e,n,r){e.value=n,e.getSnapshot=r,dT(e)&&fT(t)}function hT(t,e,n){return n(function(){dT(e)&&fT(t)})}function dT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function fT(t){var e=Lr(t,1);e!==null&&Bn(e,t,1,-1)}function Sv(t){var e=Jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:t},e.queue=t,t=t.dispatch=_C.bind(null,Ge,t),[e.memoizedState,t]}function Dl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function pT(){return Cn().memoizedState}function Pu(t,e,n,r){var i=Jn();Ge.flags|=t,i.memoizedState=Dl(1|e,n,void 0,r===void 0?null:r)}function ad(t,e,n,r){var i=Cn();r=r===void 0?null:r;var s=void 0;if(ct!==null){var o=ct.memoizedState;if(s=o.destroy,r!==null&&fm(r,o.deps)){i.memoizedState=Dl(e,n,s,r);return}}Ge.flags|=t,i.memoizedState=Dl(1|e,n,s,r)}function Tv(t,e){return Pu(8390656,8,t,e)}function mm(t,e){return ad(2048,8,t,e)}function gT(t,e){return ad(4,2,t,e)}function mT(t,e){return ad(4,4,t,e)}function yT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _T(t,e,n){return n=n!=null?n.concat([t]):null,ad(4,4,yT.bind(null,e,t),n)}function ym(){}function vT(t,e){var n=Cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wT(t,e){var n=Cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ET(t,e,n){return gs&21?(Hn(n,e)||(n=bS(),Ge.lanes|=n,ms|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function mC(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=Tf.transition;Tf.transition={};try{t(!1),e()}finally{Me=n,Tf.transition=r}}function ST(){return Cn().memoizedState}function yC(t,e,n){var r=wi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},TT(t))IT(e,n);else if(n=iT(t,e,n,r),n!==null){var i=zt();Bn(n,t,r,i),xT(n,e,r)}}function _C(t,e,n){var r=wi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(TT(t))IT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hn(a,o)){var l=e.interleaved;l===null?(i.next=i,lm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=iT(t,e,i,r),n!==null&&(i=zt(),Bn(n,t,r,i),xT(n,e,r))}}function TT(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function IT(t,e){tl=ph=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gg(t,n)}}var gh={readContext:kn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},vC={readContext:kn,useCallback:function(t,e){return Jn().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:Tv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pu(4194308,4,yT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pu(4,2,t,e)},useMemo:function(t,e){var n=Jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yC.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=Jn();return t={current:t},e.memoizedState=t},useState:Sv,useDebugValue:ym,useDeferredValue:function(t){return Jn().memoizedState=t},useTransition:function(){var t=Sv(!1),e=t[0];return t=mC.bind(null,t[1]),Jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,i=Jn();if(He){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),gt===null)throw Error($(349));gs&30||cT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Tv(hT.bind(null,r,s,t),[t]),r.flags|=2048,Dl(9,uT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Jn(),e=gt.identifierPrefix;if(He){var n=xr,r=Ir;n=(r&~(1<<32-zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Al++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wC={readContext:kn,useCallback:vT,useContext:kn,useEffect:mm,useImperativeHandle:_T,useInsertionEffect:gT,useLayoutEffect:mT,useMemo:wT,useReducer:If,useRef:pT,useState:function(){return If(Rl)},useDebugValue:ym,useDeferredValue:function(t){var e=Cn();return ET(e,ct.memoizedState,t)},useTransition:function(){var t=If(Rl)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:aT,useSyncExternalStore:lT,useId:ST,unstable_isNewReconciler:!1},EC={readContext:kn,useCallback:vT,useContext:kn,useEffect:mm,useImperativeHandle:_T,useInsertionEffect:gT,useLayoutEffect:mT,useMemo:wT,useReducer:xf,useRef:pT,useState:function(){return xf(Rl)},useDebugValue:ym,useDeferredValue:function(t){var e=Cn();return ct===null?e.memoizedState=t:ET(e,ct.memoizedState,t)},useTransition:function(){var t=xf(Rl)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:aT,useSyncExternalStore:lT,useId:ST,unstable_isNewReconciler:!1};function Nn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ld={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zt(),i=wi(t),s=Cr(r,i);s.payload=e,n!=null&&(s.callback=n),e=_i(t,s,i),e!==null&&(Bn(e,t,i,r),xu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zt(),i=wi(t),s=Cr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=_i(t,s,i),e!==null&&(Bn(e,t,i,r),xu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),r=wi(t),i=Cr(n,r);i.tag=2,e!=null&&(i.callback=e),e=_i(t,i,r),e!==null&&(Bn(e,t,r,n),xu(e,t,r))}};function Iv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Il(n,r)||!Il(i,s):!0}function bT(t,e,n){var r=!1,i=ki,s=e.contextType;return typeof s=="object"&&s!==null?s=kn(s):(i=Zt(e)?fs:Ot.current,r=e.contextTypes,s=(r=r!=null)?xo(t,i):ki),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ld,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ld.enqueueReplaceState(e,e.state,null)}function Up(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},cm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=kn(s):(s=Zt(e)?fs:Ot.current,i.context=xo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ld.enqueueReplaceState(i,i.state,null),dh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Co(t,e){try{var n="",r=e;do n+=QP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function bf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var SC=typeof WeakMap=="function"?WeakMap:Map;function PT(t,e,n){n=Cr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yh||(yh=!0,Xp=r),zp(t,e)},n}function kT(t,e,n){n=Cr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zp(t,e),typeof r!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new SC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=OC.bind(null,t,e,n),e.then(t,t))}function Pv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cr(-1,1),e.tag=2,_i(n,e,1))),n.lanes|=1),t)}var TC=Br.ReactCurrentOwner,Xt=!1;function jt(t,e,n,r){e.child=t===null?rT(e,null,n,r):Po(e,t.child,n,r)}function Cv(t,e,n,r,i){n=n.render;var s=e.ref;return po(e,i),r=pm(t,e,n,r,s,i),n=gm(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Or(t,e,i)):(He&&n&&nm(e),e.flags|=1,jt(t,e,r,i),e.child)}function Av(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!xm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,CT(t,e,s,r,i)):(t=Ru(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Il,n(o,r)&&t.ref===e.ref)return Or(t,e,i)}return e.flags|=1,t=Ei(s,r),t.ref=e.ref,t.return=e,e.child=t}function CT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Il(s,r)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Or(t,e,i)}return Bp(t,e,n,r,i)}function AT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(oo,an),an|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(oo,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Oe(oo,an),an|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Oe(oo,an),an|=r;return jt(t,e,i,n),e.child}function RT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bp(t,e,n,r,i){var s=Zt(n)?fs:Ot.current;return s=xo(e,s),po(e,i),n=pm(t,e,n,r,s,i),r=gm(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Or(t,e,i)):(He&&r&&nm(e),e.flags|=1,jt(t,e,n,i),e.child)}function Rv(t,e,n,r,i){if(Zt(n)){var s=!0;ah(e)}else s=!1;if(po(e,i),e.stateNode===null)ku(t,e),bT(e,n,r),Up(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=kn(c):(c=Zt(n)?fs:Ot.current,c=xo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&xv(e,o,r,c),ti=!1;var f=e.memoizedState;o.state=f,dh(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Jt.current||ti?(typeof h=="function"&&(jp(e,n,h,r),l=e.memoizedState),(a=ti||Iv(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,sT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Nn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=kn(l):(l=Zt(n)?fs:Ot.current,l=xo(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&xv(e,o,r,l),ti=!1,f=e.memoizedState,o.state=f,dh(e,r,o,i);var y=e.memoizedState;a!==d||f!==y||Jt.current||ti?(typeof g=="function"&&(jp(e,n,g,r),y=e.memoizedState),(c=ti||Iv(e,n,c,r,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return $p(t,e,n,r,s,i)}function $p(t,e,n,r,i,s){RT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&mv(e,n,!1),Or(t,e,s);r=e.stateNode,TC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Po(e,t.child,null,s),e.child=Po(e,null,a,s)):jt(t,e,a,s),e.memoizedState=r.state,i&&mv(e,n,!0),e.child}function DT(t){var e=t.stateNode;e.pendingContext?gv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gv(t,e.context,!1),um(t,e.containerInfo)}function Dv(t,e,n,r,i){return bo(),im(i),e.flags|=256,jt(t,e,n,r),e.child}var Hp={dehydrated:null,treeContext:null,retryLane:0};function Wp(t){return{baseLanes:t,cachePool:null,transitions:null}}function MT(t,e,n){var r=e.pendingProps,i=Ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Oe(Ke,i&1),t===null)return Vp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hd(o,r,0,null),t=us(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wp(n),e.memoizedState=Hp,t):_m(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return IC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ei(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ei(a,s):(s=us(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Wp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hp,r}return s=t.child,t=s.sibling,r=Ei(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _m(t,e){return e=hd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qc(t,e,n,r){return r!==null&&im(r),Po(e,t.child,null,n),t=_m(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=bf(Error($(422))),qc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=hd({mode:"visible",children:r.children},i,0,null),s=us(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Po(e,t.child,null,o),e.child.memoizedState=Wp(o),e.memoizedState=Hp,s);if(!(e.mode&1))return qc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=bf(s,r,void 0),qc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Xt||a){if(r=gt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Lr(t,i),Bn(r,t,i,-1))}return Im(),r=bf(Error($(421))),qc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=VC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,un=yi(i.nextSibling),dn=e,He=!0,Vn=null,t!==null&&(En[Sn++]=Ir,En[Sn++]=xr,En[Sn++]=ps,Ir=t.id,xr=t.overflow,ps=e),e=_m(e,r.children),e.flags|=4096,e)}function Mv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fp(t.return,e,n)}function Pf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function NT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(jt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mv(t,n,e);else if(t.tag===19)Mv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Pf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Pf(e,!0,n,null,s);break;case"together":Pf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ku(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ms|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Ei(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ei(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xC(t,e,n){switch(e.tag){case 3:DT(e),bo();break;case 5:oT(e);break;case 1:Zt(e.type)&&ah(e);break;case 4:um(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Oe(uh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?MT(t,e,n):(Oe(Ke,Ke.current&1),t=Or(t,e,n),t!==null?t.sibling:null);Oe(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return NT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oe(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,AT(t,e,n)}return Or(t,e,n)}var LT,qp,OT,VT;LT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qp=function(){};OT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ns(sr.current);var s=null;switch(n){case"input":i=pp(t,i),r=pp(t,r),s=[];break;case"select":i=Qe({},i,{value:void 0}),r=Qe({},r,{value:void 0}),s=[];break;case"textarea":i=yp(t,i),r=yp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sh)}vp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ue("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};VT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ia(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bC(t,e,n){var r=e.pendingProps;switch(rm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return Zt(e.type)&&oh(),Ct(e),null;case 3:return r=e.stateNode,ko(),$e(Jt),$e(Ot),dm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vn!==null&&(eg(Vn),Vn=null))),qp(t,e),Ct(e),null;case 5:hm(e);var i=ns(Cl.current);if(n=e.type,t!==null&&e.stateNode!=null)OT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Ct(e),null}if(t=ns(sr.current),Hc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[er]=e,r[Pl]=s,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<Oa.length;i++)Ue(Oa[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":B_(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":H_(r,s),Ue("invalid",r)}vp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&$c(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$c(r.textContent,a,t),i=["children",""+a]):yl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":Lc(r),$_(r,s,!0);break;case"textarea":Lc(r),W_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[er]=e,t[Pl]=r,LT(t,e,!1,!1),e.stateNode=t;e:{switch(o=wp(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<Oa.length;i++)Ue(Oa[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":B_(t,r),i=pp(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Qe({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":H_(t,r),i=yp(t,r),Ue("invalid",t);break;default:i=r}vp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?pS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_l(t,l):typeof l=="number"&&_l(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ue("scroll",t):l!=null&&Bg(t,s,l,o))}switch(n){case"input":Lc(t),$_(t,r,!1);break;case"textarea":Lc(t),W_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?co(t,!!r.multiple,s,!1):r.defaultValue!=null&&co(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)VT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=ns(Cl.current),ns(sr.current),Hc(e)){if(r=e.stateNode,n=e.memoizedProps,r[er]=e,(s=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:$c(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$c(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[er]=e,e.stateNode=r}return Ct(e),null;case 13:if($e(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&un!==null&&e.mode&1&&!(e.flags&128))tT(),bo(),e.flags|=98560,s=!1;else if(s=Hc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[er]=e}else bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),s=!1}else Vn!==null&&(eg(Vn),Vn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?ht===0&&(ht=3):Im())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return ko(),qp(t,e),t===null&&xl(e.stateNode.containerInfo),Ct(e),null;case 10:return am(e.type._context),Ct(e),null;case 17:return Zt(e.type)&&oh(),Ct(e),null;case 19:if($e(Ke),s=e.memoizedState,s===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ia(s,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fh(t),o!==null){for(e.flags|=128,Ia(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(Ke,Ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&et()>Ao&&(e.flags|=128,r=!0,Ia(s,!1),e.lanes=4194304)}else{if(!r)if(t=fh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ia(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return Ct(e),null}else 2*et()-s.renderingStartTime>Ao&&n!==1073741824&&(e.flags|=128,r=!0,Ia(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=et(),e.sibling=null,n=Ke.current,Oe(Ke,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return Tm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function PC(t,e){switch(rm(e),e.tag){case 1:return Zt(e.type)&&oh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ko(),$e(Jt),$e(Ot),dm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hm(e),null;case 13:if($e(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ke),null;case 4:return ko(),null;case 10:return am(e.type._context),null;case 22:case 23:return Tm(),null;case 24:return null;default:return null}}var Kc=!1,Mt=!1,kC=typeof WeakSet=="function"?WeakSet:Set,ne=null;function so(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function Kp(t,e,n){try{n()}catch(r){Je(t,e,r)}}var Nv=!1;function CC(t,e){if(Ap=nh,t=BS(),tm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rp={focusedElem:t,selectionRange:n},nh=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,S=y.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?v:Nn(e.type,v),S);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(D){Je(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return y=Nv,Nv=!1,y}function nl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Kp(e,n,s)}i=i.next}while(i!==r)}}function cd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function FT(t){var e=t.alternate;e!==null&&(t.alternate=null,FT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[er],delete e[Pl],delete e[Np],delete e[hC],delete e[dC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jT(t){return t.tag===5||t.tag===3||t.tag===4}function Lv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sh));else if(r!==4&&(t=t.child,t!==null))for(Qp(t,e,n),t=t.sibling;t!==null;)Qp(t,e,n),t=t.sibling}function Yp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yp(t,e,n),t=t.sibling;t!==null;)Yp(t,e,n),t=t.sibling}var vt=null,Ln=!1;function Yr(t,e,n){for(n=n.child;n!==null;)UT(t,e,n),n=n.sibling}function UT(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(td,n)}catch{}switch(n.tag){case 5:Mt||so(n,e);case 6:var r=vt,i=Ln;vt=null,Yr(t,e,n),vt=r,Ln=i,vt!==null&&(Ln?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(Ln?(t=vt,n=n.stateNode,t.nodeType===8?wf(t.parentNode,n):t.nodeType===1&&wf(t,n),Sl(t)):wf(vt,n.stateNode));break;case 4:r=vt,i=Ln,vt=n.stateNode.containerInfo,Ln=!0,Yr(t,e,n),vt=r,Ln=i;break;case 0:case 11:case 14:case 15:if(!Mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Kp(n,e,o),i=i.next}while(i!==r)}Yr(t,e,n);break;case 1:if(!Mt&&(so(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}Yr(t,e,n);break;case 21:Yr(t,e,n);break;case 22:n.mode&1?(Mt=(r=Mt)||n.memoizedState!==null,Yr(t,e,n),Mt=r):Yr(t,e,n);break;default:Yr(t,e,n)}}function Ov(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kC),e.forEach(function(r){var i=FC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,Ln=!1;break e;case 3:vt=a.stateNode.containerInfo,Ln=!0;break e;case 4:vt=a.stateNode.containerInfo,Ln=!0;break e}a=a.return}if(vt===null)throw Error($(160));UT(s,o,i),vt=null,Ln=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zT(e,t),e=e.sibling}function zT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),Qn(t),r&4){try{nl(3,t,t.return),cd(3,t)}catch(v){Je(t,t.return,v)}try{nl(5,t,t.return)}catch(v){Je(t,t.return,v)}}break;case 1:Mn(e,t),Qn(t),r&512&&n!==null&&so(n,n.return);break;case 5:if(Mn(e,t),Qn(t),r&512&&n!==null&&so(n,n.return),t.flags&32){var i=t.stateNode;try{_l(i,"")}catch(v){Je(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&cS(i,s),wp(a,o);var c=wp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?pS(i,d):h==="dangerouslySetInnerHTML"?dS(i,d):h==="children"?_l(i,d):Bg(i,h,d,c)}switch(a){case"input":gp(i,s);break;case"textarea":uS(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?co(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?co(i,!!s.multiple,s.defaultValue,!0):co(i,!!s.multiple,s.multiple?[]:"",!1))}i[Pl]=s}catch(v){Je(t,t.return,v)}}break;case 6:if(Mn(e,t),Qn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Je(t,t.return,v)}}break;case 3:if(Mn(e,t),Qn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sl(e.containerInfo)}catch(v){Je(t,t.return,v)}break;case 4:Mn(e,t),Qn(t);break;case 13:Mn(e,t),Qn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Em=et())),r&4&&Ov(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(c=Mt)||h,Mn(e,t),Mt=c):Mn(e,t),Qn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ne=t,h=t.child;h!==null;){for(d=ne=h;ne!==null;){switch(f=ne,g=f.child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:so(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Je(r,n,v)}}break;case 5:so(f,f.return);break;case 22:if(f.memoizedState!==null){Fv(d);continue}}g!==null?(g.return=f,ne=g):Fv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fS("display",o))}catch(v){Je(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Je(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Mn(e,t),Qn(t),r&4&&Ov(t);break;case 21:break;default:Mn(e,t),Qn(t)}}function Qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jT(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_l(i,""),r.flags&=-33);var s=Lv(t);Yp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Lv(t);Qp(t,a,o);break;default:throw Error($(161))}}catch(l){Je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AC(t,e,n){ne=t,BT(t)}function BT(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Kc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Mt;a=Kc;var c=Mt;if(Kc=o,(Mt=l)&&!c)for(ne=i;ne!==null;)o=ne,l=o.child,o.tag===22&&o.memoizedState!==null?jv(i):l!==null?(l.return=o,ne=l):jv(i);for(;s!==null;)ne=s,BT(s),s=s.sibling;ne=i,Kc=a,Mt=c}Vv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ne=s):Vv(t)}}function Vv(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||cd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Nn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ev(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ev(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Sl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Mt||e.flags&512&&Gp(e)}catch(f){Je(e,e.return,f)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function Fv(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function jv(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cd(4,e)}catch(l){Je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Je(e,i,l)}}var s=e.return;try{Gp(e)}catch(l){Je(e,s,l)}break;case 5:var o=e.return;try{Gp(e)}catch(l){Je(e,o,l)}}}catch(l){Je(e,e.return,l)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var RC=Math.ceil,mh=Br.ReactCurrentDispatcher,vm=Br.ReactCurrentOwner,Pn=Br.ReactCurrentBatchConfig,Pe=0,gt=null,st=null,St=0,an=0,oo=Oi(0),ht=0,Ml=null,ms=0,ud=0,wm=0,rl=null,Qt=null,Em=0,Ao=1/0,Er=null,yh=!1,Xp=null,vi=null,Gc=!1,ui=null,_h=0,il=0,Jp=null,Cu=-1,Au=0;function zt(){return Pe&6?et():Cu!==-1?Cu:Cu=et()}function wi(t){return t.mode&1?Pe&2&&St!==0?St&-St:pC.transition!==null?(Au===0&&(Au=bS()),Au):(t=Me,t!==0||(t=window.event,t=t===void 0?16:MS(t.type)),t):1}function Bn(t,e,n,r){if(50<il)throw il=0,Jp=null,Error($(185));Xl(t,n,r),(!(Pe&2)||t!==gt)&&(t===gt&&(!(Pe&2)&&(ud|=n),ht===4&&ri(t,St)),en(t,r),n===1&&Pe===0&&!(e.mode&1)&&(Ao=et()+500,od&&Vi()))}function en(t,e){var n=t.callbackNode;pk(t,e);var r=th(t,t===gt?St:0);if(r===0)n!==null&&G_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&G_(n),e===1)t.tag===0?fC(Uv.bind(null,t)):JS(Uv.bind(null,t)),cC(function(){!(Pe&6)&&Vi()}),n=null;else{switch(PS(r)){case 1:n=Kg;break;case 4:n=IS;break;case 16:n=eh;break;case 536870912:n=xS;break;default:n=eh}n=YT(n,$T.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $T(t,e){if(Cu=-1,Au=0,Pe&6)throw Error($(327));var n=t.callbackNode;if(go()&&t.callbackNode!==n)return null;var r=th(t,t===gt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vh(t,r);else{e=r;var i=Pe;Pe|=2;var s=WT();(gt!==t||St!==e)&&(Er=null,Ao=et()+500,cs(t,e));do try{NC();break}catch(a){HT(t,a)}while(!0);om(),mh.current=s,Pe=i,st!==null?e=0:(gt=null,St=0,e=ht)}if(e!==0){if(e===2&&(i=xp(t),i!==0&&(r=i,e=Zp(t,i))),e===1)throw n=Ml,cs(t,0),ri(t,r),en(t,et()),n;if(e===6)ri(t,r);else{if(i=t.current.alternate,!(r&30)&&!DC(i)&&(e=vh(t,r),e===2&&(s=xp(t),s!==0&&(r=s,e=Zp(t,s))),e===1))throw n=Ml,cs(t,0),ri(t,r),en(t,et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Gi(t,Qt,Er);break;case 3:if(ri(t,r),(r&130023424)===r&&(e=Em+500-et(),10<e)){if(th(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Mp(Gi.bind(null,t,Qt,Er),e);break}Gi(t,Qt,Er);break;case 4:if(ri(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RC(r/1960))-r,10<r){t.timeoutHandle=Mp(Gi.bind(null,t,Qt,Er),r);break}Gi(t,Qt,Er);break;case 5:Gi(t,Qt,Er);break;default:throw Error($(329))}}}return en(t,et()),t.callbackNode===n?$T.bind(null,t):null}function Zp(t,e){var n=rl;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=vh(t,e),t!==2&&(e=Qt,Qt=n,e!==null&&eg(e)),t}function eg(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function DC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ri(t,e){for(e&=~wm,e&=~ud,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),r=1<<n;t[n]=-1,e&=~r}}function Uv(t){if(Pe&6)throw Error($(327));go();var e=th(t,0);if(!(e&1))return en(t,et()),null;var n=vh(t,e);if(t.tag!==0&&n===2){var r=xp(t);r!==0&&(e=r,n=Zp(t,r))}if(n===1)throw n=Ml,cs(t,0),ri(t,e),en(t,et()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gi(t,Qt,Er),en(t,et()),null}function Sm(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(Ao=et()+500,od&&Vi())}}function ys(t){ui!==null&&ui.tag===0&&!(Pe&6)&&go();var e=Pe;Pe|=1;var n=Pn.transition,r=Me;try{if(Pn.transition=null,Me=1,t)return t()}finally{Me=r,Pn.transition=n,Pe=e,!(Pe&6)&&Vi()}}function Tm(){an=oo.current,$e(oo)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lC(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(rm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oh();break;case 3:ko(),$e(Jt),$e(Ot),dm();break;case 5:hm(r);break;case 4:ko();break;case 13:$e(Ke);break;case 19:$e(Ke);break;case 10:am(r.type._context);break;case 22:case 23:Tm()}n=n.return}if(gt=t,st=t=Ei(t.current,null),St=an=e,ht=0,Ml=null,wm=ud=ms=0,Qt=rl=null,ts!==null){for(e=0;e<ts.length;e++)if(n=ts[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ts=null}return t}function HT(t,e){do{var n=st;try{if(om(),bu.current=gh,ph){for(var r=Ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ph=!1}if(gs=0,pt=ct=Ge=null,tl=!1,Al=0,vm.current=null,n===null||n.return===null){ht=1,Ml=e,st=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Pv(o);if(g!==null){g.flags&=-257,kv(g,o,a,s,e),g.mode&1&&bv(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){bv(s,c,e),Im();break e}l=Error($(426))}}else if(He&&a.mode&1){var S=Pv(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),kv(S,o,a,s,e),im(Co(l,a));break e}}s=l=Co(l,a),ht!==4&&(ht=2),rl===null?rl=[s]:rl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=PT(s,l,e);wv(s,E);break e;case 1:a=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(vi===null||!vi.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=kT(s,a,e);wv(s,D);break e}}s=s.return}while(s!==null)}KT(n)}catch(N){e=N,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function WT(){var t=mh.current;return mh.current=gh,t===null?gh:t}function Im(){(ht===0||ht===3||ht===2)&&(ht=4),gt===null||!(ms&268435455)&&!(ud&268435455)||ri(gt,St)}function vh(t,e){var n=Pe;Pe|=2;var r=WT();(gt!==t||St!==e)&&(Er=null,cs(t,e));do try{MC();break}catch(i){HT(t,i)}while(!0);if(om(),Pe=n,mh.current=r,st!==null)throw Error($(261));return gt=null,St=0,ht}function MC(){for(;st!==null;)qT(st)}function NC(){for(;st!==null&&!sk();)qT(st)}function qT(t){var e=QT(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?KT(t):st=e,vm.current=null}function KT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PC(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,st=null;return}}else if(n=bC(n,e,an),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ht===0&&(ht=5)}function Gi(t,e,n){var r=Me,i=Pn.transition;try{Pn.transition=null,Me=1,LC(t,e,n,r)}finally{Pn.transition=i,Me=r}return null}function LC(t,e,n,r){do go();while(ui!==null);if(Pe&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(gk(t,s),t===gt&&(st=gt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gc||(Gc=!0,YT(eh,function(){return go(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pn.transition,Pn.transition=null;var o=Me;Me=1;var a=Pe;Pe|=4,vm.current=null,CC(t,n),zT(n,t),tC(Rp),nh=!!Ap,Rp=Ap=null,t.current=n,AC(n),ok(),Pe=a,Me=o,Pn.transition=s}else t.current=n;if(Gc&&(Gc=!1,ui=t,_h=i),s=t.pendingLanes,s===0&&(vi=null),ck(n.stateNode),en(t,et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yh)throw yh=!1,t=Xp,Xp=null,t;return _h&1&&t.tag!==0&&go(),s=t.pendingLanes,s&1?t===Jp?il++:(il=0,Jp=t):il=0,Vi(),null}function go(){if(ui!==null){var t=PS(_h),e=Pn.transition,n=Me;try{if(Pn.transition=null,Me=16>t?16:t,ui===null)var r=!1;else{if(t=ui,ui=null,_h=0,Pe&6)throw Error($(331));var i=Pe;for(Pe|=4,ne=t.current;ne!==null;){var s=ne,o=s.child;if(ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ne=c;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:nl(8,h,s)}var d=h.child;if(d!==null)d.return=h,ne=d;else for(;ne!==null;){h=ne;var f=h.sibling,g=h.return;if(FT(h),h===c){ne=null;break}if(f!==null){f.return=g,ne=f;break}ne=g}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ne=o;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,ne=E;break e}ne=s.return}}var w=t.current;for(ne=w;ne!==null;){o=ne;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ne=b;else e:for(o=w;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cd(9,a)}}catch(N){Je(a,a.return,N)}if(a===o){ne=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ne=D;break e}ne=a.return}}if(Pe=i,Vi(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(td,t)}catch{}r=!0}return r}finally{Me=n,Pn.transition=e}}return!1}function zv(t,e,n){e=Co(n,e),e=PT(t,e,1),t=_i(t,e,1),e=zt(),t!==null&&(Xl(t,1,e),en(t,e))}function Je(t,e,n){if(t.tag===3)zv(t,t,n);else for(;e!==null;){if(e.tag===3){zv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vi===null||!vi.has(r))){t=Co(n,t),t=kT(e,t,1),e=_i(e,t,1),t=zt(),e!==null&&(Xl(e,1,t),en(e,t));break}}e=e.return}}function OC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(St&n)===n&&(ht===4||ht===3&&(St&130023424)===St&&500>et()-Em?cs(t,0):wm|=n),en(t,e)}function GT(t,e){e===0&&(t.mode&1?(e=Fc,Fc<<=1,!(Fc&130023424)&&(Fc=4194304)):e=1);var n=zt();t=Lr(t,e),t!==null&&(Xl(t,e,n),en(t,n))}function VC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GT(t,n)}function FC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),GT(t,n)}var QT;QT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,xC(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,He&&e.flags&1048576&&ZS(e,ch,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ku(t,e),t=e.pendingProps;var i=xo(e,Ot.current);po(e,n),i=pm(null,e,r,t,i,n);var s=gm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zt(r)?(s=!0,ah(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cm(e),i.updater=ld,e.stateNode=i,i._reactInternals=e,Up(e,r,t,n),e=$p(null,e,r,!0,s,n)):(e.tag=0,He&&s&&nm(e),jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ku(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=UC(r),t=Nn(r,t),i){case 0:e=Bp(null,e,r,t,n);break e;case 1:e=Rv(null,e,r,t,n);break e;case 11:e=Cv(null,e,r,t,n);break e;case 14:e=Av(null,e,r,Nn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),Bp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),Rv(t,e,r,i,n);case 3:e:{if(DT(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,sT(t,e),dh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Co(Error($(423)),e),e=Dv(t,e,r,n,i);break e}else if(r!==i){i=Co(Error($(424)),e),e=Dv(t,e,r,n,i);break e}else for(un=yi(e.stateNode.containerInfo.firstChild),dn=e,He=!0,Vn=null,n=rT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bo(),r===i){e=Or(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return oT(e),t===null&&Vp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Dp(r,i)?o=null:s!==null&&Dp(r,s)&&(e.flags|=32),RT(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&Vp(e),null;case 13:return MT(t,e,n);case 4:return um(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Po(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),Cv(t,e,r,i,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Oe(uh,r._currentValue),r._currentValue=o,s!==null)if(Hn(s.value,o)){if(s.children===i.children&&!Jt.current){e=Or(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Cr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Fp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Fp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,po(e,n),i=kn(i),r=r(i),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,i=Nn(r,e.pendingProps),i=Nn(r.type,i),Av(t,e,r,i,n);case 15:return CT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),ku(t,e),e.tag=1,Zt(r)?(t=!0,ah(e)):t=!1,po(e,n),bT(e,r,i),Up(e,r,i,n),$p(null,e,r,!0,t,n);case 19:return NT(t,e,n);case 22:return AT(t,e,n)}throw Error($(156,e.tag))};function YT(t,e){return TS(t,e)}function jC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,n,r){return new jC(t,e,n,r)}function xm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UC(t){if(typeof t=="function")return xm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hg)return 11;if(t===Wg)return 14}return 2}function Ei(t,e){var n=t.alternate;return n===null?(n=xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ru(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")xm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ys:return us(n.children,i,s,e);case $g:o=8,i|=8;break;case up:return t=xn(12,n,e,i|2),t.elementType=up,t.lanes=s,t;case hp:return t=xn(13,n,e,i),t.elementType=hp,t.lanes=s,t;case dp:return t=xn(19,n,e,i),t.elementType=dp,t.lanes=s,t;case oS:return hd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iS:o=10;break e;case sS:o=9;break e;case Hg:o=11;break e;case Wg:o=14;break e;case ei:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=xn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function us(t,e,n,r){return t=xn(7,t,r,e),t.lanes=n,t}function hd(t,e,n,r){return t=xn(22,t,r,e),t.elementType=oS,t.lanes=n,t.stateNode={isHidden:!1},t}function kf(t,e,n){return t=xn(6,t,null,e),t.lanes=n,t}function Cf(t,e,n){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cf(0),this.expirationTimes=cf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bm(t,e,n,r,i,s,o,a,l){return t=new zC(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cm(s),t}function BC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function XT(t){if(!t)return ki;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Zt(n))return XS(t,n,e)}return e}function JT(t,e,n,r,i,s,o,a,l){return t=bm(n,r,!0,t,i,s,o,a,l),t.context=XT(null),n=t.current,r=zt(),i=wi(n),s=Cr(r,i),s.callback=e??null,_i(n,s,i),t.current.lanes=i,Xl(t,i,r),en(t,r),t}function dd(t,e,n,r){var i=e.current,s=zt(),o=wi(i);return n=XT(n),e.context===null?e.context=n:e.pendingContext=n,e=Cr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_i(i,e,o),t!==null&&(Bn(t,i,o,s),xu(t,i,o)),o}function wh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Pm(t,e){Bv(t,e),(t=t.alternate)&&Bv(t,e)}function $C(){return null}var ZT=typeof reportError=="function"?reportError:function(t){console.error(t)};function km(t){this._internalRoot=t}fd.prototype.render=km.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));dd(t,e,null,null)};fd.prototype.unmount=km.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){dd(null,t,null,null)}),e[Nr]=null}};function fd(t){this._internalRoot=t}fd.prototype.unstable_scheduleHydration=function(t){if(t){var e=AS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ni.length&&e!==0&&e<ni[n].priority;n++);ni.splice(n,0,t),n===0&&DS(t)}};function Cm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $v(){}function HC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=wh(o);s.call(c)}}var o=JT(e,r,t,0,null,!1,!1,"",$v);return t._reactRootContainer=o,t[Nr]=o.current,xl(t.nodeType===8?t.parentNode:t),ys(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=wh(l);a.call(c)}}var l=bm(t,0,!1,null,null,!1,!1,"",$v);return t._reactRootContainer=l,t[Nr]=l.current,xl(t.nodeType===8?t.parentNode:t),ys(function(){dd(e,l,n,r)}),l}function gd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=wh(o);a.call(l)}}dd(e,o,t,i)}else o=HC(n,e,t,i,r);return wh(o)}kS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=La(e.pendingLanes);n!==0&&(Gg(e,n|1),en(e,et()),!(Pe&6)&&(Ao=et()+500,Vi()))}break;case 13:ys(function(){var r=Lr(t,1);if(r!==null){var i=zt();Bn(r,t,1,i)}}),Pm(t,1)}};Qg=function(t){if(t.tag===13){var e=Lr(t,134217728);if(e!==null){var n=zt();Bn(e,t,134217728,n)}Pm(t,134217728)}};CS=function(t){if(t.tag===13){var e=wi(t),n=Lr(t,e);if(n!==null){var r=zt();Bn(n,t,e,r)}Pm(t,e)}};AS=function(){return Me};RS=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};Sp=function(t,e,n){switch(e){case"input":if(gp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sd(r);if(!i)throw Error($(90));lS(r),gp(r,i)}}}break;case"textarea":uS(t,n);break;case"select":e=n.value,e!=null&&co(t,!!n.multiple,e,!1)}};yS=Sm;_S=ys;var WC={usingClientEntryPoint:!1,Events:[Zl,eo,sd,gS,mS,Sm]},xa={findFiberByHostInstance:es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qC={bundleType:xa.bundleType,version:xa.version,rendererPackageName:xa.rendererPackageName,rendererConfig:xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Br.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ES(t),t===null?null:t.stateNode},findFiberByHostInstance:xa.findFiberByHostInstance||$C,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{td=Qc.inject(qC),ir=Qc}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WC;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cm(e))throw Error($(200));return BC(t,e,null,n)};pn.createRoot=function(t,e){if(!Cm(t))throw Error($(299));var n=!1,r="",i=ZT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bm(t,1,!1,null,null,n,!1,r,i),t[Nr]=e.current,xl(t.nodeType===8?t.parentNode:t),new km(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=ES(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return ys(t)};pn.hydrate=function(t,e,n){if(!pd(e))throw Error($(200));return gd(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!Cm(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ZT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JT(e,null,t,1,n??null,i,!1,s,o),t[Nr]=e.current,xl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new fd(e)};pn.render=function(t,e,n){if(!pd(e))throw Error($(200));return gd(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!pd(t))throw Error($(40));return t._reactRootContainer?(ys(function(){gd(null,null,t,!1,function(){t._reactRootContainer=null,t[Nr]=null})}),!0):!1};pn.unstable_batchedUpdates=Sm;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pd(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return gd(t,e,n,!1,r)};pn.version="18.3.1-next-f1338f8080-20240426";function eI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eI)}catch(t){console.error(t)}}eI(),eS.exports=pn;var tI=eS.exports,nI,Hv=tI;nI=Hv.createRoot,Hv.hydrateRoot;const Wv="pushstate",qv="popstate",rI="beforeunload",iI=t=>(t.preventDefault(),t.returnValue=""),KC=()=>{removeEventListener(rI,iI,{capture:!0})};function sI(t){let e=t.getLocation();const n=new Set;let r=[];const i=()=>{e=t.getLocation(),n.forEach(o=>o({location:e}))},s=async(o,a)=>{var l;if(!((a==null?void 0:a.ignoreBlocker)??!1)&&typeof document<"u"&&r.length){for(const h of r)if(!await h()){(l=t.onBlocked)==null||l.call(t,i);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,a,l)=>{a=Kv(a),s(()=>{t.pushState(o,a),i()},l)},replace:(o,a,l)=>{a=Kv(a),s(()=>{t.replaceState(o,a),i()},l)},go:(o,a)=>{s(()=>{t.go(o),i()},a)},back:o=>{s(()=>{t.back(),i()},o)},forward:o=>{s(()=>{t.forward(),i()},o)},createHref:o=>t.createHref(o),block:o=>(r.push(o),r.length===1&&addEventListener(rI,iI,{capture:!0}),()=>{r=r.filter(a=>a!==o),r.length||KC()}),flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:i}}function Kv(t){return t||(t={}),{...t,key:YC()}}function GC(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState,i=v=>v,s=()=>Eh(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let o=s(),a;const l=()=>o;let c,h;const d=()=>{c&&(y._ignoreSubscribers=!0,(c.isPush?e.history.pushState:e.history.replaceState)(c.state,"",c.href),y._ignoreSubscribers=!1,c=void 0,h=void 0,a=void 0)},f=(v,S,E)=>{const w=i(S);h||(a=o),o=Eh(S,E),c={href:w,state:E,isPush:(c==null?void 0:c.isPush)||v==="push"},h||(h=Promise.resolve().then(()=>d()))},g=()=>{o=s(),y.notify()},y=sI({getLocation:l,getLength:()=>e.history.length,pushState:(v,S)=>f("push",v,S),replaceState:(v,S)=>f("replace",v,S),back:()=>e.history.back(),forward:()=>e.history.forward(),go:v=>e.history.go(v),createHref:v=>i(v),flush:d,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(Wv,g),e.removeEventListener(qv,g)},onBlocked:v=>{a&&o!==a&&(o=a,v())}});return e.addEventListener(Wv,g),e.addEventListener(qv,g),e.history.pushState=function(...v){const S=n.apply(e.history,v);return y._ignoreSubscribers||g(),S},e.history.replaceState=function(...v){const S=r.apply(e.history,v);return y._ignoreSubscribers||g(),S},y}function QC(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex??e.length-1;const r=e.map(()=>({}));return sI({getLocation:()=>Eh(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function Eh(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{}}}function YC(){return(Math.random()+1).toString(36).substring(7)}var XC="Invariant failed";function Gt(t,e){if(!t)throw new Error(XC)}const Af=W.createContext(null);function oI(){return typeof document>"u"?Af:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Af,Af)}function $r(t){const e=W.useContext(oI());return t==null||t.warn,e}var aI={exports:{}},lI={},cI={exports:{}},uI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ro=W;function JC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ZC=typeof Object.is=="function"?Object.is:JC,eA=Ro.useState,tA=Ro.useEffect,nA=Ro.useLayoutEffect,rA=Ro.useDebugValue;function iA(t,e){var n=e(),r=eA({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return nA(function(){i.value=n,i.getSnapshot=e,Rf(i)&&s({inst:i})},[t,n,e]),tA(function(){return Rf(i)&&s({inst:i}),t(function(){Rf(i)&&s({inst:i})})},[t]),rA(n),n}function Rf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ZC(t,n)}catch{return!0}}function sA(t,e){return e()}var oA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sA:iA;uI.useSyncExternalStore=Ro.useSyncExternalStore!==void 0?Ro.useSyncExternalStore:oA;cI.exports=uI;var aA=cI.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md=W,lA=aA;function cA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uA=typeof Object.is=="function"?Object.is:cA,hA=lA.useSyncExternalStore,dA=md.useRef,fA=md.useEffect,pA=md.useMemo,gA=md.useDebugValue;lI.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=dA(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=pA(function(){function l(g){if(!c){if(c=!0,h=g,g=r(g),i!==void 0&&o.hasValue){var y=o.value;if(i(y,g))return d=y}return d=g}if(y=d,uA(h,g))return y;var v=r(g);return i!==void 0&&i(y,v)?(h=g,y):(h=g,d=v)}var c=!1,h,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=hA(t,s[0],s[1]);return fA(function(){o.hasValue=!0,o.value=a},[a]),gA(a),a};aI.exports=lI;var mA=aI.exports;class yA{constructor(e,n){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o==null||o()}},this.setState=r=>{var i,s,o;const a=this.state;this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(a)(r):r(a),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),this._flush()},this._flush=()=>{if(this._batching)return;const r=++this._flushing;this.listeners.forEach(i=>{this._flushing===r&&i()})},this.batch=r=>{if(this._batching)return r();this._batching=!0,r(),this._batching=!1,this._flush()},this.state=e,this.options=n}}function _A(t,e=n=>n){return mA.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,vA)}function vA(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}const ln="__root__";function wA(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function Gv(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function EA(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const a=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],Gv(a)):i[r]=Gv(a)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const SA=IA(JSON.parse),TA=xA(JSON.stringify,JSON.parse);function IA(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=EA(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function xA(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=wA(r).toString();return i?`?${i}`:""}}function sl(t){return t[t.length-1]}function bA(t){return typeof t=="function"}function ao(t,e){return bA(t)?t(e):t}function Du(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function wn(t,e){if(t===e)return t;const n=e,r=Yv(t)&&Yv(n);if(r||Do(t)&&Do(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),a=o.length,l=r?[]:{};let c=0;for(let h=0;h<a;h++){const d=r?h:o[h];(!r&&i.includes(d)||r)&&t[d]===void 0&&n[d]===void 0?(l[d]=void 0,c++):(l[d]=wn(t[d],n[d]),l[d]===t[d]&&t[d]!==void 0&&c++)}return s===a&&c===s?t:l}return n}function Do(t){if(!Qv(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!Qv(n)||!n.hasOwnProperty("isPrototypeOf"))}function Qv(t){return Object.prototype.toString.call(t)==="[object Object]"}function Yv(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Xv(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function mo(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Do(t)&&Do(e)){const r=(n==null?void 0:n.ignoreUndefined)??!0,i=Xv(t,r),s=Xv(e,r);return!(n!=null&&n.partial)&&i.length!==s.length?!1:s.every(o=>mo(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!mo(r,e[i],n)):!1}const Va=typeof window<"u"?W.useLayoutEffect:W.useEffect;function Hs(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t==null||t(i)},r.reject=i=>{r.status="rejected",n(i)},r}function Df(t){const e=W.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function PA(t,e,n={},r={}){const i=W.useRef(typeof IntersectionObserver=="function"),s=W.useRef(null);return W.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function kA(t){const e=W.useRef(null);return W.useEffect(()=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)}),e}function Ar(t){return yd(t.filter(e=>e!==void 0).join("/"))}function yd(t){return t.replace(/\/{2,}/g,"/")}function Am(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function rs(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function CA(t){return rs(Am(t))}function Sh(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function AA(t,e,n){return Sh(t,n)===Sh(e,n)}function RA({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=Th(t,e,i),n=Th(t,n,i);let a=Mo(e);const l=Mo(n);a.length>1&&((s=sl(a))==null?void 0:s.value)==="/"&&a.pop(),l.forEach((h,d)=>{h.value==="/"?d?d===l.length-1&&a.push(h):a=[h]:h.value===".."?a.pop():h.value==="."||a.push(h)}),a.length>1&&(((o=sl(a))==null?void 0:o.value)==="/"?r==="never"&&a.pop():r==="always"&&a.push({type:"pathname",value:"/"}));const c=Ar([t,...a.map(h=>h.value)]);return yd(c)}function Mo(t){if(!t)return[];t=yd(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function Yc({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=Mo(t),o={};for(const[a,l]of Object.entries(e)){const c=typeof l=="string";["*","_splat"].includes(a)?o[a]=c?encodeURI(l):l:o[a]=c?DA(l,i):l}return Ar(s.map(a=>{if(a.type==="wildcard"){const l=o._splat;return n?`${a.value}${l??""}`:l}if(a.type==="param"){if(r){const l=o[a.value];return`${a.value}${l??""}`}return o[a.value.substring(1)]??"undefined"}return a.value}))}function DA(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function Xc(t,e,n){const r=MA(t,e,n);if(!(n.to&&!r))return r??{}}function Th(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function MA(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=Th(t,e,n.caseSensitive);const r=Th(t,`${n.to??"$"}`,n.caseSensitive),i=Mo(e),s=Mo(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let l=0;l<Math.max(i.length,s.length);l++){const c=i[l],h=s[l],d=l>=i.length-1,f=l>=s.length-1;if(h){if(h.type==="wildcard"){const g=decodeURI(Ar(i.slice(l).map(y=>y.value)));return o["*"]=g,o._splat=g,!0}if(h.type==="pathname"){if(h.value==="/"&&!(c!=null&&c.value))return!0;if(c){if(n.caseSensitive){if(h.value!==c.value)return!1}else if(h.value.toLowerCase()!==c.value.toLowerCase())return!1}}if(!c)return!1;if(h.type==="param"){if(c.value==="/")return!1;c.value.charAt(0)!=="$"&&(o[h.value.substring(1)]=decodeURIComponent(c.value))}}if(!d&&f)return o["**"]=Ar(i.slice(l+1).map(g=>g.value)),!!n.fuzzy&&(h==null?void 0:h.value)!=="/"}return!0})()?o:void 0}function NA(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},t.throw)throw t;return t}function Qi(t){return!!(t!=null&&t.isRedirect)}function Mf(t){return!!(t!=null&&t.isRedirect)&&t.href}function Rm(t){const e=t.errorComponent??_d;return C.jsx(LA,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?W.createElement(e,{error:n,reset:r}):t.children})}class LA extends W.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function _d({error:t}){const[e,n]=W.useState(!1);return C.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[C.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),C.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),C.jsx("div",{style:{height:".25rem"}}),e?C.jsx("div",{children:C.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?C.jsx("code",{children:t.message}):null})}):null]})}function tn(t){const e=$r({warn:(t==null?void 0:t.router)===void 0}),n=(t==null?void 0:t.router)||e,r=W.useRef();return _A(n.__store,i=>{if(t!=null&&t.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=wn(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}function On(t){return!!(t!=null&&t.isNotFound)}function OA(t){const e=tn({select:n=>`not-found-${n.location.pathname}-${n.status}`});return C.jsx(Rm,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(On(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(On(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function VA(){return C.jsx("p",{children:"Not Found"})}const FA={stringify:t=>JSON.stringify(t,function(n,r){const i=this[n],s=Jv.find(o=>o.stringifyCondition(i));return s?s.stringify(i):r}),parse:t=>JSON.parse(t,function(n,r){const i=this[n],s=Jv.find(o=>o.parseCondition(i));return s?s.parse(i):r})},Jv=[{stringifyCondition:t=>t instanceof Date,stringify:t=>({$date:t.toISOString()}),parseCondition:t=>Do(t)&&t.$date,parse:t=>new Date(t.$date)},{stringifyCondition:t=>t===void 0,stringify:()=>({$undefined:""}),parseCondition:t=>Do(t)&&t.$undefined==="",parse:()=>{}}],hI=["component","errorComponent","pendingComponent","notFoundComponent"];function jA(t){var e;for(const n of hI)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function Nf(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new tg("Async validation not supported");if(n.issues)throw new tg(JSON.stringify(n.issues,void 0,2));return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function UA(t){return new zA(t)}class zA{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${CA(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?QC({initialEntries:[this.basepath||"/"]}):GC()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new yA($A(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((a,l)=>{a.init({originalIndex:l,defaultSsr:this.options.defaultSsr});const c=this.routesById[a.id];if(Gt(!c,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const d=rs(a.fullPath);(!this.routesByPath[d]||a.fullPath.endsWith("/"))&&(this.routesByPath[d]=a)}const h=a.children;h!=null&&h.length&&r(h)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,a)=>{var l;if(o.isRoot||!o.path)return;const c=Am(o.fullPath),h=Mo(c);for(;h.length>1&&((l=h[0])==null?void 0:l.value)==="/";)h.shift();const d=h.map(f=>f.value==="/"?.75:f.type==="param"?.5:f.type==="wildcard"?.25:1);i.push({child:o,trimmed:c,parsed:h,index:a,scores:d})}),this.flatRoutes=i.sort((o,a)=>{const l=Math.min(o.scores.length,a.scores.length);for(let c=0;c<l;c++)if(o.scores[c]!==a.scores[c])return a.scores[c]-o.scores[c];if(o.scores.length!==a.scores.length)return a.scores.length-o.scores.length;for(let c=0;c<l;c++)if(o.parsed[c].value!==a.parsed[c].value)return o.parsed[c].value>a.parsed[c].value?1:-1;return o.index-a.index}).map((o,a)=>(o.child.rank=a,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=n=>{const r=({pathname:a,search:l,hash:c,state:h})=>{const d=this.options.parseSearch(l),f=this.options.stringifySearch(d);return{pathname:a,searchStr:f,search:wn(n==null?void 0:n.search,d),hash:c.split("#").reverse()[0]??"",href:`${a}${f}${c}`,state:wn(n==null?void 0:n.state,h)}},i=r(this.history.location),{__tempLocation:s,__tempKey:o}=i.state;if(s&&(!o||o===this.tempLocationKey)){const a=r(s);return a.state.key=i.state.key,delete a.state.__tempLocation,{...a,maskedLocation:i}}return i},this.resolvePathWithBase=(n,r)=>RA({basepath:this.basepath,base:n,to:yd(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=rs(n.pathname),o=h=>Xc(this.basepath,s,{to:h.fullPath,caseSensitive:h.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let a=(r==null?void 0:r.to)!==void 0?this.routesByPath[r.to]:void 0;a?i=o(a):a=this.flatRoutes.find(h=>{const d=o(h);return d?(i=d,!0):!1});let l=a||this.routesById[ln];const c=[l];for(;l.parentRoute;)l=l.parentRoute,c.unshift(l);return{matchedRoutes:c,routeParams:i,foundRoute:a}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var a,l,c,h,d,f;const g=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,y=s.from!=null?g.find(R=>Xc(this.basepath,rs(R.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,v=(y==null?void 0:y.pathname)||this.latestLocation.pathname;Gt(s.from==null||y!=null,"Could not find match for from: "+s.from);const S=(a=this.state.pendingMatches)!=null&&a.length?(l=sl(this.state.pendingMatches))==null?void 0:l.search:((c=sl(g))==null?void 0:c.search)||this.latestLocation.search,E=o==null?void 0:o.matchedRoutes.filter(R=>g.find(A=>A.routeId===R.id));let w;if(s.to)w=this.resolvePathWithBase(v,`${s.to}`);else{const R=this.routesById[(h=E==null?void 0:E.find(A=>{const k=Yc({path:A.fullPath,params:(o==null?void 0:o.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap});return Ar([this.basepath,k])===v}))==null?void 0:h.id];w=this.resolvePathWithBase(v,(R==null?void 0:R.to)??v)}const b={...(d=sl(g))==null?void 0:d.params};let D=(s.params??!0)===!0?b:{...b,...ao(s.params,b)};Object.keys(D).length>0&&(o==null||o.matchedRoutes.map(R=>{var A;return((A=R.options.params)==null?void 0:A.stringify)??R.options.stringifyParams}).filter(Boolean).forEach(R=>{D={...D,...R(D)}})),w=Yc({path:w,params:D??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let N=S;if(n._includeValidateSearch&&((f=this.options.search)!=null&&f.strict)){let R={};o==null||o.matchedRoutes.forEach(A=>{try{A.options.validateSearch&&(R={...R,...Nf(A.options.validateSearch,{...R,...N})??{}})}catch{}}),N=R}N=(R=>{const A=(o==null?void 0:o.matchedRoutes.reduce((J,ie)=>{var ae;const B=[];if("search"in ie.options)(ae=ie.options.search)!=null&&ae.middlewares&&B.push(...ie.options.search.middlewares);else if(ie.options.preSearchFilters||ie.options.postSearchFilters){const Y=({search:Z,next:ge})=>{let re=Z;"preSearchFilters"in ie.options&&ie.options.preSearchFilters&&(re=ie.options.preSearchFilters.reduce((ye,pe)=>pe(ye),Z));const le=ge(re);return"postSearchFilters"in ie.options&&ie.options.postSearchFilters?ie.options.postSearchFilters.reduce((ye,pe)=>pe(ye),le):le};B.push(Y)}if(n._includeValidateSearch&&ie.options.validateSearch){const Y=({search:Z,next:ge})=>{try{const re=ge(Z);return{...re,...Nf(ie.options.validateSearch,re)??{}}}catch{}};B.push(Y)}return J.concat(B)},[]))??[],k=({search:J})=>s.search?s.search===!0?J:ao(s.search,J):{};A.push(k);const q=(J,ie)=>{if(J>=A.length)return ie;const ae=A[J];return ae({search:ie,next:Y=>q(J+1,Y)})};return q(0,R)})(N),N=wn(S,N);const I=this.options.stringifySearch(N),_=s.hash===!0?this.latestLocation.hash:s.hash?ao(s.hash,this.latestLocation.hash):void 0,T=_?`#${_}`:"";let P=s.state===!0?this.latestLocation.state:s.state?ao(s.state,this.latestLocation.state):{};return P=wn(this.latestLocation.state,P),{pathname:w,search:N,searchStr:I,state:P,hash:_??"",href:`${w}${I}${T}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var a;const l=r(s);let c=o?r(o):void 0;if(!c){let f={};const g=(a=this.options.routeMasks)==null?void 0:a.find(y=>{const v=Xc(this.basepath,l.pathname,{to:y.from,caseSensitive:!1,fuzzy:!1});return v?(f=v,!0):!1});if(g){const{from:y,...v}=g;o={...Du(n,["from"]),...v,params:f},c=r(o)}}const h=this.getMatchedRoutes(l,s),d=r(s,h);if(c){const f=this.getMatchedRoutes(c,o),g=r(o,f);d.maskedLocation=g}return d};return n.mask?i(n,{...Du(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const l=mo(i.state,this.latestLocation.state);return delete i.state.key,l},o=this.latestLocation.href===i.href,a=this.commitLocationPromise;if(this.commitLocationPromise=Hs(()=>{a==null||a.resolve()}),o&&s())this.load();else{let{maskedLocation:l,...c}=i;l&&(c={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...c,search:c.searchStr,state:{...c.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(c.unmaskOnReload??this.options.unmaskOnReload??!1)&&(c.state.__tempKey=this.tempLocationKey)),this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](c.href,c.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,viewTransition:i,ignoreBlocker:s,...o}={})=>{const a=o.href;if(a){const c=Eh(a,{});o.to=c.pathname,o.search=this.options.parseSearch(c.search),o.hash=c.hash.slice(1)}const l=this.buildLocation({...o,_includeValidateSearch:!0});return this.commitLocation({...l,viewTransition:i,replace:n,resetScroll:r,ignoreBlocker:s})},this.navigate=({to:n,...r})=>{const i=String(n);let s;try{new URL(`${i}`),s=!0}catch{}return Gt(!s),this.buildAndCommitLocation({...r,to:n})},this.load=async()=>{this.latestLocation=this.parseLocation(this.latestLocation);let n,r,i;for(i=new Promise(s=>{this.startReactTransition(async()=>{var o;try{const a=this.latestLocation,l=this.state.resolvedLocation,c=l.href!==a.href,h=l.pathname!==a.pathname;this.cancelMatches();let d;this.__store.batch(()=>{d=this.matchRoutes(a),this.__store.setState(f=>({...f,status:"pending",isLoading:!0,location:a,pendingMatches:d,cachedMatches:f.cachedMatches.filter(g=>!d.find(y=>y.id===g.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:l,toLocation:a,pathChanged:h,hrefChanged:c}),this.emit({type:"onBeforeLoad",fromLocation:l,toLocation:a,pathChanged:h,hrefChanged:c}),await this.loadMatches({matches:d,location:a,onReady:async()=>{this.startViewTransition(async()=>{let f,g,y;this.__store.batch(()=>{this.__store.setState(v=>{const S=v.matches,E=v.pendingMatches||v.matches;return f=S.filter(w=>!E.find(b=>b.id===w.id)),g=E.filter(w=>!S.find(b=>b.id===w.id)),y=S.filter(w=>E.find(b=>b.id===w.id)),{...v,isLoading:!1,loadedAt:Date.now(),matches:E,pendingMatches:void 0,cachedMatches:[...v.cachedMatches,...f.filter(w=>w.status!=="error")]}}),this.clearExpiredCache()}),[[f,"onLeave"],[g,"onEnter"],[y,"onStay"]].forEach(([v,S])=>{v.forEach(E=>{var w,b;(b=(w=this.looseRoutesById[E.routeId].options)[S])==null||b.call(w,E)})})})}})}catch(a){Mf(a)?(n=a,this.isServer||this.navigate({...a,replace:!0,ignoreBlocker:!0})):On(a)&&(r=a),this.__store.setState(l=>({...l,statusCode:n?n.statusCode:r?404:l.matches.some(c=>c.status==="error")?500:200,redirect:n}))}this.latestLoadPromise===i&&((o=this.commitLocationPromise)==null||o.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),s()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(h=>h.id===n),a=this.state.matches.find(h=>h.id===n),l=this.state.cachedMatches.find(h=>h.id===n),c=o?"pendingMatches":a?"matches":l?"cachedMatches":"";return c&&this.__store.setState(h=>{var d;return{...h,[c]:(d=h[c])==null?void 0:d.map(f=>f.id===n?s=r(f):f)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch})=>{let a,l=!1;const c=async()=>{l||(l=!0,await(s==null?void 0:s()))},h=f=>!!(i&&!this.state.matches.find(g=>g.id===f));!this.isServer&&!this.state.matches.length&&c();const d=(f,g)=>{var y,v,S;if(Mf(g))throw g;if(Qi(g)||On(g)){if(o(f.id,E=>({...E,status:Qi(g)?"redirected":On(g)?"notFound":"error",isFetching:!1,error:g,beforeLoadPromise:void 0,loaderPromise:void 0})),g.routeId||(g.routeId=f.routeId),(y=f.beforeLoadPromise)==null||y.resolve(),(v=f.loaderPromise)==null||v.resolve(),(S=f.loadPromise)==null||S.resolve(),Qi(g))throw l=!0,g=this.resolveRedirect({...g,_fromLocation:n}),g;if(On(g))throw this._handleNotFound(r,g,{updateMatch:o}),g}};try{await new Promise((f,g)=>{(async()=>{var y,v,S;try{const E=(D,N,V)=>{var I,_;const{id:T,routeId:P}=r[D],R=this.looseRoutesById[P];if(N instanceof Promise)throw N;N.routerCode=V,a=a??D,d(this.getMatch(T),N);try{(_=(I=R.options).onError)==null||_.call(I,N)}catch(A){N=A,d(this.getMatch(T),N)}o(T,A=>{var k,q;return(k=A.beforeLoadPromise)==null||k.resolve(),(q=A.loadPromise)==null||q.resolve(),{...A,error:N,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[D,{id:N,routeId:V}]of r.entries()){const I=this.getMatch(N),_=(y=r[D-1])==null?void 0:y.id,T=this.looseRoutesById[V],P=T.options.pendingMs??this.options.defaultPendingMs,R=!!(s&&!this.isServer&&!h(N)&&(T.options.loader||T.options.beforeLoad)&&typeof P=="number"&&P!==1/0&&(T.options.pendingComponent??this.options.defaultPendingComponent));let A=!0;if((I.beforeLoadPromise||I.loaderPromise)&&(R&&setTimeout(()=>{try{c()}catch{}},P),await I.beforeLoadPromise,A=this.getMatch(N).status!=="success"),A){try{o(N,pe=>({...pe,loadPromise:Hs(()=>{var ve;(ve=pe.loadPromise)==null||ve.resolve()}),beforeLoadPromise:Hs()}));const k=new AbortController;let q;R&&(q=setTimeout(()=>{try{c()}catch{}},P));const{paramsError:J,searchError:ie}=this.getMatch(N);J&&E(D,J,"PARSE_PARAMS"),ie&&E(D,ie,"VALIDATE_SEARCH");const ae=()=>_?this.getMatch(_).context:this.options.context??{};o(N,pe=>({...pe,isFetching:"beforeLoad",fetchCount:pe.fetchCount+1,abortController:k,pendingTimeout:q,context:{...ae(),...pe.__routeContext,...pe.__beforeLoadContext}}));const{search:B,params:Y,context:Z,cause:ge}=this.getMatch(N),re=h(N),le={search:B,abortController:k,params:Y,preload:re,context:Z,location:n,navigate:pe=>this.navigate({...pe,_fromLocation:n}),buildLocation:this.buildLocation,cause:re?"preload":ge,matches:r};let ye=await((S=(v=T.options).beforeLoad)==null?void 0:S.call(v,le))??{};this.serializeLoaderData&&(ye=this.serializeLoaderData("__beforeLoadContext",ye,{router:this,match:this.getMatch(N)})),(Qi(ye)||On(ye))&&E(D,ye,"BEFORE_LOAD"),o(N,pe=>({...pe,__beforeLoadContext:ye,context:{...ae(),...pe.__routeContext,...ye},abortController:k}))}catch(k){E(D,k,"BEFORE_LOAD")}o(N,k=>{var q;return(q=k.beforeLoadPromise)==null||q.resolve(),{...k,beforeLoadPromise:void 0,isFetching:!1}})}}const w=r.slice(0,a),b=[];w.forEach(({id:D,routeId:N},V)=>{b.push((async()=>{const{loaderPromise:I}=this.getMatch(D);let _=!1;if(I)await I;else{const T=b[V-1],P=this.looseRoutesById[N],R=()=>{const{params:re,loaderDeps:le,abortController:ye,context:pe,cause:ve}=this.getMatch(D),rt=h(D);return{params:re,deps:le,preload:!!rt,parentMatchPromise:T,abortController:ye,context:pe,location:n,navigate:mn=>this.navigate({...mn,_fromLocation:n}),cause:rt?"preload":ve,route:P}},A=Date.now()-this.getMatch(D).updatedAt,k=h(D),q=k?P.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:P.options.staleTime??this.options.defaultStaleTime??0,J=P.options.shouldReload,ie=typeof J=="function"?J(R()):J;o(D,re=>({...re,loaderPromise:Hs(),preload:!!k&&!this.state.matches.find(le=>le.id===D)}));const ae=async()=>{var re,le,ye,pe,ve,rt,mn,Kn;try{const rn=async()=>{const Fe=this.getMatch(D);Fe.minPendingPromise&&await Fe.minPendingPromise};try{P._lazyPromise===void 0&&(P.lazyFn?P._lazyPromise=P.lazyFn().then(sn=>{const{id:M,...L}=sn.options;Object.assign(P.options,L)}):P._lazyPromise=Promise.resolve()),P._componentsPromise===void 0&&(P._componentsPromise=P._lazyPromise.then(()=>Promise.all(hI.map(async sn=>{const M=P.options[sn];M!=null&&M.preload&&await M.preload()})))),o(D,sn=>({...sn,isFetching:"loader"}));let Fe=await((le=(re=P.options).loader)==null?void 0:le.call(re,R()));this.serializeLoaderData&&(Fe=this.serializeLoaderData("loaderData",Fe,{router:this,match:this.getMatch(D)})),d(this.getMatch(D),Fe),await P._lazyPromise,await rn();const yt=(pe=(ye=P.options).head)==null?void 0:pe.call(ye,{matches:r,match:this.getMatch(D),params:this.getMatch(D).params,loaderData:Fe}),at=yt==null?void 0:yt.meta,yn=yt==null?void 0:yt.links,Gn=yt==null?void 0:yt.scripts,qr=(rt=(ve=P.options).headers)==null?void 0:rt.call(ve,{loaderData:Fe});o(D,sn=>({...sn,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Fe,meta:at,links:yn,scripts:Gn,headers:qr}))}catch(Fe){let yt=Fe;await rn(),d(this.getMatch(D),Fe);try{(Kn=(mn=P.options).onError)==null||Kn.call(mn,Fe)}catch(at){yt=at,d(this.getMatch(D),at)}o(D,at=>({...at,error:yt,status:"error",isFetching:!1}))}await P._componentsPromise}catch(rn){o(D,Fe=>({...Fe,loaderPromise:void 0})),d(this.getMatch(D),rn)}},{status:B,invalid:Y}=this.getMatch(D);_=B==="success"&&(Y||(ie??A>q)),k&&P.options.preload===!1||(_?(async()=>{try{await ae()}catch(re){Mf(re)&&await this.navigate(re)}})():B!=="success"&&await ae());const{loaderPromise:Z,loadPromise:ge}=this.getMatch(D);Z==null||Z.resolve(),ge==null||ge.resolve()}return o(D,T=>({...T,isFetching:_?T.isFetching:!1,loaderPromise:void 0,invalid:!1})),this.getMatch(D)})())}),await Promise.all(b),f()}catch(E){g(E)}})()}),await c()}catch(f){if(Qi(f)||On(f))throw On(f)&&!i&&await c(),f}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n==null?void 0:n.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load()},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n==null?void 0:n.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),o=new Set([...s,...this.state.cachedMatches.map(a=>a.id)]);this.__store.batch(()=>{i.forEach(a=>{o.has(a.id)||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,a]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(a,l)=>{s.has(a)?i=i.map(c=>c.id===a?l(c):c):this.updateMatch(a,l)}}),i}catch(a){if(Qi(a))return await this.preloadRoute({...a,_fromLocation:r});console.error(a);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r!=null&&r.pending&&this.state.status!=="pending")return!1;const a=((r==null?void 0:r.pending)===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,l=Xc(this.basepath,a.pathname,{...r,to:s.pathname});return!l||n.params&&!mo(l,n.params,{partial:!0})?!1:l&&((r==null?void 0:r.includeSearch)??!0)?mo(a.search,s.search,{partial:!0})?l:!1:l},this.dehydrate=()=>{var n;const r=((n=this.options.errorSerializer)==null?void 0:n.serialize)??HA;return{state:{dehydratedMatches:this.state.matches.map(i=>({...Du(i,["id","status","updatedAt"]),error:i.error?{data:r(i.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var n,r,i;let s;typeof document<"u"&&(s=this.options.transformer.parse((n=window.__TSR__)==null?void 0:n.dehydrated)),Gt(s),this.dehydratedData=s.payload,(i=(r=this.options).hydrate)==null||i.call(r,s.payload);const o=s.router.state,a=this.matchRoutes(this.state.location).map(l=>{const c=o.dehydratedMatches.find(h=>h.id===l.id);return Gt(c,`Could not find a client-side match for dehydrated match with id: ${l.id}!`),{...l,...c}});this.__store.setState(l=>({...l,matches:a})),this.manifest=s.router.manifest},this.injectedHtml=[],this.injectHtml=n=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(i=>i!==r),n);this.injectedHtml.push(r)},this.injectScript=(n,r)=>{this.injectHtml(`<script class='tsr-once'>${n}; __TSR__.cleanScripts()<\/script>`)},this.streamedKeys=new Set,this.getStreamedValue=n=>{var r;if(this.isServer)return;const i=(r=window.__TSR__)==null?void 0:r.streamedValues[n];if(i)return i.parsed||(i.parsed=this.options.transformer.parse(i.value)),i.parsed},this.streamValue=(n,r)=>{var i;this.streamedKeys.has(n),this.streamedKeys.add(n),this.injectScript(`__TSR__.streamedValues['${n}'] = { value: ${(i=this.serializer)==null?void 0:i.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(l=>[l.routeId,l]));let o=(r.global?this.looseRoutesById[ln]:this.looseRoutesById[r.routeId])||this.looseRoutesById[ln];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==ln;)o=o.parentRoute,Gt(o);const a=s[o.id];Gt(a,"Could not find match for route: "+o.id),i(a.id,l=>({...l,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??TA,parseSearch:e.parseSearch??SA,transformer:e.transformer??FA}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n==null?void 0:n.dest);let o=!1;(r?r.path!=="/"&&s["**"]:rs(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const a=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const d=i[h];if(d.children)return d.id}return ln}})(),l=i.map(h=>{var d;let f;const g=((d=h.options.params)==null?void 0:d.parse)??h.options.parseParams;if(g)try{const y=g(s);Object.assign(s,y)}catch(y){if(f=new BA(y.message,{cause:y}),n!=null&&n.throwOnError)throw f;return f}}),c=[];return i.forEach((h,d)=>{var f,g,y,v,S,E,w,b;const D=c[d-1],[N,V]=(()=>{const B=(D==null?void 0:D.search)??e.search;try{const Y=Nf(h.options.validateSearch,B)??{};return[{...B,...Y},void 0]}catch(Y){const Z=new tg(Y.message,{cause:Y});if(n!=null&&n.throwOnError)throw Z;return[B,Z]}})(),I=((g=(f=h.options).loaderDeps)==null?void 0:g.call(f,{search:N}))??"",_=I?JSON.stringify(I):"",T=Yc({path:h.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),P=Yc({path:h.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+_,R=this.getMatch(P),A=this.state.matches.find(B=>B.routeId===h.id),k=A?"stay":"enter";let q;if(R)q={...R,cause:k,params:A?wn(A.params,s):s,search:wn(A?A.search:R.search,N)};else{const B=h.options.loader||h.options.beforeLoad||h.lazyFn||jA(h)?"pending":"success";q={id:P,index:d,routeId:h.id,params:A?wn(A.params,s):s,pathname:Ar([this.basepath,T]),updatedAt:Date.now(),search:A?wn(A.search,N):N,searchError:void 0,status:B,isFetching:!1,error:void 0,paramsError:l[d],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:k,loaderDeps:A?wn(A.loaderDeps,I):I,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:h.options.staticData||{},loadPromise:Hs(),fullPath:h.fullPath}}const J=(v=(y=h.options).head)==null?void 0:v.call(y,{matches:c,match:q,params:q.params,loaderData:q.loaderData??void 0});q.links=J==null?void 0:J.links,q.scripts=J==null?void 0:J.scripts,q.meta=J==null?void 0:J.meta,q.status==="success"&&(q.headers=(E=(S=h.options).headers)==null?void 0:E.call(S,{loaderData:q.loaderData})),n!=null&&n.preload||(q.globalNotFound=a===h.id),q.searchError=V;const ae=(D==null?void 0:D.id)?D.context??this.options.context??{}:this.options.context??{};if(q.context={...ae,...q.__routeContext,...q.__beforeLoadContext},!R&&(n==null?void 0:n._buildLocation)!==!0){const B={deps:I,params:q.params,context:q.context,location:e,navigate:Y=>this.navigate({...Y,_fromLocation:e}),buildLocation:this.buildLocation,cause:q.cause,abortController:q.abortController,preload:!!q.preload,matches:c};q.__routeContext=((b=(w=h.options).context)==null?void 0:b.call(w,B))??{},q.context={...ae,...q.__routeContext,...q.__beforeLoadContext}}c.push(q)}),c}}class tg extends Error{}class BA extends Error{}function $A(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function HA(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function Zv(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function e0(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const vd=W.createContext(void 0),WA=W.createContext(void 0);function _s(t){const e=W.useContext(t.from?WA:vd);return tn({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(Gt(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function qA(t){return _s({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function KA(t){const{select:e,...n}=t;return _s({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function GA(t){return _s({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function QA(t){return _s({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function Dm(t){const{navigate:e}=$r();return W.useCallback(n=>e({...n}),[e])}class dI{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!(s!=null&&s.path)&&!(s!=null&&s.id);this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=ln:Gt(this.parentRoute);let a=o?ln:s.path;a&&a!=="/"&&(a=Am(a));const l=(s==null?void 0:s.id)||a;let c=o?ln:Ar([this.parentRoute.id===ln?"":this.parentRoute.id,l]);a===ln&&(a="/"),c!==ln&&(c=Ar(["/",c]));const h=c===ln?"/":Ar([this.parentRoute.fullPath,a]);this._path=a,this._id=c,this._fullPath=h,this._to=h,this._ssr=(s==null?void 0:s.ssr)??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>_s({select:n==null?void 0:n.select,from:this.id,structuralSharing:n==null?void 0:n.structuralSharing}),this.useRouteContext=n=>_s({...n,from:this.id,select:r=>n!=null&&n.select?n.select(r.context):r.context}),this.useSearch=n=>QA({select:n==null?void 0:n.select,structuralSharing:n==null?void 0:n.structuralSharing,from:this.id}),this.useParams=n=>GA({select:n==null?void 0:n.select,structuralSharing:n==null?void 0:n.structuralSharing,from:this.id}),this.useLoaderDeps=n=>KA({...n,from:this.id}),this.useLoaderData=n=>qA({...n,from:this.id}),this.useNavigate=()=>Dm({from:this.id}),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),Gt(!(e!=null&&e.id&&(e!=null&&e.path))),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}}function tc(t){return new dI(t)}class YA extends dI{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function XA(t){return new YA(t)}function Mu(t){return C.jsx(C.Fragment,{children:t.children})}function fI(t,e,n){return e.options.notFoundComponent?C.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?C.jsx(t.options.defaultNotFoundComponent,{data:n}):C.jsx(VA,{})}const pI=W.memo(function({matchId:e}){var n,r;const i=$r(),s=tn({select:S=>{var E;return(E=S.matches.find(w=>w.id===e))==null?void 0:E.routeId}});Gt(s);const o=i.routesById[s],a=o.options.pendingComponent??i.options.defaultPendingComponent,l=a?C.jsx(a,{}):null,c=o.options.errorComponent??i.options.defaultErrorComponent,h=o.options.onCatch??i.options.defaultOnCatch,d=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,f=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??a??((r=o.options.errorComponent)==null?void 0:r.preload))?W.Suspense:Mu,g=c?Rm:Mu,y=d?OA:Mu,v=tn({select:S=>S.loadedAt});return C.jsx(vd.Provider,{value:e,children:C.jsx(f,{fallback:l,children:C.jsx(g,{getResetKey:()=>v,errorComponent:c||_d,onCatch:(S,E)=>{if(On(S))throw S;h==null||h(S,E)},children:C.jsx(y,{fallback:S=>{if(!d||S.routeId&&S.routeId!==s||!S.routeId&&!o.isRoot)throw S;return W.createElement(d,S)},children:C.jsx(JA,{matchId:e})})})})})}),JA=W.memo(function({matchId:e}){var n,r,i,s,o;const a=$r(),{match:l,matchIndex:c,routeId:h}=tn({select:y=>{const v=y.matches.findIndex(w=>w.id===e),S=y.matches[v];return{routeId:S.routeId,matchIndex:v,match:Du(S,["id","status","error"])}},structuralSharing:!0}),d=a.routesById[h],f=W.useMemo(()=>{const y=d.options.component??a.options.defaultComponent;return y?C.jsx(y,{}):C.jsx(gI,{})},[d.options.component,a.options.defaultComponent]),g=(d.options.errorComponent??a.options.defaultErrorComponent)||_d;if(l.status==="notFound"){let y;return Zv(l.error)?y=(((n=a.options.errorSerializer)==null?void 0:n.deserialize)??e0)(l.error.data):y=l.error,Gt(On(y)),fI(a,d,y)}if(l.status==="redirected")throw Gt(Qi(l.error)),(r=a.getMatch(l.id))==null?void 0:r.loadPromise;if(l.status==="error"){if(a.isServer)return C.jsx(g,{error:l.error,info:{componentStack:""}});throw Zv(l.error)?(((i=a.options.errorSerializer)==null?void 0:i.deserialize)??e0)(l.error.data):l.error}if(l.status==="pending"){const y=d.options.pendingMinMs??a.options.defaultPendingMinMs;if(y&&!((s=a.getMatch(l.id))!=null&&s.minPendingPromise)&&!a.isServer){const v=Hs();Promise.resolve().then(()=>{a.updateMatch(l.id,S=>({...S,minPendingPromise:v}))}),setTimeout(()=>{v.resolve(),a.updateMatch(l.id,S=>({...S,minPendingPromise:void 0}))},y)}throw(o=a.getMatch(l.id))==null?void 0:o.loadPromise}return C.jsxs(C.Fragment,{children:[f,a.AfterEachMatch?C.jsx(a.AfterEachMatch,{match:l,matchIndex:c}):null]})}),gI=W.memo(function(){const e=$r(),n=W.useContext(vd),r=tn({select:c=>{var h;return(h=c.matches.find(d=>d.id===n))==null?void 0:h.routeId}}),i=e.routesById[r],s=tn({select:c=>{const d=c.matches.find(f=>f.id===n);return Gt(d),d.globalNotFound}}),o=tn({select:c=>{var h;const d=c.matches,f=d.findIndex(g=>g.id===n);return(h=d[f+1])==null?void 0:h.id}});if(s)return fI(e,i,void 0);if(!o)return null;const a=C.jsx(pI,{matchId:o}),l=e.options.defaultPendingComponent?C.jsx(e.options.defaultPendingComponent,{}):null;return n===ln?C.jsx(W.Suspense,{fallback:l,children:a}):a}),ZA="Error preloading route! ";function eR(t,e){const n=$r(),[r,i]=W.useState(!1),s=W.useRef(!1),o=kA(e),{activeProps:a=()=>({className:"active"}),inactiveProps:l=()=>({}),activeOptions:c,to:h,preload:d,preloadDelay:f,replace:g,startTransition:y,resetScroll:v,viewTransition:S,children:E,target:w,disabled:b,style:D,className:N,onClick:V,onFocus:I,onMouseEnter:_,onMouseLeave:T,onTouchStart:P,ignoreBlocker:R,...A}=t,{params:k,search:q,hash:J,state:ie,mask:ae,...B}=A,Y=W.useMemo(()=>{try{return new URL(`${h}`),"external"}catch{}return"internal"},[h]),Z=tn({select:M=>M.location.search,structuralSharing:!0});t={from:_s({strict:!1,select:M=>M.pathname}),...t};const re=W.useMemo(()=>n.buildLocation(t),[n,t,Z]),le=W.useMemo(()=>d??n.options.defaultPreload,[n.options.defaultPreload,d]),ye=f??n.options.defaultPreloadDelay??0,pe=tn({select:M=>{if(c!=null&&c.exact){if(!AA(M.location.pathname,re.pathname,n.basepath))return!1}else{const L=Sh(M.location.pathname,n.basepath).split("/");if(!Sh(re.pathname,n.basepath).split("/").every((K,H)=>K===L[H]))return!1}return((c==null?void 0:c.includeSearch)??!0)&&!mo(M.location.search,re.search,{partial:!(c!=null&&c.exact),ignoreUndefined:!(c!=null&&c.explicitUndefined)})?!1:c!=null&&c.includeHash?M.location.hash===re.hash:!0}}),ve=W.useCallback(()=>{n.preloadRoute(t).catch(M=>{console.warn(M),console.warn(ZA)})},[t,n]),rt=W.useCallback(M=>{M!=null&&M.isIntersecting&&ve()},[ve]);if(PA(o,rt,{rootMargin:"100px"},{disabled:!!b||le!=="viewport"}),Va(()=>{s.current||!b&&le==="render"&&(ve(),s.current=!0)},[b,ve,le]),Y==="external")return{...B,ref:o,type:Y,href:h,...E&&{children:E},...w&&{target:w},...b&&{disabled:b},...D&&{style:D},...N&&{className:N},...V&&{onClick:V},...I&&{onFocus:I},..._&&{onMouseEnter:_},...T&&{onMouseLeave:T},...P&&{onTouchStart:P}};const mn=M=>{if(!b&&!tR(M)&&!M.defaultPrevented&&(!w||w==="_self")&&M.button===0){M.preventDefault(),tI.flushSync(()=>{i(!0)});const L=n.subscribe("onResolved",()=>{L(),i(!1)});n.buildAndCommitLocation({...t,replace:g,resetScroll:v,startTransition:y,viewTransition:S,ignoreBlocker:R})}},Kn=M=>{b||le&&ve()},rn=Kn,Fe=M=>{if(b)return;const L=M.target||{};if(le){if(L.preloadTimeout)return;L.preloadTimeout=setTimeout(()=>{L.preloadTimeout=null,ve()},ye)}},yt=M=>{if(b)return;const L=M.target||{};L.preloadTimeout&&(clearTimeout(L.preloadTimeout),L.preloadTimeout=null)},at=M=>L=>{var j;(j=L.persist)==null||j.call(L),M.filter(Boolean).forEach(X=>{L.defaultPrevented||X(L)})},yn=pe?ao(a,{})??{}:{},Gn=pe?{}:ao(l,{}),qr=[N,yn.className,Gn.className].filter(Boolean).join(" "),sn={...D,...yn.style,...Gn.style};return{...B,...yn,...Gn,href:b?void 0:re.maskedLocation?n.history.createHref(re.maskedLocation.href):n.history.createHref(re.href),ref:o,onClick:at([V,mn]),onFocus:at([I,Kn]),onMouseEnter:at([_,Fe]),onMouseLeave:at([T,yt]),onTouchStart:at([P,rn]),disabled:!!b,target:w,...Object.keys(sn).length&&{style:sn},...qr&&{className:qr},...b&&{role:"link","aria-disabled":!0},...pe&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}const Fa=W.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=eR(r,e),a=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,W.createElement(n||"a",{...o,ref:s},a)});function tR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nR(){const t=$r(),e=W.useRef({router:t,mounted:!1}),n=tn({select:({isLoading:d})=>d}),[r,i]=W.useTransition(),s=tn({select:d=>d.matches.some(f=>f.status==="pending"),structuralSharing:!0}),o=Df(n),a=n||r||s,l=Df(a),c=n||s,h=Df(c);return t.isServer||(t.startReactTransition=i),W.useEffect(()=>{const d=t.history.subscribe(t.load),f=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return rs(t.latestLocation.href)!==rs(f.href)&&t.commitLocation({...f,replace:!0}),()=>{d()}},[t,t.history]),Va(()=>{var d;if(typeof window<"u"&&((d=window.__TSR__)!=null&&d.dehydrated)||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(g){console.error(g)}})()},[t]),Va(()=>{if(o&&!n){const d=t.state.location,f=t.state.resolvedLocation,g=f.pathname!==d.pathname,y=f.href!==d.href;t.emit({type:"onLoad",fromLocation:f,toLocation:d,pathChanged:g,hrefChanged:y})}},[o,t,n]),Va(()=>{if(h&&!c){const d=t.state.location,f=t.state.resolvedLocation,g=f.pathname!==d.pathname,y=f.href!==d.href;t.emit({type:"onBeforeRouteMount",fromLocation:f,toLocation:d,pathChanged:g,hrefChanged:y})}},[c,h,t]),Va(()=>{if(l&&!a){const d=t.state.location,f=t.state.resolvedLocation,g=f.pathname!==d.pathname,y=f.href!==d.href;if(t.emit({type:"onResolved",fromLocation:f,toLocation:d,pathChanged:g,hrefChanged:y}),t.__store.setState(v=>({...v,status:"idle",resolvedLocation:v.location})),typeof document<"u"&&document.querySelector&&t.state.location.hash!==""){const v=document.getElementById(t.state.location.hash);v&&v.scrollIntoView()}}},[a,l,t]),null}function rR(){const t=$r(),e=t.options.defaultPendingComponent?C.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&window.__TSR__?Mu:W.Suspense,r=C.jsxs(n,{fallback:e,children:[C.jsx(nR,{}),C.jsx(iR,{})]});return t.options.InnerWrap?C.jsx(t.options.InnerWrap,{children:r}):r}function iR(){const t=tn({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=tn({select:n=>n.loadedAt});return C.jsx(vd.Provider,{value:t,children:C.jsx(Rm,{getResetKey:()=>e,errorComponent:_d,onCatch:n=>{n.message||n.toString()},children:t?C.jsx(pI,{matchId:t}):null})})}function sR({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=oI(),i=C.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?C.jsx(t.options.Wrap,{children:i}):i}function oR({router:t,...e}){return C.jsx(sR,{router:t,...e,children:C.jsx(rR,{})})}var nc=t=>t.type==="checkbox",is=t=>t instanceof Date,Ut=t=>t==null;const mI=t=>typeof t=="object";var nt=t=>!Ut(t)&&!Array.isArray(t)&&mI(t)&&!is(t),yI=t=>nt(t)&&t.target?nc(t.target)?t.target.checked:t.target.value:t,aR=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,_I=(t,e)=>t.has(aR(e)),lR=t=>{const e=t.constructor&&t.constructor.prototype;return nt(e)&&e.hasOwnProperty("isPrototypeOf")},Mm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Wt(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Mm&&(t instanceof Blob||r))&&(n||nt(t)))if(e=n?[]:{},!n&&!lR(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Wt(t[i]));else return t;return e}var wd=t=>Array.isArray(t)?t.filter(Boolean):[],qe=t=>t===void 0,Q=(t,e,n)=>{if(!e||!nt(t))return n;const r=wd(e.split(/[,[\].]+?/)).reduce((i,s)=>Ut(i)?i:i[s],t);return qe(r)||r===t?qe(t[e])?n:t[e]:r},cn=t=>typeof t=="boolean",Nm=t=>/^\w*$/.test(t),vI=t=>wd(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Le=(t,e,n)=>{let r=-1;const i=Nm(e)?[e]:vI(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const c=t[a];l=nt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}return t};const Ih={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Fn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},mr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},cR=Ae.createContext(null),Lm=()=>Ae.useContext(cR);var wI=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Fn.all&&(e._proxyFormState[o]=!r||Fn.all),n&&(n[o]=!0),t[o]}});return i},qt=t=>nt(t)&&!Object.keys(t).length,EI=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return qt(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Fn.all))},ol=t=>Array.isArray(t)?t:[t],SI=(t,e,n)=>!t||!e||t===e||ol(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function Om(t){const e=Ae.useRef(t);e.current=t,Ae.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function uR(t){const e=Lm(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=Ae.useState(n._formState),l=Ae.useRef(!0),c=Ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=Ae.useRef(i);return h.current=i,Om({disabled:r,next:d=>l.current&&SI(h.current,d.name,s)&&EI(d,c.current,n._updateFormState)&&a({...n._formState,...d}),subject:n._subjects.state}),Ae.useEffect(()=>(l.current=!0,c.current.isValid&&n._updateValid(!0),()=>{l.current=!1}),[n]),Ae.useMemo(()=>wI(o,n,c.current,!1),[o,n])}var nr=t=>typeof t=="string",TI=(t,e,n,r,i)=>nr(t)?(r&&e.watch.add(t),Q(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Q(n,s))):(r&&(e.watchAll=!0),n);function hR(t){const e=Lm(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t||{},a=Ae.useRef(r);a.current=r,Om({disabled:s,subject:n._subjects.values,next:h=>{SI(a.current,h.name,o)&&c(Wt(TI(a.current,n._names,h.values||n._formValues,!1,i)))}});const[l,c]=Ae.useState(n._getWatch(r,i));return Ae.useEffect(()=>n._removeUnmounted()),l}function dR(t){const e=Lm(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=_I(i._names.array,n),a=hR({control:i,name:n,defaultValue:Q(i._formValues,n,Q(i._defaultValues,n,t.defaultValue)),exact:!0}),l=uR({control:i,name:n,exact:!0}),c=Ae.useRef(i.register(n,{...t.rules,value:a,...cn(t.disabled)?{disabled:t.disabled}:{}})),h=Ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Q(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!Q(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Q(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Q(l.validatingFields,n)},error:{enumerable:!0,get:()=>Q(l.errors,n)}}),[l,n]),d=Ae.useMemo(()=>({name:n,value:a,...cn(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:f=>c.current.onChange({target:{value:yI(f),name:n},type:Ih.CHANGE}),onBlur:()=>c.current.onBlur({target:{value:Q(i._formValues,n),name:n},type:Ih.BLUR}),ref:f=>{const g=Q(i._fields,n);g&&f&&(g._f.ref={focus:()=>f.focus(),select:()=>f.select(),setCustomValidity:y=>f.setCustomValidity(y),reportValidity:()=>f.reportValidity()})}}),[n,i._formValues,r,l.disabled,a,i._fields]);return Ae.useEffect(()=>{const f=i._options.shouldUnregister||s,g=(y,v)=>{const S=Q(i._fields,y);S&&S._f&&(S._f.mount=v)};if(g(n,!0),f){const y=Wt(Q(i._options.defaultValues,n));Le(i._defaultValues,n,y),qe(Q(i._formValues,n))&&Le(i._formValues,n,y)}return()=>{(o?f&&!i._state.action:f)?i.unregister(n):g(n,!1)}},[n,i,o,s]),Ae.useEffect(()=>{cn(r)&&Q(i._fields,n)&&i._updateDisabledField({disabled:r,fields:i._fields,name:n,value:Q(i._fields,n)._f.value})},[r,n,i]),Ae.useMemo(()=>({field:d,formState:l,fieldState:h}),[d,l,h])}const fR=t=>t.render(dR(t));var pR=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},t0=t=>({isOnSubmit:!t||t===Fn.onSubmit,isOnBlur:t===Fn.onBlur,isOnChange:t===Fn.onChange,isOnAll:t===Fn.all,isOnTouch:t===Fn.onTouched}),n0=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const al=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Q(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(al(a,e))break}else if(nt(a)&&al(a,e))break}}};var gR=(t,e,n)=>{const r=ol(Q(t,n));return Le(r,"root",e[n]),Le(t,n,r),t},Vm=t=>t.type==="file",tr=t=>typeof t=="function",xh=t=>{if(!Mm)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Nu=t=>nr(t),Fm=t=>t.type==="radio",bh=t=>t instanceof RegExp;const r0={value:!1,isValid:!1},i0={value:!0,isValid:!0};var II=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!qe(t[0].attributes.value)?qe(t[0].value)||t[0].value===""?i0:{value:t[0].value,isValid:!0}:i0:r0}return r0};const s0={isValid:!1,value:null};var xI=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,s0):s0;function o0(t,e,n="validate"){if(Nu(t)||Array.isArray(t)&&t.every(Nu)||cn(t)&&!t)return{type:n,message:Nu(t)?t:"",ref:e}}var Bs=t=>nt(t)&&!bh(t)?t:{value:t,message:""},a0=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:c,min:h,max:d,pattern:f,validate:g,name:y,valueAsNumber:v,mount:S,disabled:E}=t._f,w=Q(e,y);if(!S||E)return{};const b=o?o[0]:s,D=A=>{r&&b.reportValidity&&(b.setCustomValidity(cn(A)?"":A||""),b.reportValidity())},N={},V=Fm(s),I=nc(s),_=V||I,T=(v||Vm(s))&&qe(s.value)&&qe(w)||xh(s)&&s.value===""||w===""||Array.isArray(w)&&!w.length,P=pR.bind(null,y,n,N),R=(A,k,q,J=mr.maxLength,ie=mr.minLength)=>{const ae=A?k:q;N[y]={type:A?J:ie,message:ae,ref:s,...P(A?J:ie,ae)}};if(i?!Array.isArray(w)||!w.length:a&&(!_&&(T||Ut(w))||cn(w)&&!w||I&&!II(o).isValid||V&&!xI(o).isValid)){const{value:A,message:k}=Nu(a)?{value:!!a,message:a}:Bs(a);if(A&&(N[y]={type:mr.required,message:k,ref:b,...P(mr.required,k)},!n))return D(k),N}if(!T&&(!Ut(h)||!Ut(d))){let A,k;const q=Bs(d),J=Bs(h);if(!Ut(w)&&!isNaN(w)){const ie=s.valueAsNumber||w&&+w;Ut(q.value)||(A=ie>q.value),Ut(J.value)||(k=ie<J.value)}else{const ie=s.valueAsDate||new Date(w),ae=Z=>new Date(new Date().toDateString()+" "+Z),B=s.type=="time",Y=s.type=="week";nr(q.value)&&w&&(A=B?ae(w)>ae(q.value):Y?w>q.value:ie>new Date(q.value)),nr(J.value)&&w&&(k=B?ae(w)<ae(J.value):Y?w<J.value:ie<new Date(J.value))}if((A||k)&&(R(!!A,q.message,J.message,mr.max,mr.min),!n))return D(N[y].message),N}if((l||c)&&!T&&(nr(w)||i&&Array.isArray(w))){const A=Bs(l),k=Bs(c),q=!Ut(A.value)&&w.length>+A.value,J=!Ut(k.value)&&w.length<+k.value;if((q||J)&&(R(q,A.message,k.message),!n))return D(N[y].message),N}if(f&&!T&&nr(w)){const{value:A,message:k}=Bs(f);if(bh(A)&&!w.match(A)&&(N[y]={type:mr.pattern,message:k,ref:s,...P(mr.pattern,k)},!n))return D(k),N}if(g){if(tr(g)){const A=await g(w,e),k=o0(A,b);if(k&&(N[y]={...k,...P(mr.validate,k.message)},!n))return D(k.message),N}else if(nt(g)){let A={};for(const k in g){if(!qt(A)&&!n)break;const q=o0(await g[k](w,e),b,k);q&&(A={...q,...P(k,q.message)},D(q.message),n&&(N[y]=A))}if(!qt(A)&&(N[y]={ref:b,...A},!n))return N}}return D(!0),N};function mR(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=qe(t)?r++:t[e[r++]];return t}function yR(t){for(const e in t)if(t.hasOwnProperty(e)&&!qe(t[e]))return!1;return!0}function lt(t,e){const n=Array.isArray(e)?e:Nm(e)?[e]:vI(e),r=n.length===1?t:mR(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(nt(r)&&qt(r)||Array.isArray(r)&&yR(r))&&lt(t,n.slice(0,-1)),t}var Lf=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},ng=t=>Ut(t)||!mI(t);function ii(t,e){if(ng(t)||ng(e))return t===e;if(is(t)&&is(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(is(s)&&is(o)||nt(s)&&nt(o)||Array.isArray(s)&&Array.isArray(o)?!ii(s,o):s!==o)return!1}}return!0}var bI=t=>t.type==="select-multiple",_R=t=>Fm(t)||nc(t),Of=t=>xh(t)&&t.isConnected,PI=t=>{for(const e in t)if(tr(t[e]))return!0;return!1};function Ph(t,e={}){const n=Array.isArray(t);if(nt(t)||n)for(const r in t)Array.isArray(t[r])||nt(t[r])&&!PI(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Ph(t[r],e[r])):Ut(t[r])||(e[r]=!0);return e}function kI(t,e,n){const r=Array.isArray(t);if(nt(t)||r)for(const i in t)Array.isArray(t[i])||nt(t[i])&&!PI(t[i])?qe(e)||ng(n[i])?n[i]=Array.isArray(t[i])?Ph(t[i],[]):{...Ph(t[i])}:kI(t[i],Ut(e)?{}:e[i],n[i]):n[i]=!ii(t[i],e[i]);return n}var ba=(t,e)=>kI(t,e,Ph(e)),CI=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>qe(t)?t:e?t===""?NaN:t&&+t:n&&nr(t)?new Date(t):r?r(t):t;function Vf(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return Vm(e)?e.files:Fm(e)?xI(t.refs).value:bI(e)?[...e.selectedOptions].map(({value:n})=>n):nc(e)?II(t.refs).value:CI(qe(e.value)?t.ref.value:e.value,t)}var vR=(t,e,n,r)=>{const i={};for(const s of t){const o=Q(e,s);o&&Le(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Pa=t=>qe(t)?t:bh(t)?t.source:nt(t)?bh(t.value)?t.value.source:t.value:t;const l0="AsyncFunction";var wR=t=>!!t&&!!t.validate&&!!(tr(t.validate)&&t.validate.constructor.name===l0||nt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===l0)),ER=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function c0(t,e,n){const r=Q(t,n);if(r||Nm(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Q(e,s),a=Q(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var SR=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,TR=(t,e)=>!wd(Q(t,e)).length&&lt(t,e);const IR={mode:Fn.onSubmit,reValidateMode:Fn.onChange,shouldFocusError:!0};function xR(t={}){let e={...IR,...t},n={submitCount:0,isDirty:!1,isLoading:tr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=nt(e.defaultValues)||nt(e.values)?Wt(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Wt(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:Lf(),array:Lf(),state:Lf()},f=t0(e.mode),g=t0(e.reValidateMode),y=e.criteriaMode===Fn.all,v=M=>L=>{clearTimeout(c),c=setTimeout(M,L)},S=async M=>{if(!e.disabled&&(h.isValid||M)){const L=e.resolver?qt((await _()).errors):await P(r,!0);L!==n.isValid&&d.state.next({isValid:L})}},E=(M,L)=>{!e.disabled&&(h.isValidating||h.validatingFields)&&((M||Array.from(a.mount)).forEach(j=>{j&&(L?Le(n.validatingFields,j,L):lt(n.validatingFields,j))}),d.state.next({validatingFields:n.validatingFields,isValidating:!qt(n.validatingFields)}))},w=(M,L=[],j,X,K=!0,H=!0)=>{if(X&&j&&!e.disabled){if(o.action=!0,H&&Array.isArray(Q(r,M))){const se=j(Q(r,M),X.argA,X.argB);K&&Le(r,M,se)}if(H&&Array.isArray(Q(n.errors,M))){const se=j(Q(n.errors,M),X.argA,X.argB);K&&Le(n.errors,M,se),TR(n.errors,M)}if(h.touchedFields&&H&&Array.isArray(Q(n.touchedFields,M))){const se=j(Q(n.touchedFields,M),X.argA,X.argB);K&&Le(n.touchedFields,M,se)}h.dirtyFields&&(n.dirtyFields=ba(i,s)),d.state.next({name:M,isDirty:A(M,L),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Le(s,M,L)},b=(M,L)=>{Le(n.errors,M,L),d.state.next({errors:n.errors})},D=M=>{n.errors=M,d.state.next({errors:n.errors,isValid:!1})},N=(M,L,j,X)=>{const K=Q(r,M);if(K){const H=Q(s,M,qe(j)?Q(i,M):j);qe(H)||X&&X.defaultChecked||L?Le(s,M,L?H:Vf(K._f)):J(M,H),o.mount&&S()}},V=(M,L,j,X,K)=>{let H=!1,se=!1;const me={name:M};if(!e.disabled){const Se=!!(Q(r,M)&&Q(r,M)._f&&Q(r,M)._f.disabled);if(!j||X){h.isDirty&&(se=n.isDirty,n.isDirty=me.isDirty=A(),H=se!==me.isDirty);const xe=Se||ii(Q(i,M),L);se=!!(!Se&&Q(n.dirtyFields,M)),xe||Se?lt(n.dirtyFields,M):Le(n.dirtyFields,M,!0),me.dirtyFields=n.dirtyFields,H=H||h.dirtyFields&&se!==!xe}if(j){const xe=Q(n.touchedFields,M);xe||(Le(n.touchedFields,M,j),me.touchedFields=n.touchedFields,H=H||h.touchedFields&&xe!==j)}H&&K&&d.state.next(me)}return H?me:{}},I=(M,L,j,X)=>{const K=Q(n.errors,M),H=h.isValid&&cn(L)&&n.isValid!==L;if(e.delayError&&j?(l=v(()=>b(M,j)),l(e.delayError)):(clearTimeout(c),l=null,j?Le(n.errors,M,j):lt(n.errors,M)),(j?!ii(K,j):K)||!qt(X)||H){const se={...X,...H&&cn(L)?{isValid:L}:{},errors:n.errors,name:M};n={...n,...se},d.state.next(se)}},_=async M=>{E(M,!0);const L=await e.resolver(s,e.context,vR(M||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return E(M),L},T=async M=>{const{errors:L}=await _(M);if(M)for(const j of M){const X=Q(L,j);X?Le(n.errors,j,X):lt(n.errors,j)}else n.errors=L;return L},P=async(M,L,j={valid:!0})=>{for(const X in M){const K=M[X];if(K){const{_f:H,...se}=K;if(H){const me=a.array.has(H.name),Se=K._f&&wR(K._f);Se&&h.validatingFields&&E([X],!0);const xe=await a0(K,s,y,e.shouldUseNativeValidation&&!L,me);if(Se&&h.validatingFields&&E([X]),xe[H.name]&&(j.valid=!1,L))break;!L&&(Q(xe,H.name)?me?gR(n.errors,xe,H.name):Le(n.errors,H.name,xe[H.name]):lt(n.errors,H.name))}!qt(se)&&await P(se,L,j)}}return j.valid},R=()=>{for(const M of a.unMount){const L=Q(r,M);L&&(L._f.refs?L._f.refs.every(j=>!Of(j)):!Of(L._f.ref))&&ve(M)}a.unMount=new Set},A=(M,L)=>!e.disabled&&(M&&L&&Le(s,M,L),!ii(ge(),i)),k=(M,L,j)=>TI(M,a,{...o.mount?s:qe(L)?i:nr(M)?{[M]:L}:L},j,L),q=M=>wd(Q(o.mount?s:i,M,e.shouldUnregister?Q(i,M,[]):[])),J=(M,L,j={})=>{const X=Q(r,M);let K=L;if(X){const H=X._f;H&&(!H.disabled&&Le(s,M,CI(L,H)),K=xh(H.ref)&&Ut(L)?"":L,bI(H.ref)?[...H.ref.options].forEach(se=>se.selected=K.includes(se.value)):H.refs?nc(H.ref)?H.refs.length>1?H.refs.forEach(se=>(!se.defaultChecked||!se.disabled)&&(se.checked=Array.isArray(K)?!!K.find(me=>me===se.value):K===se.value)):H.refs[0]&&(H.refs[0].checked=!!K):H.refs.forEach(se=>se.checked=se.value===K):Vm(H.ref)?H.ref.value="":(H.ref.value=K,H.ref.type||d.values.next({name:M,values:{...s}})))}(j.shouldDirty||j.shouldTouch)&&V(M,K,j.shouldTouch,j.shouldDirty,!0),j.shouldValidate&&Z(M)},ie=(M,L,j)=>{for(const X in L){const K=L[X],H=`${M}.${X}`,se=Q(r,H);(a.array.has(M)||nt(K)||se&&!se._f)&&!is(K)?ie(H,K,j):J(H,K,j)}},ae=(M,L,j={})=>{const X=Q(r,M),K=a.array.has(M),H=Wt(L);Le(s,M,H),K?(d.array.next({name:M,values:{...s}}),(h.isDirty||h.dirtyFields)&&j.shouldDirty&&d.state.next({name:M,dirtyFields:ba(i,s),isDirty:A(M,H)})):X&&!X._f&&!Ut(H)?ie(M,H,j):J(M,H,j),n0(M,a)&&d.state.next({...n}),d.values.next({name:o.mount?M:void 0,values:{...s}})},B=async M=>{o.mount=!0;const L=M.target;let j=L.name,X=!0;const K=Q(r,j),H=()=>L.type?Vf(K._f):yI(M),se=me=>{X=Number.isNaN(me)||is(me)&&isNaN(me.getTime())||ii(me,Q(s,j,me))};if(K){let me,Se;const xe=H(),_n=M.type===Ih.BLUR||M.type===Ih.FOCUS_OUT,mc=!ER(K._f)&&!e.resolver&&!Q(n.errors,j)&&!K._f.deps||SR(_n,Q(n.touchedFields,j),n.isSubmitted,g,f),Ls=n0(j,a,_n);Le(s,j,xe),_n?(K._f.onBlur&&K._f.onBlur(M),l&&l(0)):K._f.onChange&&K._f.onChange(M);const ia=V(j,xe,_n,!1),ji=!qt(ia)||Ls;if(!_n&&d.values.next({name:j,type:M.type,values:{...s}}),mc)return h.isValid&&(e.mode==="onBlur"?_n&&S():S()),ji&&d.state.next({name:j,...Ls?{}:ia});if(!_n&&Ls&&d.state.next({...n}),e.resolver){const{errors:sa}=await _([j]);if(se(xe),X){const yc=c0(n.errors,r,j),Os=c0(sa,r,yc.name||j);me=Os.error,j=Os.name,Se=qt(sa)}}else E([j],!0),me=(await a0(K,s,y,e.shouldUseNativeValidation))[j],E([j]),se(xe),X&&(me?Se=!1:h.isValid&&(Se=await P(r,!0)));X&&(K._f.deps&&Z(K._f.deps),I(j,Se,me,ia))}},Y=(M,L)=>{if(Q(n.errors,L)&&M.focus)return M.focus(),1},Z=async(M,L={})=>{let j,X;const K=ol(M);if(e.resolver){const H=await T(qe(M)?M:K);j=qt(H),X=M?!K.some(se=>Q(H,se)):j}else M?(X=(await Promise.all(K.map(async H=>{const se=Q(r,H);return await P(se&&se._f?{[H]:se}:se)}))).every(Boolean),!(!X&&!n.isValid)&&S()):X=j=await P(r);return d.state.next({...!nr(M)||h.isValid&&j!==n.isValid?{}:{name:M},...e.resolver||!M?{isValid:j}:{},errors:n.errors}),L.shouldFocus&&!X&&al(r,Y,M?K:a.mount),X},ge=M=>{const L={...o.mount?s:i};return qe(M)?L:nr(M)?Q(L,M):M.map(j=>Q(L,j))},re=(M,L)=>({invalid:!!Q((L||n).errors,M),isDirty:!!Q((L||n).dirtyFields,M),error:Q((L||n).errors,M),isValidating:!!Q(n.validatingFields,M),isTouched:!!Q((L||n).touchedFields,M)}),le=M=>{M&&ol(M).forEach(L=>lt(n.errors,L)),d.state.next({errors:M?n.errors:{}})},ye=(M,L,j)=>{const X=(Q(r,M,{_f:{}})._f||{}).ref,K=Q(n.errors,M)||{},{ref:H,message:se,type:me,...Se}=K;Le(n.errors,M,{...Se,...L,ref:X}),d.state.next({name:M,errors:n.errors,isValid:!1}),j&&j.shouldFocus&&X&&X.focus&&X.focus()},pe=(M,L)=>tr(M)?d.values.subscribe({next:j=>M(k(void 0,L),j)}):k(M,L,!0),ve=(M,L={})=>{for(const j of M?ol(M):a.mount)a.mount.delete(j),a.array.delete(j),L.keepValue||(lt(r,j),lt(s,j)),!L.keepError&&lt(n.errors,j),!L.keepDirty&&lt(n.dirtyFields,j),!L.keepTouched&&lt(n.touchedFields,j),!L.keepIsValidating&&lt(n.validatingFields,j),!e.shouldUnregister&&!L.keepDefaultValue&&lt(i,j);d.values.next({values:{...s}}),d.state.next({...n,...L.keepDirty?{isDirty:A()}:{}}),!L.keepIsValid&&S()},rt=({disabled:M,name:L,field:j,fields:X,value:K})=>{if(cn(M)&&o.mount||M){const H=M?void 0:qe(K)?Vf(j?j._f:Q(X,L)._f):K;(M||!M&&!qe(H))&&Le(s,L,H),V(L,H,!1,!1,!0)}},mn=(M,L={})=>{let j=Q(r,M);const X=cn(L.disabled)||cn(e.disabled);return Le(r,M,{...j||{},_f:{...j&&j._f?j._f:{ref:{name:M}},name:M,mount:!0,...L}}),a.mount.add(M),j?rt({field:j,disabled:cn(L.disabled)?L.disabled:e.disabled,name:M,value:L.value}):N(M,!0,L.value),{...X?{disabled:L.disabled||e.disabled}:{},...e.progressive?{required:!!L.required,min:Pa(L.min),max:Pa(L.max),minLength:Pa(L.minLength),maxLength:Pa(L.maxLength),pattern:Pa(L.pattern)}:{},name:M,onChange:B,onBlur:B,ref:K=>{if(K){mn(M,L),j=Q(r,M);const H=qe(K.value)&&K.querySelectorAll&&K.querySelectorAll("input,select,textarea")[0]||K,se=_R(H),me=j._f.refs||[];if(se?me.find(Se=>Se===H):H===j._f.ref)return;Le(r,M,{_f:{...j._f,...se?{refs:[...me.filter(Of),H,...Array.isArray(Q(i,M))?[{}]:[]],ref:{type:H.type,name:M}}:{ref:H}}}),N(M,!1,void 0,H)}else j=Q(r,M,{}),j._f&&(j._f.mount=!1),(e.shouldUnregister||L.shouldUnregister)&&!(_I(a.array,M)&&o.action)&&a.unMount.add(M)}}},Kn=()=>e.shouldFocusError&&al(r,Y,a.mount),rn=M=>{cn(M)&&(d.state.next({disabled:M}),al(r,(L,j)=>{const X=Q(r,j);X&&(L.disabled=X._f.disabled||M,Array.isArray(X._f.refs)&&X._f.refs.forEach(K=>{K.disabled=X._f.disabled||M}))},0,!1))},Fe=(M,L)=>async j=>{let X;if(j&&(j.preventDefault&&j.preventDefault(),j.persist&&j.persist()),e.disabled){L&&await L({...n.errors},j);return}let K=Wt(s);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:H,values:se}=await _();n.errors=H,K=se}else await P(r);if(lt(n.errors,"root"),qt(n.errors)){d.state.next({errors:{}});try{await M(K,j)}catch(H){X=H}}else L&&await L({...n.errors},j),Kn(),setTimeout(Kn);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:qt(n.errors)&&!X,submitCount:n.submitCount+1,errors:n.errors}),X)throw X},yt=(M,L={})=>{Q(r,M)&&(qe(L.defaultValue)?ae(M,Wt(Q(i,M))):(ae(M,L.defaultValue),Le(i,M,Wt(L.defaultValue))),L.keepTouched||lt(n.touchedFields,M),L.keepDirty||(lt(n.dirtyFields,M),n.isDirty=L.defaultValue?A(M,Wt(Q(i,M))):A()),L.keepError||(lt(n.errors,M),h.isValid&&S()),d.state.next({...n}))},at=(M,L={})=>{const j=M?Wt(M):i,X=Wt(j),K=qt(M),H=K?i:X;if(L.keepDefaultValues||(i=j),!L.keepValues){if(L.keepDirtyValues){const se=new Set([...a.mount,...Object.keys(ba(i,s))]);for(const me of Array.from(se))Q(n.dirtyFields,me)?Le(H,me,Q(s,me)):ae(me,Q(H,me))}else{if(Mm&&qe(M))for(const se of a.mount){const me=Q(r,se);if(me&&me._f){const Se=Array.isArray(me._f.refs)?me._f.refs[0]:me._f.ref;if(xh(Se)){const xe=Se.closest("form");if(xe){xe.reset();break}}}}r={}}s=e.shouldUnregister?L.keepDefaultValues?Wt(i):{}:Wt(H),d.array.next({values:{...H}}),d.values.next({values:{...H}})}a={mount:L.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!L.keepIsValid||!!L.keepDirtyValues,o.watch=!!e.shouldUnregister,d.state.next({submitCount:L.keepSubmitCount?n.submitCount:0,isDirty:K?!1:L.keepDirty?n.isDirty:!!(L.keepDefaultValues&&!ii(M,i)),isSubmitted:L.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:K?{}:L.keepDirtyValues?L.keepDefaultValues&&s?ba(i,s):n.dirtyFields:L.keepDefaultValues&&M?ba(i,M):L.keepDirty?n.dirtyFields:{},touchedFields:L.keepTouched?n.touchedFields:{},errors:L.keepErrors?n.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},yn=(M,L)=>at(tr(M)?M(s):M,L);return{control:{register:mn,unregister:ve,getFieldState:re,handleSubmit:Fe,setError:ye,_executeSchema:_,_getWatch:k,_getDirty:A,_updateValid:S,_removeUnmounted:R,_updateFieldArray:w,_updateDisabledField:rt,_getFieldArray:q,_reset:at,_resetDefaultValues:()=>tr(e.defaultValues)&&e.defaultValues().then(M=>{yn(M,e.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:M=>{n={...n,...M}},_disableForm:rn,_subjects:d,_proxyFormState:h,_setErrors:D,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(M){o=M},get _defaultValues(){return i},get _names(){return a},set _names(M){a=M},get _formState(){return n},set _formState(M){n=M},get _options(){return e},set _options(M){e={...e,...M}}},trigger:Z,register:mn,handleSubmit:Fe,watch:pe,setValue:ae,getValues:ge,reset:yn,resetField:yt,clearErrors:le,unregister:ve,setError:ye,setFocus:(M,L={})=>{const j=Q(r,M),X=j&&j._f;if(X){const K=X.refs?X.refs[0]:X.ref;K.focus&&(K.focus(),L.shouldSelect&&tr(K.select)&&K.select())}},getFieldState:re}}function AI(t={}){const e=Ae.useRef(void 0),n=Ae.useRef(void 0),[r,i]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:tr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:tr(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...xR(t),formState:r});const s=e.current.control;return s._options=t,Om({subject:s._subjects.state,next:o=>{EI(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),Ae.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Ae.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Ae.useEffect(()=>{t.values&&!ii(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),Ae.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),Ae.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Ae.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=wI(r,s),e.current}var u0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},DI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[h],n[d],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new PR;const f=s<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kR=function(t){const e=RI(t);return DI.encodeByteArray(e,!0)},kh=function(t){return kR(t).replace(/\./g,"")},MI=function(t){try{return DI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=()=>CR().__FIREBASE_DEFAULTS__,RR=()=>{if(typeof process>"u"||typeof u0>"u")return;const t=u0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&MI(t[1]);return e&&JSON.parse(e)},Ed=()=>{try{return AR()||RR()||DR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NI=t=>{var e,n;return(n=(e=Ed())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},MR=t=>{const e=NI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},LI=()=>{var t;return(t=Ed())===null||t===void 0?void 0:t.config},OI=t=>{var e;return(e=Ed())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kh(JSON.stringify(n)),kh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function VR(){var t;const e=(t=Ed())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zR(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BR(){return!VR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $R(){try{return typeof indexedDB=="object"}catch{return!1}}function HR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="FirebaseError";class Hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WR,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rc.prototype.create)}}class rc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Hr(i,a,r)}}function qR(t,e){return t.replace(KR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KR=/\{\$([^}]+)}/g;function GR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ch(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(h0(s)&&h0(o)){if(!Ch(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function h0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ja(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ua(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QR(t,e){const n=new YR(t,e);return n.subscribe.bind(n)}class YR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ff),i.error===void 0&&(i.error=Ff),i.complete===void 0&&(i.complete=Ff);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ff(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class vs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new NR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eD(e))try{this.getOrInitializeService({instanceIdentifier:Yi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yi){return this.instances.has(e)}getOptions(e=Yi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yi){return this.component?this.component.multipleInstances?e:Yi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZR(t){return t===Yi?void 0:t}function eD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const nD={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},rD=we.INFO,iD={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},sD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=iD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jm{constructor(e){this.name=e,this._logLevel=rD,this._logHandler=sD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const oD=(t,e)=>e.some(n=>t instanceof n);let d0,f0;function aD(){return d0||(d0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lD(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VI=new WeakMap,rg=new WeakMap,FI=new WeakMap,jf=new WeakMap,Um=new WeakMap;function cD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Si(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&VI.set(n,t)}).catch(()=>{}),Um.set(e,t),e}function uD(t){if(rg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});rg.set(t,e)}let ig={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Si(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hD(t){ig=t(ig)}function dD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Uf(this),e,...n);return FI.set(r,e.sort?e.sort():[e]),Si(r)}:lD().includes(t)?function(...e){return t.apply(Uf(this),e),Si(VI.get(this))}:function(...e){return Si(t.apply(Uf(this),e))}}function fD(t){return typeof t=="function"?dD(t):(t instanceof IDBTransaction&&uD(t),oD(t,aD())?new Proxy(t,ig):t)}function Si(t){if(t instanceof IDBRequest)return cD(t);if(jf.has(t))return jf.get(t);const e=fD(t);return e!==t&&(jf.set(t,e),Um.set(e,t)),e}const Uf=t=>Um.get(t);function pD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Si(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Si(o.result),l.oldVersion,l.newVersion,Si(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const gD=["get","getKey","getAll","getAllKeys","count"],mD=["put","add","delete","clear"],zf=new Map;function p0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zf.get(e))return zf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=mD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return zf.set(e,s),s}hD(t=>({...t,get:(e,n,r)=>p0(e,n)||t.get(e,n,r),has:(e,n)=>!!p0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_D(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _D(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sg="@firebase/app",g0="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new jm("@firebase/app"),vD="@firebase/app-compat",wD="@firebase/analytics-compat",ED="@firebase/analytics",SD="@firebase/app-check-compat",TD="@firebase/app-check",ID="@firebase/auth",xD="@firebase/auth-compat",bD="@firebase/database",PD="@firebase/data-connect",kD="@firebase/database-compat",CD="@firebase/functions",AD="@firebase/functions-compat",RD="@firebase/installations",DD="@firebase/installations-compat",MD="@firebase/messaging",ND="@firebase/messaging-compat",LD="@firebase/performance",OD="@firebase/performance-compat",VD="@firebase/remote-config",FD="@firebase/remote-config-compat",jD="@firebase/storage",UD="@firebase/storage-compat",zD="@firebase/firestore",BD="@firebase/vertexai",$D="@firebase/firestore-compat",HD="firebase",WD="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="[DEFAULT]",qD={[sg]:"fire-core",[vD]:"fire-core-compat",[ED]:"fire-analytics",[wD]:"fire-analytics-compat",[TD]:"fire-app-check",[SD]:"fire-app-check-compat",[ID]:"fire-auth",[xD]:"fire-auth-compat",[bD]:"fire-rtdb",[PD]:"fire-data-connect",[kD]:"fire-rtdb-compat",[CD]:"fire-fn",[AD]:"fire-fn-compat",[RD]:"fire-iid",[DD]:"fire-iid-compat",[MD]:"fire-fcm",[ND]:"fire-fcm-compat",[LD]:"fire-perf",[OD]:"fire-perf-compat",[VD]:"fire-rc",[FD]:"fire-rc-compat",[jD]:"fire-gcs",[UD]:"fire-gcs-compat",[zD]:"fire-fst",[$D]:"fire-fst-compat",[BD]:"fire-vertex","fire-js":"fire-js",[HD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new Map,KD=new Map,ag=new Map;function m0(t,e){try{t.container.addComponent(e)}catch(n){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function No(t){const e=t.name;if(ag.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;ag.set(e,t);for(const n of Ah.values())m0(n,t);for(const n of KD.values())m0(n,t);return!0}function zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ti=new rc("app","Firebase",GD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=WD;function jI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:og,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ti.create("bad-app-name",{appName:String(i)});if(n||(n=LI()),!n)throw Ti.create("no-options");const s=Ah.get(i);if(s){if(Ch(n,s.options)&&Ch(r,s.config))return s;throw Ti.create("duplicate-app",{appName:i})}const o=new tD(i);for(const l of ag.values())o.addComponent(l);const a=new QD(n,r,o);return Ah.set(i,a),a}function UI(t=og){const e=Ah.get(t);if(!e&&t===og&&LI())return jI();if(!e)throw Ti.create("no-app",{appName:t});return e}function Ii(t,e,n){var r;let i=(r=qD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(a.join(" "));return}No(new vs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="firebase-heartbeat-database",XD=1,Nl="firebase-heartbeat-store";let Bf=null;function zI(){return Bf||(Bf=pD(YD,XD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ti.create("idb-open",{originalErrorMessage:t.message})})),Bf}async function JD(t){try{const n=(await zI()).transaction(Nl),r=await n.objectStore(Nl).get(BI(t));return await n.done,r}catch(e){if(e instanceof Hr)Vr.warn(e.message);else{const n=Ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vr.warn(n.message)}}}async function y0(t,e){try{const r=(await zI()).transaction(Nl,"readwrite");await r.objectStore(Nl).put(e,BI(t)),await r.done}catch(n){if(n instanceof Hr)Vr.warn(n.message);else{const r=Ti.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vr.warn(r.message)}}}function BI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=1024,eM=30*24*60*60*1e3;class tM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=eM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Vr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_0(),{heartbeatsToSend:r,unsentEntries:i}=nM(this._heartbeatsCache.heartbeats),s=kh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Vr.warn(n),""}}}function _0(){return new Date().toISOString().substring(0,10)}function nM(t,e=ZD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),v0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),v0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $R()?HR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await JD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return y0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return y0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function v0(t){return kh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t){No(new vs("platform-logger",e=>new yD(e),"PRIVATE")),No(new vs("heartbeat",e=>new tM(e),"PRIVATE")),Ii(sg,g0,t),Ii(sg,g0,"esm2017"),Ii("fire-js","")}iM("");function Bm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function $I(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sM=$I,HI=new rc("auth","Firebase",$I());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new jm("@firebase/auth");function oM(t,...e){Rh.logLevel<=we.WARN&&Rh.warn(`Auth (${Qo}): ${t}`,...e)}function Lu(t,...e){Rh.logLevel<=we.ERROR&&Rh.error(`Auth (${Qo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,...e){throw $m(t,...e)}function or(t,...e){return $m(t,...e)}function WI(t,e,n){const r=Object.assign(Object.assign({},sM()),{[e]:n});return new rc("auth","Firebase",r).create(e,{appName:t.name})}function Rr(t){return WI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $m(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return HI.create(t,...e)}function ce(t,e,...n){if(!t)throw $m(e,...n)}function br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lu(e),new Error(e)}function Fr(t,e){t||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aM(){return w0()==="http:"||w0()==="https:"}function w0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aM()||jR()||"connection"in navigator)?navigator.onLine:!0}function cM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fr(n>e,"Short delay should be less than long delay!"),this.isMobile=OR()||UR()}get(){return lM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){Fr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new sc(3e4,6e4);function Fi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Wr(t,e,n,r,i={}){return KI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ic(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return FR()||(c.referrerPolicy="no-referrer"),qI.fetch()(GI(t,t.config.apiHost,n,a),c)})}async function KI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},uM),e);try{const i=new fM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Jc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Jc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Jc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw WI(t,h,c);Wn(t,h)}}catch(i){if(i instanceof Hr)throw i;Wn(t,"network-request-failed",{message:String(i)})}}async function oc(t,e,n,r,i={}){const s=await Wr(t,e,n,r,i);return"mfaPendingCredential"in s&&Wn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function GI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Hm(t.config,i):`${t.config.apiScheme}://${i}`}function dM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(or(this.auth,"network-request-failed")),hM.get())})}}function Jc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=or(t,e,r);return i.customData._tokenResponse=n,i}function E0(t){return t!==void 0&&t.enterprise!==void 0}class pM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gM(t,e){return Wr(t,"GET","/v2/recaptchaConfig",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t,e){return Wr(t,"POST","/v1/accounts:delete",e)}async function QI(t,e){return Wr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yM(t,e=!1){const n=It(t),r=await n.getIdToken(e),i=Wm(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ll($f(i.auth_time)),issuedAtTime:ll($f(i.iat)),expirationTime:ll($f(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function $f(t){return Number(t)*1e3}function Wm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lu("JWT malformed, contained fewer than 3 sections"),null;try{const i=MI(n);return i?JSON.parse(i):(Lu("Failed to decode base64 JWT payload"),null)}catch(i){return Lu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function S0(t){const e=Wm(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hr&&_M(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _M({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Lo(t,QI(n,{idToken:r}));ce(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?YI(s.providerUserInfo):[],a=EM(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cg(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function wM(t){const e=It(t);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YI(t){return t.map(e=>{var{providerId:n}=e,r=Bm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SM(t,e){const n=await KI(t,{},async()=>{const r=ic({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=GI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TM(t,e){return Wr(t,"POST","/v2/accounts:revokeToken",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=S0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await SM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new yo;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Bm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Lo(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yM(this,e)}reload(){return wM(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Dh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await Lo(this,mM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:D,isAnonymous:N,providerData:V,stsTokenManager:I}=n;ce(b&&I,e,"internal-error");const _=yo.fromJSON(this.name,I);ce(typeof b=="string",e,"internal-error"),Xr(d,e.name),Xr(f,e.name),ce(typeof D=="boolean",e,"internal-error"),ce(typeof N=="boolean",e,"internal-error"),Xr(g,e.name),Xr(y,e.name),Xr(v,e.name),Xr(S,e.name),Xr(E,e.name),Xr(w,e.name);const T=new Pr({uid:b,auth:e,email:f,emailVerified:D,displayName:d,isAnonymous:N,photoURL:y,phoneNumber:g,tenantId:v,stsTokenManager:_,createdAt:E,lastLoginAt:w});return V&&Array.isArray(V)&&(T.providerData=V.map(P=>Object.assign({},P))),S&&(T._redirectEventId=S),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new yo;i.updateFromServerResponse(n);const s=new Pr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Dh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ce(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?YI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new yo;a.updateFromIdToken(r);const l=new Pr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new Map;function kr(t){Fr(t instanceof Function,"Expected a class definition");let e=T0.get(t);return e?(Fr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,T0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}XI.type="NONE";const I0=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t,e,n){return`firebase:${t}:${e}:${n}`}class _o{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ou(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ou("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _o(kr(I0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||kr(I0);const o=Ou(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Pr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new _o(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new _o(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rx(e))return"Blackberry";if(ix(e))return"Webos";if(ZI(e))return"Safari";if((e.includes("chrome/")||ex(e))&&!e.includes("edge/"))return"Chrome";if(nx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function JI(t=Vt()){return/firefox\//i.test(t)}function ZI(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ex(t=Vt()){return/crios\//i.test(t)}function tx(t=Vt()){return/iemobile/i.test(t)}function nx(t=Vt()){return/android/i.test(t)}function rx(t=Vt()){return/blackberry/i.test(t)}function ix(t=Vt()){return/webos/i.test(t)}function qm(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IM(t=Vt()){var e;return qm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xM(){return zR()&&document.documentMode===10}function sx(t=Vt()){return qm(t)||nx(t)||ix(t)||rx(t)||/windows phone/i.test(t)||tx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t,e=[]){let n;switch(t){case"Browser":n=x0(Vt());break;case"Worker":n=`${x0(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(t,e={}){return Wr(t,"GET","/v2/passwordPolicy",Fi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=6;class CM{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:kM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b0(this),this.idTokenSubscription=new b0(this),this.beforeStateQueue=new bM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await QI(this,{idToken:e}),r=await Pr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(rr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(Rr(this));const n=e?It(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PM(this),n=new CM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&kr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[kr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ox(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function bs(t){return It(t)}class b0{constructor(e){this.auth=e,this.observer=null,this.addObserver=QR(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RM(t){Sd=t}function ax(t){return Sd.loadJS(t)}function DM(){return Sd.recaptchaEnterpriseScript}function MM(){return Sd.gapiScript}function NM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class LM{constructor(){this.enterprise=new OM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class OM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const VM="recaptcha-enterprise",lx="NO_RECAPTCHA";class FM{constructor(e){this.type=VM,this.auth=bs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{gM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new pM(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;E0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(lx)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LM().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&E0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=DM();l.length!==0&&(l+=a),ax(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function P0(t,e,n,r=!1,i=!1){const s=new FM(t);let o;if(i)o=lx;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ug(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await P0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await P0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t,e){const n=zm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ch(s,e??{}))return i;Wn(i,"already-initialized")}return n.initialize({options:e})}function UM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zM(t,e,n){const r=bs(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=cx(e),{host:o,port:a}=BM(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),$M()}function cx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BM(t){const e=cx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:k0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:k0(o)}}}function k0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $M(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,n){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}async function HM(t,e){return Wr(t,"POST","/v1/accounts:update",e)}async function WM(t,e){return Wr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t,e){return oc(t,"POST","/v1/accounts:signInWithPassword",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return oc(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}async function GM(t,e){return oc(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends Km{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ll(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ll(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ug(e,n,"signInWithPassword",qM);case"emailLink":return KM(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ug(e,r,"signUpPassword",WM);case"emailLink":return GM(e,{idToken:n,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(t,e){return oc(t,"POST","/v1/accounts:signInWithIdp",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM="http://localhost";class ws extends Km{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Bm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ws(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return vo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vo(e,n)}buildRequest(){const e={requestUri:QM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ic(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XM(t){const e=ja(Ua(t)).link,n=e?ja(Ua(e)).deep_link_id:null,r=ja(Ua(t)).deep_link_id;return(r?ja(Ua(r)).link:null)||r||n||e||t}class Gm{constructor(e){var n,r,i,s,o,a;const l=ja(Ua(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=YM((i=l.mode)!==null&&i!==void 0?i:null);ce(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=XM(e);try{return new Gm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.providerId=Ps.PROVIDER_ID}static credential(e,n){return Ll._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gm.parseLink(n);return ce(r,"argument-error"),Ll._fromEmailAndCode(e,r.code,r.tenantId)}}Ps.PROVIDER_ID="password";Ps.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ps.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends ux{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends ac{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.FACEBOOK_SIGN_IN_METHOD="facebook.com";si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return oi.credential(n,r)}catch{return null}}}oi.GOOGLE_SIGN_IN_METHOD="google.com";oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends ac{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ai.credential(e.oauthAccessToken)}catch{return null}}}ai.GITHUB_SIGN_IN_METHOD="github.com";ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends ac{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return li.credential(n,r)}catch{return null}}}li.TWITTER_SIGN_IN_METHOD="twitter.com";li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e){return oc(t,"POST","/v1/accounts:signUp",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Pr._fromIdTokenResponse(e,r,i),o=C0(r);return new Es({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=C0(r);return new Es({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function C0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends Hr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Mh(e,n,r,i)}}function hx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(t,s,e,r):s})}async function ZM(t,e,n=!1){const r=await Lo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Es._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(t,e,n=!1){const{auth:r}=t;if(rr(r.app))return Promise.reject(Rr(r));const i="reauthenticate";try{const s=await Lo(t,hx(r,i,e,t),n);ce(s.idToken,r,"internal-error");const o=Wm(s.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Es._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Wn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(t,e,n=!1){if(rr(t.app))return Promise.reject(Rr(t));const r="signIn",i=await hx(t,r,e),s=await Es._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function eN(t,e){return fx(bs(t),e)}async function tN(t,e){return dx(It(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(t){const e=bs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nN(t,e,n){if(rr(t.app))return Promise.reject(Rr(t));const r=bs(t),o=await ug(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&px(t),l}),a=await Es._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function rN(t,e,n){return rr(t.app)?Promise.reject(Rr(t)):eN(It(t),Ps.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&px(t),r})}function iN(t,e){return sN(It(t),null,e)}async function sN(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Lo(t,HM(r,s));await t._updateTokensIfNecessary(o,!0)}function oN(t,e,n,r){return It(t).onIdTokenChanged(e,n,r)}function aN(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function lN(t,e,n,r){return It(t).onAuthStateChanged(e,n,r)}function cN(t){return It(t).signOut()}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=1e3,hN=10;class mx extends gx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);xM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,hN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},uN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}mx.type="LOCAL";const dN=mx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx extends gx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yx.type="SESSION";const _x=yx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Td(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await fN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Qm("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function gN(t){ar().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function mN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _N(){return vx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="firebaseLocalStorageDb",vN=1,Lh="firebaseLocalStorage",Ex="fbase_key";class lc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Id(t,e){return t.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function wN(){const t=indexedDB.deleteDatabase(wx);return new lc(t).toPromise()}function hg(){const t=indexedDB.open(wx,vN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lh,{keyPath:Ex})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),await wN(),e(await hg()))})})}async function A0(t,e,n){const r=Id(t,!0).put({[Ex]:e,value:n});return new lc(r).toPromise()}async function EN(t,e){const n=Id(t,!1).get(e),r=await new lc(n).toPromise();return r===void 0?null:r.value}function R0(t,e){const n=Id(t,!0).delete(e);return new lc(n).toPromise()}const SN=800,TN=3;class Sx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Td._getInstance(_N()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await mN(),!this.activeServiceWorker)return;this.sender=new pN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hg();return await A0(e,Nh,"1"),await R0(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>A0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>EN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Id(i,!1).getAll();return new lc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Sx.type="LOCAL";const IN=Sx;new sc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e){return e?kr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends Km{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bN(t){return fx(t.auth,new Ym(t),t.bypassAuthState)}function PN(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),dx(n,new Ym(t),t.bypassAuthState)}async function kN(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),ZM(n,new Ym(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bN;case"linkViaPopup":case"linkViaRedirect":return kN;case"reauthViaPopup":case"reauthViaRedirect":return PN;default:Wn(this.auth,"internal-error")}}resolve(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new sc(2e3,1e4);class lo extends Tx{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Fr(this.filter.length===1,"Popup operations only handle one event");const e=Qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CN.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="pendingRedirect",Vu=new Map;class RN extends Tx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vu.get(this.auth._key());if(!e){try{const r=await DN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vu.set(this.auth._key(),e)}return this.bypassAuthState||Vu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DN(t,e){const n=LN(e),r=NN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function MN(t,e){Vu.set(t._key(),e)}function NN(t){return kr(t._redirectPersistence)}function LN(t){return Ou(AN,t.config.apiKey,t.name)}async function ON(t,e,n=!1){if(rr(t.app))return Promise.reject(Rr(t));const r=bs(t),i=xN(r,e),o=await new RN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=10*60*1e3;class FN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ix(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(or(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VN&&this.cachedEventUids.clear(),this.cachedEventUids.has(D0(e))}saveEventToCache(e){this.cachedEventUids.add(D0(e)),this.lastProcessedEventTime=Date.now()}}function D0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ix({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ix(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e={}){return Wr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BN=/^https?/;async function $N(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UN(t);for(const n of e)try{if(HN(n))return}catch{}Wn(t,"unauthorized-domain")}function HN(t){const e=lg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!BN.test(n))return!1;if(zN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new sc(3e4,6e4);function M0(){const t=ar().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qN(t){return new Promise((e,n)=>{var r,i,s;function o(){M0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M0(),n(or(t,"network-request-failed"))},timeout:WN.get()})}if(!((i=(r=ar().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ar().gapi)===null||s===void 0)&&s.load)o();else{const a=NM("iframefcb");return ar()[a]=()=>{gapi.load?o():n(or(t,"network-request-failed"))},ax(`${MM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Fu=null,e})}let Fu=null;function KN(t){return Fu=Fu||qN(t),Fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new sc(5e3,15e3),QN="__/auth/iframe",YN="emulator/auth/iframe",XN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZN(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hm(e,YN):`https://${t.config.authDomain}/${QN}`,r={apiKey:e.apiKey,appName:t.name,v:Qo},i=JN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ic(r).slice(1)}`}async function eL(t){const e=await KN(t),n=ar().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:ZN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=or(t,"network-request-failed"),a=ar().setTimeout(()=>{s(o)},GN.get());function l(){ar().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nL=500,rL=600,iL="_blank",sL="http://localhost";class N0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oL(t,e,n,r=nL,i=rL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},tL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Vt().toLowerCase();n&&(a=ex(c)?iL:n),JI(c)&&(e=e||sL,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,y])=>`${f}${g}=${y},`,"");if(IM(c)&&a!=="_self")return aL(e||"",a),new N0(null);const d=window.open(e||"",a,h);ce(d,t,"popup-blocked");try{d.focus()}catch{}return new N0(d)}function aL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL="__/auth/handler",cL="emulator/auth/handler",uL=encodeURIComponent("fac");async function L0(t,e,n,r,i,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qo,eventId:i};if(e instanceof ux){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",GR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof ac){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${uL}=${encodeURIComponent(l)}`:"";return`${hL(t)}?${ic(a).slice(1)}${c}`}function hL({config:t}){return t.emulator?Hm(t,cL):`https://${t.authDomain}/${lL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="webStorageSupport";class dL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_x,this._completeRedirectFn=ON,this._overrideRedirectResult=MN}async _openPopup(e,n,r,i){var s;Fr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await L0(e,n,r,lg(),i);return oL(e,o,Qm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await L0(e,n,r,lg(),i);return gN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Fr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await eL(e),r=new FN(e);return n.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hf,{type:Hf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Hf];o!==void 0&&n(!!o),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$N(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sx()||ZI()||qm()}}const fL=dL;var O0="@firebase/auth",V0="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mL(t){No(new vs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ox(t)},c=new AM(r,i,s,l);return UM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),No(new vs("auth-internal",e=>{const n=bs(e.getProvider("auth").getImmediate());return(r=>new pL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(O0,V0,gL(t)),Ii(O0,V0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=5*60,_L=OI("authIdTokenMaxAge")||yL;let F0=null;const vL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_L)return;const i=n==null?void 0:n.token;F0!==i&&(F0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function wL(t=UI()){const e=zm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jM(t,{popupRedirectResolver:fL,persistence:[IN,dN,_x]}),r=OI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=vL(s.toString());aN(n,o,()=>o(n.currentUser)),oN(n,a=>o(a))}}const i=NI("auth");return i&&zM(n,`http://${i}`),n}function EL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=or("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",EL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mL("Browser");var SL="firebase",TL="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(SL,TL,"app");var j0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,xx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function T(){}T.prototype=_.prototype,I.D=_.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(P,R,A){for(var k=Array(arguments.length-2),q=2;q<arguments.length;q++)k[q-2]=arguments[q];return _.prototype[R].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,_,T){T||(T=0);var P=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)P[R]=_.charCodeAt(T++)|_.charCodeAt(T++)<<8|_.charCodeAt(T++)<<16|_.charCodeAt(T++)<<24;else for(R=0;16>R;++R)P[R]=_[T++]|_[T++]<<8|_[T++]<<16|_[T++]<<24;_=I.g[0],T=I.g[1],R=I.g[2];var A=I.g[3],k=_+(A^T&(R^A))+P[0]+3614090360&4294967295;_=T+(k<<7&4294967295|k>>>25),k=A+(R^_&(T^R))+P[1]+3905402710&4294967295,A=_+(k<<12&4294967295|k>>>20),k=R+(T^A&(_^T))+P[2]+606105819&4294967295,R=A+(k<<17&4294967295|k>>>15),k=T+(_^R&(A^_))+P[3]+3250441966&4294967295,T=R+(k<<22&4294967295|k>>>10),k=_+(A^T&(R^A))+P[4]+4118548399&4294967295,_=T+(k<<7&4294967295|k>>>25),k=A+(R^_&(T^R))+P[5]+1200080426&4294967295,A=_+(k<<12&4294967295|k>>>20),k=R+(T^A&(_^T))+P[6]+2821735955&4294967295,R=A+(k<<17&4294967295|k>>>15),k=T+(_^R&(A^_))+P[7]+4249261313&4294967295,T=R+(k<<22&4294967295|k>>>10),k=_+(A^T&(R^A))+P[8]+1770035416&4294967295,_=T+(k<<7&4294967295|k>>>25),k=A+(R^_&(T^R))+P[9]+2336552879&4294967295,A=_+(k<<12&4294967295|k>>>20),k=R+(T^A&(_^T))+P[10]+4294925233&4294967295,R=A+(k<<17&4294967295|k>>>15),k=T+(_^R&(A^_))+P[11]+2304563134&4294967295,T=R+(k<<22&4294967295|k>>>10),k=_+(A^T&(R^A))+P[12]+1804603682&4294967295,_=T+(k<<7&4294967295|k>>>25),k=A+(R^_&(T^R))+P[13]+4254626195&4294967295,A=_+(k<<12&4294967295|k>>>20),k=R+(T^A&(_^T))+P[14]+2792965006&4294967295,R=A+(k<<17&4294967295|k>>>15),k=T+(_^R&(A^_))+P[15]+1236535329&4294967295,T=R+(k<<22&4294967295|k>>>10),k=_+(R^A&(T^R))+P[1]+4129170786&4294967295,_=T+(k<<5&4294967295|k>>>27),k=A+(T^R&(_^T))+P[6]+3225465664&4294967295,A=_+(k<<9&4294967295|k>>>23),k=R+(_^T&(A^_))+P[11]+643717713&4294967295,R=A+(k<<14&4294967295|k>>>18),k=T+(A^_&(R^A))+P[0]+3921069994&4294967295,T=R+(k<<20&4294967295|k>>>12),k=_+(R^A&(T^R))+P[5]+3593408605&4294967295,_=T+(k<<5&4294967295|k>>>27),k=A+(T^R&(_^T))+P[10]+38016083&4294967295,A=_+(k<<9&4294967295|k>>>23),k=R+(_^T&(A^_))+P[15]+3634488961&4294967295,R=A+(k<<14&4294967295|k>>>18),k=T+(A^_&(R^A))+P[4]+3889429448&4294967295,T=R+(k<<20&4294967295|k>>>12),k=_+(R^A&(T^R))+P[9]+568446438&4294967295,_=T+(k<<5&4294967295|k>>>27),k=A+(T^R&(_^T))+P[14]+3275163606&4294967295,A=_+(k<<9&4294967295|k>>>23),k=R+(_^T&(A^_))+P[3]+4107603335&4294967295,R=A+(k<<14&4294967295|k>>>18),k=T+(A^_&(R^A))+P[8]+1163531501&4294967295,T=R+(k<<20&4294967295|k>>>12),k=_+(R^A&(T^R))+P[13]+2850285829&4294967295,_=T+(k<<5&4294967295|k>>>27),k=A+(T^R&(_^T))+P[2]+4243563512&4294967295,A=_+(k<<9&4294967295|k>>>23),k=R+(_^T&(A^_))+P[7]+1735328473&4294967295,R=A+(k<<14&4294967295|k>>>18),k=T+(A^_&(R^A))+P[12]+2368359562&4294967295,T=R+(k<<20&4294967295|k>>>12),k=_+(T^R^A)+P[5]+4294588738&4294967295,_=T+(k<<4&4294967295|k>>>28),k=A+(_^T^R)+P[8]+2272392833&4294967295,A=_+(k<<11&4294967295|k>>>21),k=R+(A^_^T)+P[11]+1839030562&4294967295,R=A+(k<<16&4294967295|k>>>16),k=T+(R^A^_)+P[14]+4259657740&4294967295,T=R+(k<<23&4294967295|k>>>9),k=_+(T^R^A)+P[1]+2763975236&4294967295,_=T+(k<<4&4294967295|k>>>28),k=A+(_^T^R)+P[4]+1272893353&4294967295,A=_+(k<<11&4294967295|k>>>21),k=R+(A^_^T)+P[7]+4139469664&4294967295,R=A+(k<<16&4294967295|k>>>16),k=T+(R^A^_)+P[10]+3200236656&4294967295,T=R+(k<<23&4294967295|k>>>9),k=_+(T^R^A)+P[13]+681279174&4294967295,_=T+(k<<4&4294967295|k>>>28),k=A+(_^T^R)+P[0]+3936430074&4294967295,A=_+(k<<11&4294967295|k>>>21),k=R+(A^_^T)+P[3]+3572445317&4294967295,R=A+(k<<16&4294967295|k>>>16),k=T+(R^A^_)+P[6]+76029189&4294967295,T=R+(k<<23&4294967295|k>>>9),k=_+(T^R^A)+P[9]+3654602809&4294967295,_=T+(k<<4&4294967295|k>>>28),k=A+(_^T^R)+P[12]+3873151461&4294967295,A=_+(k<<11&4294967295|k>>>21),k=R+(A^_^T)+P[15]+530742520&4294967295,R=A+(k<<16&4294967295|k>>>16),k=T+(R^A^_)+P[2]+3299628645&4294967295,T=R+(k<<23&4294967295|k>>>9),k=_+(R^(T|~A))+P[0]+4096336452&4294967295,_=T+(k<<6&4294967295|k>>>26),k=A+(T^(_|~R))+P[7]+1126891415&4294967295,A=_+(k<<10&4294967295|k>>>22),k=R+(_^(A|~T))+P[14]+2878612391&4294967295,R=A+(k<<15&4294967295|k>>>17),k=T+(A^(R|~_))+P[5]+4237533241&4294967295,T=R+(k<<21&4294967295|k>>>11),k=_+(R^(T|~A))+P[12]+1700485571&4294967295,_=T+(k<<6&4294967295|k>>>26),k=A+(T^(_|~R))+P[3]+2399980690&4294967295,A=_+(k<<10&4294967295|k>>>22),k=R+(_^(A|~T))+P[10]+4293915773&4294967295,R=A+(k<<15&4294967295|k>>>17),k=T+(A^(R|~_))+P[1]+2240044497&4294967295,T=R+(k<<21&4294967295|k>>>11),k=_+(R^(T|~A))+P[8]+1873313359&4294967295,_=T+(k<<6&4294967295|k>>>26),k=A+(T^(_|~R))+P[15]+4264355552&4294967295,A=_+(k<<10&4294967295|k>>>22),k=R+(_^(A|~T))+P[6]+2734768916&4294967295,R=A+(k<<15&4294967295|k>>>17),k=T+(A^(R|~_))+P[13]+1309151649&4294967295,T=R+(k<<21&4294967295|k>>>11),k=_+(R^(T|~A))+P[4]+4149444226&4294967295,_=T+(k<<6&4294967295|k>>>26),k=A+(T^(_|~R))+P[11]+3174756917&4294967295,A=_+(k<<10&4294967295|k>>>22),k=R+(_^(A|~T))+P[2]+718787259&4294967295,R=A+(k<<15&4294967295|k>>>17),k=T+(A^(R|~_))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var T=_-this.blockSize,P=this.B,R=this.h,A=0;A<_;){if(R==0)for(;A<=T;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<_;)if(P[R++]=I.charCodeAt(A++),R==this.blockSize){i(this,P),R=0;break}}else for(;A<_;)if(P[R++]=I[A++],R==this.blockSize){i(this,P),R=0;break}}this.h=R,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var T=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=T&255,T/=256;for(this.u(I),I=Array(16),_=T=0;4>_;++_)for(var P=0;32>P;P+=8)I[T++]=this.g[_]>>>P&255;return I};function s(I,_){var T=a;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=_(I)}function o(I,_){this.h=_;for(var T=[],P=!0,R=I.length-1;0<=R;R--){var A=I[R]|0;P&&A==_||(T[R]=A,P=!1)}this.g=T}var a={};function l(I){return-128<=I&&128>I?s(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return S(c(-I));for(var _=[],T=1,P=0;I>=T;P++)_[P]=I/T|0,T*=4294967296;return new o(_,0)}function h(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return S(h(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(_,8)),P=d,R=0;R<I.length;R+=8){var A=Math.min(8,I.length-R),k=parseInt(I.substring(R,R+A),_);8>A?(A=c(Math.pow(_,A)),P=P.j(A).add(c(k))):(P=P.j(T),P=P.add(c(k)))}return P}var d=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-S(this).m();for(var I=0,_=1,T=0;T<this.g.length;T++){var P=this.i(T);I+=(0<=P?P:4294967296+P)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(v(this))return"-"+S(this).toString(I);for(var _=c(Math.pow(I,6)),T=this,P="";;){var R=D(T,_).g;T=E(T,R.j(_));var A=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=R,y(T))return A+P;for(;6>A.length;)A="0"+A;P=A+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function v(I){return I.h==-1}t.l=function(I){return I=E(this,I),v(I)?-1:y(I)?0:1};function S(I){for(var _=I.g.length,T=[],P=0;P<_;P++)T[P]=~I.g[P];return new o(T,~I.h).add(f)}t.abs=function(){return v(this)?S(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),T=[],P=0,R=0;R<=_;R++){var A=P+(this.i(R)&65535)+(I.i(R)&65535),k=(A>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);P=k>>>16,A&=65535,k&=65535,T[R]=k<<16|A}return new o(T,T[T.length-1]&-2147483648?-1:0)};function E(I,_){return I.add(S(_))}t.j=function(I){if(y(this)||y(I))return d;if(v(this))return v(I)?S(this).j(S(I)):S(S(this).j(I));if(v(I))return S(this.j(S(I)));if(0>this.l(g)&&0>I.l(g))return c(this.m()*I.m());for(var _=this.g.length+I.g.length,T=[],P=0;P<2*_;P++)T[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<I.g.length;R++){var A=this.i(P)>>>16,k=this.i(P)&65535,q=I.i(R)>>>16,J=I.i(R)&65535;T[2*P+2*R]+=k*J,w(T,2*P+2*R),T[2*P+2*R+1]+=A*J,w(T,2*P+2*R+1),T[2*P+2*R+1]+=k*q,w(T,2*P+2*R+1),T[2*P+2*R+2]+=A*q,w(T,2*P+2*R+2)}for(P=0;P<_;P++)T[P]=T[2*P+1]<<16|T[2*P];for(P=_;P<2*_;P++)T[P]=0;return new o(T,0)};function w(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function b(I,_){this.g=I,this.h=_}function D(I,_){if(y(_))throw Error("division by zero");if(y(I))return new b(d,d);if(v(I))return _=D(S(I),_),new b(S(_.g),S(_.h));if(v(_))return _=D(I,S(_)),new b(S(_.g),_.h);if(30<I.g.length){if(v(I)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var T=f,P=_;0>=P.l(I);)T=N(T),P=N(P);var R=V(T,1),A=V(P,1);for(P=V(P,2),T=V(T,2);!y(P);){var k=A.add(P);0>=k.l(I)&&(R=R.add(T),A=k),P=V(P,1),T=V(T,1)}return _=E(I,R.j(_)),new b(R,_)}for(R=d;0<=I.l(_);){for(T=Math.max(1,Math.floor(I.m()/_.m())),P=Math.ceil(Math.log(T)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),A=c(T),k=A.j(_);v(k)||0<k.l(I);)T-=P,A=c(T),k=A.j(_);y(A)&&(A=f),R=R.add(A),I=E(I,k)}return new b(R,I)}t.A=function(I){return D(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),T=[],P=0;P<_;P++)T[P]=this.i(P)&I.i(P);return new o(T,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),T=[],P=0;P<_;P++)T[P]=this.i(P)|I.i(P);return new o(T,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),T=[],P=0;P<_;P++)T[P]=this.i(P)^I.i(P);return new o(T,this.h^I.h)};function N(I){for(var _=I.g.length+1,T=[],P=0;P<_;P++)T[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(T,I.h)}function V(I,_){var T=_>>5;_%=32;for(var P=I.g.length-T,R=[],A=0;A<P;A++)R[A]=0<_?I.i(A+T)>>>_|I.i(A+T+1)<<32-_:I.i(A+T);return new o(R,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,hs=o}).apply(typeof j0<"u"?j0:typeof self<"u"?self:typeof window<"u"?window:{});var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bx,za,Px,ju,dg,kx,Cx,Ax;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,m){return u==Array.prototype||u==Object.prototype||(u[p]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zc=="object"&&Zc];for(var p=0;p<u.length;++p){var m=u[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var m=r;u=u.split(".");for(var x=0;x<u.length-1;x++){var O=u[x];if(!(O in m))break e;m=m[O]}u=u[u.length-1],x=m[u],p=p(x),p!=x&&p!=null&&e(m,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var m=0,x=!1,O={next:function(){if(!x&&m<u.length){var F=m++;return{value:p(F,u[F]),done:!1}}return x=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,m){return u.call.apply(u.bind,arguments)}function d(u,p,m){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,x),u.apply(p,O)}}return function(){return u.apply(p,arguments)}}function f(u,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function g(u,p){var m=Array.prototype.slice.call(arguments,1);return function(){var x=m.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function y(u,p){function m(){}m.prototype=p.prototype,u.aa=p.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(x,O,F){for(var G=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)G[Ne-2]=arguments[Ne];return p.prototype[O].apply(x,G)}}function v(u){const p=u.length;if(0<p){const m=Array(p);for(let x=0;x<p;x++)m[x]=u[x];return m}return[]}function S(u,p){for(let m=1;m<arguments.length;m++){const x=arguments[m];if(l(x)){const O=u.length||0,F=x.length||0;u.length=O+F;for(let G=0;G<F;G++)u[O+G]=x[G]}else u.push(x)}}class E{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function w(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function D(u){return D[" "](u),u}D[" "]=function(){};var N=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function V(u,p,m){for(const x in u)p.call(m,u[x],x,u)}function I(u,p){for(const m in u)p.call(void 0,u[m],m,u)}function _(u){const p={};for(const m in u)p[m]=u[m];return p}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let m,x;for(let O=1;O<arguments.length;O++){x=arguments[O];for(m in x)u[m]=x[m];for(let F=0;F<T.length;F++)m=T[F],Object.prototype.hasOwnProperty.call(x,m)&&(u[m]=x[m])}}function R(u){var p=1;u=u.split(":");const m=[];for(;0<p&&u.length;)m.push(u.shift()),p--;return u.length&&m.push(u.join(":")),m}function A(u){a.setTimeout(()=>{throw u},0)}function k(){var u=Y;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class q{constructor(){this.h=this.g=null}add(p,m){const x=J.get();x.set(p,m),this.h?this.h.next=x:this.g=x,this.h=x}}var J=new E(()=>new ie,u=>u.reset());class ie{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,B=!1,Y=new q,Z=()=>{const u=a.Promise.resolve(void 0);ae=()=>{u.then(ge)}};var ge=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(m){A(m)}var p=J;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return u}();function pe(u,p){if(le.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(N){e:{try{D(p.nodeName);var O=!0;break e}catch{}O=!1}O||(p=null)}}else m=="mouseover"?p=u.fromElement:m=="mouseout"&&(p=u.toElement);this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&pe.aa.h.call(this)}}y(pe,le);var ve={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),mn=0;function Kn(u,p,m,x,O){this.listener=u,this.proxy=null,this.src=p,this.type=m,this.capture=!!x,this.ha=O,this.key=++mn,this.da=this.fa=!1}function rn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Fe(u){this.src=u,this.g={},this.h=0}Fe.prototype.add=function(u,p,m,x,O){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var G=at(u,p,x,O);return-1<G?(p=u[G],m||(p.fa=!1)):(p=new Kn(p,this.src,F,!!x,O),p.fa=m,u.push(p)),p};function yt(u,p){var m=p.type;if(m in u.g){var x=u.g[m],O=Array.prototype.indexOf.call(x,p,void 0),F;(F=0<=O)&&Array.prototype.splice.call(x,O,1),F&&(rn(p),u.g[m].length==0&&(delete u.g[m],u.h--))}}function at(u,p,m,x){for(var O=0;O<u.length;++O){var F=u[O];if(!F.da&&F.listener==p&&F.capture==!!m&&F.ha==x)return O}return-1}var yn="closure_lm_"+(1e6*Math.random()|0),Gn={};function qr(u,p,m,x,O){if(Array.isArray(p)){for(var F=0;F<p.length;F++)qr(u,p[F],m,x,O);return null}return m=me(m),u&&u[rt]?u.K(p,m,c(x)?!!x.capture:!!x,O):sn(u,p,m,!1,x,O)}function sn(u,p,m,x,O,F){if(!p)throw Error("Invalid event type");var G=c(O)?!!O.capture:!!O,Ne=H(u);if(Ne||(u[yn]=Ne=new Fe(u)),m=Ne.add(p,m,x,G,F),m.proxy)return m;if(x=M(),m.proxy=x,x.src=u,x.listener=m,u.addEventListener)ye||(O=G),O===void 0&&(O=!1),u.addEventListener(p.toString(),x,O);else if(u.attachEvent)u.attachEvent(X(p.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return m}function M(){function u(m){return p.call(u.src,u.listener,m)}const p=K;return u}function L(u,p,m,x,O){if(Array.isArray(p))for(var F=0;F<p.length;F++)L(u,p[F],m,x,O);else x=c(x)?!!x.capture:!!x,m=me(m),u&&u[rt]?(u=u.i,p=String(p).toString(),p in u.g&&(F=u.g[p],m=at(F,m,x,O),-1<m&&(rn(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete u.g[p],u.h--)))):u&&(u=H(u))&&(p=u.g[p.toString()],u=-1,p&&(u=at(p,m,x,O)),(m=-1<u?p[u]:null)&&j(m))}function j(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[rt])yt(p.i,u);else{var m=u.type,x=u.proxy;p.removeEventListener?p.removeEventListener(m,x,u.capture):p.detachEvent?p.detachEvent(X(m),x):p.addListener&&p.removeListener&&p.removeListener(x),(m=H(p))?(yt(m,u),m.h==0&&(m.src=null,p[yn]=null)):rn(u)}}}function X(u){return u in Gn?Gn[u]:Gn[u]="on"+u}function K(u,p){if(u.da)u=!0;else{p=new pe(p,this);var m=u.listener,x=u.ha||u.src;u.fa&&j(u),u=m.call(x,p)}return u}function H(u){return u=u[yn],u instanceof Fe?u:null}var se="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(u){return typeof u=="function"?u:(u[se]||(u[se]=function(p){return u.handleEvent(p)}),u[se])}function Se(){re.call(this),this.i=new Fe(this),this.M=this,this.F=null}y(Se,re),Se.prototype[rt]=!0,Se.prototype.removeEventListener=function(u,p,m,x){L(this,u,p,m,x)};function xe(u,p){var m,x=u.F;if(x)for(m=[];x;x=x.F)m.push(x);if(u=u.M,x=p.type||p,typeof p=="string")p=new le(p,u);else if(p instanceof le)p.target=p.target||u;else{var O=p;p=new le(x,u),P(p,O)}if(O=!0,m)for(var F=m.length-1;0<=F;F--){var G=p.g=m[F];O=_n(G,x,!0,p)&&O}if(G=p.g=u,O=_n(G,x,!0,p)&&O,O=_n(G,x,!1,p)&&O,m)for(F=0;F<m.length;F++)G=p.g=m[F],O=_n(G,x,!1,p)&&O}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var m=u.g[p],x=0;x<m.length;x++)rn(m[x]);delete u.g[p],u.h--}}this.F=null},Se.prototype.K=function(u,p,m,x){return this.i.add(String(u),p,!1,m,x)},Se.prototype.L=function(u,p,m,x){return this.i.add(String(u),p,!0,m,x)};function _n(u,p,m,x){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var O=!0,F=0;F<p.length;++F){var G=p[F];if(G&&!G.da&&G.capture==m){var Ne=G.listener,_t=G.ha||G.src;G.fa&&yt(u.i,G),O=Ne.call(_t,x)!==!1&&O}}return O&&!x.defaultPrevented}function mc(u,p,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Ls(u){u.g=mc(()=>{u.g=null,u.i&&(u.i=!1,Ls(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class ia extends re{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ls(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(u){re.call(this),this.h=u,this.g={}}y(ji,re);var sa=[];function yc(u){V(u.g,function(p,m){this.g.hasOwnProperty(m)&&j(p)},u),u.g={}}ji.prototype.N=function(){ji.aa.N.call(this),yc(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Os=a.JSON.stringify,G1=a.JSON.parse,Q1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Bd(){}Bd.prototype.h=null;function Wy(u){return u.h||(u.h=u.i())}function qy(){}var oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $d(){le.call(this,"d")}y($d,le);function Hd(){le.call(this,"c")}y(Hd,le);var Ui={},Ky=null;function _c(){return Ky=Ky||new Se}Ui.La="serverreachability";function Gy(u){le.call(this,Ui.La,u)}y(Gy,le);function aa(u){const p=_c();xe(p,new Gy(p))}Ui.STAT_EVENT="statevent";function Qy(u,p){le.call(this,Ui.STAT_EVENT,u),this.stat=p}y(Qy,le);function Ft(u){const p=_c();xe(p,new Qy(p,u))}Ui.Ma="timingevent";function Yy(u,p){le.call(this,Ui.Ma,u),this.size=p}y(Yy,le);function la(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function ca(){this.g=!0}ca.prototype.xa=function(){this.g=!1};function Y1(u,p,m,x,O,F){u.info(function(){if(u.g)if(F)for(var G="",Ne=F.split("&"),_t=0;_t<Ne.length;_t++){var ke=Ne[_t].split("=");if(1<ke.length){var bt=ke[0];ke=ke[1];var Pt=bt.split("_");G=2<=Pt.length&&Pt[1]=="type"?G+(bt+"="+ke+"&"):G+(bt+"=redacted&")}}else G=null;else G=F;return"XMLHTTP REQ ("+x+") [attempt "+O+"]: "+p+`
`+m+`
`+G})}function X1(u,p,m,x,O,F,G){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+O+"]: "+p+`
`+m+`
`+F+" "+G})}function Vs(u,p,m,x){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Z1(u,m)+(x?" "+x:"")})}function J1(u,p){u.info(function(){return"TIMEOUT: "+p})}ca.prototype.info=function(){};function Z1(u,p){if(!u.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var x=m[u];if(!(2>x.length)){var O=x[1];if(Array.isArray(O)&&!(1>O.length)){var F=O[0];if(F!="noop"&&F!="stop"&&F!="close")for(var G=1;G<O.length;G++)O[G]=""}}}}return Os(m)}catch{return p}}var vc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wd;function wc(){}y(wc,Bd),wc.prototype.g=function(){return new XMLHttpRequest},wc.prototype.i=function(){return{}},Wd=new wc;function Kr(u,p,m,x){this.j=u,this.i=p,this.l=m,this.R=x||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jy}function Jy(){this.i=null,this.g="",this.h=!1}var Zy={},qd={};function Kd(u,p,m){u.L=1,u.v=Ic(pr(p)),u.m=m,u.P=!0,e_(u,null)}function e_(u,p){u.F=Date.now(),Ec(u),u.A=pr(u.v);var m=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),p_(m.i,"t",x),u.C=0,m=u.j.J,u.h=new Jy,u.g=D_(u.j,m?p:null,!u.m),0<u.O&&(u.M=new ia(f(u.Y,u,u.g),u.O)),p=u.U,m=u.g,x=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(sa[0]=O.toString()),O=sa);for(var F=0;F<O.length;F++){var G=qr(m,O[F],x||p.handleEvent,!1,p.h||p);if(!G)break;p.g[G.key]=G}p=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),aa(),Y1(u.i,u.u,u.A,u.l,u.R,u.m)}Kr.prototype.ca=function(u){u=u.target;const p=this.M;p&&gr(u)==3?p.j():this.Y(u)},Kr.prototype.Y=function(u){try{if(u==this.g)e:{const Pt=gr(this.g);var p=this.g.Ba();const Us=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||E_(this.g)))){this.J||Pt!=4||p==7||(p==8||0>=Us?aa(3):aa(2)),Gd(this);var m=this.g.Z();this.X=m;t:if(t_(this)){var x=E_(this.g);u="";var O=x.length,F=gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zi(this),ua(this);var G="";break t}this.h.i=new a.TextDecoder}for(p=0;p<O;p++)this.h.h=!0,u+=this.h.i.decode(x[p],{stream:!(F&&p==O-1)});x.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,X1(this.i,this.u,this.A,this.l,this.R,Pt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,_t=this.g;if((Ne=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ne)){var ke=Ne;break t}}ke=null}if(m=ke)Vs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qd(this,m);else{this.o=!1,this.s=3,Ft(12),zi(this),ua(this);break e}}if(this.P){m=!0;let Dn;for(;!this.J&&this.C<G.length;)if(Dn=eP(this,G),Dn==qd){Pt==4&&(this.s=4,Ft(14),m=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==Zy){this.s=4,Ft(15),Vs(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else Vs(this.i,this.l,Dn,null),Qd(this,Dn);if(t_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||G.length!=0||this.h.h||(this.s=1,Ft(16),m=!1),this.o=this.o&&m,!m)Vs(this.i,this.l,G,"[Invalid Chunked Response]"),zi(this),ua(this);else if(0<G.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),tf(bt),bt.M=!0,Ft(11))}}else Vs(this.i,this.l,G,null),Qd(this,G);Pt==4&&zi(this),this.o&&!this.J&&(Pt==4?k_(this.j,this):(this.o=!1,Ec(this)))}else yP(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),zi(this),ua(this)}}}catch{}finally{}};function t_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function eP(u,p){var m=u.C,x=p.indexOf(`
`,m);return x==-1?qd:(m=Number(p.substring(m,x)),isNaN(m)?Zy:(x+=1,x+m>p.length?qd:(p=p.slice(x,x+m),u.C=x+m,p)))}Kr.prototype.cancel=function(){this.J=!0,zi(this)};function Ec(u){u.S=Date.now()+u.I,n_(u,u.I)}function n_(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=la(f(u.ba,u),p)}function Gd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Kr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(J1(this.i,this.A),this.L!=2&&(aa(),Ft(17)),zi(this),this.s=2,ua(this)):n_(this,this.S-u)};function ua(u){u.j.G==0||u.J||k_(u.j,u)}function zi(u){Gd(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,yc(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Qd(u,p){try{var m=u.j;if(m.G!=0&&(m.g==u||Yd(m.h,u))){if(!u.K&&Yd(m.h,u)&&m.G==3){try{var x=m.Da.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var O=x;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Ac(m),kc(m);else break e;ef(m),Ft(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=la(f(m.Za,m),6e3));if(1>=s_(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else $i(m,11)}else if((u.K||m.g==u)&&Ac(m),!w(p))for(O=m.Da.g.parse(p),p=0;p<O.length;p++){let ke=O[p];if(m.T=ke[0],ke=ke[1],m.G==2)if(ke[0]=="c"){m.K=ke[1],m.ia=ke[2];const bt=ke[3];bt!=null&&(m.la=bt,m.j.info("VER="+m.la));const Pt=ke[4];Pt!=null&&(m.Aa=Pt,m.j.info("SVER="+m.Aa));const Us=ke[5];Us!=null&&typeof Us=="number"&&0<Us&&(x=1.5*Us,m.L=x,m.j.info("backChannelRequestTimeoutMs_="+x)),x=m;const Dn=u.g;if(Dn){const Dc=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dc){var F=x.h;F.g||Dc.indexOf("spdy")==-1&&Dc.indexOf("quic")==-1&&Dc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Xd(F,F.h),F.h=null))}if(x.D){const nf=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;nf&&(x.ya=nf,je(x.I,x.D,nf))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),x=m;var G=u;if(x.qa=R_(x,x.J?x.ia:null,x.W),G.K){o_(x.h,G);var Ne=G,_t=x.L;_t&&(Ne.I=_t),Ne.B&&(Gd(Ne),Ec(Ne)),x.g=G}else b_(x);0<m.i.length&&Cc(m)}else ke[0]!="stop"&&ke[0]!="close"||$i(m,7);else m.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?$i(m,7):Zd(m):ke[0]!="noop"&&m.l&&m.l.ta(ke),m.v=0)}}aa(4)}catch{}}var tP=class{constructor(u,p){this.g=u,this.map=p}};function r_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function i_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function s_(u){return u.h?1:u.g?u.g.size:0}function Yd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Xd(u,p){u.g?u.g.add(p):u.h=p}function o_(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}r_.prototype.cancel=function(){if(this.i=a_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function a_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const m of u.g.values())p=p.concat(m.D);return p}return v(u.i)}function nP(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],m=u.length,x=0;x<m;x++)p.push(u[x]);return p}p=[],m=0;for(x in u)p[m++]=u[x];return p}function rP(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var m=0;m<u;m++)p.push(m);return p}p=[],m=0;for(const x in u)p[m++]=x;return p}}}function l_(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var m=rP(u),x=nP(u),O=x.length,F=0;F<O;F++)p.call(void 0,x[F],m&&m[F],u)}var c_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iP(u,p){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var x=u[m].indexOf("="),O=null;if(0<=x){var F=u[m].substring(0,x);O=u[m].substring(x+1)}else F=u[m];p(F,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Bi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Bi){this.h=u.h,Sc(this,u.j),this.o=u.o,this.g=u.g,Tc(this,u.s),this.l=u.l;var p=u.i,m=new fa;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),u_(this,m),this.m=u.m}else u&&(p=String(u).match(c_))?(this.h=!1,Sc(this,p[1]||"",!0),this.o=ha(p[2]||""),this.g=ha(p[3]||"",!0),Tc(this,p[4]),this.l=ha(p[5]||"",!0),u_(this,p[6]||"",!0),this.m=ha(p[7]||"")):(this.h=!1,this.i=new fa(null,this.h))}Bi.prototype.toString=function(){var u=[],p=this.j;p&&u.push(da(p,h_,!0),":");var m=this.g;return(m||p=="file")&&(u.push("//"),(p=this.o)&&u.push(da(p,h_,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(da(m,m.charAt(0)=="/"?aP:oP,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",da(m,cP)),u.join("")};function pr(u){return new Bi(u)}function Sc(u,p,m){u.j=m?ha(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Tc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function u_(u,p,m){p instanceof fa?(u.i=p,uP(u.i,u.h)):(m||(p=da(p,lP)),u.i=new fa(p,u.h))}function je(u,p,m){u.i.set(p,m)}function Ic(u){return je(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ha(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function da(u,p,m){return typeof u=="string"?(u=encodeURI(u).replace(p,sP),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function sP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var h_=/[#\/\?@]/g,oP=/[#\?:]/g,aP=/[#\?]/g,lP=/[#\?@]/g,cP=/#/g;function fa(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Gr(u){u.g||(u.g=new Map,u.h=0,u.i&&iP(u.i,function(p,m){u.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=fa.prototype,t.add=function(u,p){Gr(this),this.i=null,u=Fs(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(p),this.h+=1,this};function d_(u,p){Gr(u),p=Fs(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function f_(u,p){return Gr(u),p=Fs(u,p),u.g.has(p)}t.forEach=function(u,p){Gr(this),this.g.forEach(function(m,x){m.forEach(function(O){u.call(p,O,x,this)},this)},this)},t.na=function(){Gr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let x=0;x<p.length;x++){const O=u[x];for(let F=0;F<O.length;F++)m.push(p[x])}return m},t.V=function(u){Gr(this);let p=[];if(typeof u=="string")f_(this,u)&&(p=p.concat(this.g.get(Fs(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)p=p.concat(u[m])}return p},t.set=function(u,p){return Gr(this),this.i=null,u=Fs(this,u),f_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function p_(u,p,m){d_(u,p),0<m.length&&(u.i=null,u.g.set(Fs(u,p),v(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var x=p[m];const F=encodeURIComponent(String(x)),G=this.V(x);for(x=0;x<G.length;x++){var O=F;G[x]!==""&&(O+="="+encodeURIComponent(String(G[x]))),u.push(O)}}return this.i=u.join("&")};function Fs(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function uP(u,p){p&&!u.j&&(Gr(u),u.i=null,u.g.forEach(function(m,x){var O=x.toLowerCase();x!=O&&(d_(this,x),p_(this,O,m))},u)),u.j=p}function hP(u,p){const m=new ca;if(a.Image){const x=new Image;x.onload=g(Qr,m,"TestLoadImage: loaded",!0,p,x),x.onerror=g(Qr,m,"TestLoadImage: error",!1,p,x),x.onabort=g(Qr,m,"TestLoadImage: abort",!1,p,x),x.ontimeout=g(Qr,m,"TestLoadImage: timeout",!1,p,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else p(!1)}function dP(u,p){const m=new ca,x=new AbortController,O=setTimeout(()=>{x.abort(),Qr(m,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:x.signal}).then(F=>{clearTimeout(O),F.ok?Qr(m,"TestPingServer: ok",!0,p):Qr(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Qr(m,"TestPingServer: error",!1,p)})}function Qr(u,p,m,x,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),x(m)}catch{}}function fP(){this.g=new Q1}function pP(u,p,m){const x=m||"";try{l_(u,function(O,F){let G=O;c(O)&&(G=Os(O)),p.push(x+F+"="+encodeURIComponent(G))})}catch(O){throw p.push(x+"type="+encodeURIComponent("_badmap")),O}}function xc(u){this.l=u.Ub||null,this.j=u.eb||!1}y(xc,Bd),xc.prototype.g=function(){return new bc(this.l,this.j)},xc.prototype.i=function(u){return function(){return u}}({});function bc(u,p){Se.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(bc,Se),t=bc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,ga(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ga(this)),this.g&&(this.readyState=3,ga(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;g_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function g_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?pa(this):ga(this),this.readyState==3&&g_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,pa(this))},t.Qa=function(u){this.g&&(this.response=u,pa(this))},t.ga=function(){this.g&&pa(this)};function pa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ga(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=p.next();return u.join(`\r
`)};function ga(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function m_(u){let p="";return V(u,function(m,x){p+=x,p+=":",p+=m,p+=`\r
`}),p}function Jd(u,p,m){e:{for(x in m){var x=!1;break e}x=!0}x||(m=m_(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):je(u,p,m))}function Xe(u){Se.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Xe,Se);var gP=/^https?$/i,mP=["POST","PUT"];t=Xe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,m,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wd.g(),this.v=this.o?Wy(this.o):Wy(Wd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(F){y_(this,F);return}if(u=m||"",m=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var O in x)m.set(O,x[O]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const F of x.keys())m.set(F,x.get(F));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(mP,p,void 0))||x||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,G]of m)this.g.setRequestHeader(F,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{w_(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){y_(this,F)}};function y_(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,__(u),Pc(u)}function __(u){u.A||(u.A=!0,xe(u,"complete"),xe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xe(this,"complete"),xe(this,"abort"),Pc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pc(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?v_(this):this.bb())},t.bb=function(){v_(this)};function v_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||gr(u)!=4||u.Z()!=2)){if(u.u&&gr(u)==4)mc(u.Ea,0,u);else if(xe(u,"readystatechange"),gr(u)==4){u.h=!1;try{const G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var x;if(x=G===0){var O=String(u.D).match(c_)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),x=!gP.test(O?O.toLowerCase():"")}m=x}if(m)xe(u,"complete"),xe(u,"success");else{u.m=6;try{var F=2<gr(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",__(u)}}finally{Pc(u)}}}}function Pc(u,p){if(u.g){w_(u);const m=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||xe(u,"ready");try{m.onreadystatechange=x}catch{}}}function w_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function gr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<gr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),G1(p)}};function E_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yP(u){const p={};u=(u.g&&2<=gr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(w(u[x]))continue;var m=R(u[x]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=p[O]||[];p[O]=F,F.push(m)}I(p,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(u,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||p}function S_(u){this.Aa=0,this.i=[],this.j=new ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,u),this.cb=ma("retryDelaySeedMs",1e4,u),this.Wa=ma("forwardChannelMaxRetries",2,u),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new r_(u&&u.concurrentRequestLimit),this.Da=new fP,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=S_.prototype,t.la=8,t.G=1,t.connect=function(u,p,m,x){Ft(0),this.W=u,this.H=p||{},m&&x!==void 0&&(this.H.OSID=m,this.H.OAID=x),this.F=this.X,this.I=R_(this,null,this.W),Cc(this)};function Zd(u){if(T_(u),u.G==3){var p=u.U++,m=pr(u.I);if(je(m,"SID",u.K),je(m,"RID",p),je(m,"TYPE","terminate"),ya(u,m),p=new Kr(u,u.j,p),p.L=2,p.v=Ic(pr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=D_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ec(p)}A_(u)}function kc(u){u.g&&(tf(u),u.g.cancel(),u.g=null)}function T_(u){kc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ac(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Cc(u){if(!i_(u.h)&&!u.s){u.s=!0;var p=u.Ga;ae||Z(),B||(ae(),B=!0),Y.add(p,u),u.B=0}}function _P(u,p){return s_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=la(f(u.Ga,u,p),C_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new Kr(this,this.j,u);let F=this.o;if(this.S&&(F?(F=_(F),P(F,this.S)):F=this.S),this.m!==null||this.O||(O.H=F,F=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var x=this.i[m];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=x_(this,O,p),m=pr(this.I),je(m,"RID",u),je(m,"CVER",22),this.D&&je(m,"X-HTTP-Session-Id",this.D),ya(this,m),F&&(this.O?p="headers="+encodeURIComponent(String(m_(F)))+"&"+p:this.m&&Jd(m,this.m,F)),Xd(this.h,O),this.Ua&&je(m,"TYPE","init"),this.P?(je(m,"$req",p),je(m,"SID","null"),O.T=!0,Kd(O,m,null)):Kd(O,m,p),this.G=2}}else this.G==3&&(u?I_(this,u):this.i.length==0||i_(this.h)||I_(this))};function I_(u,p){var m;p?m=p.l:m=u.U++;const x=pr(u.I);je(x,"SID",u.K),je(x,"RID",m),je(x,"AID",u.T),ya(u,x),u.m&&u.o&&Jd(x,u.m,u.o),m=new Kr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),p&&(u.i=p.D.concat(u.i)),p=x_(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Xd(u.h,m),Kd(m,x,p)}function ya(u,p){u.H&&V(u.H,function(m,x){je(p,x,m)}),u.l&&l_({},function(m,x){je(p,x,m)})}function x_(u,p,m){m=Math.min(u.i.length,m);var x=u.l?f(u.l.Na,u.l,u):null;e:{var O=u.i;let F=-1;for(;;){const G=["count="+m];F==-1?0<m?(F=O[0].g,G.push("ofs="+F)):F=0:G.push("ofs="+F);let Ne=!0;for(let _t=0;_t<m;_t++){let ke=O[_t].g;const bt=O[_t].map;if(ke-=F,0>ke)F=Math.max(0,O[_t].g-100),Ne=!1;else try{pP(bt,G,"req"+ke+"_")}catch{x&&x(bt)}}if(Ne){x=G.join("&");break e}}}return u=u.i.splice(0,m),p.D=u,x}function b_(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ae||Z(),B||(ae(),B=!0),Y.add(p,u),u.v=0}}function ef(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=la(f(u.Fa,u),C_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,P_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=la(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),kc(this),P_(this))};function tf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function P_(u){u.g=new Kr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=pr(u.qa);je(p,"RID","rpc"),je(p,"SID",u.K),je(p,"AID",u.T),je(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&je(p,"TO",u.ja),je(p,"TYPE","xmlhttp"),ya(u,p),u.m&&u.o&&Jd(p,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Ic(pr(p)),m.m=null,m.P=!0,e_(m,u)}t.Za=function(){this.C!=null&&(this.C=null,kc(this),ef(this),Ft(19))};function Ac(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function k_(u,p){var m=null;if(u.g==p){Ac(u),tf(u),u.g=null;var x=2}else if(Yd(u.h,p))m=p.D,o_(u.h,p),x=1;else return;if(u.G!=0){if(p.o)if(x==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var O=u.B;x=_c(),xe(x,new Yy(x,m)),Cc(u)}else b_(u);else if(O=p.s,O==3||O==0&&0<p.X||!(x==1&&_P(u,p)||x==2&&ef(u)))switch(m&&0<m.length&&(p=u.h,p.i=p.i.concat(m)),O){case 1:$i(u,5);break;case 4:$i(u,10);break;case 3:$i(u,6);break;default:$i(u,2)}}}function C_(u,p){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*p}function $i(u,p){if(u.j.info("Error code "+p),p==2){var m=f(u.fb,u),x=u.Xa;const O=!x;x=new Bi(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sc(x,"https"),Ic(x),O?hP(x.toString(),m):dP(x.toString(),m)}else Ft(2);u.G=0,u.l&&u.l.sa(p),A_(u),T_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function A_(u){if(u.G=0,u.ka=[],u.l){const p=a_(u.h);(p.length!=0||u.i.length!=0)&&(S(u.ka,p),S(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function R_(u,p,m){var x=m instanceof Bi?pr(m):new Bi(m);if(x.g!="")p&&(x.g=p+"."+x.g),Tc(x,x.s);else{var O=a.location;x=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;var F=new Bi(null);x&&Sc(F,x),p&&(F.g=p),O&&Tc(F,O),m&&(F.l=m),x=F}return m=u.D,p=u.ya,m&&p&&je(x,m,p),je(x,"VER",u.la),ya(u,x),x}function D_(u,p,m){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Xe(new xc({eb:m})):new Xe(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function M_(){}t=M_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Rc(){}Rc.prototype.g=function(u,p){return new on(u,p)};function on(u,p){Se.call(this),this.g=new S_(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!w(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new js(this)}y(on,Se),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Zd(this.g)},on.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Os(u),u=m);p.i.push(new tP(p.Ya++,u)),p.G==3&&Cc(p)},on.prototype.N=function(){this.g.l=null,delete this.j,Zd(this.g),delete this.g,on.aa.N.call(this)};function N_(u){$d.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const m in p){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}y(N_,$d);function L_(){Hd.call(this),this.status=1}y(L_,Hd);function js(u){this.g=u}y(js,M_),js.prototype.ua=function(){xe(this.g,"a")},js.prototype.ta=function(u){xe(this.g,new N_(u))},js.prototype.sa=function(u){xe(this.g,new L_)},js.prototype.ra=function(){xe(this.g,"b")},Rc.prototype.createWebChannel=Rc.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,Ax=function(){return new Rc},Cx=function(){return _c()},kx=Ui,dg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vc.NO_ERROR=0,vc.TIMEOUT=8,vc.HTTP_ERROR=6,ju=vc,Xy.COMPLETE="complete",Px=Xy,qy.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",Se.prototype.listen=Se.prototype.K,za=qy,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,bx=Xe}).apply(typeof Zc<"u"?Zc:typeof self<"u"?self:typeof window<"u"?window:{});const U0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new jm("@firebase/firestore");function Ws(){return Ss.logLevel}function ee(t,...e){if(Ss.logLevel<=we.DEBUG){const n=e.map(Xm);Ss.debug(`Firestore (${Yo}): ${t}`,...n)}}function jr(t,...e){if(Ss.logLevel<=we.ERROR){const n=e.map(Xm);Ss.error(`Firestore (${Yo}): ${t}`,...n)}}function Oo(t,...e){if(Ss.logLevel<=we.WARN){const n=e.map(Xm);Ss.warn(`Firestore (${Yo}): ${t}`,...n)}}function Xm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: `+t;throw jr(e),new Error(e)}function Re(t,e){t||ue()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class xL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bL{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Dr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new Rx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Dt(e)}}class PL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new PL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Re(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new CL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=RL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function Vo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new We(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new We(0,0))}static max(){return new de(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ol.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ol?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends Ol{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const DL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends Ol{construct(e,n,r){return new Et(e,n,r)}static isValidIdentifier(e){return DL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new te(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new te(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Be.fromString(e))}static fromName(e){return new oe(Be.fromString(e).popFirst(5))}static empty(){return new oe(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Be(e.slice()))}}function ML(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Ci(i,oe.empty(),e)}function NL(t){return new Ci(t.readTime,t.key,-1)}class Ci{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ci(de.min(),oe.empty(),-1)}static max(){return new Ci(de.max(),oe.empty(),-1)}}function LL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==OL)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function FL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}xd.oe=-1;function bd(t){return t==null}function Oh(t){return t===0&&1/t==-1/0}function jL(t){return typeof t=="number"&&Number.isInteger(t)&&!Oh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=z0(e)),e=zL(t.get(n),e);return z0(e)}function zL(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function z0(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Mx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eu(this.root,e,this.comparator,!0)}}class eu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??wt.RED,this.left=i??wt.EMPTY,this.right=s??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new wt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,i,s){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $0(this.data.getIterator())}getIteratorFrom(e){return new $0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class $0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new jn([])}unionWith(e){let n=new dt(Et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nx("Invalid base64 string: "+s):s}}(e);return new xt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const BL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(t){if(Re(!!t),typeof t=="string"){let e=0;const n=BL.exec(t);if(Re(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ri(t){return typeof t=="string"?xt.fromBase64String(t):xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Pd(t){const e=t.mapValue.fields.__previous_value__;return Jm(e)?Pd(e):e}function Vl(t){const e=Ai(t.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Fl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jm(t)?4:WL(t)?9007199254740991:HL(t)?10:11:ue()}function dr(t,e){if(t===e)return!0;const n=Di(t);if(n!==Di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vl(t).isEqual(Vl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ai(i.timestampValue),a=Ai(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ri(i.bytesValue).isEqual(Ri(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ze(i.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ze(i.integerValue)===Ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ze(i.doubleValue),a=Ze(s.doubleValue);return o===a?Oh(o)===Oh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Vo(t.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(B0(o)!==B0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!dr(o[l],a[l])))return!1;return!0}(t,e);default:return ue()}}function jl(t,e){return(t.values||[]).find(n=>dr(n,e))!==void 0}function Fo(t,e){if(t===e)return 0;const n=Di(t),r=Di(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ze(s.integerValue||s.doubleValue),l=Ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return H0(t.timestampValue,e.timestampValue);case 4:return H0(Vl(t),Vl(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ri(s),l=Ri(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Te(a[c],l[c]);if(h!==0)return h}return Te(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Te(Ze(s.latitude),Ze(o.latitude));return a!==0?a:Te(Ze(s.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return W0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=Te(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:W0(g,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===tu.mapValue&&o===tu.mapValue)return 0;if(s===tu.mapValue)return 1;if(o===tu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Te(l[d],h[d]);if(f!==0)return f;const g=Fo(a[l[d]],c[h[d]]);if(g!==0)return g}return Te(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ue()}}function H0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=Ai(t),r=Ai(e),i=Te(n.seconds,r.seconds);return i!==0?i:Te(n.nanos,r.nanos)}function W0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Fo(n[i],r[i]);if(s)return s}return Te(n.length,r.length)}function jo(t){return fg(t)}function fg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ai(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=fg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${fg(n.fields[o])}`;return i+"}"}(t.mapValue):ue()}function Uu(t){switch(Di(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pd(t);return e?16+Uu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ri(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Uu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ks(r.fields,(s,o)=>{i+=s.length+Uu(o)}),i}(t.mapValue);default:throw ue()}}function q0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pg(t){return!!t&&"integerValue"in t}function Zm(t){return!!t&&"arrayValue"in t}function K0(t){return!!t&&"nullValue"in t}function G0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zu(t){return!!t&&"mapValue"in t}function HL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function cl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ks(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=cl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cl(n)}setAll(e){let n=Et.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=cl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());zu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ks(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Tn(cl(this.value))}}function Lx(t){const e=[];return ks(t.fields,(n,r)=>{const i=new Et([n]);if(zu(r)){const s=Lx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Nt(e,0,de.min(),de.min(),de.min(),Tn.empty(),0)}static newFoundDocument(e,n,r,i){return new Nt(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new Nt(e,2,n,de.min(),de.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,de.min(),de.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.position=e,this.inclusive=n}}function Q0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=oe.comparator(oe.fromName(o.referenceValue),n.key):r=Fo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Y0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function qL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{}class ot extends Ox{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GL(e,n,r):n==="array-contains"?new XL(e,r):n==="in"?new JL(e,r):n==="not-in"?new ZL(e,r):n==="array-contains-any"?new eO(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new QL(e,r):new YL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fo(n,this.value)):n!==null&&Di(this.value)===Di(n)&&this.matchesComparison(Fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends Ox{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new qn(e,n)}matches(e){return Vx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vx(t){return t.op==="and"}function Fx(t){return KL(t)&&Vx(t)}function KL(t){for(const e of t.filters)if(e instanceof qn)return!1;return!0}function gg(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+jo(t.value);if(Fx(t))return t.filters.map(e=>gg(e)).join(",");{const e=t.filters.map(n=>gg(n)).join(",");return`${t.op}(${e})`}}function jx(t,e){return t instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&dr(r.value,i.value)}(t,e):t instanceof qn?function(r,i){return i instanceof qn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&jx(o,i.filters[a]),!0):!1}(t,e):void ue()}function Ux(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${jo(n.value)}`}(t):t instanceof qn?function(n){return n.op.toString()+" {"+n.getFilters().map(Ux).join(" ,")+"}"}(t):"Filter"}class GL extends ot{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class QL extends ot{constructor(e,n){super(e,"in",n),this.keys=zx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class YL extends ot{constructor(e,n){super(e,"not-in",n),this.keys=zx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>oe.fromName(r.referenceValue))}class XL extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zm(n)&&jl(n.arrayValue,this.value)}}class JL extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jl(this.value.arrayValue,n)}}class ZL extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!jl(this.value.arrayValue,n)}}class eO extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function X0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new tO(t,e,n,r,i,s,o)}function ey(t){const e=fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jo(r)).join(",")),e.ue=n}return e.ue}function ty(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y0(t.startAt,e.startAt)&&Y0(t.endAt,e.endAt)}function mg(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function nO(t,e,n,r,i,s,o,a){return new Zo(t,e,n,r,i,s,o,a)}function ny(t){return new Zo(t)}function J0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Bx(t){return t.collectionGroup!==null}function ul(t){const e=fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new dt(Et.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ul(s,r))}),n.has(Et.keyField().canonicalString())||e.ce.push(new Ul(Et.keyField(),r))}return e.ce}function lr(t){const e=fe(t);return e.le||(e.le=rO(e,ul(t))),e.le}function rO(t,e){if(t.limitType==="F")return X0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ul(i.field,s)});const n=t.endAt?new Vh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vh(t.startAt.position,t.startAt.inclusive):null;return X0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yg(t,e){const n=t.filters.concat([e]);return new Zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _g(t,e,n){return new Zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kd(t,e){return ty(lr(t),lr(e))&&t.limitType===e.limitType}function $x(t){return`${ey(lr(t))}|lt:${t.limitType}`}function qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ux(i)).join(", ")}]`),bd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>jo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>jo(i)).join(",")),`Target(${r})`}(lr(t))}; limitType=${t.limitType})`}function Cd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):oe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ul(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Q0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ul(r),i)||r.endAt&&!function(o,a,l){const c=Q0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ul(r),i))}(t,e)}function iO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hx(t){return(e,n)=>{let r=!1;for(const i of ul(t)){const s=sO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function sO(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Fo(l,c):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Mx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=new Ye(oe.comparator);function Ur(){return oO}const Wx=new Ye(oe.comparator);function Ba(...t){let e=Wx;for(const n of t)e=e.insert(n.key,n);return e}function qx(t){let e=Wx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ss(){return hl()}function Kx(){return hl()}function hl(){return new Cs(t=>t.toString(),(t,e)=>t.isEqual(e))}const aO=new Ye(oe.comparator),lO=new dt(oe.comparator);function Ee(...t){let e=lO;for(const n of t)e=e.add(n);return e}const cO=new dt(Te);function uO(){return cO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oh(e)?"-0":e}}function Gx(t){return{integerValue:""+t}}function hO(t,e){return jL(e)?Gx(e):ry(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(){this._=void 0}}function dO(t,e,n){return t instanceof Fh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Jm(s)&&(s=Pd(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof zl?Yx(t,e):t instanceof Bl?Xx(t,e):function(i,s){const o=Qx(i,s),a=Z0(o)+Z0(i.Pe);return pg(o)&&pg(i.Pe)?Gx(a):ry(i.serializer,a)}(t,e)}function fO(t,e,n){return t instanceof zl?Yx(t,e):t instanceof Bl?Xx(t,e):n}function Qx(t,e){return t instanceof jh?function(r){return pg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Fh extends Ad{}class zl extends Ad{constructor(e){super(),this.elements=e}}function Yx(t,e){const n=Jx(e);for(const r of t.elements)n.some(i=>dr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Bl extends Ad{constructor(e){super(),this.elements=e}}function Xx(t,e){let n=Jx(e);for(const r of t.elements)n=n.filter(i=>!dr(i,r));return{arrayValue:{values:n}}}class jh extends Ad{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Z0(t){return Ze(t.integerValue||t.doubleValue)}function Jx(t){return Zm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof zl&&i instanceof zl||r instanceof Bl&&i instanceof Bl?Vo(r.elements,i.elements,dr):r instanceof jh&&i instanceof jh?dr(r.Pe,i.Pe):r instanceof Fh&&i instanceof Fh}(t.transform,e.transform)}class gO{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rd{}function Zx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new iy(t.key,$n.none()):new cc(t.key,t.data,$n.none());{const n=t.data,r=Tn.empty();let i=new dt(Et.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new As(t.key,r,new jn(i.toArray()),$n.none())}}function mO(t,e,n){t instanceof cc?function(i,s,o){const a=i.value.clone(),l=tw(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof As?function(i,s,o){if(!Bu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=tw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(eb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function dl(t,e,n,r){return t instanceof cc?function(s,o,a,l){if(!Bu(s.precondition,o))return a;const c=s.value.clone(),h=nw(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof As?function(s,o,a,l){if(!Bu(s.precondition,o))return a;const c=nw(s.fieldTransforms,l,o),h=o.data;return h.setAll(eb(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Bu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function yO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Qx(r.transform,i||null);s!=null&&(n===null&&(n=Tn.empty()),n.set(r.field,s))}return n||null}function ew(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vo(r,i,(s,o)=>pO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cc extends Rd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class As extends Rd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function eb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tw(t,e,n){const r=new Map;Re(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,fO(o,a,n[i]))}return r}function nw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,dO(s,o,e))}return r}class iy extends Rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _O extends Rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&mO(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Kx();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Zx(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(n,r)=>ew(n,r))&&Vo(this.baseMutations,e.baseMutations,(n,r)=>ew(n,r))}}class sy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Re(e.mutations.length===r.length);let i=function(){return aO}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new sy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,be;function SO(t){switch(t){default:return ue();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function tb(t){if(t===void 0)return jr("GRPC error has no .code"),z.UNKNOWN;switch(t){case it.OK:return z.OK;case it.CANCELLED:return z.CANCELLED;case it.UNKNOWN:return z.UNKNOWN;case it.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case it.INTERNAL:return z.INTERNAL;case it.UNAVAILABLE:return z.UNAVAILABLE;case it.UNAUTHENTICATED:return z.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case it.NOT_FOUND:return z.NOT_FOUND;case it.ALREADY_EXISTS:return z.ALREADY_EXISTS;case it.PERMISSION_DENIED:return z.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case it.ABORTED:return z.ABORTED;case it.OUT_OF_RANGE:return z.OUT_OF_RANGE;case it.UNIMPLEMENTED:return z.UNIMPLEMENTED;case it.DATA_LOSS:return z.DATA_LOSS;default:return ue()}}(be=it||(it={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=new hs([4294967295,4294967295],0);function rw(t){const e=TO().encode(t),n=new xx;return n.update(e),new Uint8Array(n.digest())}function iw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hs([n,r],0),new hs([i,s],0)]}class oy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $a(`Invalid padding: ${n}`);if(r<0)throw new $a(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $a(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $a(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=hs.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(hs.fromNumber(r)));return i.compare(IO)===1&&(i=new hs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=rw(e),[r,i]=iw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new oy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=rw(e),[r,i]=iw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dd(de.min(),i,new Ye(Te),Ur(),Ee())}}class uc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uc(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class nb{constructor(e,n){this.targetId=e,this.me=n}}class rb{constructor(e,n,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class sw{constructor(){this.fe=0,this.ge=ow(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ee(),n=Ee(),r=Ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ue()}}),new uc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ow()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xO{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ur(),this.qe=nu(),this.Qe=nu(),this.Ke=new Ye(Te)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(mg(s))if(r===0){const o=new oe(s.path);this.We(n,o,Nt.newNoDocument(o,de.min()))}else Re(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ri(r).toUint8Array()}catch(l){if(l instanceof Nx)return Oo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new oy(o,i,s)}catch(l){return Oo(l instanceof $a?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&mg(a.target)){const l=new oe(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,Nt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ee();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Dd(e,n,this.Ke,this.ke,r);return this.ke=Ur(),this.qe=nu(),this.Qe=nu(),this.Ke=new Ye(Te),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new sw,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new dt(Te),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(Te),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new sw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function nu(){return new Ye(oe.comparator)}function ow(){return new Ye(oe.comparator)}const bO={asc:"ASCENDING",desc:"DESCENDING"},PO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kO={and:"AND",or:"OR"};class CO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vg(t,e){return t.useProto3Json||bd(e)?e:{value:e}}function Uh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ib(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AO(t,e){return Uh(t,e.toTimestamp())}function cr(t){return Re(!!t),de.fromTimestamp(function(n){const r=Ai(n);return new We(r.seconds,r.nanos)}(t))}function ay(t,e){return wg(t,e).canonicalString()}function wg(t,e){const n=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sb(t){const e=Be.fromString(t);return Re(ub(e)),e}function Eg(t,e){return ay(t.databaseId,e.path)}function Wf(t,e){const n=sb(e);if(n.get(1)!==t.databaseId.projectId)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(ab(n))}function ob(t,e){return ay(t.databaseId,e)}function RO(t){const e=sb(t);return e.length===4?Be.emptyPath():ab(e)}function Sg(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ab(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function aw(t,e,n){return{name:Eg(t,e),fields:n.value.mapValue.fields}}function DO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Re(h===void 0||typeof h=="string"),xt.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array),xt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?z.UNKNOWN:tb(c.code);return new te(h,c.message||"")}(o);n=new rb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wf(t,r.document.name),s=cr(r.document.updateTime),o=r.document.createTime?cr(r.document.createTime):de.min(),a=new Tn({mapValue:{fields:r.document.fields}}),l=Nt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new $u(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Wf(t,r.document),s=r.readTime?cr(r.readTime):de.min(),o=Nt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new $u([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Wf(t,r.document),s=r.removedTargetIds||[];n=new $u([],s,i,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new EO(i,s),a=r.targetId;n=new nb(a,o)}}return n}function MO(t,e){let n;if(e instanceof cc)n={update:aw(t,e.key,e.value)};else if(e instanceof iy)n={delete:Eg(t,e.key)};else if(e instanceof As)n={update:aw(t,e.key,e.data),updateMask:BO(e.fieldMask)};else{if(!(e instanceof _O))return ue();n={verify:Eg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Fh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:AO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue()}(t,e.precondition)),n}function NO(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?cr(i.updateTime):cr(s);return o.isEqual(de.min())&&(o=cr(s)),new gO(o,i.transformResults||[])}(n,e))):[]}function LO(t,e){return{documents:[ob(t,e.path)]}}function OO(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ob(t,i);const s=function(c){if(c.length!==0)return cb(qn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Ks(f.field),direction:jO(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function VO(t){let e=RO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Re(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=lb(d);return f instanceof qn&&Fx(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new Ul(Gs(y.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,bd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new Vh(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new Vh(g,f)}(n.endAt)),nO(e,i,o,s,a,"F",l,c)}function FO(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gs(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gs(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gs(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gs(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return ot.create(Gs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qn.create(n.compositeFilter.filters.map(r=>lb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function jO(t){return bO[t]}function UO(t){return PO[t]}function zO(t){return kO[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function Gs(t){return Et.fromServerFormat(t.fieldPath)}function cb(t){return t instanceof ot?function(n){if(n.op==="=="){if(G0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(K0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(K0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:UO(n.op),value:n.value}}}(t):t instanceof qn?function(n){const r=n.getFilters().map(i=>cb(i));return r.length===1?r[0]:{compositeFilter:{op:zO(n.op),filters:r}}}(t):ue()}function BO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ub(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,r,i,s=de.min(),o=de.min(),a=xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.ht=e}}function HO(t){const e=VO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_g(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(){this.ln=new qO}addToCollectionParentIndex(e,n){return this.ln.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Ci.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class qO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dt(Be.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Uo(0)}static Qn(){return new Uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw([t,e],[n,r]){const i=Te(t,n);return i===0?Te(e,r):i}class KO{constructor(e){this.Gn=e,this.buffer=new dt(cw),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class GO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jo(n)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Xo(n)}await this.Yn(3e5)})}}class QO{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(xd.oe);const r=new KO(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(lw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lw):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Ws()<=we.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function YO(t,e){return new QO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.changes=new Cs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&dl(r.mutation,i,jn.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const i=ss();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ba();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ss();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ur();const o=hl(),a=function(){return hl()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof As)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),dl(h.mutation,c,h.mutation.getFieldMask(),We.now())):o.set(c.key,jn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new JO(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=hl();let i=new Ye((o,a)=>o-a),s=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||jn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||Ee()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=Kx();h.forEach(f=>{if(!s.has(f)){const g=Zx(n.get(f),r.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Bx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(ss());let a=-1,l=s;return o.next(c=>U.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ee())).next(h=>({batchId:a,changes:qx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(r=>{let i=Ba();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ba();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(d,f){return new Zo(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Nt.newInvalidDocument(h)))});let a=Ba();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&dl(h.mutation,c,jn.empty(),We.now()),Cd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return U.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cr(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:HO(i.bundledQuery),readTime:cr(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.overlays=new Ye(oe.comparator),this.Er=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ss();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=ss(),s=n.length+1,o=new oe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ye((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=ss(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ss(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return U.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new wO(n,r));let s=this.Er.get(n);s===void 0&&(s=Ee(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.dr=new dt(ft.Ar),this.Rr=new dt(ft.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new ft(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new oe(new Be([])),r=new ft(n,e),i=new ft(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new oe(new Be([])),r=new ft(n,e),i=new ft(n,e+1);let s=Ee();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ft(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return oe.comparator(e.key,n.key)||Te(e.br,n.br)}static Vr(e,n){return Te(e.br,n.br)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new dt(ft.Ar)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new vO(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new ft(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),i=new ft(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(Te);return n.forEach(i=>{const s=new ft(i,0),o=new ft(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),U.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;oe.isDocumentKey(s)||(s=s.child(""));const o=new ft(new oe(s),0);let a=new dt(Te);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},o),U.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Re(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return U.forEach(n.mutations,i=>{const s=new ft(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new ft(n,0),i=this.vr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.Nr=e,this.docs=function(){return new Ye(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let r=Ur();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Nt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ur();const o=n.path,a=new oe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||LL(NL(h),r)<=0||(i.has(h.key)||Cd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ue()}Lr(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new s2(this)}getSize(e){return U.resolve(this.size)}}class s2 extends XO{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.persistence=e,this.Br=new Cs(n=>ey(n),ty),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.kr=0,this.qr=new ly,this.targetCount=0,this.Qr=Uo.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),U.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Uo(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Un(n),U.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n){this.Kr={},this.overlays={},this.$r=new xd(0),this.Ur=!1,this.Ur=!0,this.Wr=new n2,this.referenceDelegate=e(this),this.Gr=new o2(this),this.indexManager=new WO,this.remoteDocumentCache=function(i){return new i2(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new $O(n),this.jr=new e2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new t2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new r2(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new a2(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return U.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class a2 extends VL{constructor(e){super(),this.currentSequenceNumber=e}}class cy{constructor(e){this.persistence=e,this.Zr=new ly,this.Xr=null}static ei(e){return new cy(e)}get ti(){if(this.Xr)return this.Xr;throw ue()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),U.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.ti,r=>{const i=oe.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return U.or([()=>U.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class zh{constructor(e,n){this.persistence=e,this.ri=new Cs(r=>UL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=YO(this,n)}static ei(e,n){return new zh(e,n)}Hr(){}Jr(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return U.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,de.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),U.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Uu(e.data.value)),n}ir(e,n,r){return U.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=Ee(),i=Ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return BR()?8:FL(Vt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new l2;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(Ws()<=we.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),U.resolve()):(Ws()<=we.DEBUG&&ee("QueryEngine","Query:",qs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Ws()<=we.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(n))):U.resolve())}Xi(e,n){if(J0(n))return U.resolve(null);let r=lr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_g(n,null,"F"),r=lr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ee(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,o,l.readTime)?this.Xi(e,_g(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return J0(n)||i.isEqual(de.min())?U.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?U.resolve(null):(Ws()<=we.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qs(n)),this.os(e,o,n,ML(i,-1)).next(a=>a))})}rs(e,n){let r=new dt(Hx(e));return n.forEach((i,s)=>{Cd(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return Ws()<=we.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",qs(n)),this.Zi.getDocumentsMatchingQuery(e,n,Ci.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Ye(Te),this.cs=new Cs(s=>ey(s),ty),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZO(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function h2(t,e,n,r){return new u2(t,e,n,r)}async function db(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ee();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function d2(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let g=U.resolve();return f.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(v=>{const S=c.docVersions.get(y);Re(S!==null),v.version.compareTo(S)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),h.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function fb(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function f2(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Gr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Gr.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(xt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(v,S,E){return v.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,g,h)&&a.push(n.Gr.updateTargetData(s,g))});let l=Ur(),c=Ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(p2(s,o,e.documentUpdates).next(h=>{l=h.Is,c=h.Es})),!r.isEqual(de.min())){const h=n.Gr.getLastRemoteSnapshotVersion(s).next(d=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.us=i,s))}function p2(t,e,n){let r=Ee(),i=Ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ur();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:i}})}function g2(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function m2(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new hi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function Tg(t,e,n){const r=fe(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Jo(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function uw(t,e,n){const r=fe(t);let i=de.min(),s=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=fe(l),f=d.cs.get(h);return f!==void 0?U.resolve(d.us.get(f)):d.Gr.getTargetData(c,h)}(r,o,lr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:Ee())).next(a=>(y2(r,iO(e),a),{documents:a,ds:s})))}function y2(t,e,n){let r=t.ls.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class hw{constructor(){this.activeTargetIds=uO()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _2{constructor(){this._o=new hw,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new hw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru=null;function qf(){return ru===null?ru=function(){return 268435456+Math.round(2147483648*Math.random())}():ru++,"0x"+ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class S2 extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=qf(),l=this.No(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(n,l,c,i).then(h=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Oo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=w2[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=qf();return new Promise((o,a)=>{const l=new bx;l.setWithCredentials(!0),l.listenOnce(Px.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ju.NO_ERROR:const h=l.getResponseJson();ee(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ju.TIMEOUT:ee(At,`RPC '${e}' ${s} timed out`),a(new te(z.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:const d=l.getStatus();if(ee(At,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const y=function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(E)>=0?E:z.UNKNOWN}(g.status);a(new te(y,g.message))}else a(new te(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new te(z.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{ee(At,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ee(At,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=qf(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ax(),a=Cx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ee(At,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,g=!1;const y=new E2({Eo:S=>{g?ee(At,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(f||(ee(At,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),ee(At,`RPC '${e}' stream ${i} sending:`,S),d.send(S))},Ao:()=>d.close()}),v=(S,E,w)=>{S.listen(E,b=>{try{w(b)}catch(D){setTimeout(()=>{throw D},0)}})};return v(d,za.EventType.OPEN,()=>{g||(ee(At,`RPC '${e}' stream ${i} transport opened.`),y.So())}),v(d,za.EventType.CLOSE,()=>{g||(g=!0,ee(At,`RPC '${e}' stream ${i} transport closed`),y.Do())}),v(d,za.EventType.ERROR,S=>{g||(g=!0,Oo(At,`RPC '${e}' stream ${i} transport errored:`,S),y.Do(new te(z.UNAVAILABLE,"The operation could not be completed")))}),v(d,za.EventType.MESSAGE,S=>{var E;if(!g){const w=S.data[0];Re(!!w);const b=w,D=(b==null?void 0:b.error)||((E=b[0])===null||E===void 0?void 0:E.error);if(D){ee(At,`RPC '${e}' stream ${i} received error:`,D);const N=D.status;let V=function(T){const P=it[T];if(P!==void 0)return tb(P)}(N),I=D.message;V===void 0&&(V=z.INTERNAL,I="Unknown error status: "+N+" with message "+D.message),g=!0,y.Do(new te(V,I)),d.close()}else ee(At,`RPC '${e}' stream ${i} received:`,w),y.vo(w)}}),v(a,kx.STAT_EVENT,S=>{S.stat===dg.PROXY?ee(At,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===dg.NOPROXY&&ee(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.bo()},0),y}}function Kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t){return new CO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new pb(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(jr(n.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new te(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T2 extends gb{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=DO(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?cr(o.readTime):de.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Sg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=mg(l)?{documents:LO(s,l)}:{query:OO(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ib(s,o.resumeToken);const c=vg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=Uh(s,o.snapshotVersion.toTimestamp());const c=vg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=FO(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Sg(this.serializer),n.removeTarget=e,this.c_(n)}}class I2 extends gb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=NO(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Sg(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>MO(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,wg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(z.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,wg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(z.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class b2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(jr(n),this.C_=!1):ee("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{Rs(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=fe(l);c.k_.add(4),await hc(c),c.K_.set("Unknown"),c.k_.delete(4),await Nd(c)}(this))})}),this.K_=new b2(r,i)}}async function Nd(t){if(Rs(t))for(const e of t.q_)await e(!0)}async function hc(t){for(const e of t.q_)await e(!1)}function mb(t,e){const n=fe(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),py(n)?fy(n):ea(n).s_()&&dy(n,e))}function hy(t,e){const n=fe(t),r=ea(n);n.B_.delete(e),r.s_()&&yb(n,e),n.B_.size===0&&(r.s_()?r.a_():Rs(n)&&n.K_.set("Unknown"))}function dy(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ea(t).V_(e)}function yb(t,e){t.U_.xe(e),ea(t).m_(e)}function fy(t){t.U_=new xO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ea(t).start(),t.K_.F_()}function py(t){return Rs(t)&&!ea(t).i_()&&t.B_.size>0}function Rs(t){return fe(t).k_.size===0}function _b(t){t.U_=void 0}async function k2(t){t.K_.set("Online")}async function C2(t){t.B_.forEach((e,n)=>{dy(t,e)})}async function A2(t,e){_b(t),py(t)?(t.K_.O_(e),fy(t)):t.K_.set("Unknown")}async function R2(t,e,n){if(t.K_.set("Online"),e instanceof rb&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bh(t,r)}else if(e instanceof $u?t.U_.$e(e):e instanceof nb?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(de.min()))try{const r=await fb(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.B_.get(c);h&&s.B_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.B_.get(l);if(!h)return;s.B_.set(l,h.withResumeToken(xt.EMPTY_BYTE_STRING,h.snapshotVersion)),yb(s,l);const d=new hi(h.target,l,c,h.sequenceNumber);dy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Bh(t,r)}}async function Bh(t,e,n){if(!Jo(e))throw e;t.k_.add(1),await hc(t),t.K_.set("Offline"),n||(n=()=>fb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Nd(t)})}function vb(t,e){return e().catch(n=>Bh(t,n,e))}async function Ld(t){const e=fe(t),n=Mi(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;D2(e);)try{const i=await g2(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,M2(e,i)}catch(i){await Bh(e,i)}wb(e)&&Eb(e)}function D2(t){return Rs(t)&&t.L_.length<10}function M2(t,e){t.L_.push(e);const n=Mi(t);n.s_()&&n.f_&&n.g_(e.mutations)}function wb(t){return Rs(t)&&!Mi(t).i_()&&t.L_.length>0}function Eb(t){Mi(t).start()}async function N2(t){Mi(t).w_()}async function L2(t){const e=Mi(t);for(const n of t.L_)e.g_(n.mutations)}async function O2(t,e,n){const r=t.L_.shift(),i=sy.from(r,e,n);await vb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ld(t)}async function V2(t,e){e&&Mi(t).f_&&await async function(r,i){if(function(o){return SO(o)&&o!==z.ABORTED}(i.code)){const s=r.L_.shift();Mi(r).__(),await vb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ld(r)}}(t,e),wb(t)&&Eb(t)}async function fw(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Rs(n);n.k_.add(3),await hc(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Nd(n)}async function F2(t,e){const n=fe(t);e?(n.k_.delete(2),await Nd(n)):e||(n.k_.add(2),await hc(n),n.K_.set("Unknown"))}function ea(t){return t.W_||(t.W_=function(n,r,i){const s=fe(n);return s.b_(),new T2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:k2.bind(null,t),mo:C2.bind(null,t),po:A2.bind(null,t),R_:R2.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),py(t)?fy(t):t.K_.set("Unknown")):(await t.W_.stop(),_b(t))})),t.W_}function Mi(t){return t.G_||(t.G_=function(n,r,i){const s=fe(n);return s.b_(),new I2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:N2.bind(null,t),po:V2.bind(null,t),p_:L2.bind(null,t),y_:O2.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Ld(t)):(await t.G_.stop(),t.L_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new gy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(t,e){if(jr("AsyncQueue",`${e}: ${t}`),Jo(t))return new te(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=Ba(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.z_=new Ye(oe.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ue():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class zo{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zo(e,n,wo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class U2{constructor(){this.queries=gw(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=fe(n),s=i.queries;i.queries=gw(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new te(z.ABORTED,"Firestore shutting down"))}}function gw(){return new Cs(t=>$x(t),kd)}async function Sb(t,e){const n=fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new j2,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=my(o,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&yy(n)}async function Tb(t,e){const n=fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function z2(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&yy(n)}function B2(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function yy(t){t.X_.forEach(e=>{e.next()})}var Ig,mw;(mw=Ig||(Ig={})).na="default",mw.Cache="cache";class Ib{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Ig.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.key=e}}class bb{constructor(e){this.key=e}}class $2{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ee(),this.mutatedKeys=Ee(),this.Va=Hx(e),this.ma=new wo(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new pw,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),g=Cd(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;f&&g?f.data.isEqual(g.data)?y!==v&&(r.track({type:3,doc:g}),S=!0):this.ya(f,g)||(r.track({type:2,doc:g}),S=!0,(l&&this.Va(g,l)>0||c&&this.Va(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),S=!0):f&&!g&&(r.track({type:1,doc:f}),S=!0,(l||c)&&(a=!0)),S&&(g?(o=o.add(g),s=v?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((h,d)=>function(g,y){const v=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return v(g)-v(y)}(h.type,d.type)||this.Va(h.doc,d.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new zo(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new pw,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ee(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new bb(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new xb(r))}),n}va(e){this.da=e.ds,this.Ra=Ee();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return zo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class H2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class W2{constructor(e){this.key=e,this.Fa=!1}}class q2{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Cs(a=>$x(a),kd),this.Oa=new Map,this.Na=new Set,this.La=new Ye(oe.comparator),this.Ba=new Map,this.ka=new ly,this.qa={},this.Qa=new Map,this.Ka=Uo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function K2(t,e,n=!0){const r=Db(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await Pb(r,e,n,!0),i}async function G2(t,e){const n=Db(t);await Pb(n,e,!0,!1)}async function Pb(t,e,n,r){const i=await m2(t.localStore,lr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Q2(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&mb(t.remoteStore,i),a}async function Q2(t,e,n,r,i){t.Ua=(d,f,g)=>async function(v,S,E,w){let b=S.view.ga(E);b.ss&&(b=await uw(v.localStore,S.query,!1).then(({documents:I})=>S.view.ga(I,b)));const D=w&&w.targetChanges.get(S.targetId),N=w&&w.targetMismatches.get(S.targetId)!=null,V=S.view.applyChanges(b,v.isPrimaryClient,D,N);return _w(v,S.targetId,V.ba),V.snapshot}(t,d,f,g);const s=await uw(t.localStore,e,!0),o=new $2(e,s.ds),a=o.ga(s.documents),l=uc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);_w(t,n,c.ba);const h=new H2(e,n,o);return t.xa.set(e,h),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function Y2(t,e,n){const r=fe(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!kd(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Tg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hy(r.remoteStore,i.targetId),xg(r,i.targetId)}).catch(Xo)):(xg(r,i.targetId),await Tg(r.localStore,i.targetId,!0))}async function X2(t,e){const n=fe(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hy(n.remoteStore,r.targetId))}async function J2(t,e,n){const r=sV(t);try{const i=await function(o,a){const l=fe(o),c=We.now(),h=a.reduce((g,y)=>g.add(y.key),Ee());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=Ur(),v=Ee();return l.hs.getEntries(g,h).next(S=>{y=S,y.forEach((E,w)=>{w.isValidDocument()||(v=v.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(S=>{d=S;const E=[];for(const w of a){const b=yO(w,d.get(w.key).overlayedDocument);b!=null&&E.push(new As(w.key,b,Lx(b.value.mapValue),$n.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,E,a)}).next(S=>{f=S;const E=S.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(g,S.batchId,E)})}).then(()=>({batchId:f.batchId,changes:qx(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.qa[o.currentUser.toKey()];c||(c=new Ye(Te)),c=c.insert(a,l),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await dc(r,i.changes),await Ld(r.remoteStore)}catch(i){const s=my(i,"Failed to persist write");n.reject(s)}}async function kb(t,e){const n=fe(t);try{const r=await f2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Re(o.Fa):i.removedDocuments.size>0&&(Re(o.Fa),o.Fa=!1))}),await dc(n,r,e)}catch(r){await Xo(r)}}function yw(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.J_)f.ea(a)&&(c=!0)}),c&&yy(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Z2(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new Ye(oe.comparator);o=o.insert(s,Nt.newNoDocument(s,de.min()));const a=Ee().add(s),l=new Dd(de.min(),new Map,new Ye(Te),o,a);await kb(r,l),r.La=r.La.remove(s),r.Ba.delete(e),_y(r)}else await Tg(r.localStore,e,!1).then(()=>xg(r,e,n)).catch(Xo)}async function eV(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await d2(n.localStore,e);Ab(n,r,null),Cb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dc(n,i)}catch(i){await Xo(i)}}async function tV(t,e,n){const r=fe(t);try{const i=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Re(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);Ab(r,e,n),Cb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await dc(r,i)}catch(i){await Xo(i)}}function Cb(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function Ab(t,e,n){const r=fe(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function xg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||Rb(t,r)})}function Rb(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(hy(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),_y(t))}function _w(t,e,n){for(const r of n)r instanceof xb?(t.ka.addReference(r.key,e),nV(t,r)):r instanceof bb?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||Rb(t,r.key)):ue()}function nV(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.Na.add(r),_y(t))}function _y(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new oe(Be.fromString(e)),r=t.Ka.next();t.Ba.set(r,new W2(n)),t.La=t.La.insert(n,r),mb(t.remoteStore,new hi(lr(ny(n.path)),r,"TargetPurposeLimboResolution",xd.oe))}}async function dc(t,e,n){const r=fe(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=uy.zi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,c){const h=fe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,f=>U.forEach(f.Wi,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>U.forEach(f.Gi,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Jo(d))throw d;ee("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=h.us.get(f),y=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(y);h.us=h.us.insert(f,v)}}}(r.localStore,s))}async function rV(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await db(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new te(z.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await dc(n,r.Ts)}}function iV(t,e){const n=fe(t),r=n.Ba.get(e);if(r&&r.Fa)return Ee().add(r.key);{let i=Ee();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function Db(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z2.bind(null,e),e.Ma.R_=z2.bind(null,e.eventManager),e.Ma.Wa=B2.bind(null,e.eventManager),e}function sV(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tV.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Md(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return h2(this.persistence,new c2,e.initialUser,this.serializer)}ja(e){return new hb(cy.ei,this.serializer)}za(e){return new _2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class oV extends $h{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Re(this.persistence.referenceDelegate instanceof zh);const r=this.persistence.referenceDelegate.garbageCollector;return new GO(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new hb(r=>zh.ei(r,n),this.serializer)}}class bg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rV.bind(null,this.syncEngine),await F2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new U2}()}createDatastore(e){const n=Md(e.databaseInfo.databaseId),r=function(s){return new S2(s)}(e.databaseInfo);return function(s,o,a,l){return new x2(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new P2(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>yw(this.syncEngine,n,0),function(){return dw.p()?new dw:new v2}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new q2(i,s,o,a,l,c);return h&&(d.$a=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=fe(i);ee("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await hc(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bg.provider={build:()=>new bg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Dt.UNAUTHENTICATED,this.clientId=Dx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=my(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gf(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await db(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lV(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>fw(e.remoteStore,i)),t._onlineComponents=e}async function lV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Oo("Error using user provided cache. Falling back to memory cache: "+n),await Gf(t,new $h)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Gf(t,new oV(void 0));return t._offlineComponents}async function Nb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await vw(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await vw(t,new bg))),t._onlineComponents}function cV(t){return Nb(t).then(e=>e.syncEngine)}async function Lb(t){const e=await Nb(t),n=e.eventManager;return n.onListen=K2.bind(null,e.syncEngine),n.onUnlisten=Y2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=G2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X2.bind(null,e.syncEngine),n}function uV(t,e,n={}){const r=new Dr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Mb({next:f=>{h.eu(),o.enqueueAndForget(()=>Tb(s,d));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new te(z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new te(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Ib(ny(a.path),h,{includeMetadataChanges:!0,ua:!0});return Sb(s,d)}(await Lb(t),t.asyncQueue,e,n,r)),r.promise}function hV(t,e,n={}){const r=new Dr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Mb({next:f=>{h.eu(),o.enqueueAndForget(()=>Tb(s,d)),f.fromCache&&l.source==="server"?c.reject(new te(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Ib(a,h,{includeMetadataChanges:!0,ua:!0});return Sb(s,d)}(await Lb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e,n){if(!n)throw new te(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dV(t,e,n,r){if(e===!0&&r===!0)throw new te(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ew(t){if(!oe.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sw(t){if(oe.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Od(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function zr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Od(t);throw new te(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ob((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new IL;switch(r.type){case"firstParty":return new kL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ww.get(n);r&&(ee("ComponentProvider","Removing Datastore"),ww.delete(n),r.terminate())}(this),Promise.resolve()}}function fV(t,e,n,r={}){var i;const s=(t=zr(t,Vd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Dt.MOCK_USER;else{a=LR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new te(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Dt(c)}t._authCredentials=new xL(new Rx(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class nn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class xi extends Ds{constructor(e,n,r){super(e,n,ny(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new oe(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function iu(t,e,...n){if(t=It(t),Vb("collection","path",e),t instanceof Vd){const r=Be.fromString(e,...n);return Sw(r),new xi(t,null,r)}{if(!(t instanceof nn||t instanceof xi))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return Sw(r),new xi(t.firestore,null,r)}}function Xi(t,e,...n){if(t=It(t),arguments.length===1&&(e=Dx.newId()),Vb("doc","path",e),t instanceof Vd){const r=Be.fromString(e,...n);return Ew(r),new nn(t,null,new oe(r))}{if(!(t instanceof nn||t instanceof xi))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return Ew(r),new nn(t.firestore,t instanceof xi?t.converter:null,new oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new pb(this,"async_queue_retry"),this.fu=()=>{const r=Kf();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=Kf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Kf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new Dr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Jo(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw jr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=gy.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&ue()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class ta extends Vd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Iw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iw(e),this._firestoreClient=void 0,await e}}}function pV(t,e){const n=typeof t=="object"?t:UI(),r=typeof t=="string"?t:"(default)",i=zm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=MR("firestore");s&&fV(i,...s)}return i}function vy(t){if(t._terminated)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gV(t),t._firestoreClient}function gV(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new $L(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ob(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new aV(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bo(xt.fromBase64String(e))}catch(n){throw new te(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bo(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=/^__.*__$/;class yV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,n,this.fieldTransforms):new cc(e,this.data,n,this.fieldTransforms)}}function jb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class Ty{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Ty(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Hh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(jb(this.Mu)&&mV.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class _V{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Md(e)}$u(e,n,r,i=!1){return new Ty({Mu:e,methodName:n,Ku:r,path:Et.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iy(t){const e=t._freezeSettings(),n=Md(t._databaseId);return new _V(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ub(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);$b("Data must be an object, but it was:",o,r);const a=zb(r,o);let l,c;if(s.merge)l=new jn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=wV(e,d,n);if(!o.contains(f))throw new te(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);SV(h,f)||h.push(f)}l=new jn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new yV(new Tn(a),l,c)}function vV(t,e,n,r=!1){return xy(n,t.$u(r?4:3,e))}function xy(t,e){if(Bb(t=It(t)))return $b("Unsupported field value:",e,t),zb(t,e);if(t instanceof Fb)return function(r,i){if(!jb(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=xy(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=We.fromDate(r);return{timestampValue:Uh(i.serializer,s)}}if(r instanceof We){const s=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uh(i.serializer,s)}}if(r instanceof Ey)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bo)return{bytesValue:ib(i.serializer,r._byteString)};if(r instanceof nn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ay(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return ry(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Od(r)}`)}(t,e)}function zb(t,e){const n={};return Mx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(t,(r,i)=>{const s=xy(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Bb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Ey||t instanceof Bo||t instanceof nn||t instanceof Fb||t instanceof Sy)}function $b(t,e,n){if(!Bb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Od(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function wV(t,e,n){if((e=It(e))instanceof wy)return e._internalPath;if(typeof e=="string")return Hb(t,e);throw Hh("Field path arguments must be of type string or ",t,!1,void 0,n)}const EV=new RegExp("[~\\*/\\[\\]]");function Hb(t,e,n){if(e.search(EV)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wy(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new te(z.INVALID_ARGUMENT,a+t+l)}function SV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TV extends Wb{data(){return super.data()}}function Fd(t,e){return typeof e=="string"?Hb(t,e):e instanceof wy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class qb extends by{}function xV(t,e,...n){let r=[];e instanceof by&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Py).length,a=s.filter(l=>l instanceof jd).length;if(o>1||o>0&&a>0)throw new te(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jd extends qb{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jd(e,n,r)}_apply(e){const n=this._parse(e);return Kb(e._query,n),new Ds(e.firestore,e.converter,yg(e._query,n))}_parse(e){const n=Iy(e.firestore);return function(s,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){bw(d,h);const g=[];for(const y of d)g.push(xw(l,s,y));f={arrayValue:{values:g}}}else f=xw(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||bw(d,h),f=vV(a,o,d,h==="in"||h==="not-in");return ot.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qf(t,e,n){const r=e,i=Fd("where",t);return jd._create(i,r,n)}class Py extends by{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Py(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Kb(o,l),o=yg(o,l)}(e._query,n),new Ds(e.firestore,e.converter,yg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ky extends qb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ky(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ul(s,o)}(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Zo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function bV(t,e="asc"){const n=e,r=Fd("orderBy",t);return ky._create(r,n)}function xw(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new te(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bx(e)&&n.indexOf("/")!==-1)throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!oe.isDocumentKey(r))throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return q0(t,new oe(r))}if(n instanceof nn)return q0(t,n._key);throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Od(n)}.`)}function bw(t,e){if(!Array.isArray(t)||t.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kb(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PV{convertValue(e,n="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ks(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ze(o.doubleValue));return new Sy(s)}convertGeoPoint(e){return new Ey(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Pd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vl(e));default:return null}}convertTimestamp(e){const n=Ai(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);Re(ub(r));const i=new Fl(r.get(1),r.get(3)),s=new oe(r.popFirst(5));return i.isEqual(n)||jr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qb extends Wb{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Fd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Hu extends Qb{data(e={}){return super.data(e)}}class kV{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ha(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hu(this._firestore,this._userDataWriter,r.key,r,new Ha(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Hu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ha(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Hu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ha(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:CV(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t){t=zr(t,nn);const e=zr(t.firestore,ta);return uV(vy(e),t._key).then(n=>DV(e,t,n))}class Yb extends PV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function Pw(t){t=zr(t,Ds);const e=zr(t.firestore,ta),n=vy(e),r=new Yb(e);return IV(t._query),hV(n,t._query).then(i=>new kV(e,r,t,i))}function Yf(t,e,n){t=zr(t,nn);const r=zr(t.firestore,ta),i=Gb(t.converter,e,n);return Cy(r,[Ub(Iy(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,$n.none())])}function kw(t){return Cy(zr(t.firestore,ta),[new iy(t._key,$n.none())])}function RV(t,e){const n=zr(t.firestore,ta),r=Xi(t),i=Gb(t.converter,e);return Cy(n,[Ub(Iy(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,$n.exists(!1))]).then(()=>r)}function Cy(t,e){return function(r,i){const s=new Dr;return r.asyncQueue.enqueueAndForget(async()=>J2(await cV(r),i,s)),s.promise}(vy(t),e)}function DV(t,e,n){const r=n.docs.get(e._key),i=new Yb(t);return new Qb(t,i,e._key,r,new Ha(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Yo=i})(Qo),No(new vs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ta(new bL(r.getProvider("auth-internal")),new AL(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ii(U0,"4.7.5",e),Ii(U0,"4.7.5","esm2017")})();const MV={apiKey:"AIzaSyBY-tonFAlaDVYIUFJHhQeGiS4MCd16Q3c",authDomain:"lifemetrics-5c6b4.firebaseapp.com",projectId:"lifemetrics-5c6b4",storageBucket:"lifemetrics-5c6b4.firebasestorage.app",messagingSenderId:"449118429278",appId:"1:449118429278:web:939f01948a3dac7f7bd4cf"},Xb=jI(MV),Wa=wL(Xb),yr=pV(Xb),Jb=W.createContext({}),Ms=()=>W.useContext(Jb),NV=({children:t})=>{const[e,n]=W.useState(null),[r,i]=W.useState(!0),s=(c,h)=>nN(Wa,c,h),o=(c,h)=>rN(Wa,c,h),a=()=>cN(Wa);W.useEffect(()=>lN(Wa,h=>{n(h),i(!1)}),[]);const l={currentUser:e,loading:r,signup:s,login:o,logout:a,updatePassword:iN,reauthenticateWithCredential:tN,EmailAuthProvider:Ps};return C.jsx(Jb.Provider,{value:l,children:!r&&t})},Zb=({isOpen:t,onClose:e})=>{const{register:n,handleSubmit:r,formState:{errors:i},setError:s,clearErrors:o}=AI(),{login:a}=Ms(),l=Dm();if(!t)return null;const c=async h=>{try{o(),await a(h.email,h.password),e(),l({to:"/dashboard"})}catch(d){s("root",{type:"manual",message:"Failed to sign in"}),console.error(d)}};return C.jsx("div",{className:"login-dialog-overlay",children:C.jsxs("div",{className:"login-dialog",children:[C.jsx("button",{className:"close-button",onClick:e,children:""}),C.jsxs("form",{onSubmit:r(c),children:[i.root&&C.jsx("div",{className:"error-message",children:i.root.message}),C.jsxs("div",{className:"login-input-group",children:[C.jsx("input",{type:"email",placeholder:"Email",...n("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:i.email?"error":""}),i.email&&C.jsx("span",{className:"error-message",children:i.email.message})]}),C.jsxs("div",{className:"login-input-group",children:[C.jsx("input",{type:"password",placeholder:"Password",...n("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),className:i.password?"error":""}),i.password&&C.jsx("span",{className:"error-message",children:i.password.message})]}),C.jsx("div",{className:"forgot-password",children:C.jsx("a",{href:"#",children:"Forgot Password?"})}),C.jsx("button",{type:"submit",className:"login-button",children:"Login"}),C.jsx("div",{className:"signup-link",children:C.jsx(Fa,{to:"/signup",onClick:e,children:"Sign Up "})})]})]})})},LV=()=>{const[t,e]=W.useState(!1);return C.jsxs(C.Fragment,{children:[C.jsxs("header",{className:"header",children:[C.jsx("div",{className:"header-left",children:C.jsxs(Fa,{to:"/",className:"logo-link",children:[C.jsx("img",{src:"/LifeMetrics/logo.png",alt:"LifeMetrics Logo",className:"logo"}),C.jsx("span",{className:"brand-name",children:"LifeMetrics"})]})}),C.jsx("div",{className:"header-center",children:C.jsxs("nav",{children:[C.jsx(Fa,{to:"/how-it-works",children:"How it works"}),C.jsx("p",{children:" | "}),C.jsx(Fa,{to:"/signup",children:"Sign Up"}),C.jsx("p",{children:" | "}),C.jsx(Fa,{to:"/about",children:"About Us"})]})}),C.jsx("div",{className:"header-right",children:C.jsx("button",{className:"sign-in-button",onClick:()=>e(!0),children:"Sign In"})})]}),C.jsx(Zb,{isOpen:t,onClose:()=>e(!1)})]})},OV=()=>{const t=$r(),{currentUser:e}=Ms(),[n,r]=W.useState(!0);return W.useEffect(()=>{const o=!window.location.pathname.endsWith("/dashboard")||!e;r(o)},[e,t.state.location.pathname]),C.jsxs("div",{children:[n&&C.jsx(LV,{}),C.jsx(gI,{})]})},VV=()=>{const[t,e]=W.useState(!1),n=()=>{e(!0)};return C.jsxs("div",{className:"home-container",children:[C.jsx("div",{className:"background-video",children:C.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,children:[C.jsx("source",{src:"/LifeMetrics/background.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})}),C.jsxs("div",{className:"home-content",children:[C.jsx("h1",{children:"Welcome to LifeMetrics"}),C.jsx("p",{children:"Your Personal Health Status Tracker"}),C.jsx("button",{className:"start-tracking-button",onClick:n,children:"Start Tracking! "})]}),C.jsx(Zb,{isOpen:t,onClose:()=>e(!1)})]})},FV=()=>C.jsxs("div",{className:"info-page-container",children:[C.jsx("div",{className:"info-header",children:C.jsx("h1",{children:"How it Works"})}),C.jsx("div",{className:"info-content",children:C.jsx("p",{children:"LifeMetrics helps you track your personal health data in a seamless and intuitive way. Our platform enables you to log your personal editable health metrics, visualize trends over time, and gain insights to improve your well-being. Simply start by creating an account, log your data, and watch your health trends evolve."})})]}),jV=()=>C.jsxs("div",{className:"info-page-container",children:[C.jsx("div",{className:"info-header",children:C.jsx("h1",{children:"About Us"})}),C.jsx("div",{className:"info-content",children:C.jsx("p",{children:"This web is created by Jiongkai Pang from Northeastern University - Vancouver Campus in INFO 6150. With a mission to promote health and wellness, LifeMetrics empowers individuals to take control of their health data. Our team is dedicated to creating tools that make it easy to monitor, track, and understand personal health trends. Join us on our journey to make well-being accessible and achievable for everyone."})})]}),In={user:{async createUserProfile(t,e){try{const n=Xi(yr,"users",t);return await Yf(n,{...e,updatedAt:We.now()},{merge:!0}),!0}catch(n){throw console.error("Error creating user profile:",n),n}},async getUserProfile(t){try{const e=Xi(yr,"users",t),n=await AV(e);return n.exists()?n.data():null}catch(e){throw console.error("Error getting user profile:",e),e}},async updateProfile(t,e){try{const n=Xi(yr,"users",t);return await Yf(n,{...e,updatedAt:We.now()},{merge:!0}),!0}catch(n){throw console.error("Error updating user profile:",n),n}}},healthMetrics:{async addMetric(t,e){try{const n=iu(yr,`users/${t}/healthMetrics`);await RV(n,{type:e.type,value:e.value,timestamp:e.timestamp})}catch(n){throw console.error("Error adding metric:",n),n}},async deleteMetric(t,e){try{const n=Xi(yr,`users/${t}/healthMetrics/${e}`);await kw(n)}catch(n){throw console.error("Error deleting metric:",n),n}},async getMetrics(t,e,n,r){try{const i=new Date(n);i.setHours(0,0,0,0);const s=new Date(r);s.setHours(23,59,59,999);const o=iu(yr,`users/${t}/healthMetrics`),a=xV(o,Qf("type","==",e),Qf("timestamp",">=",We.fromDate(i)),Qf("timestamp","<=",We.fromDate(s)),bV("timestamp","desc"));return(await Pw(a)).docs.map(c=>({id:c.id,...c.data(),timestamp:c.data().timestamp}))}catch(i){throw console.error("Error getting metrics:",i),i}},async getLastMonthMetrics(t,e){const n=new Date;return n.setDate(n.getDate()-30),this.getMetrics(t,e,n,new Date)},async getLastYearMetrics(t,e){const n=new Date;return n.setFullYear(n.getFullYear()-1),this.getMetrics(t,e,n,new Date)}},statusTypes:{async addStatusType(t,e,n){try{const r=iu(yr,`users/${t}/statusTypes`),i=e.toLowerCase().replace(/\s+/g,"-");return await Yf(Xi(r,i),{name:e,id:i,thresholds:n}),{id:i,name:e,thresholds:n}}catch(r){throw console.error("Error adding status type:",r),r}},async getStatusTypes(t){try{const e=iu(yr,`users/${t}/statusTypes`);return(await Pw(e)).docs.map(r=>r.data())}catch(e){throw console.error("Error getting status types:",e),e}},async deleteStatusType(t,e){try{const n=Xi(yr,`users/${t}/statusTypes/${e}`);await kw(n)}catch(n){throw console.error("Error deleting status type:",n),n}}}},UV={email:"",password:"",confirmPassword:"",username:"",error:"",loading:!1},zV=(t,e)=>{switch(e.type){case"SET_EMAIL":return{...t,email:e.payload};case"SET_PASSWORD":return{...t,password:e.payload};case"SET_CONFIRM_PASSWORD":return{...t,confirmPassword:e.payload};case"SET_USERNAME":return{...t,username:e.payload};case"SET_ERROR":return{...t,error:e.payload};case"CLEAR_ERROR":return{...t,error:""};case"SET_LOADING":return{...t,loading:e.payload};default:return t}},BV=()=>{const[t,e]=W.useReducer(zV,UV),{signup:n}=Ms(),r=Dm(),i=async o=>{if(o.preventDefault(),t.password!==t.confirmPassword)return e({type:"SET_ERROR",payload:"Passwords do not match"});try{e({type:"CLEAR_ERROR"}),e({type:"SET_LOADING",payload:!0});const a=await n(t.email,t.password);a.user&&await In.user.createUserProfile(a.user.uid,{email:t.email,name:t.username}),r({to:"/dashboard"})}catch(a){e({type:"SET_ERROR",payload:"Failed to create an account"}),console.error(a)}finally{e({type:"SET_LOADING",payload:!1})}},s=o=>{o.preventDefault(),r({to:"/"})};return C.jsx("div",{className:"signup-container",children:C.jsxs("div",{className:"signup-card",children:[C.jsx("h2",{children:"Create Account"}),t.error&&C.jsx("div",{className:"error-message",children:t.error}),C.jsxs("form",{onSubmit:i,className:"signup-form",children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"username",children:"Username"}),C.jsx("input",{id:"username",type:"text",value:t.username,onChange:o=>e({type:"SET_USERNAME",payload:o.target.value}),required:!0,placeholder:"Enter your username"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"email",children:"Email"}),C.jsx("input",{id:"email",type:"email",value:t.email,onChange:o=>e({type:"SET_EMAIL",payload:o.target.value}),required:!0,placeholder:"Enter your email"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"password",children:"Password"}),C.jsx("input",{id:"password",type:"password",value:t.password,onChange:o=>e({type:"SET_PASSWORD",payload:o.target.value}),required:!0,placeholder:"Create a password"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{htmlFor:"confirm-password",children:"Confirm Password"}),C.jsx("input",{id:"confirm-password",type:"password",value:t.confirmPassword,onChange:o=>e({type:"SET_CONFIRM_PASSWORD",payload:o.target.value}),required:!0,placeholder:"Confirm your password"})]}),C.jsx("button",{type:"submit",className:"signup-button",disabled:t.loading,children:t.loading?"Creating Account...":"Sign Up"}),C.jsxs("div",{className:"login-link",children:["Already have an account? ",C.jsx("a",{href:"/",onClick:s,children:"Login"})]})]})]})})},$V=["/LifeMetrics/assets/avatar-1.png","/LifeMetrics/assets/avatar-2.png","/LifeMetrics/assets/avatar-3.png","/LifeMetrics/assets/avatar-4.png"],HV=({isOpen:t,onClose:e,currentName:n,currentAvatar:r,onProfileUpdate:i})=>{const[s,o]=W.useState(n),[a,l]=W.useState(r),[c,h]=W.useState(""),[d,f]=W.useState(""),[g,y]=W.useState(""),[v,S]=W.useState(""),[E,w]=W.useState(!1),{currentUser:b,updatePassword:D,reauthenticateWithCredential:N,EmailAuthProvider:V}=Ms();if(!t)return null;const I=async _=>{if(_.preventDefault(),!!b){S(""),w(!0);try{if(await In.user.createUserProfile(b.uid,{name:s,avatar:a,email:b.email||""}),d){if(d!==g)throw new Error("New passwords do not match");if(c){const T=V.credential(b.email||"",c);await N(b,T),await D(b,d)}else throw new Error("Current password is required to change password")}i(),e()}catch(T){console.error("Error updating profile:",T),S(T instanceof Error?T.message:"Failed to update profile")}finally{w(!1)}}};return C.jsx("div",{className:"dialog-overlay",children:C.jsxs("div",{className:"dialog-content",children:[C.jsx("h2",{children:"Edit Profile"}),v&&C.jsx("div",{className:"error-message",children:v}),C.jsxs("form",{onSubmit:I,children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Name"}),C.jsx("input",{type:"text",value:s,onChange:_=>o(_.target.value),required:!0,disabled:E})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Avatar"}),C.jsx("div",{className:"avatar-options",children:$V.map(_=>C.jsx("img",{src:_,alt:"Avatar option",className:`avatar-option ${a===_?"selected":""}`,onClick:()=>l(_)},_))})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Change Password (optional)"}),C.jsx("input",{type:"password",placeholder:"Current Password",value:c,onChange:_=>h(_.target.value),disabled:E}),C.jsx("input",{type:"password",placeholder:"New Password",value:d,onChange:_=>f(_.target.value),disabled:E}),C.jsx("input",{type:"password",placeholder:"Confirm New Password",value:g,onChange:_=>y(_.target.value),disabled:E})]}),C.jsxs("div",{className:"dialog-actions",children:[C.jsx("button",{type:"button",onClick:e,disabled:E,children:"Cancel"}),C.jsx("button",{type:"submit",disabled:E,children:E?"Saving...":"Save Changes"})]})]})]})})},WV=({isOpen:t,onClose:e})=>t?C.jsx("div",{className:"help-dialog-overlay",children:C.jsxs("div",{className:"help-dialog",children:[C.jsx("button",{className:"close-button",onClick:e,children:""}),C.jsx("h2",{children:"Dashboard Help Guide"}),C.jsxs("div",{className:"help-content",children:[C.jsxs("section",{children:[C.jsx("h3",{children:"Getting Started"}),C.jsx("p",{children:"Welcome to your LifeMetrics dashboard! Here's how to use the main features:"})]}),C.jsxs("section",{children:[C.jsx("h3",{children:"Status Types"}),C.jsx("p",{children:' Select from default metrics (Blood Pressure, Sleep Quality) or create custom ones using the "New Status" button in the left panel.'}),C.jsx("p",{children:" Each status type has customizable thresholds to track your health metrics."})]}),C.jsxs("section",{children:[C.jsx("h3",{children:"Tracking Data"}),C.jsx("p",{children:" Enter new measurements using the input form at the top of the main panel."}),C.jsx("p",{children:" View your data through interactive charts showing distribution and trends."}),C.jsx("p",{children:" Recent records are displayed in a table below the charts."})]}),C.jsxs("section",{children:[C.jsx("h3",{children:"Profile Management"}),C.jsx("p",{children:' Update your profile picture and name through the "Edit Profile" option.'}),C.jsx("p",{children:" Manage your account settings and password securely."})]})]})]})}):null,qV=({user:t})=>{const[e,n]=W.useState(!1),[r,i]=W.useState(!1),[s,o]=W.useState(null),{currentUser:a,logout:l}=Ms(),c="/LifeMetrics/assets/default-avatar.png",[h,d]=W.useState(!1);W.useEffect(()=>{(async()=>{if(a)try{const E=await In.user.getUserProfile(a.uid);E?o(E):t&&o(t)}catch(E){console.error("Failed to load user data:",E),t&&o(t)}})()},[a,t]);const f=async()=>{try{await l(),window.location.href="/LifeMetrics/"}catch(S){console.error("Failed to log out:",S)}},g=()=>{n(!1),i(!0)},y=async()=>{if(a){const S=await In.user.getUserProfile(a.uid);S&&o(S)}},v=S=>{S.preventDefault(),n(!1),d(!0)};return s?C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"user-header",children:[C.jsxs("div",{className:"user-info",children:[C.jsx("img",{src:s.avatar||c,alt:"User avatar",className:"user-avatar",onError:S=>{const E=S.target;E.src=c}}),C.jsx("h2",{className:"user-name",children:s.name})]}),C.jsxs("div",{className:"header-menu",children:[C.jsx("button",{className:"menu-button",onClick:()=>n(!e),children:""}),e&&C.jsxs("div",{className:"menu-dropdown",children:[C.jsx("a",{href:"#",onClick:f,children:"Log out"}),C.jsx("a",{href:"#",onClick:g,children:"Edit Profile"}),C.jsx("a",{href:"#",onClick:v,children:"Help"})]})]})]}),C.jsx(HV,{isOpen:r,onClose:()=>i(!1),currentName:s.name,currentAvatar:s.avatar,onProfileUpdate:y}),C.jsx(WV,{isOpen:h,onClose:()=>d(!1)})]}):C.jsx("div",{className:"user-header",children:"Loading..."})},KV=({onSubmit:t,onCancel:e,loading:n})=>{const{control:r,register:i,handleSubmit:s,formState:{errors:o},setError:a,clearErrors:l}=AI({defaultValues:{name:"",normalThreshold:"",elevatedThreshold:"",highThreshold:"",rangeNames:{normal:"Normal",elevated:"Elevated",high:"High"}}}),c=async h=>{l();const d=parseFloat(h.normalThreshold),f=parseFloat(h.elevatedThreshold),g=parseFloat(h.highThreshold);if(d>=f||f>=g){a("root",{type:"manual",message:"Thresholds must be in ascending order: First < Second < Third"});return}const y={normal:d,elevated:f,high:g,ranges:h.rangeNames};try{await t(h.name,y)}catch{a("root",{type:"manual",message:"Failed to create status"})}};return C.jsxs("form",{onSubmit:s(c),className:"status-form",children:[o.root&&C.jsx("div",{className:"error-message",children:o.root.message}),C.jsxs("div",{className:"form-section",children:[C.jsx("h4",{children:"Status Name"}),C.jsxs("div",{className:"form-group",children:[C.jsx("input",{type:"text",disabled:n,placeholder:"Enter status name",...i("name",{required:"Please enter a status name",minLength:{value:2,message:"Name must be at least 2 characters"}})}),o.name&&C.jsx("span",{className:"error-message",children:o.name.message})]})]}),C.jsxs("div",{className:"thresholds-group",children:[C.jsxs("div",{className:"form-section",children:[C.jsx("h4",{children:"Range Names"}),C.jsx(fR,{name:"rangeNames",control:r,rules:{validate:h=>!h.normal.trim()||!h.elevated.trim()||!h.high.trim()?"Please enter names for all ranges":!0},render:({field:h})=>C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"First Range Name"}),C.jsx("input",{type:"text",value:h.value.normal,onChange:d=>h.onChange({...h.value,normal:d.target.value}),placeholder:"e.g., Normal",disabled:n})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Second Range Name"}),C.jsx("input",{type:"text",value:h.value.elevated,onChange:d=>h.onChange({...h.value,elevated:d.target.value}),placeholder:"e.g., Elevated",disabled:n})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Third Range Name"}),C.jsx("input",{type:"text",value:h.value.high,onChange:d=>h.onChange({...h.value,high:d.target.value}),placeholder:"e.g., High",disabled:n})]})]})})]}),C.jsxs("div",{className:"form-section",children:[C.jsx("h4",{children:"Thresholds"}),C.jsx("div",{className:"threshold-row",children:C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"First Threshold"}),C.jsx("input",{type:"number",step:"any",disabled:n,placeholder:"Value",...i("normalThreshold",{required:"Please enter a value",validate:h=>!isNaN(parseFloat(h))||"Please enter a valid number"})}),C.jsx("span",{className:"helper-text",children:"Values below this are in first range"}),o.normalThreshold&&C.jsx("span",{className:"error-message",children:o.normalThreshold.message})]})}),C.jsx("div",{className:"threshold-row",children:C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Second Threshold"}),C.jsx("input",{type:"number",step:"any",disabled:n,placeholder:"Value",...i("elevatedThreshold",{required:"Please enter a value",validate:h=>!isNaN(parseFloat(h))||"Please enter a valid number"})}),C.jsx("span",{className:"helper-text",children:"Values between first and this are in second range"}),o.elevatedThreshold&&C.jsx("span",{className:"error-message",children:o.elevatedThreshold.message})]})}),C.jsx("div",{className:"threshold-row",children:C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Third Threshold"}),C.jsx("input",{type:"number",step:"any",disabled:n,placeholder:"Value",...i("highThreshold",{required:"Please enter a value",validate:h=>!isNaN(parseFloat(h))||"Please enter a valid number"})}),C.jsx("span",{className:"helper-text",children:"Values between second and this are in third range"}),o.highThreshold&&C.jsx("span",{className:"error-message",children:o.highThreshold.message})]})})]})]}),C.jsxs("div",{className:"form-buttons",children:[C.jsx("button",{type:"button",onClick:e,disabled:n,children:"Cancel"}),C.jsx("button",{type:"submit",disabled:n,children:n?"Creating...":"Create"})]})]})},su=[{id:"blood-pressure",name:"Blood Pressure",thresholds:{normal:120,elevated:129,high:130,ranges:{normal:"Normal (<120)",elevated:"Elevated (120-129)",high:"High (>130)"}}},{id:"sleep-quality",name:"Sleep Quality",thresholds:{normal:7,elevated:8,high:9,ranges:{normal:"Poor (<7)",elevated:"Good (7-8)",high:"Excellent (>8)"}}}],GV=({onMetricSelect:t,selectedMetric:e})=>{const[n,r]=W.useState(!1),[i,s]=W.useState(su),[o,a]=W.useState(!1),[l,c]=W.useState(""),{currentUser:h}=Ms();W.useEffect(()=>{h&&d()},[h]);const d=async()=>{if(h)try{a(!0);const y=await In.statusTypes.getStatusTypes(h.uid);s([...su,...y]),c("")}catch(y){console.error("Error loading status types:",y),c("Failed to load status types")}finally{a(!1)}},f=async(y,v)=>{if(h)try{a(!0),await In.statusTypes.addStatusType(h.uid,y,v),await d(),r(!1),c("")}catch(S){console.error("Error adding status type:",S),c("Failed to add status type")}finally{a(!1)}},g=async y=>{if(h){if(su.some(v=>v.id===y)){c("Cannot delete default status types");return}try{a(!0),await In.statusTypes.deleteStatusType(h.uid,y),await d(),c("")}catch(v){console.error("Error deleting status type:",v),c("Failed to delete status type")}finally{a(!1)}}};return C.jsx("div",{className:"status-panel",children:C.jsxs("div",{className:"status-types",children:[C.jsx("h3",{children:"Status Types"}),l&&C.jsx("div",{className:"error-message",children:l}),o&&!n&&C.jsx("div",{children:"Loading..."}),i.map(y=>C.jsxs("div",{className:`status-type-item ${e===y.id?"selected":""}`,children:[C.jsxs("div",{onClick:()=>t(y.id),children:[" ",y.name]}),!su.some(v=>v.id===y.id)&&C.jsx("button",{className:"delete-status-button",onClick:v=>{v.stopPropagation(),g(y.id)},disabled:o,children:""})]},y.id)),n?C.jsx(KV,{onSubmit:f,onCancel:()=>r(!1),loading:o}):C.jsx("button",{className:"new-status-button",onClick:()=>r(!0),disabled:o,children:"+ New Status"})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function fc(t){return t+.5|0}const di=(t,e,n)=>Math.max(Math.min(t,n),e);function qa(t){return di(fc(t*2.55),0,255)}function bi(t){return di(fc(t*255),0,255)}function Tr(t){return di(fc(t/2.55)/100,0,1)}function Cw(t){return di(fc(t*100),0,100)}const vn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Pg=[..."0123456789ABCDEF"],QV=t=>Pg[t&15],YV=t=>Pg[(t&240)>>4]+Pg[t&15],ou=t=>(t&240)>>4===(t&15),XV=t=>ou(t.r)&&ou(t.g)&&ou(t.b)&&ou(t.a);function JV(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&vn[t[1]]*17,g:255&vn[t[2]]*17,b:255&vn[t[3]]*17,a:e===5?vn[t[4]]*17:255}:(e===7||e===9)&&(n={r:vn[t[1]]<<4|vn[t[2]],g:vn[t[3]]<<4|vn[t[4]],b:vn[t[5]]<<4|vn[t[6]],a:e===9?vn[t[7]]<<4|vn[t[8]]:255})),n}const ZV=(t,e)=>t<255?e(t):"";function eF(t){var e=XV(t)?QV:YV;return t?"#"+e(t.r)+e(t.g)+e(t.b)+ZV(t.a,e):void 0}const tF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function e1(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function nF(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function rF(t,e,n){const r=e1(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function iF(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function Ay(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=iF(n,r,i,h,s),l=l*60+.5),[l|0,c||0,a]}function Ry(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(bi)}function Dy(t,e,n){return Ry(e1,t,e,n)}function sF(t,e,n){return Ry(rF,t,e,n)}function oF(t,e,n){return Ry(nF,t,e,n)}function t1(t){return(t%360+360)%360}function aF(t){const e=tF.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?qa(+e[5]):bi(+e[5]));const i=t1(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=sF(i,s,o):e[1]==="hsv"?r=oF(i,s,o):r=Dy(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function lF(t,e){var n=Ay(t);n[0]=t1(n[0]+e),n=Dy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function cF(t){if(!t)return;const e=Ay(t),n=e[0],r=Cw(e[1]),i=Cw(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Tr(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const Aw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function uF(){const t={},e=Object.keys(Rw),n=Object.keys(Aw);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,Aw[s]);s=parseInt(Rw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let au;function hF(t){au||(au=uF(),au.transparent=[0,0,0,0]);const e=au[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const dF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function fF(t){const e=dF.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?qa(o):di(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?qa(r):di(r,0,255)),i=255&(e[4]?qa(i):di(i,0,255)),s=255&(e[6]?qa(s):di(s,0,255)),{r,g:i,b:s,a:n}}}function pF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Tr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Xf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,$s=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function gF(t,e,n){const r=$s(Tr(t.r)),i=$s(Tr(t.g)),s=$s(Tr(t.b));return{r:bi(Xf(r+n*($s(Tr(e.r))-r))),g:bi(Xf(i+n*($s(Tr(e.g))-i))),b:bi(Xf(s+n*($s(Tr(e.b))-s))),a:t.a+n*(e.a-t.a)}}function lu(t,e,n){if(t){let r=Ay(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Dy(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function n1(t,e){return t&&Object.assign(e||{},t)}function Dw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=bi(t[3]))):(e=n1(t,{r:0,g:0,b:0,a:1}),e.a=bi(e.a)),e}function mF(t){return t.charAt(0)==="r"?fF(t):aF(t)}class $l{constructor(e){if(e instanceof $l)return e;const n=typeof e;let r;n==="object"?r=Dw(e):n==="string"&&(r=JV(e)||hF(e)||mF(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=n1(this._rgb);return e&&(e.a=Tr(e.a)),e}set rgb(e){this._rgb=Dw(e)}rgbString(){return this._valid?pF(this._rgb):void 0}hexString(){return this._valid?eF(this._rgb):void 0}hslString(){return this._valid?cF(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=gF(this._rgb,e._rgb,n)),this}clone(){return new $l(this.rgb)}alpha(e){return this._rgb.a=bi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=fc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return lu(this._rgb,2,e),this}darken(e){return lu(this._rgb,2,-e),this}saturate(e){return lu(this._rgb,1,e),this}desaturate(e){return lu(this._rgb,1,-e),this}rotate(e){return lF(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function _r(){}const yF=(()=>{let t=0;return()=>t++})();function Ve(t){return t==null}function ut(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ce(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function An(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Yn(t,e){return An(t)?t:e}function Ie(t,e){return typeof t>"u"?e:t}const _F=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ze(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function De(t,e,n,r){let i,s,o;if(ut(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Ce(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Wh(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function qh(t){if(ut(t))return t.map(qh);if(Ce(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=qh(t[n[i]]);return e}return t}function r1(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function vF(t,e,n,r){if(!r1(t))return;const i=e[t],s=n[t];Ce(i)&&Ce(s)?Hl(i,s,r):e[t]=qh(s)}function Hl(t,e,n){const r=ut(e)?e:[e],i=r.length;if(!Ce(t))return t;n=n||{};const s=n.merger||vF;let o;for(let a=0;a<i;++a){if(o=r[a],!Ce(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function fl(t,e){return Hl(t,e,{merger:wF})}function wF(t,e,n){if(!r1(t))return;const r=e[t],i=n[t];Ce(r)&&Ce(i)?fl(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=qh(i))}const Mw={"":t=>t,x:t=>t.x,y:t=>t.y};function EF(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function SF(t){const e=EF(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function $o(t,e){return(Mw[e]||(Mw[e]=SF(e)))(t)}function My(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Wl=t=>typeof t<"u",Ni=t=>typeof t=="function",Nw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function TF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const mt=Math.PI,ur=2*mt,IF=ur+mt,Kh=Number.POSITIVE_INFINITY,xF=mt/180,Un=mt/2,Hi=mt/4,Lw=mt*2/3,kg=Math.log10,hr=Math.sign;function pl(t,e,n){return Math.abs(t-e)<n}function Ow(t){const e=Math.round(t);t=pl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(kg(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function bF(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function ql(t){return!isNaN(parseFloat(t))&&isFinite(t)}function PF(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function kF(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function os(t){return t*(mt/180)}function CF(t){return t*(180/mt)}function Vw(t){if(!An(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function AF(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*mt&&(s+=ur),{angle:s,distance:i}}function Cg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function RF(t,e){return(t-e+IF)%ur-mt}function Zr(t){return(t%ur+ur)%ur}function i1(t,e,n,r){const i=Zr(t),s=Zr(e),o=Zr(n),a=Zr(s-i),l=Zr(o-i),c=Zr(i-s),h=Zr(i-o);return i===s||i===o||r&&s===o||a>l&&c<h}function hn(t,e,n){return Math.max(e,Math.min(n,t))}function DF(t){return hn(t,-32768,32767)}function as(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Ny(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const ls=(t,e,n,r)=>Ny(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),MF=(t,e,n)=>Ny(t,n,r=>t[r][e]>=n);function NF(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const s1=["push","pop","shift","splice","unshift"];function LF(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),s1.forEach(n=>{const r="_onData"+My(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function Fw(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(s1.forEach(s=>{delete t[s]}),delete t._chartjs)}function o1(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const a1=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function l1(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,a1.call(window,()=>{r=!1,t.apply(e,n)}))}}function OF(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Ly=t=>t==="start"?"left":t==="end"?"right":"center",Rt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,VF=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function FF(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:h,minDefined:d,maxDefined:f}=o.getUserBounds();d&&(i=hn(Math.min(ls(a,l,c).lo,n?r:ls(e,l,o.getPixelForValue(c)).lo),0,r-1)),f?s=hn(Math.max(ls(a,o.axis,h,!0).hi+1,n?0:ls(e,l,o.getPixelForValue(h),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function jF(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const cu=t=>t===0||t===1,jw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ur/n)),Uw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ur/n)+1,gl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Un)+1,easeOutSine:t=>Math.sin(t*Un),easeInOutSine:t=>-.5*(Math.cos(mt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>cu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>cu(t)?t:jw(t,.075,.3),easeOutElastic:t=>cu(t)?t:Uw(t,.075,.3),easeInOutElastic(t){return cu(t)?t:t<.5?.5*jw(t*2,.1125,.45):.5+.5*Uw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-gl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?gl.easeInBounce(t*2)*.5:gl.easeOutBounce(t*2-1)*.5+.5};function Oy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function zw(t){return Oy(t)?t:new $l(t)}function Jf(t){return Oy(t)?t:new $l(t).saturate(.5).darken(.1).hexString()}const UF=["x","y","borderWidth","radius","tension"],zF=["color","borderColor","backgroundColor"];function BF(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:zF},numbers:{type:"number",properties:UF}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function $F(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Bw=new Map;function HF(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Bw.get(n);return r||(r=new Intl.NumberFormat(t,e),Bw.set(n,r)),r}function c1(t,e,n){return HF(e,n).format(t)}const u1={values(t){return ut(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=WF(t,n)}const o=kg(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),c1(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(kg(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?u1.numeric.call(this,t,e,n):""}};function WF(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var h1={formatters:u1};function qF(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:h1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ts=Object.create(null),Ag=Object.create(null);function ml(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function Zf(t,e,n){return typeof e=="string"?Hl(ml(t,e),n):Hl(ml(t,""),e)}class KF{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Jf(i.backgroundColor),this.hoverBorderColor=(r,i)=>Jf(i.borderColor),this.hoverColor=(r,i)=>Jf(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Zf(this,e,n)}get(e){return ml(this,e)}describe(e,n){return Zf(Ag,e,n)}override(e,n){return Zf(Ts,e,n)}route(e,n,r,i){const s=ml(this,e),o=ml(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ce(l)?Object.assign({},c,l):Ie(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var tt=new KF({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[BF,$F,qF]);function GF(t){return!t||Ve(t.size)||Ve(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function $w(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Wi(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Hw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Rg(t,e,n,r){d1(t,e,n,r,null)}function d1(t,e,n,r,i){let s,o,a,l,c,h,d,f;const g=e.pointStyle,y=e.rotation,v=e.radius;let S=(y||0)*xF;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(S),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),g){default:i?t.ellipse(n,r,i/2,v,0,0,ur):t.arc(n,r,v,0,ur),t.closePath();break;case"triangle":h=i?i/2:v,t.moveTo(n+Math.sin(S)*h,r-Math.cos(S)*v),S+=Lw,t.lineTo(n+Math.sin(S)*h,r-Math.cos(S)*v),S+=Lw,t.lineTo(n+Math.sin(S)*h,r-Math.cos(S)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(S+Hi)*l,d=Math.cos(S+Hi)*(i?i/2-c:l),a=Math.sin(S+Hi)*l,f=Math.sin(S+Hi)*(i?i/2-c:l),t.arc(n-d,r-a,c,S-mt,S-Un),t.arc(n+f,r-o,c,S-Un,S),t.arc(n+d,r+a,c,S,S+Un),t.arc(n-f,r+o,c,S+Un,S+mt),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}S+=Hi;case"rectRot":d=Math.cos(S)*(i?i/2:v),o=Math.cos(S)*v,a=Math.sin(S)*v,f=Math.sin(S)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":S+=Hi;case"cross":d=Math.cos(S)*(i?i/2:v),o=Math.cos(S)*v,a=Math.sin(S)*v,f=Math.sin(S)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(S)*(i?i/2:v),o=Math.cos(S)*v,a=Math.sin(S)*v,f=Math.sin(S)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),S+=Hi,d=Math.cos(S)*(i?i/2:v),o=Math.cos(S)*v,a=Math.sin(S)*v,f=Math.sin(S)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(S)*v,a=Math.sin(S)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(S)*(i?i/2:v),r+Math.sin(S)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Kl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Vy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Fy(t){t.restore()}function QF(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function YF(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function XF(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ve(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function JF(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function ZF(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Gl(t,e,n,r,i,s={}){const o=ut(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,XF(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&ZF(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ve(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),JF(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Gh(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*mt,mt,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,mt,Un,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Un,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Un,!0),t.lineTo(n+o.topLeft,r)}const ej=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,tj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function nj(t,e){const n=(""+t).match(ej);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const rj=t=>+t||0;function f1(t,e){const n={},r=Ce(e),i=r?Object.keys(e):e,s=Ce(t)?r?o=>Ie(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=rj(s(o));return n}function p1(t){return f1(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Eo(t){return f1(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Rn(t){const e=p1(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Lt(t,e){t=t||{},e=e||tt.font;let n=Ie(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Ie(t.style,e.style);r&&!(""+r).match(tj)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Ie(t.family,e.family),lineHeight:nj(Ie(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Ie(t.weight,e.weight),string:""};return i.string=GF(i),i}function uu(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function ij(t,e,n){const{min:r,max:i}=t,s=_F(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ns(t,e){return Object.assign(Object.create(t),e)}function jy(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=_1("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>jy([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return m1(a,l,()=>dj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return qw(a).includes(l)},ownKeys(a){return qw(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function Ho(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:g1(t,r),setContext:s=>Ho(t,s,n,r),override:s=>Ho(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return m1(s,o,()=>oj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function g1(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Ni(n)?n:()=>n,isIndexable:Ni(r)?r:()=>r}}const sj=(t,e)=>t?t+My(e):e,Uy=(t,e)=>Ce(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function m1(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function oj(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Ni(a)&&o.isScriptable(e)&&(a=aj(e,a,t,n)),ut(a)&&a.length&&(a=lj(e,a,t,o.isIndexable)),Uy(e,a)&&(a=Ho(a,i,s&&s[e],o)),a}function aj(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),Uy(t,l)&&(l=zy(i._scopes,i,t,l)),l}function lj(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ce(e[0])){const l=e,c=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=zy(c,i,t,h);e.push(Ho(d,s,o&&o[t],a))}}return e}function y1(t,e,n){return Ni(t)?t(e,n):t}const cj=(t,e)=>t===!0?e:typeof t=="string"?$o(e,t):void 0;function uj(t,e,n,r,i){for(const s of e){const o=cj(n,s);if(o){t.add(o);const a=y1(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function zy(t,e,n,r){const i=e._rootScopes,s=y1(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Ww(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=Ww(a,o,s,l,r),l===null)?!1:jy(Array.from(a),[""],i,s,()=>hj(e,n,r))}function Ww(t,e,n,r,i){for(;n;)n=uj(t,e,n,r,i);return n}function hj(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return ut(i)&&Ce(n)?n:i||{}}function dj(t,e,n,r){let i;for(const s of e)if(i=_1(sj(s,t),n),typeof i<"u")return Uy(t,i)?zy(n,r,t,i):i}function _1(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function qw(t){let e=t._keys;return e||(e=t._keys=fj(t._scopes)),e}function fj(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const pj=Number.EPSILON||1e-14,Wo=(t,e)=>e<t.length&&!t[e].skip&&t[e],v1=t=>t==="x"?"y":"x";function gj(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Cg(s,i),l=Cg(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=r*c,f=r*h;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function mj(t,e,n){const r=t.length;let i,s,o,a,l,c=Wo(t,0);for(let h=0;h<r-1;++h)if(l=c,c=Wo(t,h+1),!(!l||!c)){if(pl(e[h],0,pj)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function yj(t,e,n="x"){const r=v1(n),i=t.length;let s,o,a,l=Wo(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Wo(t,c+1),!a)continue;const h=a[n],d=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=d+s*e[c])}}function _j(t,e="x"){const n=v1(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Wo(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Wo(t,o+1),!!l){if(c){const h=c[e]-l[e];i[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?hr(i[o-1])!==hr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}mj(t,i,s),yj(t,s,e)}function hu(t,e,n){return Math.max(Math.min(t,n),e)}function vj(t,e){let n,r,i,s,o,a=Kl(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Kl(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=hu(i.cp1x,e.left,e.right),i.cp1y=hu(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=hu(i.cp2x,e.left,e.right),i.cp2y=hu(i.cp2y,e.top,e.bottom)))}function wj(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")_j(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=gj(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&vj(t,n)}function By(){return typeof window<"u"&&typeof document<"u"}function $y(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Qh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Ud=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Ej(t,e){return Ud(t).getPropertyValue(e)}const Sj=["top","right","bottom","left"];function ds(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=Sj[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Tj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Ij(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(Tj(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ji(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Ud(n),s=i.boxSizing==="border-box",o=ds(i,"padding"),a=ds(i,"border","width"),{x:l,y:c,box:h}=Ij(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:y}=e;return s&&(g-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/g*n.width/r),y:Math.round((c-f)/y*n.height/r)}}function xj(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&$y(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Ud(s),l=ds(a,"border","width"),c=ds(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Qh(a.maxWidth,s,"clientWidth"),i=Qh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Kh,maxHeight:i||Kh}}const du=t=>Math.round(t*10)/10;function bj(t,e,n,r){const i=Ud(t),s=ds(i,"margin"),o=Qh(i.maxWidth,t,"clientWidth")||Kh,a=Qh(i.maxHeight,t,"clientHeight")||Kh,l=xj(t,e,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const f=ds(i,"border","width"),g=ds(i,"padding");c-=g.width+f.width,h-=g.height+f.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=du(Math.min(c,o,l.maxWidth)),h=du(Math.min(h,a,l.maxHeight)),c&&!h&&(h=du(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=du(Math.floor(h*r))),{width:c,height:h}}function Kw(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Pj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};By()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Gw(t,e){const n=Ej(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Zi(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function kj(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Cj(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Zi(t,i,n),a=Zi(i,s,n),l=Zi(s,e,n),c=Zi(o,a,n),h=Zi(a,l,n);return Zi(c,h,n)}const Aj=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},Rj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function So(t,e,n){return t?Aj(e,n):Rj()}function w1(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function E1(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function S1(t){return t==="angle"?{between:i1,compare:RF,normalize:Zr}:{between:as,compare:(e,n)=>e-n,normalize:e=>e}}function Qw({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function Dj(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=S1(r),l=e.length;let{start:c,end:h,loop:d}=t,f,g;if(d){for(c+=l,h+=l,f=0,g=l;f<g&&o(a(e[c%l][r]),i,s);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function Mj(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=S1(r),{start:h,end:d,loop:f,style:g}=Dj(t,e,n),y=[];let v=!1,S=null,E,w,b;const D=()=>l(i,b,E)&&a(i,b)!==0,N=()=>a(s,E)===0||l(s,b,E),V=()=>v||D(),I=()=>!v||N();for(let _=h,T=h;_<=d;++_)w=e[_%o],!w.skip&&(E=c(w[r]),E!==b&&(v=l(E,i,s),S===null&&V()&&(S=a(E,i)===0?_:T),S!==null&&I()&&(y.push(Qw({start:S,end:_,loop:f,count:o,style:g})),S=null),T=_,b=E));return S!==null&&y.push(Qw({start:S,end:d,loop:f,count:o,style:g})),y}function Nj(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=Mj(r[i],t.points,e);s.length&&n.push(...s)}return n}function Lj(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function Oj(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function Vj(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=Lj(n,i,s,r);if(r===!0)return Yw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return Yw(t,Oj(n,o,l,c),n,e)}function Yw(t,e,n,r){return!r||!r.setContext||!n?e:Fj(t,e,n,r)}function Fj(t,e,n,r){const i=t._chart.getContext(),s=Xw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,f=d;function g(y,v,S,E){const w=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=w;for(;n[v%l].skip;)v+=w;y%l!==v%l&&(c.push({start:y%l,end:v%l,loop:S,style:E}),h=E,d=v%l)}}for(const y of e){d=a?d:y.start;let v=n[d%l],S;for(f=d+1;f<=y.end;f++){const E=n[f%l];S=Xw(r.setContext(Ns(i,{type:"segment",p0:v,p1:E,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),jj(S,h)&&g(d,f-1,y.loop,h),v=E,h=S}d<f-1&&g(d,f-1,y.loop,h)}return c}function Xw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function jj(t,e){if(!e)return!1;const n=[],r=function(i,s){return Oy(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Uj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=a1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var vr=new Uj;const Jw="transparent",zj={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=zw(t||Jw),i=r.valid&&zw(e||Jw);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Bj{constructor(e,n,r,i){const s=n[r];i=uu([e.to,i,s,e.from]);const o=uu([e.from,s,i]);this._active=!0,this._fn=e.fn||zj[e.type||typeof o],this._easing=gl[e.easing]||gl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=uu([e.to,n,i,e.from]),this._from=uu([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class T1{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ce(e))return;const n=Object.keys(tt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ce(s))return;const o={};for(const a of n)o[a]=s[a];(ut(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=Hj(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&$j(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}s[c]=d=new Bj(f,e,c,h),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return vr.add(this._chart,r),!0}}function $j(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function Hj(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Zw(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function Wj(t,e,n){if(n===!1)return!1;const r=Zw(t,n),i=Zw(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function qj(t){let e,n,r,i;return Ce(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function I1(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function eE(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],An(c)&&(s||e===0||hr(e)===hr(c))&&(e+=c)}return!h&&!r.all?0:e}function Kj(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[s]:t[h]};return a}function ep(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Gj(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Qj(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function Yj(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function tE(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function nE(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=Gj(s,o,r),d=e.length;let f;for(let g=0;g<d;++g){const y=e[g],{[l]:v,[c]:S}=y,E=y._stacks||(y._stacks={});f=E[c]=Yj(i,h,v),f[a]=S,f._top=tE(f,o,!0,r.type),f._bottom=tE(f,o,!1,r.type);const w=f._visualValues||(f._visualValues={});w[a]=S}}function tp(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Xj(t,e){return Ns(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Jj(t,e,n){return Ns(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ka(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const np=t=>t==="reset"||t==="none",rE=(t,e)=>e?t:Object.assign({},t),Zj=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:I1(n,!0),values:null};class To{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ep(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ka(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,f,g,y)=>d==="x"?f:d==="r"?y:g,s=n.xAxisID=Ie(r.xAxisID,tp(e,"x")),o=n.yAxisID=Ie(r.yAxisID,tp(e,"y")),a=n.rAxisID=Ie(r.rAxisID,tp(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Fw(this._data,this),e._stacked&&ka(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ce(n)){const i=this._cachedMeta;this._data=Kj(n,i)}else if(r!==n){if(r){Fw(r,this);const i=this._cachedMeta;ka(i),i._parsed=[]}n&&Object.isExtensible(n)&&LF(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=ep(n.vScale,n),n.stack!==r.stack&&(i=!0,ka(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(nE(this,n._parsed),n._stacked=ep(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,d,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{ut(i[e])?f=this.parseArrayData(r,i,e,n):Ce(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const g=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=d=f[h],l&&(g()&&(l=!1),c=d);r._sorted=l}o&&nE(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(i);let f,g,y;for(f=0,g=i;f<g;++f)y=f+r,d[f]={[a]:h||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,h,d;for(l=0,c=i;l<c;++l)h=l+r,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,d,f,g;for(h=0,d=i;h<d;++h)f=h+r,g=n[f],c[h]={x:s.parse($o(g,a),f),y:o.parse($o(g,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:I1(i,!0),values:n._stacks[e.axis]._visualValues};return eE(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=eE(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=Zj(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=Qj(a);let f,g;function y(){g=i[f];const v=g[a.axis];return!An(g[e.axis])||h>v||d<v}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(c,e,g,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],An(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=qj(Ie(this.options.clip,Wj(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Jj(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Xj(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Wl(r);if(a)return rE(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),g=Object.keys(tt.elements[e]),y=()=>this.getContext(r,i,n),v=c.resolveNamedOptions(f,g,y,d);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(rE(v,l))),v}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,r,n))}const c=new T1(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||np(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){np(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!np(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&ka(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}he(To,"defaults",{}),he(To,"datasetElementType",null),he(To,"dataElementType",null);function eU(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=o1(r.sort((i,s)=>i-s))}return t._cache.$bar}function tU(t){const e=t.iScale,n=eU(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Wl(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function nU(t,e,n,r){const i=n.barThickness;let s,o;return Ve(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function rU(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function iU(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function x1(t,e,n,r){return ut(t)?iU(t,e,n,r):e[n.axis]=n.parse(t,r),e}function iE(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,h,d,f;for(c=n,h=n+r;c<h;++c)f=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(x1(f,d,s,c));return l}function rp(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function sU(t,e,n){return t!==0?hr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function oU(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function aU(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=oU(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=h:(s[sE(h,o,a,l)]=!0,i=c)),s[sE(i,o,a,l)]=!0,t.borderSkipped=s}function sE(t,e,n,r){return r?(t=lU(t,e,n),t=oE(t,n,e)):t=oE(t,e,n),t}function lU(t,e,n){return t===e?n:t===n?e:t}function oE(t,e,n){return t==="start"?e:t==="end"?n:t}function cU(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Wu extends To{parsePrimitiveData(e,n,r,i){return iE(e,n,r,i)}parseArrayData(e,n,r,i){return iE(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let f,g,y,v;for(f=r,g=r+i;f<g;++f)v=n[f],y={},y[s.axis]=s.parse($o(v,c),f),d.push(x1($o(v,h),y,o,f));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=rp(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i);for(let g=n;g<n+r;g++){const y=this.getParsed(g),v=s||Ve(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),S=this._calculateBarIndexPixels(g,h),E=(y._stacks||{})[a.axis],w={horizontal:c,base:v.base,enableBorderRadius:!E||rp(y._custom)||o===E._top||o===E._bottom,x:c?v.head:S.center,y:c?S.center:v.head,height:c?S.size:Math.abs(v.size),width:c?Math.abs(v.size):S.size};f&&(w.options=d||this.resolveDataElementOptions(g,e[g].active?"active":i));const b=w.options||e[g].options;aU(w,b,E,o),cU(w,b,h.ratio),this.updateElement(e[g],g,w,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=h=>{const d=h._parsed.find(g=>g[r.axis]===l),f=d&&d[h.vScale.axis];if(Ve(f)||isNaN(f))return!0};for(const h of i)if(!(n!==void 0&&c(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||tU(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=rp(c);let d=l[n.axis],f=0,g=r?this.applyStack(n,l,r):d,y,v;g!==d&&(f=g-d,g=d),h&&(d=c.barStart,g=c.barEnd-c.barStart,d!==0&&hr(d)!==hr(c.barEnd)&&(f=0),f+=d);const S=!Ve(s)&&!h?s:f;let E=n.getPixelForValue(S);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(f+g):y=E,v=y-E,Math.abs(v)<o){v=sU(v,n,a)*o,d===a&&(E-=v/2);const w=n.getPixelForDecimal(0),b=n.getPixelForDecimal(1),D=Math.min(w,b),N=Math.max(w,b);E=Math.max(Math.min(E,N),D),y=E+v,r&&!h&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(E))}if(E===n.getPixelForValue(a)){const w=hr(v)*n.getLineWidthForValue(a)/2;E+=w,v-=w}return{size:v,base:E,head:y,center:y+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=Ie(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,h=i.barThickness==="flex"?rU(e,n,i,c):nU(e,n,i,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*d+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}he(Wu,"id","bar"),he(Wu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),he(Wu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class qu extends To{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=FF(n,i,o);this._drawStart=a,this._drawCount=l,jF(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,g=a.axis,{spanGaps:y,segment:v}=this.options,S=ql(y)?y:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||s||i==="none",w=n+r,b=e.length;let D=n>0&&this.getParsed(n-1);for(let N=0;N<b;++N){const V=e[N],I=E?V:{};if(N<n||N>=w){I.skip=!0;continue}const _=this.getParsed(N),T=Ve(_[g]),P=I[f]=o.getPixelForValue(_[f],N),R=I[g]=s||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[g],N);I.skip=isNaN(P)||isNaN(R)||T,I.stop=N>0&&Math.abs(_[f]-D[f])>S,v&&(I.parsed=_,I.raw=c.data[N]),d&&(I.options=h||this.resolveDataElementOptions(N,V.active?"active":i)),E||this.updateElement(V,N,I,i),D=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}he(qu,"id","line"),he(qu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),he(qu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function qi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Hy{constructor(e){he(this,"options");this.options=e||{}}static override(e){Object.assign(Hy.prototype,e)}init(){}formats(){return qi()}parse(){return qi()}format(){return qi()}add(){return qi()}diff(){return qi()}startOf(){return qi()}endOf(){return qi()}}var uU={_date:Hy};function hU(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?MF:ls;if(r){if(i._sharedOptions){const c=s[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const d=l(s,e,n-h),f=l(s,e,n+h);return{lo:d.lo,hi:f.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function pc(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:f}=hU(s[a],e,o,i);for(let g=d;g<=f;++g){const y=h[g];y.skip||r(y,c,g)}}}function dU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function ip(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||pc(t,n,e,function(a,l,c){!i&&!Kl(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function fU(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:d}=AF(o,{x:e.x,y:e.y});i1(d,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return pc(t,n,e,s),i}function pU(t,e,n,r,i,s){let o=[];const a=dU(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const g=h.inRange(e.x,e.y,i);if(r&&!g)return;const y=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!g)return;const S=a(e,y);S<l?(o=[{element:h,datasetIndex:d,index:f}],l=S):S===l&&o.push({element:h,datasetIndex:d,index:f})}return pc(t,n,e,c),o}function sp(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?fU(t,e,n,i):pU(t,e,n,r,i,s)}function aE(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return pc(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var gU={evaluateInteractionItems:pc,modes:{index(t,e,n,r){const i=Ji(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ip(t,i,s,r,o):sp(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const i=Ji(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ip(t,i,s,r,o):sp(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=Ji(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return ip(t,i,s,r,o)},nearest(t,e,n,r){const i=Ji(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return sp(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Ji(e,t);return aE(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Ji(e,t);return aE(t,i,"y",n.intersect,r)}}};const b1=["left","top","right","bottom"];function Ca(t,e){return t.filter(n=>n.pos===e)}function lE(t,e){return t.filter(n=>b1.indexOf(n.pos)===-1&&n.box.axis===e)}function Aa(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function mU(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function yU(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!b1.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function _U(t,e){const n=yU(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function vU(t){const e=mU(t),n=Aa(e.filter(c=>c.box.fullSize),!0),r=Aa(Ca(e,"left"),!0),i=Aa(Ca(e,"right")),s=Aa(Ca(e,"top"),!0),o=Aa(Ca(e,"bottom")),a=lE(e,"x"),l=lE(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Ca(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function cE(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function P1(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function wU(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Ce(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&P1(o,s.getPadding());const a=Math.max(0,e.outerWidth-cE(o,t,"left","right")),l=Math.max(0,e.outerHeight-cE(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function EU(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function SU(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Ka(t,e,n,r){const i=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,SU(a.horizontal,e));const{same:d,other:f}=wU(e,n,a,r);c|=d&&i.length,h=h||f,l.fullSize||i.push(a)}return c&&Ka(i,e,n,r)||h}function fu(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function uE(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;Wl(c.start)&&(o=c.start),l.fullSize?fu(l,i.left,o,n.outerWidth-i.right-i.left,f):fu(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;Wl(c.start)&&(s=c.start),l.fullSize?fu(l,s,i.top,f,n.outerHeight-i.bottom-i.top):fu(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var bn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Rn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=vU(t.boxes),l=a.vertical,c=a.horizontal;De(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const h=l.reduce((v,S)=>S.box.options&&S.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},i);P1(f,Rn(r));const g=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),y=_U(l.concat(c),d);Ka(a.fullSize,g,d,y),Ka(l,g,d,y),Ka(c,g,d,y)&&Ka(l,g,d,y),EU(g),uE(a.leftAndTop,g,d,y),g.x+=g.w,g.y+=g.h,uE(a.rightAndBottom,g,d,y),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},De(a.chartArea,v=>{const S=v.box;Object.assign(S,t.chartArea),S.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class k1{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class TU extends k1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ku="$chartjs",IU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hE=t=>t===null||t==="";function xU(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Ku]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",hE(i)){const s=Gw(t,"width");s!==void 0&&(t.width=s)}if(hE(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Gw(t,"height");s!==void 0&&(t.height=s)}return t}const C1=Pj?{passive:!0}:!1;function bU(t,e,n){t&&t.addEventListener(e,n,C1)}function PU(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,C1)}function kU(t,e){const n=IU[t.type]||t.type,{x:r,y:i}=Ji(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Yh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function CU(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Yh(a.addedNodes,r),o=o&&!Yh(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function AU(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Yh(a.removedNodes,r),o=o&&!Yh(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Ql=new Map;let dE=0;function A1(){const t=window.devicePixelRatio;t!==dE&&(dE=t,Ql.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function RU(t,e){Ql.size||window.addEventListener("resize",A1),Ql.set(t,e)}function DU(t){Ql.delete(t),Ql.size||window.removeEventListener("resize",A1)}function MU(t,e,n){const r=t.canvas,i=r&&$y(r);if(!i)return;const s=l1((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(i),RU(t,s),o}function op(t,e,n){n&&n.disconnect(),e==="resize"&&DU(t)}function NU(t,e,n){const r=t.canvas,i=l1(s=>{t.ctx!==null&&n(kU(s,t))},t);return bU(r,e,i),i}class LU extends k1{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(xU(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Ku])return!1;const r=n[Ku].initial;["height","width"].forEach(s=>{const o=r[s];Ve(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Ku],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:CU,detach:AU,resize:MU}[n]||NU;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:op,detach:op,resize:op}[n]||PU)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return bj(e,n,r,i)}isAttached(e){const n=e&&$y(e);return!!(n&&n.isConnected)}}function OU(t){return!By()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?TU:LU}class fr{constructor(){he(this,"x");he(this,"y");he(this,"active",!1);he(this,"options");he(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return ql(this.x)&&ql(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}he(fr,"defaults",{}),he(fr,"defaultRoutes");function VU(t,e){const n=t.options.ticks,r=FU(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?UU(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return zU(e,c,s,o/i),c;const h=jU(s,e,i);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(pu(e,c,h,Ve(g)?0:a-g,a),d=0,f=o-1;d<f;d++)pu(e,c,h,s[d],s[d+1]);return pu(e,c,h,l,Ve(g)?e.length:l+g),c}return pu(e,c,h),c}function FU(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function jU(t,e,n){const r=BU(t),i=e.length/n;if(!r)return Math.max(i,1);const s=bF(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function UU(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function zU(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function pu(t,e,n,r,i){const s=Ie(r,0),o=Math.min(Ie(i,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function BU(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const $U=t=>t==="left"?"right":t==="right"?"left":t,fE=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,pE=(t,e)=>Math.min(e||t,t);function gE(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function HU(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function WU(t,e){De(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Ra(t){return t.drawTicks?t.tickLength:0}function mE(t,e){if(!t.display)return 0;const n=Lt(t.font,e),r=Rn(t.padding);return(ut(t.text)?t.text.length:1)*n.lineHeight+r.height}function qU(t,e){return Ns(t,{scale:e,type:"scale"})}function KU(t,e,n){return Ns(t,{tick:n,index:e,type:"tick"})}function GU(t,e,n){let r=Ly(t);return(n&&e!=="right"||!n&&e==="right")&&(r=$U(r)),r}function QU(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,g,y;const v=o-i,S=a-s;if(t.isHorizontal()){if(g=Rt(r,s,a),Ce(n)){const E=Object.keys(n)[0],w=n[E];y=h[E].getPixelForValue(w)+v-e}else n==="center"?y=(c.bottom+c.top)/2+v-e:y=fE(t,n,e);f=a-s}else{if(Ce(n)){const E=Object.keys(n)[0],w=n[E];g=h[E].getPixelForValue(w)-S+e}else n==="center"?g=(c.left+c.right)/2-S+e:g=fE(t,n,e);y=Rt(r,o,i),d=n==="left"?-Un:Un}return{titleX:g,titleY:y,maxWidth:f,rotation:d}}class na extends fr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Yn(e,Number.POSITIVE_INFINITY),n=Yn(n,Number.NEGATIVE_INFINITY),r=Yn(r,Number.POSITIVE_INFINITY),i=Yn(i,Number.NEGATIVE_INFINITY),{min:Yn(e,r),max:Yn(n,i),minDefined:An(e),maxDefined:An(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Yn(n,Yn(r,n)),max:Yn(r,Yn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ze(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ij(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?gE(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=VU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ze(this.options.afterUpdate,[this])}beforeSetDimensions(){ze(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ze(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ze(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ze(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=ze(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){ze(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ze(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=pE(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=hn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),d+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-Ra(e.grid)-n.padding-mE(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=CF(Math.min(Math.asin(hn((h.highest.height+6)/a,-1,1)),Math.asin(hn(l/c,-1,1))-Math.asin(hn(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ze(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ze(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=mE(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ra(s)+l):(e.height=this.maxHeight,e.width=Ra(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),g=r.padding*2,y=os(this.labelRotation),v=Math.cos(y),S=Math.sin(y);if(a){const E=r.mirror?0:S*d.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+E+g)}else{const E=r.mirror?0:v*d.width+S*f.height;e.width=Math.min(this.maxWidth,e.width+E+g)}this._calculatePadding(c,h,S,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=i*e.width,g=r*n.height):(f=r*e.height,g=i*n.width):s==="start"?g=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,g=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ze(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Ve(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=gE(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/pE(n,r));let c=0,h=0,d,f,g,y,v,S,E,w,b,D,N;for(d=0;d<n;d+=l){if(y=e[d].label,v=this._resolveTickFontOptions(d),i.font=S=v.string,E=s[S]=s[S]||{data:{},gc:[]},w=v.lineHeight,b=D=0,!Ve(y)&&!ut(y))b=$w(i,E.data,E.gc,b,y),D=w;else if(ut(y))for(f=0,g=y.length;f<g;++f)N=y[f],!Ve(N)&&!ut(N)&&(b=$w(i,E.data,E.gc,b,N),D+=w);o.push(b),a.push(D),c=Math.max(b,c),h=Math.max(D,h)}WU(s,n);const V=o.indexOf(c),I=a.indexOf(h),_=T=>({width:o[T]||0,height:a[T]||0});return{first:_(0),last:_(n-1),widest:_(V),highest:_(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return DF(this._alignToPixels?Wi(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=KU(this.getContext(),e,r))}return this.$context||(this.$context=qU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=os(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Ra(s),g=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,S=v/2,E=function(ie){return Wi(r,ie,v)};let w,b,D,N,V,I,_,T,P,R,A,k;if(o==="top")w=E(this.bottom),I=this.bottom-f,T=w-S,R=E(e.top)+S,k=e.bottom;else if(o==="bottom")w=E(this.top),R=e.top,k=E(e.bottom)-S,I=w+S,T=this.top+f;else if(o==="left")w=E(this.right),V=this.right-f,_=w-S,P=E(e.left)+S,A=e.right;else if(o==="right")w=E(this.left),P=e.left,A=E(e.right)-S,V=w+S,_=this.left+f;else if(n==="x"){if(o==="center")w=E((e.top+e.bottom)/2+.5);else if(Ce(o)){const ie=Object.keys(o)[0],ae=o[ie];w=E(this.chart.scales[ie].getPixelForValue(ae))}R=e.top,k=e.bottom,I=w+S,T=I+f}else if(n==="y"){if(o==="center")w=E((e.left+e.right)/2);else if(Ce(o)){const ie=Object.keys(o)[0],ae=o[ie];w=E(this.chart.scales[ie].getPixelForValue(ae))}V=w-S,_=V-f,P=e.left,A=e.right}const q=Ie(i.ticks.maxTicksLimit,d),J=Math.max(1,Math.ceil(d/q));for(b=0;b<d;b+=J){const ie=this.getContext(b),ae=s.setContext(ie),B=a.setContext(ie),Y=ae.lineWidth,Z=ae.color,ge=B.dash||[],re=B.dashOffset,le=ae.tickWidth,ye=ae.tickColor,pe=ae.tickBorderDash||[],ve=ae.tickBorderDashOffset;D=HU(this,b,l),D!==void 0&&(N=Wi(r,D,Y),c?V=_=P=A=N:I=T=R=k=N,g.push({tx1:V,ty1:I,tx2:_,ty2:T,x1:P,y1:R,x2:A,y2:k,width:Y,color:Z,borderDash:ge,borderDashOffset:re,tickWidth:le,tickColor:ye,tickBorderDash:pe,tickBorderDashOffset:ve}))}return this._ticksLength=d,this._borderValue=w,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,f=Ra(r.grid),g=f+h,y=d?-h:g,v=-os(this.labelRotation),S=[];let E,w,b,D,N,V,I,_,T,P,R,A,k="middle";if(i==="top")V=this.bottom-y,I=this._getXAxisLabelAlignment();else if(i==="bottom")V=this.top+y,I=this._getXAxisLabelAlignment();else if(i==="left"){const J=this._getYAxisLabelAlignment(f);I=J.textAlign,N=J.x}else if(i==="right"){const J=this._getYAxisLabelAlignment(f);I=J.textAlign,N=J.x}else if(n==="x"){if(i==="center")V=(e.top+e.bottom)/2+g;else if(Ce(i)){const J=Object.keys(i)[0],ie=i[J];V=this.chart.scales[J].getPixelForValue(ie)+g}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")N=(e.left+e.right)/2-g;else if(Ce(i)){const J=Object.keys(i)[0],ie=i[J];N=this.chart.scales[J].getPixelForValue(ie)}I=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?k="top":l==="end"&&(k="bottom"));const q=this._getLabelSizes();for(E=0,w=a.length;E<w;++E){b=a[E],D=b.label;const J=s.setContext(this.getContext(E));_=this.getPixelForTick(E)+s.labelOffset,T=this._resolveTickFontOptions(E),P=T.lineHeight,R=ut(D)?D.length:1;const ie=R/2,ae=J.color,B=J.textStrokeColor,Y=J.textStrokeWidth;let Z=I;o?(N=_,I==="inner"&&(E===w-1?Z=this.options.reverse?"left":"right":E===0?Z=this.options.reverse?"right":"left":Z="center"),i==="top"?c==="near"||v!==0?A=-R*P+P/2:c==="center"?A=-q.highest.height/2-ie*P+P:A=-q.highest.height+P/2:c==="near"||v!==0?A=P/2:c==="center"?A=q.highest.height/2-ie*P:A=q.highest.height-R*P,d&&(A*=-1),v!==0&&!J.showLabelBackdrop&&(N+=P/2*Math.sin(v))):(V=_,A=(1-R)*P/2);let ge;if(J.showLabelBackdrop){const re=Rn(J.backdropPadding),le=q.heights[E],ye=q.widths[E];let pe=A-re.top,ve=0-re.left;switch(k){case"middle":pe-=le/2;break;case"bottom":pe-=le;break}switch(I){case"center":ve-=ye/2;break;case"right":ve-=ye;break;case"inner":E===w-1?ve-=ye:E>0&&(ve-=ye/2);break}ge={left:ve,top:pe,width:ye+re.width,height:le+re.height,color:J.backdropColor}}S.push({label:D,font:T,textOffset:A,options:{rotation:v,color:ae,strokeColor:B,strokeWidth:Y,textAlign:Z,textBaseline:k,translation:[N,V],backdrop:ge}})}return S}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-os(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Wi(e,this.left,o)-o/2,h=Wi(e,this.right,a)+a/2,d=f=l):(d=Wi(e,this.top,o)-o/2,f=Wi(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Vy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Gl(r,c,0,h,l,a)}i&&Fy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Lt(r.font),o=Rn(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Ce(n)?(l+=o.bottom,ut(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=QU(this,l,n,a);Gl(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:GU(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Ie(e.grid&&e.grid.z,-1),i=Ie(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==na.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Lt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class gu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;JU(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,YU(e,o,r),this.override&&tt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in tt[i]&&(delete tt[i][r],this.override&&delete Ts[r])}}function YU(t,e,n){const r=Hl(Object.create(null),[n?tt.get(n):{},tt.get(e),t.defaults]);tt.set(e,r),t.defaultRoutes&&XU(e,t.defaultRoutes),t.descriptors&&tt.describe(e,t.descriptors)}function XU(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");tt.route(s,i,l,a)})}function JU(t){return"id"in t&&"defaults"in t}class ZU{constructor(){this.controllers=new gu(To,"datasets",!0),this.elements=new gu(fr,"elements"),this.plugins=new gu(Object,"plugins"),this.scales=new gu(na,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):De(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=My(e);ze(r["before"+i],[],r),n[e](r),ze(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Zn=new ZU;class e4{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(ze(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ve(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Ie(r.options&&r.options.plugins,{}),s=t4(r);return i===!1&&!n?[]:r4(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function t4(t){const e={},n=[],r=Object.keys(Zn.plugins.items);for(let s=0;s<r.length;s++)n.push(Zn.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function n4(t,e){return!e&&t===!1?null:t===!0?{}:t}function r4(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=n4(r[l],i);c!==null&&s.push({plugin:a,options:i4(t.config,{plugin:a,local:n[l]},c,o)})}return s}function i4(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Dg(t,e){const n=tt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function s4(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function o4(t,e){return t===e?"_index_":"_value_"}function yE(t){if(t==="x"||t==="y"||t==="r")return t}function a4(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Mg(t,...e){if(yE(t))return t;for(const n of e){const r=n.axis||a4(n.position)||t.length>1&&yE(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function _E(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function l4(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return _E(t,"x",n[0])||_E(t,"y",n[0])}return{}}function c4(t,e){const n=Ts[t.type]||{scales:{}},r=e.scales||{},i=Dg(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ce(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Mg(o,a,l4(o,t),tt.scales[a.type]),c=o4(l,i),h=n.scales||{};s[o]=fl(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Dg(a,e),h=(Ts[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=s4(d,l),g=o[f+"AxisID"]||f;s[g]=s[g]||Object.create(null),fl(s[g],[{axis:f},r[g],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];fl(a,[tt.scales[a.type],tt.scale])}),s}function R1(t){const e=t.options||(t.options={});e.plugins=Ie(e.plugins,{}),e.scales=c4(t,e)}function D1(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function u4(t){return t=t||{},t.data=D1(t.data),R1(t),t}const vE=new Map,M1=new Set;function mu(t,e){let n=vE.get(t);return n||(n=e(),vE.set(t,n),M1.add(n)),n}const Da=(t,e,n)=>{const r=$o(e,n);r!==void 0&&t.add(r)};class h4{constructor(e){this._config=u4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=D1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),R1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return mu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return mu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return mu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return mu(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>Da(l,e,d))),h.forEach(d=>Da(l,i,d)),h.forEach(d=>Da(l,Ts[s]||{},d)),h.forEach(d=>Da(l,tt,d)),h.forEach(d=>Da(l,Ag,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),M1.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ts[n]||{},tt.datasets[n]||{},{type:n},tt,Ag]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=wE(this._resolverCache,e,i);let l=o;if(f4(o,n)){s.$shared=!1,r=Ni(r)?r():r;const c=this.createResolver(e,r,a);l=Ho(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=wE(this._resolverCache,e,r);return Ce(n)?Ho(s,n,void 0,i):s}}function wE(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:jy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const d4=t=>Ce(t)&&Object.getOwnPropertyNames(t).some(e=>Ni(t[e]));function f4(t,e){const{isScriptable:n,isIndexable:r}=g1(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Ni(a)||d4(a))||o&&ut(a))return!0}return!1}var p4="4.4.7";const g4=["top","bottom","left","right","chartArea"];function EE(t,e){return t==="top"||t==="bottom"||g4.indexOf(t)===-1&&e==="x"}function SE(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function TE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ze(n&&n.onComplete,[t],e)}function m4(t){const e=t.chart,n=e.options.animation;ze(n&&n.onProgress,[t],e)}function N1(t){return By()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Gu={},IE=t=>{const e=N1(t);return Object.values(Gu).filter(n=>n.canvas===e).pop()};function y4(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function _4(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function yu(t,e,n){return t.options.clip?t[n]:e[n]}function v4(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:yu(n,e,"left"),right:yu(n,e,"right"),top:yu(r,e,"top"),bottom:yu(r,e,"bottom")}:e}var Jr;let gc=(Jr=class{static register(...e){Zn.add(...e),xE()}static unregister(...e){Zn.remove(...e),xE()}constructor(e,n){const r=this.config=new h4(n),i=N1(e),s=IE(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||OU(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=yF(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new e4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=OF(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Gu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}vr.listen(this,"complete",TE),vr.listen(this,"progress",m4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Ve(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Zn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Kw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Hw(this.canvas,this.ctx),this}stop(){return vr.stop(this),this}resize(e,n){vr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Kw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ze(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};De(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Mg(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),De(s,o=>{const a=o.options,l=a.id,c=Mg(l,a),h=Ie(a.type,o.dtype);(a.position===void 0||EE(a.position,c)!==EE(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===h)d=r[l];else{const f=Zn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),De(i,(o,a)=>{o||delete r[a]}),De(r,o=>{bn.configure(this,o,o.options),bn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(SE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Dg(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Zn.getController(a),{datasetElementType:c,dataElementType:h}=tt.datasets[a];Object.assign(l,{dataElementType:Zn.getElement(h),datasetElementType:c&&Zn.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){De(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||De(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(SE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){De(this.scales,e=>{bn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Nw(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;y4(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!Nw(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;bn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],De(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ni(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vr.has(this)?this.attached&&!vr.running(this)&&vr.start(this):(this.draw(),TE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=v4(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Vy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Fy(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Kl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=gU.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ns(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Wl(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),vr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Hw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Gu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};De(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){De(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},De(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Wh(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=TF(e),c=_4(e,this._lastEvent,r,l);r&&(this._lastEvent=null,ze(s.onHover,[e,a,this],this),l&&ze(s.onClick,[e,a,this],this));const h=!Wh(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},he(Jr,"defaults",tt),he(Jr,"instances",Gu),he(Jr,"overrides",Ts),he(Jr,"registry",Zn),he(Jr,"version",p4),he(Jr,"getChart",IE),Jr);function xE(){return De(gc.instances,t=>t._plugins.invalidate())}function L1(t,e,n=e){t.lineCap=Ie(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ie(n.borderDash,e.borderDash)),t.lineDashOffset=Ie(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ie(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ie(n.borderWidth,e.borderWidth),t.strokeStyle=Ie(n.borderColor,e.borderColor)}function w4(t,e,n){t.lineTo(n.x,n.y)}function E4(t){return t.stepped?QF:t.tension||t.cubicInterpolationMode==="monotone"?YF:w4}function O1(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function S4(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=O1(i,n,r),h=E4(s);let{move:d=!0,reverse:f}=r||{},g,y,v;for(g=0;g<=c;++g)y=i[(a+(f?c-g:g))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):h(t,v,y,f,s.stepped),v=y);return l&&(y=i[(a+(f?c:0))%o],h(t,v,y,f,s.stepped)),!!l}function T4(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=O1(i,n,r),{move:l=!0,reverse:c}=r||{};let h=0,d=0,f,g,y,v,S,E;const w=D=>(o+(c?a-D:D))%s,b=()=>{v!==S&&(t.lineTo(h,S),t.lineTo(h,v),t.lineTo(h,E))};for(l&&(g=i[w(0)],t.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=i[w(f)],g.skip)continue;const D=g.x,N=g.y,V=D|0;V===y?(N<v?v=N:N>S&&(S=N),h=(d*h+D)/++d):(b(),t.lineTo(D,N),y=V,d=0,v=S=N),E=N}b()}function Ng(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?T4:S4}function I4(t){return t.stepped?kj:t.tension||t.cubicInterpolationMode==="monotone"?Cj:Zi}function x4(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),L1(t,e.options),t.stroke(i)}function b4(t,e,n,r){const{segments:i,options:s}=e,o=Ng(e);for(const a of i)L1(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const P4=typeof Path2D=="function";function k4(t,e,n,r){P4&&!e.options.segment?x4(t,e,n,r):b4(t,e,n,r)}class Ga extends fr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;wj(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Vj(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=Nj(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=I4(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],g=s[d],y=s[f];if(g===y){a.push(g);continue}const v=Math.abs((i-g[n])/(y[n]-g[n])),S=l(g,y,v,r.stepped);S[n]=e[n],a.push(S)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Ng(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Ng(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),k4(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}he(Ga,"id","line"),he(Ga,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),he(Ga,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),he(Ga,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function bE(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Qu extends fr{constructor(n){super();he(this,"parsed");he(this,"skip");he(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return bE(this,n,"x",r)}inYRange(n,r){return bE(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Kl(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Rg(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}he(Qu,"id","point"),he(Qu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),he(Qu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function V1(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,h=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),h=Math.max(r,i)),{left:a,top:c,right:l,bottom:h}}function fi(t,e,n,r){return t?0:hn(e,n,r)}function C4(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=p1(r);return{t:fi(i.top,s.top,0,n),r:fi(i.right,s.right,0,e),b:fi(i.bottom,s.bottom,0,n),l:fi(i.left,s.left,0,e)}}function A4(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Eo(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Ce(i);return{topLeft:fi(!l||a.top||a.left,s.topLeft,0,o),topRight:fi(!l||a.top||a.right,s.topRight,0,o),bottomLeft:fi(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:fi(!l||a.bottom||a.right,s.bottomRight,0,o)}}function R4(t){const e=V1(t),n=e.right-e.left,r=e.bottom-e.top,i=C4(t,n/2,r/2),s=A4(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function ap(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&V1(t,r);return a&&(i||as(e,a.left,a.right))&&(s||as(n,a.top,a.bottom))}function D4(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function M4(t,e){t.rect(e.x,e.y,e.w,e.h)}function lp(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Yu extends fr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=R4(this),a=D4(o.radius)?Gh:M4;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,lp(o,n,s)),e.clip(),a(e,lp(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,lp(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return ap(this,e,n,r)}inXRange(e,n){return ap(this,e,null,n)}inYRange(e,n){return ap(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}he(Yu,"id","bar"),he(Yu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),he(Yu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const PE=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},N4=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class kE extends fr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ze(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Lt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=PE(r,s);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((y,v)=>{const S=r+n/2+s.measureText(y.text).width;(v===0||c[c.length-1]+S+2*a>o)&&(d+=h,c[c.length-(v>0?0:1)]=0,g+=h,f++),l[v]={left:0,top:g,row:f,width:S,height:i},c[c.length-1]+=S+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,g=0,y=0,v=0;return this.legendItems.forEach((S,E)=>{const{itemWidth:w,itemHeight:b}=L4(r,n,s,S,i);E>0&&g+b+2*a>h&&(d+=f+a,c.push({width:f,height:g}),y+=f+a,v++,f=g=0),l[E]={left:y,top:g,col:v,width:w,height:b},f=Math.max(f,w),g+=b+a}),d+=f,c.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=So(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Rt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Rt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Rt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Rt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Vy(e,this),this._draw(),Fy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=tt.color,l=So(e.rtl,this.left,this.width),c=Lt(o.font),{padding:h}=o,d=c.size,f=d/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:v,itemHeight:S}=PE(o,d),E=function(V,I,_){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;i.save();const T=Ie(_.lineWidth,1);if(i.fillStyle=Ie(_.fillStyle,a),i.lineCap=Ie(_.lineCap,"butt"),i.lineDashOffset=Ie(_.lineDashOffset,0),i.lineJoin=Ie(_.lineJoin,"miter"),i.lineWidth=T,i.strokeStyle=Ie(_.strokeStyle,a),i.setLineDash(Ie(_.lineDash,[])),o.usePointStyle){const P={radius:v*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:T},R=l.xPlus(V,y/2),A=I+f;d1(i,P,R,A,o.pointStyleWidth&&y)}else{const P=I+Math.max((d-v)/2,0),R=l.leftForLtr(V,y),A=Eo(_.borderRadius);i.beginPath(),Object.values(A).some(k=>k!==0)?Gh(i,{x:R,y:P,w:y,h:v,radius:A}):i.rect(R,P,y,v),i.fill(),T!==0&&i.stroke()}i.restore()},w=function(V,I,_){Gl(i,_.text,V,I+S/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},b=this.isHorizontal(),D=this._computeTitleHeight();b?g={x:Rt(s,this.left+h,this.right-r[0]),y:this.top+h+D,line:0}:g={x:this.left+h,y:Rt(s,this.top+D+h,this.bottom-n[0].height),line:0},w1(this.ctx,e.textDirection);const N=S+h;this.legendItems.forEach((V,I)=>{i.strokeStyle=V.fontColor,i.fillStyle=V.fontColor;const _=i.measureText(V.text).width,T=l.textAlign(V.textAlign||(V.textAlign=o.textAlign)),P=y+f+_;let R=g.x,A=g.y;l.setWidth(this.width),b?I>0&&R+P+h>this.right&&(A=g.y+=N,g.line++,R=g.x=Rt(s,this.left+h,this.right-r[g.line])):I>0&&A+N>this.bottom&&(R=g.x=R+n[g.line].width+h,g.line++,A=g.y=Rt(s,this.top+D+h,this.bottom-n[g.line].height));const k=l.x(R);if(E(k,A,V),R=VF(T,R+y+f,b?R+P:this.right,e.rtl),w(l.x(R),A,V),b)g.x+=P+h;else if(typeof V.text!="string"){const q=c.lineHeight;g.y+=F1(V,q)+h}else g.y+=N}),E1(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Lt(n.font),i=Rn(n.padding);if(!n.display)return;const s=So(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=Rt(e.align,d,this.right-f);else{const y=this.columnSizes.reduce((v,S)=>Math.max(v,S.height),0);h=c+Rt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const g=Rt(a,d,d+f);o.textAlign=s.textAlign(Ly(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Gl(o,n.text,g,h,r)}_computeTitleHeight(){const e=this.options.title,n=Lt(e.font),r=Rn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(as(e,this.left,this.right)&&as(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],as(e,i.left,i.left+i.width)&&as(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!F4(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=N4(i,r);i&&!s&&ze(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&ze(n.onHover,[e,r,this],this)}else r&&ze(n.onClick,[e,r,this],this)}}function L4(t,e,n,r,i){const s=O4(r,t,e,n),o=V4(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function O4(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function V4(t,e,n){let r=t;return typeof e.text!="string"&&(r=F1(e,n)),r}function F1(t,e){const n=t.text?t.text.length:0;return e*n}function F4(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var j1={id:"legend",_element:kE,start(t,e,n){const r=t.legend=new kE({ctx:t.ctx,options:n,chart:t});bn.configure(t,r,n),bn.addBox(t,r)},stop(t){bn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;bn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=Rn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class U1 extends fr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=ut(r.text)?r.text.length:1;this._padding=Rn(r.padding);const s=i*Lt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=Rt(a,r,s),d=n+e,c=s-r):(o.position==="left"?(h=r+e,d=Rt(a,i,n),l=mt*-.5):(h=s-e,d=Rt(a,n,i),l=mt*.5),c=i-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Lt(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Gl(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:Ly(n.align),textBaseline:"middle",translation:[o,a]})}}function j4(t,e){const n=new U1({ctx:t.ctx,options:e,chart:t});bn.configure(t,n,e),bn.addBox(t,n),t.titleBlock=n}var z1={id:"title",_element:U1,start(t,e,n){j4(t,n)},stop(t){const e=t.titleBlock;bn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;bn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Qa={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Cg(e,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Xn(t,e){return e&&(ut(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function wr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function U4(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function CE(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Lt(e.bodyFont),c=Lt(e.titleFont),h=Lt(e.footerFont),d=s.length,f=i.length,g=r.length,y=Rn(e.padding);let v=y.height,S=0,E=r.reduce((D,N)=>D+N.before.length+N.lines.length+N.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),E){const D=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=g*D+(E-g)*l.lineHeight+(E-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let w=0;const b=function(D){S=Math.max(S,n.measureText(D).width+w)};return n.save(),n.font=c.string,De(t.title,b),n.font=l.string,De(t.beforeBody.concat(t.afterBody),b),w=e.displayColors?o+2+e.boxPadding:0,De(r,D=>{De(D.before,b),De(D.lines,b),De(D.after,b)}),w=0,n.font=h.string,De(t.footer,b),n.restore(),S+=y.width,{width:S,height:v}}function z4(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function B4(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function $4(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),B4(c,t,e,n)&&(c="center"),c}function AE(t,e,n){const r=n.yAlign||e.yAlign||z4(t,n);return{xAlign:n.xAlign||e.xAlign||$4(t,e,n,r),yAlign:r}}function H4(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function W4(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function RE(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Eo(o);let y=H4(e,a);const v=W4(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(h,f)+i:a==="right"&&(y+=Math.max(d,g)+i),{x:hn(y,0,r.width-e.width),y:hn(v,0,r.height-e.height)}}function _u(t,e,n){const r=Rn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function DE(t){return Xn([],wr(t))}function q4(t,e,n){return Ns(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function ME(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const B1={beforeTitle:_r,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:_r,beforeBody:_r,beforeLabel:_r,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ve(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:_r,afterBody:_r,beforeFooter:_r,footer:_r,afterFooter:_r};function Ht(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?B1[e].call(n,r):i}class Lg extends fr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new T1(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=q4(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Ht(r,"beforeTitle",this,e),s=Ht(r,"title",this,e),o=Ht(r,"afterTitle",this,e);let a=[];return a=Xn(a,wr(i)),a=Xn(a,wr(s)),a=Xn(a,wr(o)),a}getBeforeBody(e,n){return DE(Ht(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return De(e,s=>{const o={before:[],lines:[],after:[]},a=ME(r,s);Xn(o.before,wr(Ht(a,"beforeLabel",this,s))),Xn(o.lines,Ht(a,"label",this,s)),Xn(o.after,wr(Ht(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return DE(Ht(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Ht(r,"beforeFooter",this,e),s=Ht(r,"footer",this,e),o=Ht(r,"afterFooter",this,e);let a=[];return a=Xn(a,wr(i)),a=Xn(a,wr(s)),a=Xn(a,wr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(U4(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,r))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,r))),De(a,h=>{const d=ME(e.callbacks,h);i.push(Ht(d,"labelColor",this,h)),s.push(Ht(d,"labelPointStyle",this,h)),o.push(Ht(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Qa[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=CE(this,r),c=Object.assign({},a,l),h=AE(this.chart,r,c),d=RE(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Eo(a),{x:f,y:g}=e,{width:y,height:v}=n;let S,E,w,b,D,N;return s==="center"?(D=g+v/2,i==="left"?(S=f,E=S-o,b=D+o,N=D-o):(S=f+y,E=S+o,b=D-o,N=D+o),w=S):(i==="left"?E=f+Math.max(l,h)+o:i==="right"?E=f+y-Math.max(c,d)-o:E=this.caretX,s==="top"?(b=g,D=b-o,S=E-o,w=E+o):(b=g+v,D=b+o,S=E+o,w=E-o),N=b),{x1:S,x2:E,x3:w,y1:b,y2:D,y3:N}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=So(r.rtl,this.x,this.width);for(e.x=_u(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Lt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=Lt(s.bodyFont),d=_u(this,"left",s),f=i.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+g;if(s.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},S=i.leftForLtr(f,c)+c/2,E=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Rg(e,v,S,E),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Rg(e,v,S,E)}else{e.lineWidth=Ce(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=i.leftForLtr(f,c),S=i.leftForLtr(i.xPlus(f,1),c-2),E=Eo(o.borderRadius);Object.values(E).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Gh(e,{x:v,y,w:c,h:l,radius:E}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Gh(e,{x:S,y:y+1,w:c-2,h:l-2,radius:E}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,y,c,l),e.strokeRect(v,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(S,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,d=Lt(r.bodyFont);let f=d.lineHeight,g=0;const y=So(r.rtl,this.x,this.width),v=function(_){n.fillText(_,y.x(e.x+g),e.y+f/2),e.y+=f+s},S=y.textAlign(o);let E,w,b,D,N,V,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=_u(this,S,r),n.fillStyle=r.bodyColor,De(this.beforeBody,v),g=a&&S!=="right"?o==="center"?c/2+h:c+2+h:0,D=0,V=i.length;D<V;++D){for(E=i[D],w=this.labelTextColors[D],n.fillStyle=w,De(E.before,v),b=E.lines,a&&b.length&&(this._drawColorBox(n,e,D,y,r),f=Math.max(d.lineHeight,l)),N=0,I=b.length;N<I;++N)v(b[N]),f=d.lineHeight;De(E.after,v)}g=0,f=d.lineHeight,De(this.afterBody,v),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=So(r.rtl,this.x,this.width);for(e.x=_u(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Lt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:y}=Eo(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+h-y),n.quadraticCurveTo(a+c,l+h,a+c-y,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Qa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=CE(this,e),l=Object.assign({},o,this._size),c=AE(n,e,l),h=RE(e,l,c,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Rn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),w1(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),E1(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Wh(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Wh(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Qa[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}he(Lg,"positioners",Qa);var $1={id:"tooltip",_element:Lg,positioners:Qa,afterInit(t,e,n){n&&(t.tooltip=new Lg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:B1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const K4=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function G4(t,e,n,r){const i=t.indexOf(e);if(i===-1)return K4(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Q4=(t,e)=>t===null?null:hn(Math.round(t),0,e);function NE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Xh extends na{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ve(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:G4(r,e,Ie(n,e),this._addedLabels),Q4(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return NE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}he(Xh,"id","category"),he(Xh,"defaults",{ticks:{callback:NE}});function Y4(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,g=s||1,y=h-1,{min:v,max:S}=e,E=!Ve(o),w=!Ve(a),b=!Ve(c),D=(S-v)/(d+1);let N=Ow((S-v)/y/g)*g,V,I,_,T;if(N<1e-14&&!E&&!w)return[{value:v},{value:S}];T=Math.ceil(S/N)-Math.floor(v/N),T>y&&(N=Ow(T*N/y/g)*g),Ve(l)||(V=Math.pow(10,l),N=Math.ceil(N*V)/V),i==="ticks"?(I=Math.floor(v/N)*N,_=Math.ceil(S/N)*N):(I=v,_=S),E&&w&&s&&PF((a-o)/s,N/1e3)?(T=Math.round(Math.min((a-o)/N,h)),N=(a-o)/T,I=o,_=a):b?(I=E?o:I,_=w?a:_,T=c-1,N=(_-I)/T):(T=(_-I)/N,pl(T,Math.round(T),N/1e3)?T=Math.round(T):T=Math.ceil(T));const P=Math.max(Vw(N),Vw(I));V=Math.pow(10,Ve(l)?P:l),I=Math.round(I*V)/V,_=Math.round(_*V)/V;let R=0;for(E&&(f&&I!==o?(n.push({value:o}),I<o&&R++,pl(Math.round((I+R*N)*V)/V,o,LE(o,D,t))&&R++):I<o&&R++);R<T;++R){const A=Math.round((I+R*N)*V)/V;if(w&&A>a)break;n.push({value:A})}return w&&f&&_!==a?n.length&&pl(n[n.length-1].value,a,LE(a,D,t))?n[n.length-1].value=a:n.push({value:a}):(!w||_===a)&&n.push({value:_}),n}function LE(t,e,{horizontal:n,minRotation:r}){const i=os(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class X4 extends na{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ve(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=hr(i),c=hr(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Y4(i,s);return e.bounds==="ticks"&&kF(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return c1(e,this.chart.options.locale,this.options.ticks.format)}}class Jh extends X4{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=An(e)?e:0,this.max=An(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=os(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}he(Jh,"id","linear"),he(Jh,"defaults",{ticks:{callback:h1.formatters.numeric}});const zd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yt=Object.keys(zd);function OE(t,e){return t-e}function VE(t,e){if(Ve(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),An(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(ql(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function FE(t,e,n,r){const i=Yt.length;for(let s=Yt.indexOf(t);s<i-1;++s){const o=zd[Yt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Yt[s]}return Yt[i-1]}function J4(t,e,n,r,i){for(let s=Yt.length-1;s>=Yt.indexOf(n);s--){const o=Yt[s];if(zd[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Yt[n?Yt.indexOf(n):0]}function Z4(t){for(let e=Yt.indexOf(t)+1,n=Yt.length;e<n;++e)if(zd[Yt[e]].common)return Yt[e]}function jE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Ny(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function ez(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function UE(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:ez(t,r,i,n)}class Zh extends na{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new uU._date(e.adapters.date);i.init(n),fl(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:VE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=An(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=An(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=NF(i,s,o);return this._unit=n.unit||(r.autoSkip?FE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):J4(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Z4(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),UE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=hn(n,0,o),r=hn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||FE(s.minUnit,n,r,this._getLabelCapacity(n)),a=Ie(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=ql(l)||l===!0,h={};let d=n,f,g;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<r;f=+e.add(f,a,o),g++)jE(h,f,y);return(f===r||i.bounds==="ticks"||g===1)&&jE(h,f,y),Object.keys(h).sort(OE).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return ze(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=r[n],g=c&&d&&f&&f.major;return this._adapter.format(e,i||(g?d:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=os(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,UE(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(VE(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return o1(e.sort(OE))}}he(Zh,"id","time"),he(Zh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function vu(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=ls(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=ls(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class zE extends Zh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=vu(n,this.min),this._tableRange=vu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(vu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return vu(this._table,r*this._tableRange+this._minPos,!0)}}he(zE,"id","timeseries"),he(zE,"defaults",Zh.defaults);const H1="label";function BE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function tz(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function W1(t,e){t.labels=e}function q1(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H1;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function nz(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H1;const n={labels:[],datasets:[]};return W1(n,t.labels),q1(n,t.datasets,e),n}function rz(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,g=W.useRef(null),y=W.useRef(),v=()=>{g.current&&(y.current=new gc(g.current,{type:o,data:nz(a,s),options:l&&{...l},plugins:c}),BE(e,y.current))},S=()=>{BE(e,null),y.current&&(y.current.destroy(),y.current=null)};return W.useEffect(()=>{!i&&y.current&&l&&tz(y.current,l)},[i,l]),W.useEffect(()=>{!i&&y.current&&W1(y.current.config.data,a.labels)},[i,a.labels]),W.useEffect(()=>{!i&&y.current&&a.datasets&&q1(y.current.config.data,a.datasets,s)},[i,a.datasets]),W.useEffect(()=>{y.current&&(i?(S(),setTimeout(v)):y.current.update(d))},[i,l,a.labels,a.datasets,d]),W.useEffect(()=>{y.current&&(S(),setTimeout(v))},[o]),W.useEffect(()=>(v(),()=>S()),[]),Ae.createElement("canvas",Object.assign({ref:g,role:"img",height:n,width:r},f),h)}const iz=W.forwardRef(rz);function K1(t,e){return gc.register(e),W.forwardRef((n,r)=>Ae.createElement(iz,Object.assign({},n,{ref:r,type:t})))}const sz=K1("line",qu),oz=K1("bar",Wu);gc.register(Xh,Jh,Yu,z1,$1,j1);const az=({data:t,metricType:e,selectedStatus:n})=>{const i=(()=>{if(n)return n.thresholds;switch(e){case"blood-pressure":return{normal:120,elevated:129,high:130,ranges:{normal:"Normal (<120)",elevated:"Elevated (120-129)",high:"High (>130)"}};case"sleep-quality":return{normal:7,elevated:8,high:9,ranges:{normal:"Poor (<7)",elevated:"Good (7-8)",high:"Excellent (>8)"}};default:return{normal:50,elevated:75,high:100,ranges:{normal:"Low",elevated:"Medium",high:"High"}}}})(),o=(()=>{const c={normal:0,elevated:0,high:0};return t.forEach(h=>{const d=parseFloat(h.value);d<i.normal?c.normal++:d<=i.elevated?c.elevated++:c.high++}),c})(),a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:`${(n==null?void 0:n.name)||e.split("-").join(" ").toUpperCase()} Distribution`,color:"#333",font:{size:16}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Readings"}}}},l={labels:[i.ranges.normal,i.ranges.elevated,i.ranges.high],datasets:[{data:[o.normal,o.elevated,o.high],backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(255, 206, 86, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 206, 86, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]};return C.jsx("div",{className:"chart-wrapper",children:C.jsx(oz,{options:a,data:l})})};gc.register(Xh,Jh,Qu,Ga,z1,$1,j1);const lz=({data:t,metricType:e,selectedStatus:n})=>{const i=(()=>{if(n)return{...n.thresholds,label:n.name};switch(e){case"blood-pressure":return{normal:120,elevated:129,high:130,label:"Blood Pressure",ranges:{normal:"Normal",elevated:"Elevated",high:"High"}};case"sleep-quality":return{normal:7,elevated:8,high:9,label:"Sleep Quality",ranges:{normal:"Poor",elevated:"Good",high:"Excellent"}};default:return{normal:50,elevated:75,high:100,label:e.split("-").join(" "),ranges:{normal:"Low",elevated:"Medium",high:"High"}}}})(),s=[...t].sort((l,c)=>l.timestamp.toDate().getTime()-c.timestamp.toDate().getTime()),o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:`${i.label} Trend`,color:"#333",font:{size:16}}},scales:{y:{beginAtZero:!0,grid:{color:l=>l.tick.value===i.normal?"rgba(75, 192, 192, 0.2)":l.tick.value===i.elevated?"rgba(255, 206, 86, 0.2)":l.tick.value===i.high?"rgba(255, 99, 132, 0.2)":"rgba(0, 0, 0, 0.1)"}}}},a={labels:s.map(l=>l.timestamp.toDate().toLocaleDateString()),datasets:[{label:i.label,data:s.map(l=>parseFloat(l.value)),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",tension:.3},{label:i.ranges.normal,data:Array(s.length).fill(i.normal),borderColor:"rgba(75, 192, 192, 0.5)",borderDash:[5,5],pointRadius:0},{label:i.ranges.elevated,data:Array(s.length).fill(i.elevated),borderColor:"rgba(255, 206, 86, 0.5)",borderDash:[5,5],pointRadius:0},{label:i.ranges.high,data:Array(s.length).fill(i.high),borderColor:"rgba(255, 99, 132, 0.5)",borderDash:[5,5],pointRadius:0}]};return C.jsx("div",{className:"chart-wrapper",children:C.jsx(sz,{options:o,data:a})})},cz=({metricType:t})=>{const[e,n]=W.useState(new Date().toISOString().split("T")[0]),[r,i]=W.useState(""),[s,o]=W.useState([]),[a,l]=W.useState([]),[c,h]=W.useState(!1),[d,f]=W.useState(""),[g,y]=W.useState([]),{currentUser:v}=Ms(),S=async()=>{if(v)try{const _=await In.statusTypes.getStatusTypes(v.uid);y(_)}catch(_){console.error("Error loading status types:",_)}};W.useEffect(()=>{S()},[v,t,g.length]);const E=async()=>{if(v)try{h(!0),f("");const[_,T]=await Promise.all([In.healthMetrics.getLastMonthMetrics(v.uid,t),In.healthMetrics.getLastYearMetrics(v.uid,t)]);o(_),l(T)}catch(_){console.error("Error loading metrics:",_),f("Failed to load metrics data")}finally{h(!1)}};W.useEffect(()=>{E()},[v,t]);const w=g.find(_=>_.id===t),b=async _=>{if(_.preventDefault(),!!v)try{h(!0),f("");const[T,P,R]=e.split("-").map(Number),A=new Date(T,P-1,R,23,59,59);await In.healthMetrics.addMetric(v.uid,{type:t,value:r,timestamp:We.fromDate(A)}),i(""),await E()}catch(T){console.error("Error saving metric:",T),f("Failed to save metric")}finally{h(!1)}},D=async _=>{if(!(!v||!_))try{h(!0),await In.healthMetrics.deleteMetric(v.uid,_),await E()}catch(T){console.error("Error deleting metric:",T),f("Failed to delete metric")}finally{h(!1)}},N=()=>{if(w)return`Input your ${w.name}:`;switch(t){case"blood-pressure":return"Input your blood pressure:";case"sleep-quality":return"Input your sleep quality (1-10):";default:return`Input your ${t.split("-").join(" ")}:`}},V=()=>{if(w)return`Enter ${w.name.toLowerCase()}`;switch(t){case"blood-pressure":return"Enter blood pressure";case"sleep-quality":return"Enter sleep quality";default:return`Enter ${t.split("-").join(" ")}`}},I=_=>{const T=_.toDate(),P=Intl.DateTimeFormat().resolvedOptions().timeZone;return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"numeric",day:"numeric",timeZone:P}).format(T)};return C.jsxs("div",{className:"data-display",children:[C.jsxs("div",{className:"data-input-section",children:[C.jsx("h3",{children:N()}),d&&C.jsx("div",{className:"error-message",children:d}),C.jsx("form",{onSubmit:b,children:C.jsxs("div",{className:"input-group",children:[C.jsx("input",{type:"text",value:r,onChange:_=>i(_.target.value),placeholder:V(),required:!0,disabled:c}),C.jsx("input",{type:"date",value:e,onChange:_=>n(_.target.value),required:!0,disabled:c}),C.jsx("button",{type:"submit",disabled:c,children:c?"Saving...":"Save"})]})})]}),C.jsxs("div",{className:"visualization-section",children:[C.jsxs("div",{className:"charts-section",children:[C.jsxs("div",{className:"chart-container",children:[C.jsx("h4",{children:"Distribution"}),c?C.jsx("div",{className:"loading",children:"Loading..."}):s.length>0?C.jsx(az,{data:s,metricType:t,selectedStatus:w}):C.jsx("div",{className:"no-data",children:"No data available"})]}),C.jsxs("div",{className:"chart-container",children:[C.jsx("h4",{children:"Trend"}),c?C.jsx("div",{className:"loading",children:"Loading..."}):a.length>0?C.jsx(lz,{data:a,metricType:t,selectedStatus:w}):C.jsx("div",{className:"no-data",children:"No data available"})]})]}),C.jsxs("div",{className:"numbers-section",children:[C.jsx("h4",{children:"Recent Records"}),C.jsxs("table",{className:"records-table",children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{children:"Date"}),C.jsx("th",{children:"Value"}),C.jsx("th",{children:"Action"})]})}),C.jsx("tbody",{children:c?C.jsx("tr",{children:C.jsx("td",{colSpan:3,className:"loading-cell",children:"Loading..."})}):s.length>0?s.slice(0,5).map(_=>C.jsxs("tr",{children:[C.jsx("td",{children:I(_.timestamp)}),C.jsx("td",{children:_.value}),C.jsx("td",{children:C.jsx("button",{onClick:()=>_.id&&D(_.id),className:"delete-button",disabled:c,children:"Delete"})})]},_.id)):C.jsx("tr",{children:C.jsx("td",{colSpan:3,className:"empty-cell",children:"No records available"})})})]})]})]})]})},uz=()=>{const[t,e]=W.useState("blood-pressure"),n={name:"User Name",avatar:"/default-avatar.png"},r=i=>{e(i)};return C.jsxs("div",{className:"dashboard-container",children:[C.jsx(qV,{user:n}),C.jsxs("div",{className:"dashboard-content",children:[C.jsx("div",{className:"left-panel",children:C.jsx(GV,{onMetricSelect:r,selectedMetric:t})}),C.jsx("div",{className:"main-panel",children:C.jsx(cz,{metricType:t})})]})]})},ra=XA({component:OV}),hz=tc({getParentRoute:()=>ra,path:"/",component:VV}),dz=tc({getParentRoute:()=>ra,path:"/how-it-works",component:FV}),fz=tc({getParentRoute:()=>ra,path:"/about",component:jV}),pz=tc({getParentRoute:()=>ra,path:"/signup",component:BV}),gz=tc({getParentRoute:()=>ra,path:"/dashboard",component:uz,beforeLoad:async()=>{if(!Wa.currentUser)throw NA({to:"/",search:{},hash:""})}}),mz=ra.addChildren([hz,dz,fz,pz,gz]),yz=UA({routeTree:mz,basepath:"/LifeMetrics",defaultPreload:"intent",defaultErrorComponent:()=>C.jsx("div",{children:"Page Not Found"})});nI(document.getElementById("root")).render(C.jsx(W.StrictMode,{children:C.jsx(NV,{children:C.jsx(oR,{router:yz})})}));
